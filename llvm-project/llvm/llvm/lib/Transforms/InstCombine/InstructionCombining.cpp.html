<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>InstructionCombining.cpp source code [llvm/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp'; var root_path = '../../../../..'; var data_path = '../../../../../../data';</script>
<script src='../../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../../..'>llvm</a>/<a href='../../..'>llvm</a>/<a href='../..'>lib</a>/<a href='..'>Transforms</a>/<a href='./'>InstCombine</a>/<a href='InstructionCombining.cpp.html'>InstructionCombining.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===- InstructionCombining.cpp - Combine multiple instructions -----------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// InstructionCombining - Combine instructions to form fewer, simple</i></td></tr>
<tr><th id="10">10</th><td><i>// instructions.  This pass does not modify the CFG.  This pass is where</i></td></tr>
<tr><th id="11">11</th><td><i>// algebraic simplification happens.</i></td></tr>
<tr><th id="12">12</th><td><i>//</i></td></tr>
<tr><th id="13">13</th><td><i>// This pass combines things like:</i></td></tr>
<tr><th id="14">14</th><td><i>//    %Y = add i32 %X, 1</i></td></tr>
<tr><th id="15">15</th><td><i>//    %Z = add i32 %Y, 1</i></td></tr>
<tr><th id="16">16</th><td><i>// into:</i></td></tr>
<tr><th id="17">17</th><td><i>//    %Z = add i32 %X, 2</i></td></tr>
<tr><th id="18">18</th><td><i>//</i></td></tr>
<tr><th id="19">19</th><td><i>// This is a simple worklist driven algorithm.</i></td></tr>
<tr><th id="20">20</th><td><i>//</i></td></tr>
<tr><th id="21">21</th><td><i>// This pass guarantees that the following canonicalizations are performed on</i></td></tr>
<tr><th id="22">22</th><td><i>// the program:</i></td></tr>
<tr><th id="23">23</th><td><i>//    1. If a binary operator has a constant operand, it is moved to the RHS</i></td></tr>
<tr><th id="24">24</th><td><i>//    2. Bitwise operators with constant operands are always grouped so that</i></td></tr>
<tr><th id="25">25</th><td><i>//       shifts are performed first, then or's, then and's, then xor's.</i></td></tr>
<tr><th id="26">26</th><td><i>//    3. Compare instructions are converted from &lt;,&gt;,&lt;=,&gt;= to ==,!= if possible</i></td></tr>
<tr><th id="27">27</th><td><i>//    4. All cmp instructions on boolean values are replaced with logical ops</i></td></tr>
<tr><th id="28">28</th><td><i>//    5. add X, X is represented as (X*2) =&gt; (X &lt;&lt; 1)</i></td></tr>
<tr><th id="29">29</th><td><i>//    6. Multiplies with a power-of-two constant argument are transformed into</i></td></tr>
<tr><th id="30">30</th><td><i>//       shifts.</i></td></tr>
<tr><th id="31">31</th><td><i>//   ... etc.</i></td></tr>
<tr><th id="32">32</th><td><i>//</i></td></tr>
<tr><th id="33">33</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="34">34</th><td></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="InstCombineInternal.h.html">"InstCombineInternal.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../../include/llvm-c/Initialization.h.html">"llvm-c/Initialization.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../../include/llvm-c/Transforms/InstCombine.h.html">"llvm-c/Transforms/InstCombine.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../../include/llvm/ADT/APInt.h.html">"llvm/ADT/APInt.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../../include/llvm/ADT/ArrayRef.h.html">"llvm/ADT/ArrayRef.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../../include/llvm/ADT/DenseMap.h.html">"llvm/ADT/DenseMap.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../../include/llvm/ADT/None.h.html">"llvm/ADT/None.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../../../include/llvm/ADT/SmallPtrSet.h.html">"llvm/ADT/SmallPtrSet.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../../include/llvm/ADT/SmallVector.h.html">"llvm/ADT/SmallVector.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../../include/llvm/ADT/Statistic.h.html">"llvm/ADT/Statistic.h"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="../../../include/llvm/ADT/TinyPtrVector.h.html">"llvm/ADT/TinyPtrVector.h"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../../include/llvm/Analysis/AliasAnalysis.h.html">"llvm/Analysis/AliasAnalysis.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../../../include/llvm/Analysis/AssumptionCache.h.html">"llvm/Analysis/AssumptionCache.h"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../../../include/llvm/Analysis/BasicAliasAnalysis.h.html">"llvm/Analysis/BasicAliasAnalysis.h"</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../include/llvm/Analysis/BlockFrequencyInfo.h.html">"llvm/Analysis/BlockFrequencyInfo.h"</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../../../include/llvm/Analysis/CFG.h.html">"llvm/Analysis/CFG.h"</a></u></td></tr>
<tr><th id="51">51</th><td><u>#include <a href="../../../include/llvm/Analysis/ConstantFolding.h.html">"llvm/Analysis/ConstantFolding.h"</a></u></td></tr>
<tr><th id="52">52</th><td><u>#include <a href="../../../include/llvm/Analysis/EHPersonalities.h.html">"llvm/Analysis/EHPersonalities.h"</a></u></td></tr>
<tr><th id="53">53</th><td><u>#include <a href="../../../include/llvm/Analysis/GlobalsModRef.h.html">"llvm/Analysis/GlobalsModRef.h"</a></u></td></tr>
<tr><th id="54">54</th><td><u>#include <a href="../../../include/llvm/Analysis/InstructionSimplify.h.html">"llvm/Analysis/InstructionSimplify.h"</a></u></td></tr>
<tr><th id="55">55</th><td><u>#include <a href="../../../include/llvm/Analysis/LazyBlockFrequencyInfo.h.html">"llvm/Analysis/LazyBlockFrequencyInfo.h"</a></u></td></tr>
<tr><th id="56">56</th><td><u>#include <a href="../../../include/llvm/Analysis/LoopInfo.h.html">"llvm/Analysis/LoopInfo.h"</a></u></td></tr>
<tr><th id="57">57</th><td><u>#include <a href="../../../include/llvm/Analysis/MemoryBuiltins.h.html">"llvm/Analysis/MemoryBuiltins.h"</a></u></td></tr>
<tr><th id="58">58</th><td><u>#include <a href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html">"llvm/Analysis/OptimizationRemarkEmitter.h"</a></u></td></tr>
<tr><th id="59">59</th><td><u>#include <a href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html">"llvm/Analysis/ProfileSummaryInfo.h"</a></u></td></tr>
<tr><th id="60">60</th><td><u>#include <a href="../../../include/llvm/Analysis/TargetFolder.h.html">"llvm/Analysis/TargetFolder.h"</a></u></td></tr>
<tr><th id="61">61</th><td><u>#include <a href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html">"llvm/Analysis/TargetLibraryInfo.h"</a></u></td></tr>
<tr><th id="62">62</th><td><u>#include <a href="../../../include/llvm/Analysis/ValueTracking.h.html">"llvm/Analysis/ValueTracking.h"</a></u></td></tr>
<tr><th id="63">63</th><td><u>#include <a href="../../../include/llvm/IR/BasicBlock.h.html">"llvm/IR/BasicBlock.h"</a></u></td></tr>
<tr><th id="64">64</th><td><u>#include <a href="../../../include/llvm/IR/CFG.h.html">"llvm/IR/CFG.h"</a></u></td></tr>
<tr><th id="65">65</th><td><u>#include <a href="../../../include/llvm/IR/Constant.h.html">"llvm/IR/Constant.h"</a></u></td></tr>
<tr><th id="66">66</th><td><u>#include <a href="../../../include/llvm/IR/Constants.h.html">"llvm/IR/Constants.h"</a></u></td></tr>
<tr><th id="67">67</th><td><u>#include <a href="../../../include/llvm/IR/DIBuilder.h.html">"llvm/IR/DIBuilder.h"</a></u></td></tr>
<tr><th id="68">68</th><td><u>#include <a href="../../../include/llvm/IR/DataLayout.h.html">"llvm/IR/DataLayout.h"</a></u></td></tr>
<tr><th id="69">69</th><td><u>#include <a href="../../../include/llvm/IR/DerivedTypes.h.html">"llvm/IR/DerivedTypes.h"</a></u></td></tr>
<tr><th id="70">70</th><td><u>#include <a href="../../../include/llvm/IR/Dominators.h.html">"llvm/IR/Dominators.h"</a></u></td></tr>
<tr><th id="71">71</th><td><u>#include <a href="../../../include/llvm/IR/Function.h.html">"llvm/IR/Function.h"</a></u></td></tr>
<tr><th id="72">72</th><td><u>#include <a href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html">"llvm/IR/GetElementPtrTypeIterator.h"</a></u></td></tr>
<tr><th id="73">73</th><td><u>#include <a href="../../../include/llvm/IR/IRBuilder.h.html">"llvm/IR/IRBuilder.h"</a></u></td></tr>
<tr><th id="74">74</th><td><u>#include <a href="../../../include/llvm/IR/InstrTypes.h.html">"llvm/IR/InstrTypes.h"</a></u></td></tr>
<tr><th id="75">75</th><td><u>#include <a href="../../../include/llvm/IR/Instruction.h.html">"llvm/IR/Instruction.h"</a></u></td></tr>
<tr><th id="76">76</th><td><u>#include <a href="../../../include/llvm/IR/Instructions.h.html">"llvm/IR/Instructions.h"</a></u></td></tr>
<tr><th id="77">77</th><td><u>#include <a href="../../../include/llvm/IR/IntrinsicInst.h.html">"llvm/IR/IntrinsicInst.h"</a></u></td></tr>
<tr><th id="78">78</th><td><u>#include <a href="../../../include/llvm/IR/Intrinsics.h.html">"llvm/IR/Intrinsics.h"</a></u></td></tr>
<tr><th id="79">79</th><td><u>#include <a href="../../../include/llvm/IR/LegacyPassManager.h.html">"llvm/IR/LegacyPassManager.h"</a></u></td></tr>
<tr><th id="80">80</th><td><u>#include <a href="../../../include/llvm/IR/Metadata.h.html">"llvm/IR/Metadata.h"</a></u></td></tr>
<tr><th id="81">81</th><td><u>#include <a href="../../../include/llvm/IR/Operator.h.html">"llvm/IR/Operator.h"</a></u></td></tr>
<tr><th id="82">82</th><td><u>#include <a href="../../../include/llvm/IR/PassManager.h.html">"llvm/IR/PassManager.h"</a></u></td></tr>
<tr><th id="83">83</th><td><u>#include <a href="../../../include/llvm/IR/PatternMatch.h.html">"llvm/IR/PatternMatch.h"</a></u></td></tr>
<tr><th id="84">84</th><td><u>#include <a href="../../../include/llvm/IR/Type.h.html">"llvm/IR/Type.h"</a></u></td></tr>
<tr><th id="85">85</th><td><u>#include <a href="../../../include/llvm/IR/Use.h.html">"llvm/IR/Use.h"</a></u></td></tr>
<tr><th id="86">86</th><td><u>#include <a href="../../../include/llvm/IR/User.h.html">"llvm/IR/User.h"</a></u></td></tr>
<tr><th id="87">87</th><td><u>#include <a href="../../../include/llvm/IR/Value.h.html">"llvm/IR/Value.h"</a></u></td></tr>
<tr><th id="88">88</th><td><u>#include <a href="../../../include/llvm/IR/ValueHandle.h.html">"llvm/IR/ValueHandle.h"</a></u></td></tr>
<tr><th id="89">89</th><td><u>#include <a href="../../../include/llvm/Pass.h.html">"llvm/Pass.h"</a></u></td></tr>
<tr><th id="90">90</th><td><u>#include <a href="../../../include/llvm/Support/CBindingWrapping.h.html">"llvm/Support/CBindingWrapping.h"</a></u></td></tr>
<tr><th id="91">91</th><td><u>#include <a href="../../../include/llvm/Support/Casting.h.html">"llvm/Support/Casting.h"</a></u></td></tr>
<tr><th id="92">92</th><td><u>#include <a href="../../../include/llvm/Support/CommandLine.h.html">"llvm/Support/CommandLine.h"</a></u></td></tr>
<tr><th id="93">93</th><td><u>#include <a href="../../../include/llvm/Support/Compiler.h.html">"llvm/Support/Compiler.h"</a></u></td></tr>
<tr><th id="94">94</th><td><u>#include <a href="../../../include/llvm/Support/Debug.h.html">"llvm/Support/Debug.h"</a></u></td></tr>
<tr><th id="95">95</th><td><u>#include <a href="../../../include/llvm/Support/DebugCounter.h.html">"llvm/Support/DebugCounter.h"</a></u></td></tr>
<tr><th id="96">96</th><td><u>#include <a href="../../../include/llvm/Support/ErrorHandling.h.html">"llvm/Support/ErrorHandling.h"</a></u></td></tr>
<tr><th id="97">97</th><td><u>#include <a href="../../../include/llvm/Support/KnownBits.h.html">"llvm/Support/KnownBits.h"</a></u></td></tr>
<tr><th id="98">98</th><td><u>#include <a href="../../../include/llvm/Support/raw_ostream.h.html">"llvm/Support/raw_ostream.h"</a></u></td></tr>
<tr><th id="99">99</th><td><u>#include <a href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html">"llvm/Transforms/InstCombine/InstCombine.h"</a></u></td></tr>
<tr><th id="100">100</th><td><u>#include <a href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html">"llvm/Transforms/InstCombine/InstCombineWorklist.h"</a></u></td></tr>
<tr><th id="101">101</th><td><u>#include <a href="../../../include/llvm/Transforms/Utils/Local.h.html">"llvm/Transforms/Utils/Local.h"</a></u></td></tr>
<tr><th id="102">102</th><td><u>#include <a href="../../../../../include/c++/7/algorithm.html">&lt;algorithm&gt;</a></u></td></tr>
<tr><th id="103">103</th><td><u>#include <a href="../../../../../include/c++/7/cassert.html">&lt;cassert&gt;</a></u></td></tr>
<tr><th id="104">104</th><td><u>#include <a href="../../../../../include/c++/7/cstdint.html">&lt;cstdint&gt;</a></u></td></tr>
<tr><th id="105">105</th><td><u>#include <a href="../../../../../include/c++/7/memory.html">&lt;memory&gt;</a></u></td></tr>
<tr><th id="106">106</th><td><u>#include <a href="../../../../../include/c++/7/string.html">&lt;string&gt;</a></u></td></tr>
<tr><th id="107">107</th><td><u>#include <a href="../../../../../include/c++/7/utility.html">&lt;utility&gt;</a></u></td></tr>
<tr><th id="108">108</th><td></td></tr>
<tr><th id="109">109</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm</span>;</td></tr>
<tr><th id="110">110</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm::PatternMatch</span>;</td></tr>
<tr><th id="111">111</th><td></td></tr>
<tr><th id="112">112</th><td><u>#define <dfn class="macro" id="_M/DEBUG_TYPE" data-ref="_M/DEBUG_TYPE">DEBUG_TYPE</dfn> "instcombine"</u></td></tr>
<tr><th id="113">113</th><td></td></tr>
<tr><th id="114">114</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumCombined = {&quot;instcombine&quot;, &quot;NumCombined&quot;, &quot;Number of insts combined&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumCombined" title='NumCombined' data-ref="NumCombined">NumCombined</dfn> , <q>"Number of insts combined"</q>);</td></tr>
<tr><th id="115">115</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumConstProp = {&quot;instcombine&quot;, &quot;NumConstProp&quot;, &quot;Number of constant folds&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumConstProp" title='NumConstProp' data-ref="NumConstProp">NumConstProp</dfn>, <q>"Number of constant folds"</q>);</td></tr>
<tr><th id="116">116</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumDeadInst = {&quot;instcombine&quot;, &quot;NumDeadInst&quot;, &quot;Number of dead inst eliminated&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumDeadInst" title='NumDeadInst' data-ref="NumDeadInst">NumDeadInst</dfn> , <q>"Number of dead inst eliminated"</q>);</td></tr>
<tr><th id="117">117</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumSunkInst = {&quot;instcombine&quot;, &quot;NumSunkInst&quot;, &quot;Number of instructions sunk&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumSunkInst" title='NumSunkInst' data-ref="NumSunkInst">NumSunkInst</dfn> , <q>"Number of instructions sunk"</q>);</td></tr>
<tr><th id="118">118</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumExpand = {&quot;instcombine&quot;, &quot;NumExpand&quot;, &quot;Number of expansions&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumExpand" title='NumExpand' data-ref="NumExpand">NumExpand</dfn>,    <q>"Number of expansions"</q>);</td></tr>
<tr><th id="119">119</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumFactor = {&quot;instcombine&quot;, &quot;NumFactor&quot;, &quot;Number of factorizations&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumFactor" title='NumFactor' data-ref="NumFactor">NumFactor</dfn>   , <q>"Number of factorizations"</q>);</td></tr>
<tr><th id="120">120</th><td><a class="macro" href="../../../include/llvm/ADT/Statistic.h.html#168" title="static llvm::Statistic NumReassoc = {&quot;instcombine&quot;, &quot;NumReassoc&quot;, &quot;Number of reassociations&quot;, {0}, {false}}" data-ref="_M/STATISTIC">STATISTIC</a>(<dfn class="decl def" id="NumReassoc" title='NumReassoc' data-ref="NumReassoc">NumReassoc</dfn>  , <q>"Number of reassociations"</q>);</td></tr>
<tr><th id="121">121</th><td><a class="macro" href="../../../include/llvm/Support/DebugCounter.h.html#183" title="static const unsigned VisitCounter = DebugCounter::registerCounter(&quot;instcombine-visit&quot;, &quot;Controls which instructions are visited&quot;)" data-ref="_M/DEBUG_COUNTER">DEBUG_COUNTER</a>(<dfn class="decl def" id="VisitCounter" title='VisitCounter' data-ref="VisitCounter">VisitCounter</dfn>, <a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"instcombine-visit"</q>,</td></tr>
<tr><th id="122">122</th><td>              <a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Controls which instructions are visited"</q>);</td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt">opt</a>&lt;<em>bool</em>&gt;</td></tr>
<tr><th id="125">125</th><td><dfn class="tu decl def" id="EnableCodeSinking" title='EnableCodeSinking' data-type='cl::opt&lt;bool&gt;' data-ref="EnableCodeSinking">EnableCodeSinking</dfn><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKT_" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKT_">(</a><q>"instcombine-code-sinking"</q>, <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc">desc</a><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Enable code sinking"</q>),</td></tr>
<tr><th id="126">126</th><td>                                              <span class="namespace">cl::</span><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_">init</a>(<b>true</b>));</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt">opt</a>&lt;<em>bool</em>&gt;</td></tr>
<tr><th id="129">129</th><td><dfn class="tu decl def" id="EnableExpensiveCombines" title='EnableExpensiveCombines' data-type='cl::opt&lt;bool&gt;' data-ref="EnableExpensiveCombines">EnableExpensiveCombines</dfn><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKT_" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKT_">(</a><q>"expensive-combines"</q>,</td></tr>
<tr><th id="130">130</th><td>                        <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc">desc</a><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Enable expensive instruction combines"</q>));</td></tr>
<tr><th id="131">131</th><td></td></tr>
<tr><th id="132">132</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt">opt</a>&lt;<em>unsigned</em>&gt;</td></tr>
<tr><th id="133">133</th><td><dfn class="tu decl def" id="MaxArraySize" title='MaxArraySize' data-type='cl::opt&lt;unsigned int&gt;' data-ref="MaxArraySize">MaxArraySize</dfn><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKT_" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKT_">(</a><q>"instcombine-maxarray-size"</q>, <span class="namespace">cl::</span><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_">init</a>(<var>1024</var>),</td></tr>
<tr><th id="134">134</th><td>             <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::desc" title='llvm::cl::desc' data-ref="llvm::cl::desc">desc</a><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4descC1ENS_9StringRefE" title='llvm::cl::desc::desc' data-ref="_ZN4llvm2cl4descC1ENS_9StringRefE">(</a><a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Maximum array size considered when doing a combine"</q>));</td></tr>
<tr><th id="135">135</th><td></td></tr>
<tr><th id="136">136</th><td><i  data-doc="ShouldLowerDbgDeclare">// FIXME: Remove this flag when it is no longer necessary to convert</i></td></tr>
<tr><th id="137">137</th><td><i  data-doc="ShouldLowerDbgDeclare">// llvm.dbg.declare to avoid inaccurate debug info. Setting this to false</i></td></tr>
<tr><th id="138">138</th><td><i  data-doc="ShouldLowerDbgDeclare">// increases variable availability at the cost of accuracy. Variables that</i></td></tr>
<tr><th id="139">139</th><td><i  data-doc="ShouldLowerDbgDeclare">// cannot be promoted by mem2reg or SROA will be described as living in memory</i></td></tr>
<tr><th id="140">140</th><td><i  data-doc="ShouldLowerDbgDeclare">// for their entire lifetime. However, passes like DSE and instcombine can</i></td></tr>
<tr><th id="141">141</th><td><i  data-doc="ShouldLowerDbgDeclare">// delete stores to the alloca, leading to misleading and inaccurate debug</i></td></tr>
<tr><th id="142">142</th><td><i  data-doc="ShouldLowerDbgDeclare">// information. This flag can be removed when those passes are fixed.</i></td></tr>
<tr><th id="143">143</th><td><em>static</em> <span class="namespace">cl::</span><a class="type" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::opt" title='llvm::cl::opt' data-ref="llvm::cl::opt">opt</a>&lt;<em>unsigned</em>&gt; <dfn class="tu decl def" id="ShouldLowerDbgDeclare" title='ShouldLowerDbgDeclare' data-type='cl::opt&lt;unsigned int&gt;' data-ref="ShouldLowerDbgDeclare">ShouldLowerDbgDeclare</dfn><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl3optC1EDpRKT_" title='llvm::cl::opt::opt&lt;DataType, ExternalStorage, ParserClass&gt;' data-ref="_ZN4llvm2cl3optC1EDpRKT_">(</a><q>"instcombine-lower-dbg-declare"</q>,</td></tr>
<tr><th id="144">144</th><td>                                               <span class="namespace">cl::</span><a class="enum" href="../../../include/llvm/Support/CommandLine.h.html#llvm::cl::OptionHidden::Hidden" title='llvm::cl::OptionHidden::Hidden' data-ref="llvm::cl::OptionHidden::Hidden">Hidden</a>, <span class="namespace">cl::</span><a class="ref" href="../../../include/llvm/Support/CommandLine.h.html#_ZN4llvm2cl4initERKT_" title='llvm::cl::init' data-ref="_ZN4llvm2cl4initERKT_">init</a>(<b>true</b>));</td></tr>
<tr><th id="145">145</th><td></td></tr>
<tr><th id="146">146</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner13EmitGEPOffsetEPNS_4UserE" title='llvm::InstCombiner::EmitGEPOffset' data-ref="_ZN4llvm12InstCombiner13EmitGEPOffsetEPNS_4UserE">EmitGEPOffset</dfn>(<a class="type" href="../../../include/llvm/IR/User.h.html#llvm::User" title='llvm::User' data-ref="llvm::User">User</a> *<dfn class="local col2 decl" id="2GEP" title='GEP' data-type='llvm::User *' data-ref="2GEP">GEP</dfn>) {</td></tr>
<tr><th id="147">147</th><td>  <b>return</b> <span class="namespace">llvm::</span><a class="ref" href="../../../include/llvm/Analysis/Utils/Local.h.html#_ZN4llvm13EmitGEPOffsetEPT_RKNS_10DataLayoutEPNS_4UserEb" title='llvm::EmitGEPOffset' data-ref="_ZN4llvm13EmitGEPOffsetEPT_RKNS_10DataLayoutEPNS_4UserEb">EmitGEPOffset</a>(&amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>, <a class="local col2 ref" href="#2GEP" title='GEP' data-ref="2GEP">GEP</a>);</td></tr>
<tr><th id="148">148</th><td>}</td></tr>
<tr><th id="149">149</th><td></td></tr>
<tr><th id="150">150</th><td><i class="doc">/// Return true if it is desirable to convert an integer computation from a</i></td></tr>
<tr><th id="151">151</th><td><i class="doc">/// given bit width to a new bit width.</i></td></tr>
<tr><th id="152">152</th><td><i class="doc">/// We don't want to convert from a legal to an illegal type or from a smaller</i></td></tr>
<tr><th id="153">153</th><td><i class="doc">/// to a larger illegal type. A width of '1' is always treated as a legal type</i></td></tr>
<tr><th id="154">154</th><td><i class="doc">/// because i1 is a fundamental type in IR, and there are many specialized</i></td></tr>
<tr><th id="155">155</th><td><i class="doc">/// optimizations for i1 types. Widths of 8, 16 or 32 are equally treated as</i></td></tr>
<tr><th id="156">156</th><td><i class="doc">/// legal to convert to, in order to open up more combining opportunities.</i></td></tr>
<tr><th id="157">157</th><td><i class="doc">/// NOTE: this treats i8, i16 and i32 specially, due to them being so common</i></td></tr>
<tr><th id="158">158</th><td><i class="doc">/// from frontend languages.</i></td></tr>
<tr><th id="159">159</th><td><em>bool</em> <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZNK4llvm12InstCombiner16shouldChangeTypeEjj" title='llvm::InstCombiner::shouldChangeType' data-ref="_ZNK4llvm12InstCombiner16shouldChangeTypeEjj">shouldChangeType</dfn>(<em>unsigned</em> <dfn class="local col3 decl" id="3FromWidth" title='FromWidth' data-type='unsigned int' data-ref="3FromWidth">FromWidth</dfn>,</td></tr>
<tr><th id="160">160</th><td>                                    <em>unsigned</em> <dfn class="local col4 decl" id="4ToWidth" title='ToWidth' data-type='unsigned int' data-ref="4ToWidth">ToWidth</dfn>) <em>const</em> {</td></tr>
<tr><th id="161">161</th><td>  <em>bool</em> <dfn class="local col5 decl" id="5FromLegal" title='FromLegal' data-type='bool' data-ref="5FromLegal">FromLegal</dfn> = <a class="local col3 ref" href="#3FromWidth" title='FromWidth' data-ref="3FromWidth">FromWidth</a> == <var>1</var> || <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout14isLegalIntegerEm" title='llvm::DataLayout::isLegalInteger' data-ref="_ZNK4llvm10DataLayout14isLegalIntegerEm">isLegalInteger</a>(<a class="local col3 ref" href="#3FromWidth" title='FromWidth' data-ref="3FromWidth">FromWidth</a>);</td></tr>
<tr><th id="162">162</th><td>  <em>bool</em> <dfn class="local col6 decl" id="6ToLegal" title='ToLegal' data-type='bool' data-ref="6ToLegal">ToLegal</dfn> = <a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> == <var>1</var> || <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout14isLegalIntegerEm" title='llvm::DataLayout::isLegalInteger' data-ref="_ZNK4llvm10DataLayout14isLegalIntegerEm">isLegalInteger</a>(<a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a>);</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td>  <i>// Convert to widths of 8, 16 or 32 even if they are not legal types. Only</i></td></tr>
<tr><th id="165">165</th><td><i>  // shrink types, to prevent infinite loops.</i></td></tr>
<tr><th id="166">166</th><td>  <b>if</b> (<a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> &lt; <a class="local col3 ref" href="#3FromWidth" title='FromWidth' data-ref="3FromWidth">FromWidth</a> &amp;&amp; (<a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> == <var>8</var> || <a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> == <var>16</var> || <a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> == <var>32</var>))</td></tr>
<tr><th id="167">167</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="168">168</th><td></td></tr>
<tr><th id="169">169</th><td>  <i>// If this is a legal integer from type, and the result would be an illegal</i></td></tr>
<tr><th id="170">170</th><td><i>  // type, don't do the transformation.</i></td></tr>
<tr><th id="171">171</th><td>  <b>if</b> (<a class="local col5 ref" href="#5FromLegal" title='FromLegal' data-ref="5FromLegal">FromLegal</a> &amp;&amp; !<a class="local col6 ref" href="#6ToLegal" title='ToLegal' data-ref="6ToLegal">ToLegal</a>)</td></tr>
<tr><th id="172">172</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="173">173</th><td></td></tr>
<tr><th id="174">174</th><td>  <i>// Otherwise, if both are illegal, do not increase the size of the result. We</i></td></tr>
<tr><th id="175">175</th><td><i>  // do allow things like i160 -&gt; i64, but not i64 -&gt; i160.</i></td></tr>
<tr><th id="176">176</th><td>  <b>if</b> (!<a class="local col5 ref" href="#5FromLegal" title='FromLegal' data-ref="5FromLegal">FromLegal</a> &amp;&amp; !<a class="local col6 ref" href="#6ToLegal" title='ToLegal' data-ref="6ToLegal">ToLegal</a> &amp;&amp; <a class="local col4 ref" href="#4ToWidth" title='ToWidth' data-ref="4ToWidth">ToWidth</a> &gt; <a class="local col3 ref" href="#3FromWidth" title='FromWidth' data-ref="3FromWidth">FromWidth</a>)</td></tr>
<tr><th id="177">177</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="178">178</th><td></td></tr>
<tr><th id="179">179</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="180">180</th><td>}</td></tr>
<tr><th id="181">181</th><td></td></tr>
<tr><th id="182">182</th><td><i class="doc">/// Return true if it is desirable to convert a computation from 'From' to 'To'.</i></td></tr>
<tr><th id="183">183</th><td><i class="doc">/// We don't want to convert from a legal to an illegal type or from a smaller</i></td></tr>
<tr><th id="184">184</th><td><i class="doc">/// to a larger illegal type. i1 is always treated as a legal type because it is</i></td></tr>
<tr><th id="185">185</th><td><i class="doc">/// a fundamental type in IR, and there are many specialized optimizations for</i></td></tr>
<tr><th id="186">186</th><td><i class="doc">/// i1 types.</i></td></tr>
<tr><th id="187">187</th><td><em>bool</em> <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZNK4llvm12InstCombiner16shouldChangeTypeEPNS_4TypeES2_" title='llvm::InstCombiner::shouldChangeType' data-ref="_ZNK4llvm12InstCombiner16shouldChangeTypeEPNS_4TypeES2_">shouldChangeType</dfn>(<a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col7 decl" id="7From" title='From' data-type='llvm::Type *' data-ref="7From">From</dfn>, <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col8 decl" id="8To" title='To' data-type='llvm::Type *' data-ref="8To">To</dfn>) <em>const</em> {</td></tr>
<tr><th id="188">188</th><td>  <i>// TODO: This could be extended to allow vectors. Datalayout changes might be</i></td></tr>
<tr><th id="189">189</th><td><i>  // needed to properly support that.</i></td></tr>
<tr><th id="190">190</th><td>  <b>if</b> (!<a class="local col7 ref" href="#7From" title='From' data-ref="7From">From</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>() || !<a class="local col8 ref" href="#8To" title='To' data-ref="8To">To</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>())</td></tr>
<tr><th id="191">191</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="192">192</th><td></td></tr>
<tr><th id="193">193</th><td>  <em>unsigned</em> <dfn class="local col9 decl" id="9FromWidth" title='FromWidth' data-type='unsigned int' data-ref="9FromWidth">FromWidth</dfn> = <a class="local col7 ref" href="#7From" title='From' data-ref="7From">From</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="194">194</th><td>  <em>unsigned</em> <dfn class="local col0 decl" id="10ToWidth" title='ToWidth' data-type='unsigned int' data-ref="10ToWidth">ToWidth</dfn> = <a class="local col8 ref" href="#8To" title='To' data-ref="8To">To</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="195">195</th><td>  <b>return</b> <a class="member" href="#_ZNK4llvm12InstCombiner16shouldChangeTypeEjj" title='llvm::InstCombiner::shouldChangeType' data-ref="_ZNK4llvm12InstCombiner16shouldChangeTypeEjj">shouldChangeType</a>(<a class="local col9 ref" href="#9FromWidth" title='FromWidth' data-ref="9FromWidth">FromWidth</a>, <a class="local col0 ref" href="#10ToWidth" title='ToWidth' data-ref="10ToWidth">ToWidth</a>);</td></tr>
<tr><th id="196">196</th><td>}</td></tr>
<tr><th id="197">197</th><td></td></tr>
<tr><th id="198">198</th><td><i  data-doc="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">// Return true, if No Signed Wrap should be maintained for I.</i></td></tr>
<tr><th id="199">199</th><td><i  data-doc="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">// The No Signed Wrap flag can be kept if the operation "B (I.getOpcode) C",</i></td></tr>
<tr><th id="200">200</th><td><i  data-doc="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">// where both B and C should be ConstantInts, results in a constant that does</i></td></tr>
<tr><th id="201">201</th><td><i  data-doc="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">// not overflow. This function only handles the Add and Sub opcodes. For</i></td></tr>
<tr><th id="202">202</th><td><i  data-doc="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">// all other opcodes, the function conservatively returns false.</i></td></tr>
<tr><th id="203">203</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_" title='MaintainNoSignedWrap' data-type='bool MaintainNoSignedWrap(llvm::BinaryOperator &amp; I, llvm::Value * B, llvm::Value * C)' data-ref="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">MaintainNoSignedWrap</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col1 decl" id="11I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="11I">I</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="12B" title='B' data-type='llvm::Value *' data-ref="12B">B</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="13C" title='C' data-type='llvm::Value *' data-ref="13C">C</dfn>) {</td></tr>
<tr><th id="204">204</th><td>  <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a> *<dfn class="local col4 decl" id="14OBO" title='OBO' data-type='llvm::OverflowingBinaryOperator *' data-ref="14OBO">OBO</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a>&gt;(&amp;<a class="local col1 ref" href="#11I" title='I' data-ref="11I">I</a>);</td></tr>
<tr><th id="205">205</th><td>  <b>if</b> (!<a class="local col4 ref" href="#14OBO" title='OBO' data-ref="14OBO">OBO</a> || !<a class="local col4 ref" href="#14OBO" title='OBO' data-ref="14OBO">OBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv" title='llvm::OverflowingBinaryOperator::hasNoSignedWrap' data-ref="_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv">hasNoSignedWrap</a>())</td></tr>
<tr><th id="206">206</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="207">207</th><td></td></tr>
<tr><th id="208">208</th><td>  <i>// We reason about Add and Sub Only.</i></td></tr>
<tr><th id="209">209</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col5 decl" id="15Opcode" title='Opcode' data-type='Instruction::BinaryOps' data-ref="15Opcode">Opcode</dfn> = <a class="local col1 ref" href="#11I" title='I' data-ref="11I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="210">210</th><td>  <b>if</b> (<a class="local col5 ref" href="#15Opcode" title='Opcode' data-ref="15Opcode">Opcode</a> != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::BinaryOps::Add' data-ref="llvm::Instruction::BinaryOps::Add">Add</a> &amp;&amp; <a class="local col5 ref" href="#15Opcode" title='Opcode' data-ref="15Opcode">Opcode</a> != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::BinaryOps::Sub' data-ref="llvm::Instruction::BinaryOps::Sub">Sub</a>)</td></tr>
<tr><th id="211">211</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="212">212</th><td></td></tr>
<tr><th id="213">213</th><td>  <em>const</em> <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> *<dfn class="local col6 decl" id="16BVal" title='BVal' data-type='const llvm::APInt *' data-ref="16BVal">BVal</dfn>, *<dfn class="local col7 decl" id="17CVal" title='CVal' data-type='const llvm::APInt *' data-ref="17CVal">CVal</dfn>;</td></tr>
<tr><th id="214">214</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col2 ref" href="#12B" title='B' data-ref="12B">B</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE" title='llvm::PatternMatch::m_APInt' data-ref="_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE">m_APInt</a>(<span class='refarg'><a class="local col6 ref" href="#16BVal" title='BVal' data-ref="16BVal">BVal</a></span>)) || !<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col3 ref" href="#13C" title='C' data-ref="13C">C</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE" title='llvm::PatternMatch::m_APInt' data-ref="_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE">m_APInt</a>(<span class='refarg'><a class="local col7 ref" href="#17CVal" title='CVal' data-ref="17CVal">CVal</a></span>)))</td></tr>
<tr><th id="215">215</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td>  <em>bool</em> <dfn class="local col8 decl" id="18Overflow" title='Overflow' data-type='bool' data-ref="18Overflow">Overflow</dfn> = <b>false</b>;</td></tr>
<tr><th id="218">218</th><td>  <b>if</b> (<a class="local col5 ref" href="#15Opcode" title='Opcode' data-ref="15Opcode">Opcode</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::BinaryOps::Add' data-ref="llvm::Instruction::BinaryOps::Add">Add</a>)</td></tr>
<tr><th id="219">219</th><td>    (<em>void</em>)<a class="local col6 ref" href="#16BVal" title='BVal' data-ref="16BVal">BVal</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt7sadd_ovERKS0_Rb" title='llvm::APInt::sadd_ov' data-ref="_ZNK4llvm5APInt7sadd_ovERKS0_Rb">sadd_ov</a>(*<a class="local col7 ref" href="#17CVal" title='CVal' data-ref="17CVal">CVal</a>, <span class='refarg'><a class="local col8 ref" href="#18Overflow" title='Overflow' data-ref="18Overflow">Overflow</a></span>);</td></tr>
<tr><th id="220">220</th><td>  <b>else</b></td></tr>
<tr><th id="221">221</th><td>    (<em>void</em>)<a class="local col6 ref" href="#16BVal" title='BVal' data-ref="16BVal">BVal</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt7ssub_ovERKS0_Rb" title='llvm::APInt::ssub_ov' data-ref="_ZNK4llvm5APInt7ssub_ovERKS0_Rb">ssub_ov</a>(*<a class="local col7 ref" href="#17CVal" title='CVal' data-ref="17CVal">CVal</a>, <span class='refarg'><a class="local col8 ref" href="#18Overflow" title='Overflow' data-ref="18Overflow">Overflow</a></span>);</td></tr>
<tr><th id="222">222</th><td></td></tr>
<tr><th id="223">223</th><td>  <b>return</b> !<a class="local col8 ref" href="#18Overflow" title='Overflow' data-ref="18Overflow">Overflow</a>;</td></tr>
<tr><th id="224">224</th><td>}</td></tr>
<tr><th id="225">225</th><td></td></tr>
<tr><th id="226">226</th><td><i class="doc" data-doc="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">/// Conservatively clears subclassOptionalData after a reassociation or</i></td></tr>
<tr><th id="227">227</th><td><i class="doc" data-doc="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">/// commutation. We preserve fast-math flags when applicable as they can be</i></td></tr>
<tr><th id="228">228</th><td><i class="doc" data-doc="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">/// preserved.</i></td></tr>
<tr><th id="229">229</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-type='void ClearSubclassDataAfterReassociation(llvm::BinaryOperator &amp; I)' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col9 decl" id="19I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="19I">I</dfn>) {</td></tr>
<tr><th id="230">230</th><td>  <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a> *<dfn class="local col0 decl" id="20FPMO" title='FPMO' data-type='llvm::FPMathOperator *' data-ref="20FPMO">FPMO</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a>&gt;(&amp;<a class="local col9 ref" href="#19I" title='I' data-ref="19I">I</a>);</td></tr>
<tr><th id="231">231</th><td>  <b>if</b> (!<a class="local col0 ref" href="#20FPMO" title='FPMO' data-ref="20FPMO">FPMO</a>) {</td></tr>
<tr><th id="232">232</th><td>    <a class="local col9 ref" href="#19I" title='I' data-ref="19I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value25clearSubclassOptionalDataEv" title='llvm::Value::clearSubclassOptionalData' data-ref="_ZN4llvm5Value25clearSubclassOptionalDataEv">clearSubclassOptionalData</a>();</td></tr>
<tr><th id="233">233</th><td>    <b>return</b>;</td></tr>
<tr><th id="234">234</th><td>  }</td></tr>
<tr><th id="235">235</th><td></td></tr>
<tr><th id="236">236</th><td>  <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FastMathFlags" title='llvm::FastMathFlags' data-ref="llvm::FastMathFlags">FastMathFlags</a> <dfn class="local col1 decl" id="21FMF" title='FMF' data-type='llvm::FastMathFlags' data-ref="21FMF">FMF</dfn> = <a class="local col9 ref" href="#19I" title='I' data-ref="19I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16getFastMathFlagsEv" title='llvm::Instruction::getFastMathFlags' data-ref="_ZNK4llvm11Instruction16getFastMathFlagsEv">getFastMathFlags</a>();</td></tr>
<tr><th id="237">237</th><td>  <a class="local col9 ref" href="#19I" title='I' data-ref="19I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value25clearSubclassOptionalDataEv" title='llvm::Value::clearSubclassOptionalData' data-ref="_ZN4llvm5Value25clearSubclassOptionalDataEv">clearSubclassOptionalData</a>();</td></tr>
<tr><th id="238">238</th><td>  <a class="local col9 ref" href="#19I" title='I' data-ref="19I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction16setFastMathFlagsENS_13FastMathFlagsE" title='llvm::Instruction::setFastMathFlags' data-ref="_ZN4llvm11Instruction16setFastMathFlagsENS_13FastMathFlagsE">setFastMathFlags</a>(<a class="ref fake" href="../../../include/llvm/IR/Operator.h.html#159" title='llvm::FastMathFlags::FastMathFlags' data-ref="_ZN4llvm13FastMathFlagsC1ERKS0_"></a><a class="local col1 ref" href="#21FMF" title='FMF' data-ref="21FMF">FMF</a>);</td></tr>
<tr><th id="239">239</th><td>}</td></tr>
<tr><th id="240">240</th><td></td></tr>
<tr><th id="241">241</th><td><i class="doc" data-doc="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">/// Combine constant operands of associative operations either before or after a</i></td></tr>
<tr><th id="242">242</th><td><i class="doc" data-doc="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">/// cast to eliminate one of the associative operations:</i></td></tr>
<tr><th id="243">243</th><td><i class="doc" data-doc="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">/// (op (cast (op X, C2)), C1) --&gt; (cast (op X, op (C1, C2)))</i></td></tr>
<tr><th id="244">244</th><td><i class="doc" data-doc="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">/// (op (cast (op X, C2)), C1) --&gt; (op (cast X), op (C1, C2))</i></td></tr>
<tr><th id="245">245</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE" title='simplifyAssocCastAssoc' data-type='bool simplifyAssocCastAssoc(llvm::BinaryOperator * BinOp1)' data-ref="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">simplifyAssocCastAssoc</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col2 decl" id="22BinOp1" title='BinOp1' data-type='llvm::BinaryOperator *' data-ref="22BinOp1">BinOp1</dfn>) {</td></tr>
<tr><th id="246">246</th><td>  <em>auto</em> *<dfn class="local col3 decl" id="23Cast" title='Cast' data-type='llvm::CastInst *' data-ref="23Cast">Cast</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>&gt;(<a class="local col2 ref" href="#22BinOp1" title='BinOp1' data-ref="22BinOp1">BinOp1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="247">247</th><td>  <b>if</b> (!<a class="local col3 ref" href="#23Cast" title='Cast' data-ref="23Cast">Cast</a> || !<a class="local col3 ref" href="#23Cast" title='Cast' data-ref="23Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="248">248</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="249">249</th><td></td></tr>
<tr><th id="250">250</th><td>  <i>// TODO: Enhance logic for other casts and remove this check.</i></td></tr>
<tr><th id="251">251</th><td>  <em>auto</em> <dfn class="local col4 decl" id="24CastOpcode" title='CastOpcode' data-type='llvm::Instruction::CastOps' data-ref="24CastOpcode">CastOpcode</dfn> = <a class="local col3 ref" href="#23Cast" title='Cast' data-ref="23Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="252">252</th><td>  <b>if</b> (<a class="local col4 ref" href="#24CastOpcode" title='CastOpcode' data-ref="24CastOpcode">CastOpcode</a> != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#185" title='llvm::Instruction::CastOps::ZExt' data-ref="llvm::Instruction::CastOps::ZExt">ZExt</a>)</td></tr>
<tr><th id="253">253</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="254">254</th><td></td></tr>
<tr><th id="255">255</th><td>  <i>// TODO: Enhance logic for other BinOps and remove this check.</i></td></tr>
<tr><th id="256">256</th><td>  <b>if</b> (!<a class="local col2 ref" href="#22BinOp1" title='BinOp1' data-ref="22BinOp1">BinOp1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16isBitwiseLogicOpEv" title='llvm::Instruction::isBitwiseLogicOp' data-ref="_ZNK4llvm11Instruction16isBitwiseLogicOpEv">isBitwiseLogicOp</a>())</td></tr>
<tr><th id="257">257</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="258">258</th><td></td></tr>
<tr><th id="259">259</th><td>  <em>auto</em> <dfn class="local col5 decl" id="25AssocOpcode" title='AssocOpcode' data-type='llvm::Instruction::BinaryOps' data-ref="25AssocOpcode">AssocOpcode</dfn> = <a class="local col2 ref" href="#22BinOp1" title='BinOp1' data-ref="22BinOp1">BinOp1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="260">260</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="26BinOp2" title='BinOp2' data-type='llvm::BinaryOperator *' data-ref="26BinOp2">BinOp2</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col3 ref" href="#23Cast" title='Cast' data-ref="23Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="261">261</th><td>  <b>if</b> (!<a class="local col6 ref" href="#26BinOp2" title='BinOp2' data-ref="26BinOp2">BinOp2</a> || !<a class="local col6 ref" href="#26BinOp2" title='BinOp2' data-ref="26BinOp2">BinOp2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() || <a class="local col6 ref" href="#26BinOp2" title='BinOp2' data-ref="26BinOp2">BinOp2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() != <a class="local col5 ref" href="#25AssocOpcode" title='AssocOpcode' data-ref="25AssocOpcode">AssocOpcode</a>)</td></tr>
<tr><th id="262">262</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="263">263</th><td></td></tr>
<tr><th id="264">264</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col7 decl" id="27C1" title='C1' data-type='llvm::Constant *' data-ref="27C1">C1</dfn>, *<dfn class="local col8 decl" id="28C2" title='C2' data-type='llvm::Constant *' data-ref="28C2">C2</dfn>;</td></tr>
<tr><th id="265">265</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col2 ref" href="#22BinOp1" title='BinOp1' data-ref="22BinOp1">BinOp1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col7 ref" href="#27C1" title='C1' data-ref="27C1">C1</a></span>)) ||</td></tr>
<tr><th id="266">266</th><td>      !<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col6 ref" href="#26BinOp2" title='BinOp2' data-ref="26BinOp2">BinOp2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col8 ref" href="#28C2" title='C2' data-ref="28C2">C2</a></span>)))</td></tr>
<tr><th id="267">267</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="268">268</th><td></td></tr>
<tr><th id="269">269</th><td>  <i>// TODO: This assumes a zext cast.</i></td></tr>
<tr><th id="270">270</th><td><i>  // Eg, if it was a trunc, we'd cast C1 to the source type because casting C2</i></td></tr>
<tr><th id="271">271</th><td><i>  // to the destination type might lose bits.</i></td></tr>
<tr><th id="272">272</th><td><i></i></td></tr>
<tr><th id="273">273</th><td><i>  // Fold the constants together in the destination type:</i></td></tr>
<tr><th id="274">274</th><td><i>  // (op (cast (op X, C2)), C1) --&gt; (op (cast X), FoldedC)</i></td></tr>
<tr><th id="275">275</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col9 decl" id="29DestTy" title='DestTy' data-type='llvm::Type *' data-ref="29DestTy">DestTy</dfn> = <a class="local col7 ref" href="#27C1" title='C1' data-ref="27C1">C1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="276">276</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col0 decl" id="30CastC2" title='CastC2' data-type='llvm::Constant *' data-ref="30CastC2">CastC2</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb" title='llvm::ConstantExpr::getCast' data-ref="_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb">getCast</a>(<a class="local col4 ref" href="#24CastOpcode" title='CastOpcode' data-ref="24CastOpcode">CastOpcode</a>, <a class="local col8 ref" href="#28C2" title='C2' data-ref="28C2">C2</a>, <a class="local col9 ref" href="#29DestTy" title='DestTy' data-ref="29DestTy">DestTy</a>);</td></tr>
<tr><th id="277">277</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col1 decl" id="31FoldedC" title='FoldedC' data-type='llvm::Constant *' data-ref="31FoldedC">FoldedC</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col5 ref" href="#25AssocOpcode" title='AssocOpcode' data-ref="25AssocOpcode">AssocOpcode</a>, <a class="local col7 ref" href="#27C1" title='C1' data-ref="27C1">C1</a>, <a class="local col0 ref" href="#30CastC2" title='CastC2' data-ref="30CastC2">CastC2</a>);</td></tr>
<tr><th id="278">278</th><td>  <a class="local col3 ref" href="#23Cast" title='Cast' data-ref="23Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::setOperand' data-ref="_ZN4llvm16UnaryInstruction10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col6 ref" href="#26BinOp2" title='BinOp2' data-ref="26BinOp2">BinOp2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="279">279</th><td>  <a class="local col2 ref" href="#22BinOp1" title='BinOp1' data-ref="22BinOp1">BinOp1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col1 ref" href="#31FoldedC" title='FoldedC' data-ref="31FoldedC">FoldedC</a>);</td></tr>
<tr><th id="280">280</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="281">281</th><td>}</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td><i class="doc">/// This performs a few simplifications for operators that are associative or</i></td></tr>
<tr><th id="284">284</th><td><i class="doc">/// commutative:</i></td></tr>
<tr><th id="285">285</th><td><i class="doc">///</i></td></tr>
<tr><th id="286">286</th><td><i class="doc">///  Commutative operators:</i></td></tr>
<tr><th id="287">287</th><td><i class="doc">///</i></td></tr>
<tr><th id="288">288</th><td><i class="doc">///  1. Order operands such that they are listed from right (least complex) to</i></td></tr>
<tr><th id="289">289</th><td><i class="doc">///     left (most complex).  This puts constants before unary operators before</i></td></tr>
<tr><th id="290">290</th><td><i class="doc">///     binary operators.</i></td></tr>
<tr><th id="291">291</th><td><i class="doc">///</i></td></tr>
<tr><th id="292">292</th><td><i class="doc">///  Associative operators:</i></td></tr>
<tr><th id="293">293</th><td><i class="doc">///</i></td></tr>
<tr><th id="294">294</th><td><i class="doc">///  2. Transform: "(A op B) op C" ==&gt; "A op (B op C)" if "B op C" simplifies.</i></td></tr>
<tr><th id="295">295</th><td><i class="doc">///  3. Transform: "A op (B op C)" ==&gt; "(A op B) op C" if "A op B" simplifies.</i></td></tr>
<tr><th id="296">296</th><td><i class="doc">///</i></td></tr>
<tr><th id="297">297</th><td><i class="doc">///  Associative and commutative operators:</i></td></tr>
<tr><th id="298">298</th><td><i class="doc">///</i></td></tr>
<tr><th id="299">299</th><td><i class="doc">///  4. Transform: "(A op B) op C" ==&gt; "(C op A) op B" if "C op A" simplifies.</i></td></tr>
<tr><th id="300">300</th><td><i class="doc">///  5. Transform: "A op (B op C)" ==&gt; "B op (C op A)" if "C op A" simplifies.</i></td></tr>
<tr><th id="301">301</th><td><i class="doc">///  6. Transform: "(A op C1) op (B op C2)" ==&gt; "(A op B) op (C1 op C2)"</i></td></tr>
<tr><th id="302">302</th><td><i class="doc">///     if C1 and C2 are constants.</i></td></tr>
<tr><th id="303">303</th><td><em>bool</em> <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner32SimplifyAssociativeOrCommutativeERNS_14BinaryOperatorE" title='llvm::InstCombiner::SimplifyAssociativeOrCommutative' data-ref="_ZN4llvm12InstCombiner32SimplifyAssociativeOrCommutativeERNS_14BinaryOperatorE">SimplifyAssociativeOrCommutative</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col2 decl" id="32I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="32I">I</dfn>) {</td></tr>
<tr><th id="304">304</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col3 decl" id="33Opcode" title='Opcode' data-type='Instruction::BinaryOps' data-ref="33Opcode">Opcode</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="305">305</th><td>  <em>bool</em> <dfn class="local col4 decl" id="34Changed" title='Changed' data-type='bool' data-ref="34Changed">Changed</dfn> = <b>false</b>;</td></tr>
<tr><th id="306">306</th><td></td></tr>
<tr><th id="307">307</th><td>  <b>do</b> {</td></tr>
<tr><th id="308">308</th><td>    <i>// Order operands such that they are listed from right (least complex) to</i></td></tr>
<tr><th id="309">309</th><td><i>    // left (most complex).  This puts constants before unary operators before</i></td></tr>
<tr><th id="310">310</th><td><i>    // binary operators.</i></td></tr>
<tr><th id="311">311</th><td>    <b>if</b> (<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isCommutativeEv" title='llvm::Instruction::isCommutative' data-ref="_ZNK4llvm11Instruction13isCommutativeEv">isCommutative</a>() &amp;&amp; <a class="ref" href="InstCombineInternal.h.html#_ZN4llvmL13getComplexityEPNS_5ValueE" title='llvm::getComplexity' data-ref="_ZN4llvmL13getComplexityEPNS_5ValueE">getComplexity</a>(<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>)) &lt;</td></tr>
<tr><th id="312">312</th><td>        <a class="ref" href="InstCombineInternal.h.html#_ZN4llvmL13getComplexityEPNS_5ValueE" title='llvm::getComplexity' data-ref="_ZN4llvmL13getComplexityEPNS_5ValueE">getComplexity</a>(<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>)))</td></tr>
<tr><th id="313">313</th><td>      <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = !<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm14BinaryOperator12swapOperandsEv" title='llvm::BinaryOperator::swapOperands' data-ref="_ZN4llvm14BinaryOperator12swapOperandsEv">swapOperands</a>();</td></tr>
<tr><th id="314">314</th><td></td></tr>
<tr><th id="315">315</th><td>    <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col5 decl" id="35Op0" title='Op0' data-type='llvm::BinaryOperator *' data-ref="35Op0">Op0</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="316">316</th><td>    <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col6 decl" id="36Op1" title='Op1' data-type='llvm::BinaryOperator *' data-ref="36Op1">Op1</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="317">317</th><td></td></tr>
<tr><th id="318">318</th><td>    <b>if</b> (<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isAssociativeEv" title='llvm::Instruction::isAssociative' data-ref="_ZNK4llvm11Instruction13isAssociativeEv">isAssociative</a>()) {</td></tr>
<tr><th id="319">319</th><td>      <i>// Transform: "(A op B) op C" ==&gt; "A op (B op C)" if "B op C" simplifies.</i></td></tr>
<tr><th id="320">320</th><td>      <b>if</b> (<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a> &amp;&amp; <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>) {</td></tr>
<tr><th id="321">321</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="37A" title='A' data-type='llvm::Value *' data-ref="37A">A</dfn> = <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="322">322</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="38B" title='B' data-type='llvm::Value *' data-ref="38B">B</dfn> = <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="323">323</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="39C" title='C' data-type='llvm::Value *' data-ref="39C">C</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="324">324</th><td></td></tr>
<tr><th id="325">325</th><td>        <i>// Does "B op C" simplify?</i></td></tr>
<tr><th id="326">326</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="40V" title='V' data-type='llvm::Value *' data-ref="40V"><a class="local col0 ref" href="#40V" title='V' data-ref="40V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col8 ref" href="#38B" title='B' data-ref="38B">B</a>, <a class="local col9 ref" href="#39C" title='C' data-ref="39C">C</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>))) {</td></tr>
<tr><th id="327">327</th><td>          <i>// It simplifies to V.  Form "A op V".</i></td></tr>
<tr><th id="328">328</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col7 ref" href="#37A" title='A' data-ref="37A">A</a>);</td></tr>
<tr><th id="329">329</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col0 ref" href="#40V" title='V' data-ref="40V">V</a>);</td></tr>
<tr><th id="330">330</th><td>          <i>// Conservatively clear the optional flags, since they may not be</i></td></tr>
<tr><th id="331">331</th><td><i>          // preserved by the reassociation.</i></td></tr>
<tr><th id="332">332</th><td>          <b>if</b> (<a class="tu ref" href="#_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_" title='MaintainNoSignedWrap' data-use='c' data-ref="_ZL20MaintainNoSignedWrapRN4llvm14BinaryOperatorEPNS_5ValueES3_">MaintainNoSignedWrap</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>, <a class="local col8 ref" href="#38B" title='B' data-ref="38B">B</a>, <a class="local col9 ref" href="#39C" title='C' data-ref="39C">C</a>) &amp;&amp;</td></tr>
<tr><th id="333">333</th><td>              (!<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a> || (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>) &amp;&amp; <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction15hasNoSignedWrapEv" title='llvm::Instruction::hasNoSignedWrap' data-ref="_ZNK4llvm11Instruction15hasNoSignedWrapEv">hasNoSignedWrap</a>()))) {</td></tr>
<tr><th id="334">334</th><td>            <i>// Note: this is only valid because SimplifyBinOp doesn't look at</i></td></tr>
<tr><th id="335">335</th><td><i>            // the operands to Op0.</i></td></tr>
<tr><th id="336">336</th><td>            <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value25clearSubclassOptionalDataEv" title='llvm::Value::clearSubclassOptionalData' data-ref="_ZN4llvm5Value25clearSubclassOptionalDataEv">clearSubclassOptionalData</a>();</td></tr>
<tr><th id="337">337</th><td>            <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction18setHasNoSignedWrapEb" title='llvm::Instruction::setHasNoSignedWrap' data-ref="_ZN4llvm11Instruction18setHasNoSignedWrapEb">setHasNoSignedWrap</a>(<b>true</b>);</td></tr>
<tr><th id="338">338</th><td>          } <b>else</b> {</td></tr>
<tr><th id="339">339</th><td>            <a class="tu ref" href="#_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-use='c' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="340">340</th><td>          }</td></tr>
<tr><th id="341">341</th><td></td></tr>
<tr><th id="342">342</th><td>          <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="343">343</th><td>          <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#120" title='NumReassoc' data-ref="NumReassoc">NumReassoc</a>;</td></tr>
<tr><th id="344">344</th><td>          <b>continue</b>;</td></tr>
<tr><th id="345">345</th><td>        }</td></tr>
<tr><th id="346">346</th><td>      }</td></tr>
<tr><th id="347">347</th><td></td></tr>
<tr><th id="348">348</th><td>      <i>// Transform: "A op (B op C)" ==&gt; "(A op B) op C" if "A op B" simplifies.</i></td></tr>
<tr><th id="349">349</th><td>      <b>if</b> (<a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a> &amp;&amp; <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>) {</td></tr>
<tr><th id="350">350</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="41A" title='A' data-type='llvm::Value *' data-ref="41A">A</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="351">351</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="42B" title='B' data-type='llvm::Value *' data-ref="42B">B</dfn> = <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="352">352</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="43C" title='C' data-type='llvm::Value *' data-ref="43C">C</dfn> = <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="353">353</th><td></td></tr>
<tr><th id="354">354</th><td>        <i>// Does "A op B" simplify?</i></td></tr>
<tr><th id="355">355</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="44V" title='V' data-type='llvm::Value *' data-ref="44V"><a class="local col4 ref" href="#44V" title='V' data-ref="44V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col1 ref" href="#41A" title='A' data-ref="41A">A</a>, <a class="local col2 ref" href="#42B" title='B' data-ref="42B">B</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>))) {</td></tr>
<tr><th id="356">356</th><td>          <i>// It simplifies to V.  Form "V op C".</i></td></tr>
<tr><th id="357">357</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col4 ref" href="#44V" title='V' data-ref="44V">V</a>);</td></tr>
<tr><th id="358">358</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col3 ref" href="#43C" title='C' data-ref="43C">C</a>);</td></tr>
<tr><th id="359">359</th><td>          <i>// Conservatively clear the optional flags, since they may not be</i></td></tr>
<tr><th id="360">360</th><td><i>          // preserved by the reassociation.</i></td></tr>
<tr><th id="361">361</th><td>          <a class="tu ref" href="#_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-use='c' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="362">362</th><td>          <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="363">363</th><td>          <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#120" title='NumReassoc' data-ref="NumReassoc">NumReassoc</a>;</td></tr>
<tr><th id="364">364</th><td>          <b>continue</b>;</td></tr>
<tr><th id="365">365</th><td>        }</td></tr>
<tr><th id="366">366</th><td>      }</td></tr>
<tr><th id="367">367</th><td>    }</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td>    <b>if</b> (<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isAssociativeEv" title='llvm::Instruction::isAssociative' data-ref="_ZNK4llvm11Instruction13isAssociativeEv">isAssociative</a>() &amp;&amp; <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isCommutativeEv" title='llvm::Instruction::isCommutative' data-ref="_ZNK4llvm11Instruction13isCommutativeEv">isCommutative</a>()) {</td></tr>
<tr><th id="370">370</th><td>      <b>if</b> (<a class="tu ref" href="#_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE" title='simplifyAssocCastAssoc' data-use='c' data-ref="_ZL22simplifyAssocCastAssocPN4llvm14BinaryOperatorE">simplifyAssocCastAssoc</a>(&amp;<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>)) {</td></tr>
<tr><th id="371">371</th><td>        <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="372">372</th><td>        <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#120" title='NumReassoc' data-ref="NumReassoc">NumReassoc</a>;</td></tr>
<tr><th id="373">373</th><td>        <b>continue</b>;</td></tr>
<tr><th id="374">374</th><td>      }</td></tr>
<tr><th id="375">375</th><td></td></tr>
<tr><th id="376">376</th><td>      <i>// Transform: "(A op B) op C" ==&gt; "(C op A) op B" if "C op A" simplifies.</i></td></tr>
<tr><th id="377">377</th><td>      <b>if</b> (<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a> &amp;&amp; <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>) {</td></tr>
<tr><th id="378">378</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="45A" title='A' data-type='llvm::Value *' data-ref="45A">A</dfn> = <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="379">379</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="46B" title='B' data-type='llvm::Value *' data-ref="46B">B</dfn> = <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="380">380</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="47C" title='C' data-type='llvm::Value *' data-ref="47C">C</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="381">381</th><td></td></tr>
<tr><th id="382">382</th><td>        <i>// Does "C op A" simplify?</i></td></tr>
<tr><th id="383">383</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="48V" title='V' data-type='llvm::Value *' data-ref="48V"><a class="local col8 ref" href="#48V" title='V' data-ref="48V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col7 ref" href="#47C" title='C' data-ref="47C">C</a>, <a class="local col5 ref" href="#45A" title='A' data-ref="45A">A</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>))) {</td></tr>
<tr><th id="384">384</th><td>          <i>// It simplifies to V.  Form "V op B".</i></td></tr>
<tr><th id="385">385</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col8 ref" href="#48V" title='V' data-ref="48V">V</a>);</td></tr>
<tr><th id="386">386</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col6 ref" href="#46B" title='B' data-ref="46B">B</a>);</td></tr>
<tr><th id="387">387</th><td>          <i>// Conservatively clear the optional flags, since they may not be</i></td></tr>
<tr><th id="388">388</th><td><i>          // preserved by the reassociation.</i></td></tr>
<tr><th id="389">389</th><td>          <a class="tu ref" href="#_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-use='c' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="390">390</th><td>          <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="391">391</th><td>          <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#120" title='NumReassoc' data-ref="NumReassoc">NumReassoc</a>;</td></tr>
<tr><th id="392">392</th><td>          <b>continue</b>;</td></tr>
<tr><th id="393">393</th><td>        }</td></tr>
<tr><th id="394">394</th><td>      }</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td>      <i>// Transform: "A op (B op C)" ==&gt; "B op (C op A)" if "C op A" simplifies.</i></td></tr>
<tr><th id="397">397</th><td>      <b>if</b> (<a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a> &amp;&amp; <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>) {</td></tr>
<tr><th id="398">398</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="49A" title='A' data-type='llvm::Value *' data-ref="49A">A</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="399">399</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="50B" title='B' data-type='llvm::Value *' data-ref="50B">B</dfn> = <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="400">400</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="51C" title='C' data-type='llvm::Value *' data-ref="51C">C</dfn> = <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="401">401</th><td></td></tr>
<tr><th id="402">402</th><td>        <i>// Does "C op A" simplify?</i></td></tr>
<tr><th id="403">403</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="52V" title='V' data-type='llvm::Value *' data-ref="52V"><a class="local col2 ref" href="#52V" title='V' data-ref="52V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col1 ref" href="#51C" title='C' data-ref="51C">C</a>, <a class="local col9 ref" href="#49A" title='A' data-ref="49A">A</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>))) {</td></tr>
<tr><th id="404">404</th><td>          <i>// It simplifies to V.  Form "B op V".</i></td></tr>
<tr><th id="405">405</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col0 ref" href="#50B" title='B' data-ref="50B">B</a>);</td></tr>
<tr><th id="406">406</th><td>          <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col2 ref" href="#52V" title='V' data-ref="52V">V</a>);</td></tr>
<tr><th id="407">407</th><td>          <i>// Conservatively clear the optional flags, since they may not be</i></td></tr>
<tr><th id="408">408</th><td><i>          // preserved by the reassociation.</i></td></tr>
<tr><th id="409">409</th><td>          <a class="tu ref" href="#_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-use='c' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="410">410</th><td>          <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="411">411</th><td>          <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#120" title='NumReassoc' data-ref="NumReassoc">NumReassoc</a>;</td></tr>
<tr><th id="412">412</th><td>          <b>continue</b>;</td></tr>
<tr><th id="413">413</th><td>        }</td></tr>
<tr><th id="414">414</th><td>      }</td></tr>
<tr><th id="415">415</th><td></td></tr>
<tr><th id="416">416</th><td>      <i>// Transform: "(A op C1) op (B op C2)" ==&gt; "(A op B) op (C1 op C2)"</i></td></tr>
<tr><th id="417">417</th><td><i>      // if C1 and C2 are constants.</i></td></tr>
<tr><th id="418">418</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="53A" title='A' data-type='llvm::Value *' data-ref="53A">A</dfn>, *<dfn class="local col4 decl" id="54B" title='B' data-type='llvm::Value *' data-ref="54B">B</dfn>;</td></tr>
<tr><th id="419">419</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col5 decl" id="55C1" title='C1' data-type='llvm::Constant *' data-ref="55C1">C1</dfn>, *<dfn class="local col6 decl" id="56C2" title='C2' data-type='llvm::Constant *' data-ref="56C2">C2</dfn>;</td></tr>
<tr><th id="420">420</th><td>      <b>if</b> (<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a> &amp;&amp; <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a> &amp;&amp;</td></tr>
<tr><th id="421">421</th><td>          <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a> &amp;&amp; <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a> &amp;&amp;</td></tr>
<tr><th id="422">422</th><td>          <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_OneUseERKT_" title='llvm::PatternMatch::m_OneUse' data-ref="_ZN4llvm12PatternMatch8m_OneUseERKT_">m_OneUse</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_BinOpERKT_RKT0_" title='llvm::PatternMatch::m_BinOp' data-ref="_ZN4llvm12PatternMatch7m_BinOpERKT_RKT0_">m_BinOp</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col3 ref" href="#53A" title='A' data-ref="53A">A</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col5 ref" href="#55C1" title='C1' data-ref="55C1">C1</a></span>)))) &amp;&amp;</td></tr>
<tr><th id="423">423</th><td>          <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_OneUseERKT_" title='llvm::PatternMatch::m_OneUse' data-ref="_ZN4llvm12PatternMatch8m_OneUseERKT_">m_OneUse</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_BinOpERKT_RKT0_" title='llvm::PatternMatch::m_BinOp' data-ref="_ZN4llvm12PatternMatch7m_BinOpERKT_RKT0_">m_BinOp</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col4 ref" href="#54B" title='B' data-ref="54B">B</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col6 ref" href="#56C2" title='C2' data-ref="56C2">C2</a></span>))))) {</td></tr>
<tr><th id="424">424</th><td>        <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col7 decl" id="57NewBO" title='NewBO' data-type='llvm::BinaryOperator *' data-ref="57NewBO">NewBO</dfn> = <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_" title='llvm::BinaryOperator::Create' data-ref="_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_">Create</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col3 ref" href="#53A" title='A' data-ref="53A">A</a>, <a class="local col4 ref" href="#54B" title='B' data-ref="54B">B</a>);</td></tr>
<tr><th id="425">425</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a>&gt;(<a class="local col7 ref" href="#57NewBO" title='NewBO' data-ref="57NewBO">NewBO</a>)) {</td></tr>
<tr><th id="426">426</th><td>          <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FastMathFlags" title='llvm::FastMathFlags' data-ref="llvm::FastMathFlags">FastMathFlags</a> <dfn class="local col8 decl" id="58Flags" title='Flags' data-type='llvm::FastMathFlags' data-ref="58Flags">Flags</dfn> = <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16getFastMathFlagsEv" title='llvm::Instruction::getFastMathFlags' data-ref="_ZNK4llvm11Instruction16getFastMathFlagsEv">getFastMathFlags</a>();</td></tr>
<tr><th id="427">427</th><td>          <a class="local col8 ref" href="#58Flags" title='Flags' data-ref="58Flags">Flags</a> <a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZN4llvm13FastMathFlagsaNERKS0_" title='llvm::FastMathFlags::operator&amp;=' data-ref="_ZN4llvm13FastMathFlagsaNERKS0_">&amp;=</a> <a class="local col5 ref" href="#35Op0" title='Op0' data-ref="35Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16getFastMathFlagsEv" title='llvm::Instruction::getFastMathFlags' data-ref="_ZNK4llvm11Instruction16getFastMathFlagsEv">getFastMathFlags</a>();</td></tr>
<tr><th id="428">428</th><td>          <a class="local col8 ref" href="#58Flags" title='Flags' data-ref="58Flags">Flags</a> <a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZN4llvm13FastMathFlagsaNERKS0_" title='llvm::FastMathFlags::operator&amp;=' data-ref="_ZN4llvm13FastMathFlagsaNERKS0_">&amp;=</a> <a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16getFastMathFlagsEv" title='llvm::Instruction::getFastMathFlags' data-ref="_ZNK4llvm11Instruction16getFastMathFlagsEv">getFastMathFlags</a>();</td></tr>
<tr><th id="429">429</th><td>          <a class="local col7 ref" href="#57NewBO" title='NewBO' data-ref="57NewBO">NewBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction16setFastMathFlagsENS_13FastMathFlagsE" title='llvm::Instruction::setFastMathFlags' data-ref="_ZN4llvm11Instruction16setFastMathFlagsENS_13FastMathFlagsE">setFastMathFlags</a>(<a class="ref fake" href="../../../include/llvm/IR/Operator.h.html#159" title='llvm::FastMathFlags::FastMathFlags' data-ref="_ZN4llvm13FastMathFlagsC1ERKS0_"></a><a class="local col8 ref" href="#58Flags" title='Flags' data-ref="58Flags">Flags</a>);</td></tr>
<tr><th id="430">430</th><td>        }</td></tr>
<tr><th id="431">431</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner17InsertNewInstWithEPNS_11InstructionERS1_" title='llvm::InstCombiner::InsertNewInstWith' data-ref="_ZN4llvm12InstCombiner17InsertNewInstWithEPNS_11InstructionERS1_">InsertNewInstWith</a>(<a class="local col7 ref" href="#57NewBO" title='NewBO' data-ref="57NewBO">NewBO</a>, <span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="432">432</th><td>        <a class="local col7 ref" href="#57NewBO" title='NewBO' data-ref="57NewBO">NewBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(<a class="local col6 ref" href="#36Op1" title='Op1' data-ref="36Op1">Op1</a>);</td></tr>
<tr><th id="433">433</th><td>        <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col7 ref" href="#57NewBO" title='NewBO' data-ref="57NewBO">NewBO</a>);</td></tr>
<tr><th id="434">434</th><td>        <a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::setOperand' data-ref="_ZN4llvm14BinaryOperator10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col3 ref" href="#33Opcode" title='Opcode' data-ref="33Opcode">Opcode</a>, <a class="local col5 ref" href="#55C1" title='C1' data-ref="55C1">C1</a>, <a class="local col6 ref" href="#56C2" title='C2' data-ref="56C2">C2</a>));</td></tr>
<tr><th id="435">435</th><td>        <i>// Conservatively clear the optional flags, since they may not be</i></td></tr>
<tr><th id="436">436</th><td><i>        // preserved by the reassociation.</i></td></tr>
<tr><th id="437">437</th><td>        <a class="tu ref" href="#_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE" title='ClearSubclassDataAfterReassociation' data-use='c' data-ref="_ZL35ClearSubclassDataAfterReassociationRN4llvm14BinaryOperatorE">ClearSubclassDataAfterReassociation</a>(<span class='refarg'><a class="local col2 ref" href="#32I" title='I' data-ref="32I">I</a></span>);</td></tr>
<tr><th id="438">438</th><td></td></tr>
<tr><th id="439">439</th><td>        <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a> = <b>true</b>;</td></tr>
<tr><th id="440">440</th><td>        <b>continue</b>;</td></tr>
<tr><th id="441">441</th><td>      }</td></tr>
<tr><th id="442">442</th><td>    }</td></tr>
<tr><th id="443">443</th><td></td></tr>
<tr><th id="444">444</th><td>    <i>// No further simplifications.</i></td></tr>
<tr><th id="445">445</th><td>    <b>return</b> <a class="local col4 ref" href="#34Changed" title='Changed' data-ref="34Changed">Changed</a>;</td></tr>
<tr><th id="446">446</th><td>  } <b>while</b> (<b>true</b>);</td></tr>
<tr><th id="447">447</th><td>}</td></tr>
<tr><th id="448">448</th><td></td></tr>
<tr><th id="449">449</th><td><i class="doc" data-doc="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">/// Return whether "X LOp (Y ROp Z)" is always equal to</i></td></tr>
<tr><th id="450">450</th><td><i class="doc" data-doc="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">/// "(X LOp Y) ROp (X LOp Z)".</i></td></tr>
<tr><th id="451">451</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_" title='leftDistributesOverRight' data-type='bool leftDistributesOverRight(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)' data-ref="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">leftDistributesOverRight</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col9 decl" id="59LOp" title='LOp' data-type='Instruction::BinaryOps' data-ref="59LOp">LOp</dfn>,</td></tr>
<tr><th id="452">452</th><td>                                     <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col0 decl" id="60ROp" title='ROp' data-type='Instruction::BinaryOps' data-ref="60ROp">ROp</dfn>) {</td></tr>
<tr><th id="453">453</th><td>  <i>// X &amp; (Y | Z) &lt;--&gt; (X &amp; Y) | (X &amp; Z)</i></td></tr>
<tr><th id="454">454</th><td><i>  // X &amp; (Y ^ Z) &lt;--&gt; (X &amp; Y) ^ (X &amp; Z)</i></td></tr>
<tr><th id="455">455</th><td>  <b>if</b> (<a class="local col9 ref" href="#59LOp" title='LOp' data-ref="59LOp">LOp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#164" title='llvm::Instruction::BinaryOps::And' data-ref="llvm::Instruction::BinaryOps::And">And</a>)</td></tr>
<tr><th id="456">456</th><td>    <b>return</b> <a class="local col0 ref" href="#60ROp" title='ROp' data-ref="60ROp">ROp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#165" title='llvm::Instruction::BinaryOps::Or' data-ref="llvm::Instruction::BinaryOps::Or">Or</a> || <a class="local col0 ref" href="#60ROp" title='ROp' data-ref="60ROp">ROp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#166" title='llvm::Instruction::BinaryOps::Xor' data-ref="llvm::Instruction::BinaryOps::Xor">Xor</a>;</td></tr>
<tr><th id="457">457</th><td></td></tr>
<tr><th id="458">458</th><td>  <i>// X | (Y &amp; Z) &lt;--&gt; (X | Y) &amp; (X | Z)</i></td></tr>
<tr><th id="459">459</th><td>  <b>if</b> (<a class="local col9 ref" href="#59LOp" title='LOp' data-ref="59LOp">LOp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#165" title='llvm::Instruction::BinaryOps::Or' data-ref="llvm::Instruction::BinaryOps::Or">Or</a>)</td></tr>
<tr><th id="460">460</th><td>    <b>return</b> <a class="local col0 ref" href="#60ROp" title='ROp' data-ref="60ROp">ROp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#164" title='llvm::Instruction::BinaryOps::And' data-ref="llvm::Instruction::BinaryOps::And">And</a>;</td></tr>
<tr><th id="461">461</th><td></td></tr>
<tr><th id="462">462</th><td>  <i>// X * (Y + Z) &lt;--&gt; (X * Y) + (X * Z)</i></td></tr>
<tr><th id="463">463</th><td><i>  // X * (Y - Z) &lt;--&gt; (X * Y) - (X * Z)</i></td></tr>
<tr><th id="464">464</th><td>  <b>if</b> (<a class="local col9 ref" href="#59LOp" title='LOp' data-ref="59LOp">LOp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#151" title='llvm::Instruction::BinaryOps::Mul' data-ref="llvm::Instruction::BinaryOps::Mul">Mul</a>)</td></tr>
<tr><th id="465">465</th><td>    <b>return</b> <a class="local col0 ref" href="#60ROp" title='ROp' data-ref="60ROp">ROp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::BinaryOps::Add' data-ref="llvm::Instruction::BinaryOps::Add">Add</a> || <a class="local col0 ref" href="#60ROp" title='ROp' data-ref="60ROp">ROp</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::BinaryOps::Sub' data-ref="llvm::Instruction::BinaryOps::Sub">Sub</a>;</td></tr>
<tr><th id="466">466</th><td></td></tr>
<tr><th id="467">467</th><td>  <b>return</b> <b>false</b>;</td></tr>
<tr><th id="468">468</th><td>}</td></tr>
<tr><th id="469">469</th><td></td></tr>
<tr><th id="470">470</th><td><i class="doc" data-doc="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_">/// Return whether "(X LOp Y) ROp Z" is always equal to</i></td></tr>
<tr><th id="471">471</th><td><i class="doc" data-doc="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_">/// "(X ROp Z) LOp (Y ROp Z)".</i></td></tr>
<tr><th id="472">472</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_" title='rightDistributesOverLeft' data-type='bool rightDistributesOverLeft(Instruction::BinaryOps LOp, Instruction::BinaryOps ROp)' data-ref="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_">rightDistributesOverLeft</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col1 decl" id="61LOp" title='LOp' data-type='Instruction::BinaryOps' data-ref="61LOp">LOp</dfn>,</td></tr>
<tr><th id="473">473</th><td>                                     <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col2 decl" id="62ROp" title='ROp' data-type='Instruction::BinaryOps' data-ref="62ROp">ROp</dfn>) {</td></tr>
<tr><th id="474">474</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction13isCommutativeEj" title='llvm::Instruction::isCommutative' data-ref="_ZN4llvm11Instruction13isCommutativeEj">isCommutative</a>(<a class="local col2 ref" href="#62ROp" title='ROp' data-ref="62ROp">ROp</a>))</td></tr>
<tr><th id="475">475</th><td>    <b>return</b> <a class="tu ref" href="#_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_" title='leftDistributesOverRight' data-use='c' data-ref="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">leftDistributesOverRight</a>(<a class="local col2 ref" href="#62ROp" title='ROp' data-ref="62ROp">ROp</a>, <a class="local col1 ref" href="#61LOp" title='LOp' data-ref="61LOp">LOp</a>);</td></tr>
<tr><th id="476">476</th><td></td></tr>
<tr><th id="477">477</th><td>  <i>// (X {&amp;|^} Y) &gt;&gt; Z &lt;--&gt; (X &gt;&gt; Z) {&amp;|^} (Y &gt;&gt; Z) for all shifts.</i></td></tr>
<tr><th id="478">478</th><td>  <b>return</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction16isBitwiseLogicOpEj" title='llvm::Instruction::isBitwiseLogicOp' data-ref="_ZN4llvm11Instruction16isBitwiseLogicOpEj">isBitwiseLogicOp</a>(<a class="local col1 ref" href="#61LOp" title='LOp' data-ref="61LOp">LOp</a>) &amp;&amp; <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction7isShiftEj" title='llvm::Instruction::isShift' data-ref="_ZN4llvm11Instruction7isShiftEj">isShift</a>(<a class="local col2 ref" href="#62ROp" title='ROp' data-ref="62ROp">ROp</a>);</td></tr>
<tr><th id="479">479</th><td></td></tr>
<tr><th id="480">480</th><td>  <i>// TODO: It would be nice to handle division, aka "(X + Y)/Z = X/Z + Y/Z",</i></td></tr>
<tr><th id="481">481</th><td><i>  // but this requires knowing that the addition does not overflow and other</i></td></tr>
<tr><th id="482">482</th><td><i>  // such subtleties.</i></td></tr>
<tr><th id="483">483</th><td>}</td></tr>
<tr><th id="484">484</th><td></td></tr>
<tr><th id="485">485</th><td><i class="doc" data-doc="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE">/// This function returns identity value for given opcode, which can be used to</i></td></tr>
<tr><th id="486">486</th><td><i class="doc" data-doc="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE">/// factor patterns like (X * 2) + X ==&gt; (X * 2) + (X * 1) ==&gt; X * (2 + 1).</i></td></tr>
<tr><th id="487">487</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl def" id="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE" title='getIdentityValue' data-type='llvm::Value * getIdentityValue(Instruction::BinaryOps Opcode, llvm::Value * V)' data-ref="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE">getIdentityValue</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col3 decl" id="63Opcode" title='Opcode' data-type='Instruction::BinaryOps' data-ref="63Opcode">Opcode</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="64V" title='V' data-type='llvm::Value *' data-ref="64V">V</dfn>) {</td></tr>
<tr><th id="488">488</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col4 ref" href="#64V" title='V' data-ref="64V">V</a>))</td></tr>
<tr><th id="489">489</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="490">490</th><td></td></tr>
<tr><th id="491">491</th><td>  <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb" title='llvm::ConstantExpr::getBinOpIdentity' data-ref="_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb">getBinOpIdentity</a>(<a class="local col3 ref" href="#63Opcode" title='Opcode' data-ref="63Opcode">Opcode</a>, <a class="local col4 ref" href="#64V" title='V' data-ref="64V">V</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="492">492</th><td>}</td></tr>
<tr><th id="493">493</th><td></td></tr>
<tr><th id="494">494</th><td><i class="doc" data-doc="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">/// This function predicates factorization using distributive laws. By default,</i></td></tr>
<tr><th id="495">495</th><td><i class="doc" data-doc="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">/// it just returns the 'Op' inputs. But for special-cases like</i></td></tr>
<tr><th id="496">496</th><td><i class="doc" data-doc="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">/// 'add(shl(X, 5), ...)', this function will have TopOpcode == Instruction::Add</i></td></tr>
<tr><th id="497">497</th><td><i class="doc" data-doc="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">/// and Op = shl(X, 5). The 'shl' is treated as the more general 'mul X, 32' to</i></td></tr>
<tr><th id="498">498</th><td><i class="doc" data-doc="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">/// allow more factorization opportunities.</i></td></tr>
<tr><th id="499">499</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a></td></tr>
<tr><th id="500">500</th><td><dfn class="tu decl def" id="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_" title='getBinOpsForFactorization' data-type='Instruction::BinaryOps getBinOpsForFactorization(Instruction::BinaryOps TopOpcode, llvm::BinaryOperator * Op, llvm::Value *&amp; LHS, llvm::Value *&amp; RHS)' data-ref="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">getBinOpsForFactorization</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col5 decl" id="65TopOpcode" title='TopOpcode' data-type='Instruction::BinaryOps' data-ref="65TopOpcode">TopOpcode</dfn>, <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col6 decl" id="66Op" title='Op' data-type='llvm::BinaryOperator *' data-ref="66Op">Op</dfn>,</td></tr>
<tr><th id="501">501</th><td>                          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col7 decl" id="67LHS" title='LHS' data-type='llvm::Value *&amp;' data-ref="67LHS">LHS</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col8 decl" id="68RHS" title='RHS' data-type='llvm::Value *&amp;' data-ref="68RHS">RHS</dfn>) {</td></tr>
<tr><th id="502">502</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Op &amp;&amp; &quot;Expected a binary operator&quot;) ? void (0) : __assert_fail (&quot;Op &amp;&amp; \&quot;Expected a binary operator\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 502, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a> &amp;&amp; <q>"Expected a binary operator"</q>);</td></tr>
<tr><th id="503">503</th><td>  <a class="local col7 ref" href="#67LHS" title='LHS' data-ref="67LHS">LHS</a> = <a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="504">504</th><td>  <a class="local col8 ref" href="#68RHS" title='RHS' data-ref="68RHS">RHS</a> = <a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="505">505</th><td>  <b>if</b> (<a class="local col5 ref" href="#65TopOpcode" title='TopOpcode' data-ref="65TopOpcode">TopOpcode</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::BinaryOps::Add' data-ref="llvm::Instruction::BinaryOps::Add">Add</a> || <a class="local col5 ref" href="#65TopOpcode" title='TopOpcode' data-ref="65TopOpcode">TopOpcode</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::BinaryOps::Sub' data-ref="llvm::Instruction::BinaryOps::Sub">Sub</a>) {</td></tr>
<tr><th id="506">506</th><td>    <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col9 decl" id="69C" title='C' data-type='llvm::Constant *' data-ref="69C">C</dfn>;</td></tr>
<tr><th id="507">507</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_ShlERKT_RKT0_" title='llvm::PatternMatch::m_Shl' data-ref="_ZN4llvm12PatternMatch5m_ShlERKT_RKT0_">m_Shl</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueEv" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueEv">m_Value</a>(), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col9 ref" href="#69C" title='C' data-ref="69C">C</a></span>)))) {</td></tr>
<tr><th id="508">508</th><td>      <i>// X &lt;&lt; C --&gt; X * (1 &lt;&lt; C)</i></td></tr>
<tr><th id="509">509</th><td>      <a class="local col8 ref" href="#68RHS" title='RHS' data-ref="68RHS">RHS</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getShlEPNS_8ConstantES2_bb" title='llvm::ConstantExpr::getShl' data-ref="_ZN4llvm12ConstantExpr6getShlEPNS_8ConstantES2_bb">getShl</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</a>(<a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <var>1</var>), <a class="local col9 ref" href="#69C" title='C' data-ref="69C">C</a>);</td></tr>
<tr><th id="510">510</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#151" title='llvm::Instruction::BinaryOps::Mul' data-ref="llvm::Instruction::BinaryOps::Mul">Mul</a>;</td></tr>
<tr><th id="511">511</th><td>    }</td></tr>
<tr><th id="512">512</th><td>    <i>// TODO: We can add other conversions e.g. shr =&gt; div etc.</i></td></tr>
<tr><th id="513">513</th><td>  }</td></tr>
<tr><th id="514">514</th><td>  <b>return</b> <a class="local col6 ref" href="#66Op" title='Op' data-ref="66Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="515">515</th><td>}</td></tr>
<tr><th id="516">516</th><td></td></tr>
<tr><th id="517">517</th><td><i class="doc">/// This tries to simplify binary operations by factorizing out common terms</i></td></tr>
<tr><th id="518">518</th><td><i class="doc">/// (e. g. "(A*B)+(A*C)" -&gt; "A*(B+C)").</i></td></tr>
<tr><th id="519">519</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_" title='llvm::InstCombiner::tryFactorization' data-ref="_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_">tryFactorization</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col0 decl" id="70I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="70I">I</dfn>,</td></tr>
<tr><th id="520">520</th><td>                                      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col1 decl" id="71InnerOpcode" title='InnerOpcode' data-type='Instruction::BinaryOps' data-ref="71InnerOpcode">InnerOpcode</dfn>,</td></tr>
<tr><th id="521">521</th><td>                                      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="72A" title='A' data-type='llvm::Value *' data-ref="72A">A</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="73B" title='B' data-type='llvm::Value *' data-ref="73B">B</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="74C" title='C' data-type='llvm::Value *' data-ref="74C">C</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="75D" title='D' data-type='llvm::Value *' data-ref="75D">D</dfn>) {</td></tr>
<tr><th id="522">522</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (A &amp;&amp; B &amp;&amp; C &amp;&amp; D &amp;&amp; &quot;All values must be provided&quot;) ? void (0) : __assert_fail (&quot;A &amp;&amp; B &amp;&amp; C &amp;&amp; D &amp;&amp; \&quot;All values must be provided\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 522, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a> &amp;&amp; <a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a> &amp;&amp; <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a> &amp;&amp; <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a> &amp;&amp; <q>"All values must be provided"</q>);</td></tr>
<tr><th id="523">523</th><td></td></tr>
<tr><th id="524">524</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="76V" title='V' data-type='llvm::Value *' data-ref="76V">V</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="525">525</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="77SimplifiedInst" title='SimplifiedInst' data-type='llvm::Value *' data-ref="77SimplifiedInst">SimplifiedInst</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="526">526</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="78LHS" title='LHS' data-type='llvm::Value *' data-ref="78LHS">LHS</dfn> = <a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col9 decl" id="79RHS" title='RHS' data-type='llvm::Value *' data-ref="79RHS">RHS</dfn> = <a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="527">527</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col0 decl" id="80TopLevelOpcode" title='TopLevelOpcode' data-type='Instruction::BinaryOps' data-ref="80TopLevelOpcode">TopLevelOpcode</dfn> = <a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="528">528</th><td></td></tr>
<tr><th id="529">529</th><td>  <i>// Does "X op' Y" always equal "Y op' X"?</i></td></tr>
<tr><th id="530">530</th><td>  <em>bool</em> <dfn class="local col1 decl" id="81InnerCommutative" title='InnerCommutative' data-type='bool' data-ref="81InnerCommutative">InnerCommutative</dfn> = <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction13isCommutativeEj" title='llvm::Instruction::isCommutative' data-ref="_ZN4llvm11Instruction13isCommutativeEj">isCommutative</a>(<a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a>);</td></tr>
<tr><th id="531">531</th><td></td></tr>
<tr><th id="532">532</th><td>  <i>// Does "X op' (Y op Z)" always equal "(X op' Y) op (X op' Z)"?</i></td></tr>
<tr><th id="533">533</th><td>  <b>if</b> (<a class="tu ref" href="#_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_" title='leftDistributesOverRight' data-use='c' data-ref="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">leftDistributesOverRight</a>(<a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a>, <a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>))</td></tr>
<tr><th id="534">534</th><td>    <i>// Does the instruction have the form "(A op' B) op (A op' D)" or, in the</i></td></tr>
<tr><th id="535">535</th><td><i>    // commutative case, "(A op' B) op (C op' A)"?</i></td></tr>
<tr><th id="536">536</th><td>    <b>if</b> (<a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a> == <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a> || (<a class="local col1 ref" href="#81InnerCommutative" title='InnerCommutative' data-ref="81InnerCommutative">InnerCommutative</a> &amp;&amp; <a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a> == <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a>)) {</td></tr>
<tr><th id="537">537</th><td>      <b>if</b> (<a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a> != <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a>)</td></tr>
<tr><th id="538">538</th><td>        <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a></span>, <span class='refarg'><a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a></span>);</td></tr>
<tr><th id="539">539</th><td>      <i>// Consider forming "A op' (B op D)".</i></td></tr>
<tr><th id="540">540</th><td><i>      // If "B op D" simplifies then it can be formed with no cost.</i></td></tr>
<tr><th id="541">541</th><td>      <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>, <a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a>, <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>));</td></tr>
<tr><th id="542">542</th><td>      <i>// If "B op D" doesn't simplify then only go on if both of the existing</i></td></tr>
<tr><th id="543">543</th><td><i>      // operations "A op' B" and "C op' D" will be zapped as no longer used.</i></td></tr>
<tr><th id="544">544</th><td>      <b>if</b> (!<a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> &amp;&amp; <a class="local col8 ref" href="#78LHS" title='LHS' data-ref="78LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <a class="local col9 ref" href="#79RHS" title='RHS' data-ref="79RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="545">545</th><td>        <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>, <a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a>, <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col9 ref" href="#79RHS" title='RHS' data-ref="79RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="546">546</th><td>      <b>if</b> (<a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a>) {</td></tr>
<tr><th id="547">547</th><td>        <a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a>, <a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a>, <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a>);</td></tr>
<tr><th id="548">548</th><td>      }</td></tr>
<tr><th id="549">549</th><td>    }</td></tr>
<tr><th id="550">550</th><td></td></tr>
<tr><th id="551">551</th><td>  <i>// Does "(X op Y) op' Z" always equal "(X op' Z) op (Y op' Z)"?</i></td></tr>
<tr><th id="552">552</th><td>  <b>if</b> (!<a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a> &amp;&amp; <a class="tu ref" href="#_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_" title='rightDistributesOverLeft' data-use='c' data-ref="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_">rightDistributesOverLeft</a>(<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>, <a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a>))</td></tr>
<tr><th id="553">553</th><td>    <i>// Does the instruction have the form "(A op' B) op (C op' B)" or, in the</i></td></tr>
<tr><th id="554">554</th><td><i>    // commutative case, "(A op' B) op (B op' D)"?</i></td></tr>
<tr><th id="555">555</th><td>    <b>if</b> (<a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a> == <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a> || (<a class="local col1 ref" href="#81InnerCommutative" title='InnerCommutative' data-ref="81InnerCommutative">InnerCommutative</a> &amp;&amp; <a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a> == <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a>)) {</td></tr>
<tr><th id="556">556</th><td>      <b>if</b> (<a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a> != <a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a>)</td></tr>
<tr><th id="557">557</th><td>        <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a></span>, <span class='refarg'><a class="local col5 ref" href="#75D" title='D' data-ref="75D">D</a></span>);</td></tr>
<tr><th id="558">558</th><td>      <i>// Consider forming "(A op C) op' B".</i></td></tr>
<tr><th id="559">559</th><td><i>      // If "A op C" simplifies then it can be formed with no cost.</i></td></tr>
<tr><th id="560">560</th><td>      <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>, <a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a>, <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>));</td></tr>
<tr><th id="561">561</th><td></td></tr>
<tr><th id="562">562</th><td>      <i>// If "A op C" doesn't simplify then only go on if both of the existing</i></td></tr>
<tr><th id="563">563</th><td><i>      // operations "A op' B" and "C op' D" will be zapped as no longer used.</i></td></tr>
<tr><th id="564">564</th><td>      <b>if</b> (!<a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> &amp;&amp; <a class="local col8 ref" href="#78LHS" title='LHS' data-ref="78LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <a class="local col9 ref" href="#79RHS" title='RHS' data-ref="79RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="565">565</th><td>        <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a>, <a class="local col2 ref" href="#72A" title='A' data-ref="72A">A</a>, <a class="local col4 ref" href="#74C" title='C' data-ref="74C">C</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col8 ref" href="#78LHS" title='LHS' data-ref="78LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="566">566</th><td>      <b>if</b> (<a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a>) {</td></tr>
<tr><th id="567">567</th><td>        <a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a>, <a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a>, <a class="local col3 ref" href="#73B" title='B' data-ref="73B">B</a>);</td></tr>
<tr><th id="568">568</th><td>      }</td></tr>
<tr><th id="569">569</th><td>    }</td></tr>
<tr><th id="570">570</th><td></td></tr>
<tr><th id="571">571</th><td>  <b>if</b> (<a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a>) {</td></tr>
<tr><th id="572">572</th><td>    <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#119" title='NumFactor' data-ref="NumFactor">NumFactor</a>;</td></tr>
<tr><th id="573">573</th><td>    <a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>);</td></tr>
<tr><th id="574">574</th><td></td></tr>
<tr><th id="575">575</th><td>    <i>// Check if we can add NSW flag to SimplifiedInst. If so, set NSW flag.</i></td></tr>
<tr><th id="576">576</th><td><i>    // TODO: Check for NUW.</i></td></tr>
<tr><th id="577">577</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col2 decl" id="82BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="82BO"><a class="local col2 ref" href="#82BO" title='BO' data-ref="82BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a>)) {</td></tr>
<tr><th id="578">578</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a>&gt;(<a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a>)) {</td></tr>
<tr><th id="579">579</th><td>        <em>bool</em> <dfn class="local col3 decl" id="83HasNSW" title='HasNSW' data-type='bool' data-ref="83HasNSW">HasNSW</dfn> = <b>false</b>;</td></tr>
<tr><th id="580">580</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a>&gt;(&amp;<a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>))</td></tr>
<tr><th id="581">581</th><td>          <a class="local col3 ref" href="#83HasNSW" title='HasNSW' data-ref="83HasNSW">HasNSW</a> = <a class="local col0 ref" href="#70I" title='I' data-ref="70I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction15hasNoSignedWrapEv" title='llvm::Instruction::hasNoSignedWrap' data-ref="_ZNK4llvm11Instruction15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="582">582</th><td></td></tr>
<tr><th id="583">583</th><td>        <b>if</b> (<em>auto</em> *<dfn class="local col4 decl" id="84LOBO" title='LOBO' data-type='llvm::OverflowingBinaryOperator *' data-ref="84LOBO"><a class="local col4 ref" href="#84LOBO" title='LOBO' data-ref="84LOBO">LOBO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a>&gt;(<a class="local col8 ref" href="#78LHS" title='LHS' data-ref="78LHS">LHS</a>))</td></tr>
<tr><th id="584">584</th><td>          <a class="local col3 ref" href="#83HasNSW" title='HasNSW' data-ref="83HasNSW">HasNSW</a> &amp;= <a class="local col4 ref" href="#84LOBO" title='LOBO' data-ref="84LOBO">LOBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv" title='llvm::OverflowingBinaryOperator::hasNoSignedWrap' data-ref="_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="585">585</th><td></td></tr>
<tr><th id="586">586</th><td>        <b>if</b> (<em>auto</em> *<dfn class="local col5 decl" id="85ROBO" title='ROBO' data-type='llvm::OverflowingBinaryOperator *' data-ref="85ROBO"><a class="local col5 ref" href="#85ROBO" title='ROBO' data-ref="85ROBO">ROBO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::OverflowingBinaryOperator" title='llvm::OverflowingBinaryOperator' data-ref="llvm::OverflowingBinaryOperator">OverflowingBinaryOperator</a>&gt;(<a class="local col9 ref" href="#79RHS" title='RHS' data-ref="79RHS">RHS</a>))</td></tr>
<tr><th id="587">587</th><td>          <a class="local col3 ref" href="#83HasNSW" title='HasNSW' data-ref="83HasNSW">HasNSW</a> &amp;= <a class="local col5 ref" href="#85ROBO" title='ROBO' data-ref="85ROBO">ROBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv" title='llvm::OverflowingBinaryOperator::hasNoSignedWrap' data-ref="_ZNK4llvm25OverflowingBinaryOperator15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="588">588</th><td></td></tr>
<tr><th id="589">589</th><td>        <i>// We can propagate 'nsw' if we know that</i></td></tr>
<tr><th id="590">590</th><td><i>        //  %Y = mul nsw i16 %X, C</i></td></tr>
<tr><th id="591">591</th><td><i>        //  %Z = add nsw i16 %Y, %X</i></td></tr>
<tr><th id="592">592</th><td><i>        // =&gt;</i></td></tr>
<tr><th id="593">593</th><td><i>        //  %Z = mul nsw i16 %X, C+1</i></td></tr>
<tr><th id="594">594</th><td><i>        //</i></td></tr>
<tr><th id="595">595</th><td><i>        // iff C+1 isn't INT_MIN</i></td></tr>
<tr><th id="596">596</th><td>        <em>const</em> <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> *<dfn class="local col6 decl" id="86CInt" title='CInt' data-type='const llvm::APInt *' data-ref="86CInt">CInt</dfn>;</td></tr>
<tr><th id="597">597</th><td>        <b>if</b> (<a class="local col0 ref" href="#80TopLevelOpcode" title='TopLevelOpcode' data-ref="80TopLevelOpcode">TopLevelOpcode</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#147" title='llvm::Instruction::BinaryOps::Add' data-ref="llvm::Instruction::BinaryOps::Add">Add</a> &amp;&amp;</td></tr>
<tr><th id="598">598</th><td>            <a class="local col1 ref" href="#71InnerOpcode" title='InnerOpcode' data-ref="71InnerOpcode">InnerOpcode</a> == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#151" title='llvm::Instruction::BinaryOps::Mul' data-ref="llvm::Instruction::BinaryOps::Mul">Mul</a>)</td></tr>
<tr><th id="599">599</th><td>          <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col6 ref" href="#76V" title='V' data-ref="76V">V</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE" title='llvm::PatternMatch::m_APInt' data-ref="_ZN4llvm12PatternMatch7m_APIntERPKNS_5APIntE">m_APInt</a>(<span class='refarg'><a class="local col6 ref" href="#86CInt" title='CInt' data-ref="86CInt">CInt</a></span>)) &amp;&amp; !<a class="local col6 ref" href="#86CInt" title='CInt' data-ref="86CInt">CInt</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt16isMinSignedValueEv" title='llvm::APInt::isMinSignedValue' data-ref="_ZNK4llvm5APInt16isMinSignedValueEv">isMinSignedValue</a>())</td></tr>
<tr><th id="600">600</th><td>            <a class="local col2 ref" href="#82BO" title='BO' data-ref="82BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction18setHasNoSignedWrapEb" title='llvm::Instruction::setHasNoSignedWrap' data-ref="_ZN4llvm11Instruction18setHasNoSignedWrapEb">setHasNoSignedWrap</a>(<a class="local col3 ref" href="#83HasNSW" title='HasNSW' data-ref="83HasNSW">HasNSW</a>);</td></tr>
<tr><th id="601">601</th><td>      }</td></tr>
<tr><th id="602">602</th><td>    }</td></tr>
<tr><th id="603">603</th><td>  }</td></tr>
<tr><th id="604">604</th><td>  <b>return</b> <a class="local col7 ref" href="#77SimplifiedInst" title='SimplifiedInst' data-ref="77SimplifiedInst">SimplifiedInst</a>;</td></tr>
<tr><th id="605">605</th><td>}</td></tr>
<tr><th id="606">606</th><td></td></tr>
<tr><th id="607">607</th><td><i class="doc">/// This tries to simplify binary operations which some other binary operation</i></td></tr>
<tr><th id="608">608</th><td><i class="doc">/// distributes over either by factorizing out common terms</i></td></tr>
<tr><th id="609">609</th><td><i class="doc">/// (eg "(A*B)+(A*C)" -&gt; "A*(B+C)") or expanding out if this results in</i></td></tr>
<tr><th id="610">610</th><td><i class="doc">/// simplifications (eg: "A &amp; (B | C) -&gt; (A&amp;B) | (A&amp;C)" if this is a win).</i></td></tr>
<tr><th id="611">611</th><td><i class="doc">/// Returns the simplified value, or null if it didn't simplify.</i></td></tr>
<tr><th id="612">612</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner29SimplifyUsingDistributiveLawsERNS_14BinaryOperatorE" title='llvm::InstCombiner::SimplifyUsingDistributiveLaws' data-ref="_ZN4llvm12InstCombiner29SimplifyUsingDistributiveLawsERNS_14BinaryOperatorE">SimplifyUsingDistributiveLaws</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col7 decl" id="87I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="87I">I</dfn>) {</td></tr>
<tr><th id="613">613</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="88LHS" title='LHS' data-type='llvm::Value *' data-ref="88LHS">LHS</dfn> = <a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col9 decl" id="89RHS" title='RHS' data-type='llvm::Value *' data-ref="89RHS">RHS</dfn> = <a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="614">614</th><td>  <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col0 decl" id="90Op0" title='Op0' data-type='llvm::BinaryOperator *' data-ref="90Op0">Op0</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col8 ref" href="#88LHS" title='LHS' data-ref="88LHS">LHS</a>);</td></tr>
<tr><th id="615">615</th><td>  <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col1 decl" id="91Op1" title='Op1' data-type='llvm::BinaryOperator *' data-ref="91Op1">Op1</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col9 ref" href="#89RHS" title='RHS' data-ref="89RHS">RHS</a>);</td></tr>
<tr><th id="616">616</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col2 decl" id="92TopLevelOpcode" title='TopLevelOpcode' data-type='Instruction::BinaryOps' data-ref="92TopLevelOpcode">TopLevelOpcode</dfn> = <a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="617">617</th><td></td></tr>
<tr><th id="618">618</th><td>  {</td></tr>
<tr><th id="619">619</th><td>    <i>// Factorization.</i></td></tr>
<tr><th id="620">620</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="93A" title='A' data-type='llvm::Value *' data-ref="93A">A</dfn>, *<dfn class="local col4 decl" id="94B" title='B' data-type='llvm::Value *' data-ref="94B">B</dfn>, *<dfn class="local col5 decl" id="95C" title='C' data-type='llvm::Value *' data-ref="95C">C</dfn>, *<dfn class="local col6 decl" id="96D" title='D' data-type='llvm::Value *' data-ref="96D">D</dfn>;</td></tr>
<tr><th id="621">621</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col7 decl" id="97LHSOpcode" title='LHSOpcode' data-type='Instruction::BinaryOps' data-ref="97LHSOpcode">LHSOpcode</dfn>, <dfn class="local col8 decl" id="98RHSOpcode" title='RHSOpcode' data-type='Instruction::BinaryOps' data-ref="98RHSOpcode">RHSOpcode</dfn>;</td></tr>
<tr><th id="622">622</th><td>    <b>if</b> (<a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>)</td></tr>
<tr><th id="623">623</th><td>      <a class="local col7 ref" href="#97LHSOpcode" title='LHSOpcode' data-ref="97LHSOpcode">LHSOpcode</a> = <a class="tu ref" href="#_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_" title='getBinOpsForFactorization' data-use='c' data-ref="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">getBinOpsForFactorization</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>, <span class='refarg'><a class="local col3 ref" href="#93A" title='A' data-ref="93A">A</a></span>, <span class='refarg'><a class="local col4 ref" href="#94B" title='B' data-ref="94B">B</a></span>);</td></tr>
<tr><th id="624">624</th><td>    <b>if</b> (<a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>)</td></tr>
<tr><th id="625">625</th><td>      <a class="local col8 ref" href="#98RHSOpcode" title='RHSOpcode' data-ref="98RHSOpcode">RHSOpcode</a> = <a class="tu ref" href="#_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_" title='getBinOpsForFactorization' data-use='c' data-ref="_ZL25getBinOpsForFactorizationN4llvm11Instruction9BinaryOpsEPNS_14BinaryOperatorERPNS_5ValueES6_">getBinOpsForFactorization</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>, <span class='refarg'><a class="local col5 ref" href="#95C" title='C' data-ref="95C">C</a></span>, <span class='refarg'><a class="local col6 ref" href="#96D" title='D' data-ref="96D">D</a></span>);</td></tr>
<tr><th id="626">626</th><td></td></tr>
<tr><th id="627">627</th><td>    <i>// The instruction has the form "(A op' B) op (C op' D)".  Try to factorize</i></td></tr>
<tr><th id="628">628</th><td><i>    // a common term.</i></td></tr>
<tr><th id="629">629</th><td>    <b>if</b> (<a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a> &amp;&amp; <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a> &amp;&amp; <a class="local col7 ref" href="#97LHSOpcode" title='LHSOpcode' data-ref="97LHSOpcode">LHSOpcode</a> == <a class="local col8 ref" href="#98RHSOpcode" title='RHSOpcode' data-ref="98RHSOpcode">RHSOpcode</a>)</td></tr>
<tr><th id="630">630</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="99V" title='V' data-type='llvm::Value *' data-ref="99V"><a class="local col9 ref" href="#99V" title='V' data-ref="99V">V</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_" title='llvm::InstCombiner::tryFactorization' data-ref="_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_">tryFactorization</a>(<span class='refarg'><a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a></span>, <a class="local col7 ref" href="#97LHSOpcode" title='LHSOpcode' data-ref="97LHSOpcode">LHSOpcode</a>, <a class="local col3 ref" href="#93A" title='A' data-ref="93A">A</a>, <a class="local col4 ref" href="#94B" title='B' data-ref="94B">B</a>, <a class="local col5 ref" href="#95C" title='C' data-ref="95C">C</a>, <a class="local col6 ref" href="#96D" title='D' data-ref="96D">D</a>))</td></tr>
<tr><th id="631">631</th><td>        <b>return</b> <a class="local col9 ref" href="#99V" title='V' data-ref="99V">V</a>;</td></tr>
<tr><th id="632">632</th><td></td></tr>
<tr><th id="633">633</th><td>    <i>// The instruction has the form "(A op' B) op (C)".  Try to factorize common</i></td></tr>
<tr><th id="634">634</th><td><i>    // term.</i></td></tr>
<tr><th id="635">635</th><td>    <b>if</b> (<a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>)</td></tr>
<tr><th id="636">636</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="100Ident" title='Ident' data-type='llvm::Value *' data-ref="100Ident"><a class="local col0 ref" href="#100Ident" title='Ident' data-ref="100Ident">Ident</a></dfn> = <a class="tu ref" href="#_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE" title='getIdentityValue' data-use='c' data-ref="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE">getIdentityValue</a>(<a class="local col7 ref" href="#97LHSOpcode" title='LHSOpcode' data-ref="97LHSOpcode">LHSOpcode</a>, <a class="local col9 ref" href="#89RHS" title='RHS' data-ref="89RHS">RHS</a>))</td></tr>
<tr><th id="637">637</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="101V" title='V' data-type='llvm::Value *' data-ref="101V"><a class="local col1 ref" href="#101V" title='V' data-ref="101V">V</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_" title='llvm::InstCombiner::tryFactorization' data-ref="_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_">tryFactorization</a>(<span class='refarg'><a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a></span>, <a class="local col7 ref" href="#97LHSOpcode" title='LHSOpcode' data-ref="97LHSOpcode">LHSOpcode</a>, <a class="local col3 ref" href="#93A" title='A' data-ref="93A">A</a>, <a class="local col4 ref" href="#94B" title='B' data-ref="94B">B</a>, <a class="local col9 ref" href="#89RHS" title='RHS' data-ref="89RHS">RHS</a>, <a class="local col0 ref" href="#100Ident" title='Ident' data-ref="100Ident">Ident</a>))</td></tr>
<tr><th id="638">638</th><td>          <b>return</b> <a class="local col1 ref" href="#101V" title='V' data-ref="101V">V</a>;</td></tr>
<tr><th id="639">639</th><td></td></tr>
<tr><th id="640">640</th><td>    <i>// The instruction has the form "(B) op (C op' D)".  Try to factorize common</i></td></tr>
<tr><th id="641">641</th><td><i>    // term.</i></td></tr>
<tr><th id="642">642</th><td>    <b>if</b> (<a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>)</td></tr>
<tr><th id="643">643</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="102Ident" title='Ident' data-type='llvm::Value *' data-ref="102Ident"><a class="local col2 ref" href="#102Ident" title='Ident' data-ref="102Ident">Ident</a></dfn> = <a class="tu ref" href="#_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE" title='getIdentityValue' data-use='c' data-ref="_ZL16getIdentityValueN4llvm11Instruction9BinaryOpsEPNS_5ValueE">getIdentityValue</a>(<a class="local col8 ref" href="#98RHSOpcode" title='RHSOpcode' data-ref="98RHSOpcode">RHSOpcode</a>, <a class="local col8 ref" href="#88LHS" title='LHS' data-ref="88LHS">LHS</a>))</td></tr>
<tr><th id="644">644</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="103V" title='V' data-type='llvm::Value *' data-ref="103V"><a class="local col3 ref" href="#103V" title='V' data-ref="103V">V</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_" title='llvm::InstCombiner::tryFactorization' data-ref="_ZN4llvm12InstCombiner16tryFactorizationERNS_14BinaryOperatorENS_11Instruction9BinaryOpsEPNS_5ValueES6_S6_S6_">tryFactorization</a>(<span class='refarg'><a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a></span>, <a class="local col8 ref" href="#98RHSOpcode" title='RHSOpcode' data-ref="98RHSOpcode">RHSOpcode</a>, <a class="local col8 ref" href="#88LHS" title='LHS' data-ref="88LHS">LHS</a>, <a class="local col2 ref" href="#102Ident" title='Ident' data-ref="102Ident">Ident</a>, <a class="local col5 ref" href="#95C" title='C' data-ref="95C">C</a>, <a class="local col6 ref" href="#96D" title='D' data-ref="96D">D</a>))</td></tr>
<tr><th id="645">645</th><td>          <b>return</b> <a class="local col3 ref" href="#103V" title='V' data-ref="103V">V</a>;</td></tr>
<tr><th id="646">646</th><td>  }</td></tr>
<tr><th id="647">647</th><td></td></tr>
<tr><th id="648">648</th><td>  <i>// Expansion.</i></td></tr>
<tr><th id="649">649</th><td>  <b>if</b> (<a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a> &amp;&amp; <a class="tu ref" href="#_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_" title='rightDistributesOverLeft' data-use='c' data-ref="_ZL24rightDistributesOverLeftN4llvm11Instruction9BinaryOpsES1_">rightDistributesOverLeft</a>(<a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>)) {</td></tr>
<tr><th id="650">650</th><td>    <i>// The instruction has the form "(A op' B) op C".  See if expanding it out</i></td></tr>
<tr><th id="651">651</th><td><i>    // to "(A op C) op' (B op C)" results in simplifications.</i></td></tr>
<tr><th id="652">652</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="104A" title='A' data-type='llvm::Value *' data-ref="104A">A</dfn> = <a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col5 decl" id="105B" title='B' data-type='llvm::Value *' data-ref="105B">B</dfn> = <a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>), *<dfn class="local col6 decl" id="106C" title='C' data-type='llvm::Value *' data-ref="106C">C</dfn> = <a class="local col9 ref" href="#89RHS" title='RHS' data-ref="89RHS">RHS</a>;</td></tr>
<tr><th id="653">653</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col7 decl" id="107InnerOpcode" title='InnerOpcode' data-type='Instruction::BinaryOps' data-ref="107InnerOpcode">InnerOpcode</dfn> = <a class="local col0 ref" href="#90Op0" title='Op0' data-ref="90Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(); <i>// op'</i></td></tr>
<tr><th id="654">654</th><td></td></tr>
<tr><th id="655">655</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="108L" title='L' data-type='llvm::Value *' data-ref="108L">L</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col4 ref" href="#104A" title='A' data-ref="104A">A</a>, <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>));</td></tr>
<tr><th id="656">656</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="109R" title='R' data-type='llvm::Value *' data-ref="109R">R</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col5 ref" href="#105B" title='B' data-ref="105B">B</a>, <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>));</td></tr>
<tr><th id="657">657</th><td></td></tr>
<tr><th id="658">658</th><td>    <i>// Do "A op C" and "B op C" both simplify?</i></td></tr>
<tr><th id="659">659</th><td>    <b>if</b> (<a class="local col8 ref" href="#108L" title='L' data-ref="108L">L</a> &amp;&amp; <a class="local col9 ref" href="#109R" title='R' data-ref="109R">R</a>) {</td></tr>
<tr><th id="660">660</th><td>      <i>// They do! Return "L op' R".</i></td></tr>
<tr><th id="661">661</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="662">662</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col7 ref" href="#107InnerOpcode" title='InnerOpcode' data-ref="107InnerOpcode">InnerOpcode</a>, <a class="local col8 ref" href="#108L" title='L' data-ref="108L">L</a>, <a class="local col9 ref" href="#109R" title='R' data-ref="109R">R</a>);</td></tr>
<tr><th id="663">663</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="664">664</th><td>      <b>return</b> <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>;</td></tr>
<tr><th id="665">665</th><td>    }</td></tr>
<tr><th id="666">666</th><td></td></tr>
<tr><th id="667">667</th><td>    <i>// Does "A op C" simplify to the identity value for the inner opcode?</i></td></tr>
<tr><th id="668">668</th><td>    <b>if</b> (<a class="local col8 ref" href="#108L" title='L' data-ref="108L">L</a> &amp;&amp; <a class="local col8 ref" href="#108L" title='L' data-ref="108L">L</a> == <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb" title='llvm::ConstantExpr::getBinOpIdentity' data-ref="_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb">getBinOpIdentity</a>(<a class="local col7 ref" href="#107InnerOpcode" title='InnerOpcode' data-ref="107InnerOpcode">InnerOpcode</a>, <a class="local col8 ref" href="#108L" title='L' data-ref="108L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())) {</td></tr>
<tr><th id="669">669</th><td>      <i>// They do! Return "B op C".</i></td></tr>
<tr><th id="670">670</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="671">671</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col5 ref" href="#105B" title='B' data-ref="105B">B</a>, <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>);</td></tr>
<tr><th id="672">672</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="673">673</th><td>      <b>return</b> <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>;</td></tr>
<tr><th id="674">674</th><td>    }</td></tr>
<tr><th id="675">675</th><td></td></tr>
<tr><th id="676">676</th><td>    <i>// Does "B op C" simplify to the identity value for the inner opcode?</i></td></tr>
<tr><th id="677">677</th><td>    <b>if</b> (<a class="local col9 ref" href="#109R" title='R' data-ref="109R">R</a> &amp;&amp; <a class="local col9 ref" href="#109R" title='R' data-ref="109R">R</a> == <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb" title='llvm::ConstantExpr::getBinOpIdentity' data-ref="_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb">getBinOpIdentity</a>(<a class="local col7 ref" href="#107InnerOpcode" title='InnerOpcode' data-ref="107InnerOpcode">InnerOpcode</a>, <a class="local col9 ref" href="#109R" title='R' data-ref="109R">R</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())) {</td></tr>
<tr><th id="678">678</th><td>      <i>// They do! Return "A op C".</i></td></tr>
<tr><th id="679">679</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="680">680</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col4 ref" href="#104A" title='A' data-ref="104A">A</a>, <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>);</td></tr>
<tr><th id="681">681</th><td>      <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="682">682</th><td>      <b>return</b> <a class="local col6 ref" href="#106C" title='C' data-ref="106C">C</a>;</td></tr>
<tr><th id="683">683</th><td>    }</td></tr>
<tr><th id="684">684</th><td>  }</td></tr>
<tr><th id="685">685</th><td></td></tr>
<tr><th id="686">686</th><td>  <b>if</b> (<a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a> &amp;&amp; <a class="tu ref" href="#_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_" title='leftDistributesOverRight' data-use='c' data-ref="_ZL24leftDistributesOverRightN4llvm11Instruction9BinaryOpsES1_">leftDistributesOverRight</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>())) {</td></tr>
<tr><th id="687">687</th><td>    <i>// The instruction has the form "A op (B op' C)".  See if expanding it out</i></td></tr>
<tr><th id="688">688</th><td><i>    // to "(A op B) op' (A op C)" results in simplifications.</i></td></tr>
<tr><th id="689">689</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="110A" title='A' data-type='llvm::Value *' data-ref="110A">A</dfn> = <a class="local col8 ref" href="#88LHS" title='LHS' data-ref="88LHS">LHS</a>, *<dfn class="local col1 decl" id="111B" title='B' data-type='llvm::Value *' data-ref="111B">B</dfn> = <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col2 decl" id="112C" title='C' data-type='llvm::Value *' data-ref="112C">C</dfn> = <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="690">690</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col3 decl" id="113InnerOpcode" title='InnerOpcode' data-type='Instruction::BinaryOps' data-ref="113InnerOpcode">InnerOpcode</dfn> = <a class="local col1 ref" href="#91Op1" title='Op1' data-ref="91Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(); <i>// op'</i></td></tr>
<tr><th id="691">691</th><td></td></tr>
<tr><th id="692">692</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="114L" title='L' data-type='llvm::Value *' data-ref="114L">L</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>, <a class="local col1 ref" href="#111B" title='B' data-ref="111B">B</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>));</td></tr>
<tr><th id="693">693</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="115R" title='R' data-type='llvm::Value *' data-ref="115R">R</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>, <a class="local col2 ref" href="#112C" title='C' data-ref="112C">C</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>));</td></tr>
<tr><th id="694">694</th><td></td></tr>
<tr><th id="695">695</th><td>    <i>// Do "A op B" and "A op C" both simplify?</i></td></tr>
<tr><th id="696">696</th><td>    <b>if</b> (<a class="local col4 ref" href="#114L" title='L' data-ref="114L">L</a> &amp;&amp; <a class="local col5 ref" href="#115R" title='R' data-ref="115R">R</a>) {</td></tr>
<tr><th id="697">697</th><td>      <i>// They do! Return "L op' R".</i></td></tr>
<tr><th id="698">698</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="699">699</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col3 ref" href="#113InnerOpcode" title='InnerOpcode' data-ref="113InnerOpcode">InnerOpcode</a>, <a class="local col4 ref" href="#114L" title='L' data-ref="114L">L</a>, <a class="local col5 ref" href="#115R" title='R' data-ref="115R">R</a>);</td></tr>
<tr><th id="700">700</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="701">701</th><td>      <b>return</b> <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>;</td></tr>
<tr><th id="702">702</th><td>    }</td></tr>
<tr><th id="703">703</th><td></td></tr>
<tr><th id="704">704</th><td>    <i>// Does "A op B" simplify to the identity value for the inner opcode?</i></td></tr>
<tr><th id="705">705</th><td>    <b>if</b> (<a class="local col4 ref" href="#114L" title='L' data-ref="114L">L</a> &amp;&amp; <a class="local col4 ref" href="#114L" title='L' data-ref="114L">L</a> == <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb" title='llvm::ConstantExpr::getBinOpIdentity' data-ref="_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb">getBinOpIdentity</a>(<a class="local col3 ref" href="#113InnerOpcode" title='InnerOpcode' data-ref="113InnerOpcode">InnerOpcode</a>, <a class="local col4 ref" href="#114L" title='L' data-ref="114L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())) {</td></tr>
<tr><th id="706">706</th><td>      <i>// They do! Return "A op C".</i></td></tr>
<tr><th id="707">707</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="708">708</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>, <a class="local col2 ref" href="#112C" title='C' data-ref="112C">C</a>);</td></tr>
<tr><th id="709">709</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="710">710</th><td>      <b>return</b> <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>;</td></tr>
<tr><th id="711">711</th><td>    }</td></tr>
<tr><th id="712">712</th><td></td></tr>
<tr><th id="713">713</th><td>    <i>// Does "A op C" simplify to the identity value for the inner opcode?</i></td></tr>
<tr><th id="714">714</th><td>    <b>if</b> (<a class="local col5 ref" href="#115R" title='R' data-ref="115R">R</a> &amp;&amp; <a class="local col5 ref" href="#115R" title='R' data-ref="115R">R</a> == <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb" title='llvm::ConstantExpr::getBinOpIdentity' data-ref="_ZN4llvm12ConstantExpr16getBinOpIdentityEjPNS_4TypeEb">getBinOpIdentity</a>(<a class="local col3 ref" href="#113InnerOpcode" title='InnerOpcode' data-ref="113InnerOpcode">InnerOpcode</a>, <a class="local col5 ref" href="#115R" title='R' data-ref="115R">R</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())) {</td></tr>
<tr><th id="715">715</th><td>      <i>// They do! Return "A op B".</i></td></tr>
<tr><th id="716">716</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#118" title='NumExpand' data-ref="NumExpand">NumExpand</a>;</td></tr>
<tr><th id="717">717</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col2 ref" href="#92TopLevelOpcode" title='TopLevelOpcode' data-ref="92TopLevelOpcode">TopLevelOpcode</a>, <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>, <a class="local col1 ref" href="#111B" title='B' data-ref="111B">B</a>);</td></tr>
<tr><th id="718">718</th><td>      <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a>);</td></tr>
<tr><th id="719">719</th><td>      <b>return</b> <a class="local col0 ref" href="#110A" title='A' data-ref="110A">A</a>;</td></tr>
<tr><th id="720">720</th><td>    }</td></tr>
<tr><th id="721">721</th><td>  }</td></tr>
<tr><th id="722">722</th><td></td></tr>
<tr><th id="723">723</th><td>  <b>return</b> <a class="member" href="#_ZN4llvm12InstCombiner30SimplifySelectsFeedingBinaryOpERNS_14BinaryOperatorEPNS_5ValueES4_" title='llvm::InstCombiner::SimplifySelectsFeedingBinaryOp' data-ref="_ZN4llvm12InstCombiner30SimplifySelectsFeedingBinaryOpERNS_14BinaryOperatorEPNS_5ValueES4_">SimplifySelectsFeedingBinaryOp</a>(<span class='refarg'><a class="local col7 ref" href="#87I" title='I' data-ref="87I">I</a></span>, <a class="local col8 ref" href="#88LHS" title='LHS' data-ref="88LHS">LHS</a>, <a class="local col9 ref" href="#89RHS" title='RHS' data-ref="89RHS">RHS</a>);</td></tr>
<tr><th id="724">724</th><td>}</td></tr>
<tr><th id="725">725</th><td></td></tr>
<tr><th id="726">726</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner30SimplifySelectsFeedingBinaryOpERNS_14BinaryOperatorEPNS_5ValueES4_" title='llvm::InstCombiner::SimplifySelectsFeedingBinaryOp' data-ref="_ZN4llvm12InstCombiner30SimplifySelectsFeedingBinaryOpERNS_14BinaryOperatorEPNS_5ValueES4_">SimplifySelectsFeedingBinaryOp</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col6 decl" id="116I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="116I">I</dfn>,</td></tr>
<tr><th id="727">727</th><td>                                                    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="117LHS" title='LHS' data-type='llvm::Value *' data-ref="117LHS">LHS</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="118RHS" title='RHS' data-type='llvm::Value *' data-ref="118RHS">RHS</dfn>) {</td></tr>
<tr><th id="728">728</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col9 decl" id="119Opcode" title='Opcode' data-type='Instruction::BinaryOps' data-ref="119Opcode">Opcode</dfn> = <a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="729">729</th><td>  <i>// (op (select (a, b, c)), (select (a, d, e))) -&gt; (select (a, (op b, d), (op</i></td></tr>
<tr><th id="730">730</th><td><i>  // c, e)))</i></td></tr>
<tr><th id="731">731</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="120A" title='A' data-type='llvm::Value *' data-ref="120A">A</dfn>, *<dfn class="local col1 decl" id="121B" title='B' data-type='llvm::Value *' data-ref="121B">B</dfn>, *<dfn class="local col2 decl" id="122C" title='C' data-type='llvm::Value *' data-ref="122C">C</dfn>, *<dfn class="local col3 decl" id="123D" title='D' data-type='llvm::Value *' data-ref="123D">D</dfn>, *<dfn class="local col4 decl" id="124E" title='E' data-type='llvm::Value *' data-ref="124E">E</dfn>;</td></tr>
<tr><th id="732">732</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="125SI" title='SI' data-type='llvm::Value *' data-ref="125SI">SI</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="733">733</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col7 ref" href="#117LHS" title='LHS' data-ref="117LHS">LHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_SelectERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_Select' data-ref="_ZN4llvm12PatternMatch8m_SelectERKT_RKT0_RKT1_">m_Select</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col0 ref" href="#120A" title='A' data-ref="120A">A</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col1 ref" href="#121B" title='B' data-ref="121B">B</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col2 ref" href="#122C" title='C' data-ref="122C">C</a></span>))) &amp;&amp;</td></tr>
<tr><th id="734">734</th><td>      <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col8 ref" href="#118RHS" title='RHS' data-ref="118RHS">RHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_SelectERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_Select' data-ref="_ZN4llvm12PatternMatch8m_SelectERKT_RKT0_RKT1_">m_Select</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col0 ref" href="#120A" title='A' data-ref="120A">A</a>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col3 ref" href="#123D" title='D' data-ref="123D">D</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col4 ref" href="#124E" title='E' data-ref="124E">E</a></span>)))) {</td></tr>
<tr><th id="735">735</th><td>    <em>bool</em> <dfn class="local col6 decl" id="126SelectsHaveOneUse" title='SelectsHaveOneUse' data-type='bool' data-ref="126SelectsHaveOneUse">SelectsHaveOneUse</dfn> = <a class="local col7 ref" href="#117LHS" title='LHS' data-ref="117LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <a class="local col8 ref" href="#118RHS" title='RHS' data-ref="118RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>();</td></tr>
<tr><th id="736">736</th><td>    <a class="typedef" href="InstCombineInternal.h.html#llvm::InstCombiner::BuilderTy" title='llvm::InstCombiner::BuilderTy' data-type='IRBuilder&lt;llvm::TargetFolder, llvm::IRBuilderCallbackInserter&gt;' data-ref="llvm::InstCombiner::BuilderTy">BuilderTy</a>::<a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilderBase::FastMathFlagGuard" title='llvm::IRBuilderBase::FastMathFlagGuard' data-ref="llvm::IRBuilderBase::FastMathFlagGuard">FastMathFlagGuard</a> <dfn class="local col7 decl" id="127Guard" title='Guard' data-type='BuilderTy::FastMathFlagGuard' data-ref="127Guard">Guard</dfn><a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase17FastMathFlagGuardC1ERS0_" title='llvm::IRBuilderBase::FastMathFlagGuard::FastMathFlagGuard' data-ref="_ZN4llvm13IRBuilderBase17FastMathFlagGuardC1ERS0_">(</a><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>);</td></tr>
<tr><th id="737">737</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a>&gt;(&amp;<a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>))</td></tr>
<tr><th id="738">738</th><td>      <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase16setFastMathFlagsENS_13FastMathFlagsE" title='llvm::IRBuilderBase::setFastMathFlags' data-ref="_ZN4llvm13IRBuilderBase16setFastMathFlagsENS_13FastMathFlagsE">setFastMathFlags</a>(<a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16getFastMathFlagsEv" title='llvm::Instruction::getFastMathFlags' data-ref="_ZNK4llvm11Instruction16getFastMathFlagsEv">getFastMathFlags</a>());</td></tr>
<tr><th id="739">739</th><td></td></tr>
<tr><th id="740">740</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="128V1" title='V1' data-type='llvm::Value *' data-ref="128V1">V1</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col9 ref" href="#119Opcode" title='Opcode' data-ref="119Opcode">Opcode</a>, <a class="local col2 ref" href="#122C" title='C' data-ref="122C">C</a>, <a class="local col4 ref" href="#124E" title='E' data-ref="124E">E</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>));</td></tr>
<tr><th id="741">741</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="129V2" title='V2' data-type='llvm::Value *' data-ref="129V2">V2</dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE" title='llvm::SimplifyBinOp' data-ref="_ZN4llvm13SimplifyBinOpEjPNS_5ValueES1_RKNS_13SimplifyQueryE">SimplifyBinOp</a>(<a class="local col9 ref" href="#119Opcode" title='Opcode' data-ref="119Opcode">Opcode</a>, <a class="local col1 ref" href="#121B" title='B' data-ref="121B">B</a>, <a class="local col3 ref" href="#123D" title='D' data-ref="123D">D</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>));</td></tr>
<tr><th id="742">742</th><td>    <b>if</b> (<a class="local col8 ref" href="#128V1" title='V1' data-ref="128V1">V1</a> &amp;&amp; <a class="local col9 ref" href="#129V2" title='V2' data-ref="129V2">V2</a>)</td></tr>
<tr><th id="743">743</th><td>      <a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col0 ref" href="#120A" title='A' data-ref="120A">A</a>, <a class="local col9 ref" href="#129V2" title='V2' data-ref="129V2">V2</a>, <a class="local col8 ref" href="#128V1" title='V1' data-ref="128V1">V1</a>);</td></tr>
<tr><th id="744">744</th><td>    <b>else</b> <b>if</b> (<a class="local col9 ref" href="#129V2" title='V2' data-ref="129V2">V2</a> &amp;&amp; <a class="local col6 ref" href="#126SelectsHaveOneUse" title='SelectsHaveOneUse' data-ref="126SelectsHaveOneUse">SelectsHaveOneUse</a>)</td></tr>
<tr><th id="745">745</th><td>      <a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col0 ref" href="#120A" title='A' data-ref="120A">A</a>, <a class="local col9 ref" href="#129V2" title='V2' data-ref="129V2">V2</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col9 ref" href="#119Opcode" title='Opcode' data-ref="119Opcode">Opcode</a>, <a class="local col2 ref" href="#122C" title='C' data-ref="122C">C</a>, <a class="local col4 ref" href="#124E" title='E' data-ref="124E">E</a>));</td></tr>
<tr><th id="746">746</th><td>    <b>else</b> <b>if</b> (<a class="local col8 ref" href="#128V1" title='V1' data-ref="128V1">V1</a> &amp;&amp; <a class="local col6 ref" href="#126SelectsHaveOneUse" title='SelectsHaveOneUse' data-ref="126SelectsHaveOneUse">SelectsHaveOneUse</a>)</td></tr>
<tr><th id="747">747</th><td>      <a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col0 ref" href="#120A" title='A' data-ref="120A">A</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col9 ref" href="#119Opcode" title='Opcode' data-ref="119Opcode">Opcode</a>, <a class="local col1 ref" href="#121B" title='B' data-ref="121B">B</a>, <a class="local col3 ref" href="#123D" title='D' data-ref="123D">D</a>), <a class="local col8 ref" href="#128V1" title='V1' data-ref="128V1">V1</a>);</td></tr>
<tr><th id="748">748</th><td></td></tr>
<tr><th id="749">749</th><td>    <b>if</b> (<a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a>)</td></tr>
<tr><th id="750">750</th><td>      <a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col6 ref" href="#116I" title='I' data-ref="116I">I</a>);</td></tr>
<tr><th id="751">751</th><td>  }</td></tr>
<tr><th id="752">752</th><td></td></tr>
<tr><th id="753">753</th><td>  <b>return</b> <a class="local col5 ref" href="#125SI" title='SI' data-ref="125SI">SI</a>;</td></tr>
<tr><th id="754">754</th><td>}</td></tr>
<tr><th id="755">755</th><td></td></tr>
<tr><th id="756">756</th><td><i class="doc">/// Given a 'sub' instruction, return the RHS of the instruction if the LHS is a</i></td></tr>
<tr><th id="757">757</th><td><i class="doc">/// constant zero (which is the 'negate' form).</i></td></tr>
<tr><th id="758">758</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZNK4llvm12InstCombiner14dyn_castNegValEPNS_5ValueE" title='llvm::InstCombiner::dyn_castNegVal' data-ref="_ZNK4llvm12InstCombiner14dyn_castNegValEPNS_5ValueE">dyn_castNegVal</dfn>(<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="130V" title='V' data-type='llvm::Value *' data-ref="130V">V</dfn>) <em>const</em> {</td></tr>
<tr><th id="759">759</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="131NegV" title='NegV' data-type='llvm::Value *' data-ref="131NegV">NegV</dfn>;</td></tr>
<tr><th id="760">760</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#130V" title='V' data-ref="130V">V</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_NegERKT_" title='llvm::PatternMatch::m_Neg' data-ref="_ZN4llvm12PatternMatch5m_NegERKT_">m_Neg</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col1 ref" href="#131NegV" title='NegV' data-ref="131NegV">NegV</a></span>))))</td></tr>
<tr><th id="761">761</th><td>    <b>return</b> <a class="local col1 ref" href="#131NegV" title='NegV' data-ref="131NegV">NegV</a>;</td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td>  <i>// Constants can be considered to be negated values if they can be folded.</i></td></tr>
<tr><th id="764">764</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col2 decl" id="132C" title='C' data-type='llvm::ConstantInt *' data-ref="132C"><a class="local col2 ref" href="#132C" title='C' data-ref="132C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col0 ref" href="#130V" title='V' data-ref="130V">V</a>))</td></tr>
<tr><th id="765">765</th><td>    <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb" title='llvm::ConstantExpr::getNeg' data-ref="_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb">getNeg</a>(<a class="local col2 ref" href="#132C" title='C' data-ref="132C">C</a>);</td></tr>
<tr><th id="766">766</th><td></td></tr>
<tr><th id="767">767</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantDataVector" title='llvm::ConstantDataVector' data-ref="llvm::ConstantDataVector">ConstantDataVector</a> *<dfn class="local col3 decl" id="133C" title='C' data-type='llvm::ConstantDataVector *' data-ref="133C"><a class="local col3 ref" href="#133C" title='C' data-ref="133C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantDataVector" title='llvm::ConstantDataVector' data-ref="llvm::ConstantDataVector">ConstantDataVector</a>&gt;(<a class="local col0 ref" href="#130V" title='V' data-ref="130V">V</a>))</td></tr>
<tr><th id="768">768</th><td>    <b>if</b> (<a class="local col3 ref" href="#133C" title='C' data-ref="133C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm18ConstantDataVector7getTypeEv" title='llvm::ConstantDataVector::getType' data-ref="_ZNK4llvm18ConstantDataVector7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>())</td></tr>
<tr><th id="769">769</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb" title='llvm::ConstantExpr::getNeg' data-ref="_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb">getNeg</a>(<a class="local col3 ref" href="#133C" title='C' data-ref="133C">C</a>);</td></tr>
<tr><th id="770">770</th><td></td></tr>
<tr><th id="771">771</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantVector" title='llvm::ConstantVector' data-ref="llvm::ConstantVector">ConstantVector</a> *<dfn class="local col4 decl" id="134CV" title='CV' data-type='llvm::ConstantVector *' data-ref="134CV"><a class="local col4 ref" href="#134CV" title='CV' data-ref="134CV">CV</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantVector" title='llvm::ConstantVector' data-ref="llvm::ConstantVector">ConstantVector</a>&gt;(<a class="local col0 ref" href="#130V" title='V' data-ref="130V">V</a>)) {</td></tr>
<tr><th id="772">772</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col5 decl" id="135i" title='i' data-type='unsigned int' data-ref="135i">i</dfn> = <var>0</var>, <dfn class="local col6 decl" id="136e" title='e' data-type='unsigned int' data-ref="136e">e</dfn> = <a class="local col4 ref" href="#134CV" title='CV' data-ref="134CV">CV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#395" title='llvm::ConstantAggregate::getNumOperands' data-ref="_ZNK4llvm17ConstantAggregate14getNumOperandsEv">getNumOperands</a>(); <a class="local col5 ref" href="#135i" title='i' data-ref="135i">i</a> != <a class="local col6 ref" href="#136e" title='e' data-ref="136e">e</a>; ++<a class="local col5 ref" href="#135i" title='i' data-ref="135i">i</a>) {</td></tr>
<tr><th id="773">773</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col7 decl" id="137Elt" title='Elt' data-type='llvm::Constant *' data-ref="137Elt">Elt</dfn> = <a class="local col4 ref" href="#134CV" title='CV' data-ref="134CV">CV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant19getAggregateElementEj" title='llvm::Constant::getAggregateElement' data-ref="_ZNK4llvm8Constant19getAggregateElementEj">getAggregateElement</a>(<a class="local col5 ref" href="#135i" title='i' data-ref="135i">i</a>);</td></tr>
<tr><th id="774">774</th><td>      <b>if</b> (!<a class="local col7 ref" href="#137Elt" title='Elt' data-ref="137Elt">Elt</a>)</td></tr>
<tr><th id="775">775</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="776">776</th><td></td></tr>
<tr><th id="777">777</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>&gt;(<a class="local col7 ref" href="#137Elt" title='Elt' data-ref="137Elt">Elt</a>))</td></tr>
<tr><th id="778">778</th><td>        <b>continue</b>;</td></tr>
<tr><th id="779">779</th><td></td></tr>
<tr><th id="780">780</th><td>      <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col7 ref" href="#137Elt" title='Elt' data-ref="137Elt">Elt</a>))</td></tr>
<tr><th id="781">781</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="782">782</th><td>    }</td></tr>
<tr><th id="783">783</th><td>    <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb" title='llvm::ConstantExpr::getNeg' data-ref="_ZN4llvm12ConstantExpr6getNegEPNS_8ConstantEbb">getNeg</a>(<a class="local col4 ref" href="#134CV" title='CV' data-ref="134CV">CV</a>);</td></tr>
<tr><th id="784">784</th><td>  }</td></tr>
<tr><th id="785">785</th><td></td></tr>
<tr><th id="786">786</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="787">787</th><td>}</td></tr>
<tr><th id="788">788</th><td></td></tr>
<tr><th id="789">789</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl def" id="_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE" title='foldOperationIntoSelectOperand' data-type='llvm::Value * foldOperationIntoSelectOperand(llvm::Instruction &amp; I, llvm::Value * SO, InstCombiner::BuilderTy &amp; Builder)' data-ref="_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE">foldOperationIntoSelectOperand</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col8 decl" id="138I" title='I' data-type='llvm::Instruction &amp;' data-ref="138I">I</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="139SO" title='SO' data-type='llvm::Value *' data-ref="139SO">SO</dfn>,</td></tr>
<tr><th id="790">790</th><td>                                             <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<a class="typedef" href="InstCombineInternal.h.html#llvm::InstCombiner::BuilderTy" title='llvm::InstCombiner::BuilderTy' data-type='IRBuilder&lt;llvm::TargetFolder, llvm::IRBuilderCallbackInserter&gt;' data-ref="llvm::InstCombiner::BuilderTy">BuilderTy</a> &amp;<dfn class="local col0 decl" id="140Builder" title='Builder' data-type='InstCombiner::BuilderTy &amp;' data-ref="140Builder">Builder</dfn>) {</td></tr>
<tr><th id="791">791</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="141Cast" title='Cast' data-type='llvm::CastInst *' data-ref="141Cast"><a class="local col1 ref" href="#141Cast" title='Cast' data-ref="141Cast">Cast</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>&gt;(&amp;<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>))</td></tr>
<tr><th id="792">792</th><td>    <b>return</b> <a class="local col0 ref" href="#140Builder" title='Builder' data-ref="140Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateCast' data-ref="_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateCast</a>(<a class="local col1 ref" href="#141Cast" title='Cast' data-ref="141Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>(), <a class="local col9 ref" href="#139SO" title='SO' data-ref="139SO">SO</a>, <a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="793">793</th><td></td></tr>
<tr><th id="794">794</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (I.isBinaryOp() &amp;&amp; &quot;Unexpected opcode for select folding&quot;) ? void (0) : __assert_fail (&quot;I.isBinaryOp() &amp;&amp; \&quot;Unexpected opcode for select folding\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 794, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction10isBinaryOpEv" title='llvm::Instruction::isBinaryOp' data-ref="_ZNK4llvm11Instruction10isBinaryOpEv">isBinaryOp</a>() &amp;&amp; <q>"Unexpected opcode for select folding"</q>);</td></tr>
<tr><th id="795">795</th><td></td></tr>
<tr><th id="796">796</th><td>  <i>// Figure out if the constant is the left or the right argument.</i></td></tr>
<tr><th id="797">797</th><td>  <em>bool</em> <dfn class="local col2 decl" id="142ConstIsRHS" title='ConstIsRHS' data-type='bool' data-ref="142ConstIsRHS">ConstIsRHS</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="798">798</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="143ConstOperand" title='ConstOperand' data-type='llvm::Constant *' data-ref="143ConstOperand">ConstOperand</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<a class="local col2 ref" href="#142ConstIsRHS" title='ConstIsRHS' data-ref="142ConstIsRHS">ConstIsRHS</a>));</td></tr>
<tr><th id="799">799</th><td></td></tr>
<tr><th id="800">800</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col4 decl" id="144SOC" title='SOC' data-type='llvm::Constant *' data-ref="144SOC"><a class="local col4 ref" href="#144SOC" title='SOC' data-ref="144SOC">SOC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col9 ref" href="#139SO" title='SO' data-ref="139SO">SO</a>)) {</td></tr>
<tr><th id="801">801</th><td>    <b>if</b> (<a class="local col2 ref" href="#142ConstIsRHS" title='ConstIsRHS' data-ref="142ConstIsRHS">ConstIsRHS</a>)</td></tr>
<tr><th id="802">802</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>(), <a class="local col4 ref" href="#144SOC" title='SOC' data-ref="144SOC">SOC</a>, <a class="local col3 ref" href="#143ConstOperand" title='ConstOperand' data-ref="143ConstOperand">ConstOperand</a>);</td></tr>
<tr><th id="803">803</th><td>    <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>(), <a class="local col3 ref" href="#143ConstOperand" title='ConstOperand' data-ref="143ConstOperand">ConstOperand</a>, <a class="local col4 ref" href="#144SOC" title='SOC' data-ref="144SOC">SOC</a>);</td></tr>
<tr><th id="804">804</th><td>  }</td></tr>
<tr><th id="805">805</th><td></td></tr>
<tr><th id="806">806</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="145Op0" title='Op0' data-type='llvm::Value *' data-ref="145Op0">Op0</dfn> = <a class="local col9 ref" href="#139SO" title='SO' data-ref="139SO">SO</a>, *<dfn class="local col6 decl" id="146Op1" title='Op1' data-type='llvm::Value *' data-ref="146Op1">Op1</dfn> = <a class="local col3 ref" href="#143ConstOperand" title='ConstOperand' data-ref="143ConstOperand">ConstOperand</a>;</td></tr>
<tr><th id="807">807</th><td>  <b>if</b> (!<a class="local col2 ref" href="#142ConstIsRHS" title='ConstIsRHS' data-ref="142ConstIsRHS">ConstIsRHS</a>)</td></tr>
<tr><th id="808">808</th><td>    <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col5 ref" href="#145Op0" title='Op0' data-ref="145Op0">Op0</a></span>, <span class='refarg'><a class="local col6 ref" href="#146Op1" title='Op1' data-ref="146Op1">Op1</a></span>);</td></tr>
<tr><th id="809">809</th><td></td></tr>
<tr><th id="810">810</th><td>  <em>auto</em> *<dfn class="local col7 decl" id="147BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="147BO">BO</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(&amp;<a class="local col8 ref" href="#138I" title='I' data-ref="138I">I</a>);</td></tr>
<tr><th id="811">811</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="148RI" title='RI' data-type='llvm::Value *' data-ref="148RI">RI</dfn> = <a class="local col0 ref" href="#140Builder" title='Builder' data-ref="140Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col7 ref" href="#147BO" title='BO' data-ref="147BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col5 ref" href="#145Op0" title='Op0' data-ref="145Op0">Op0</a>, <a class="local col6 ref" href="#146Op1" title='Op1' data-ref="146Op1">Op1</a>,</td></tr>
<tr><th id="812">812</th><td>                                  <a class="local col9 ref" href="#139SO" title='SO' data-ref="139SO">SO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>() <a class="ref" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvmplERKNS_9StringRefEPKc" title='llvm::operator+' data-ref="_ZN4llvmplERKNS_9StringRefEPKc">+</a> <q>".op"</q>);</td></tr>
<tr><th id="813">813</th><td>  <em>auto</em> *<dfn class="local col9 decl" id="149FPInst" title='FPInst' data-type='llvm::Instruction *' data-ref="149FPInst">FPInst</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col8 ref" href="#148RI" title='RI' data-ref="148RI">RI</a>);</td></tr>
<tr><th id="814">814</th><td>  <b>if</b> (<a class="local col9 ref" href="#149FPInst" title='FPInst' data-ref="149FPInst">FPInst</a> &amp;&amp; <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a>&gt;(<a class="local col9 ref" href="#149FPInst" title='FPInst' data-ref="149FPInst">FPInst</a>))</td></tr>
<tr><th id="815">815</th><td>    <a class="local col9 ref" href="#149FPInst" title='FPInst' data-ref="149FPInst">FPInst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction17copyFastMathFlagsEPKS0_" title='llvm::Instruction::copyFastMathFlags' data-ref="_ZN4llvm11Instruction17copyFastMathFlagsEPKS0_">copyFastMathFlags</a>(<a class="local col7 ref" href="#147BO" title='BO' data-ref="147BO">BO</a>);</td></tr>
<tr><th id="816">816</th><td>  <b>return</b> <a class="local col8 ref" href="#148RI" title='RI' data-ref="148RI">RI</a>;</td></tr>
<tr><th id="817">817</th><td>}</td></tr>
<tr><th id="818">818</th><td></td></tr>
<tr><th id="819">819</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner16FoldOpIntoSelectERNS_11InstructionEPNS_10SelectInstE" title='llvm::InstCombiner::FoldOpIntoSelect' data-ref="_ZN4llvm12InstCombiner16FoldOpIntoSelectERNS_11InstructionEPNS_10SelectInstE">FoldOpIntoSelect</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col0 decl" id="150Op" title='Op' data-type='llvm::Instruction &amp;' data-ref="150Op">Op</dfn>, <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst">SelectInst</a> *<dfn class="local col1 decl" id="151SI" title='SI' data-type='llvm::SelectInst *' data-ref="151SI">SI</dfn>) {</td></tr>
<tr><th id="820">820</th><td>  <i>// Don't modify shared select instructions.</i></td></tr>
<tr><th id="821">821</th><td>  <b>if</b> (!<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="822">822</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="823">823</th><td></td></tr>
<tr><th id="824">824</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="152TV" title='TV' data-type='llvm::Value *' data-ref="152TV">TV</dfn> = <a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst12getTrueValueEv" title='llvm::SelectInst::getTrueValue' data-ref="_ZN4llvm10SelectInst12getTrueValueEv">getTrueValue</a>();</td></tr>
<tr><th id="825">825</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="153FV" title='FV' data-type='llvm::Value *' data-ref="153FV">FV</dfn> = <a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst13getFalseValueEv" title='llvm::SelectInst::getFalseValue' data-ref="_ZN4llvm10SelectInst13getFalseValueEv">getFalseValue</a>();</td></tr>
<tr><th id="826">826</th><td>  <b>if</b> (!(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col2 ref" href="#152TV" title='TV' data-ref="152TV">TV</a>) || <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col3 ref" href="#153FV" title='FV' data-ref="153FV">FV</a>)))</td></tr>
<tr><th id="827">827</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="828">828</th><td></td></tr>
<tr><th id="829">829</th><td>  <i>// Bool selects with constant operands can be folded to logical ops.</i></td></tr>
<tr><th id="830">830</th><td>  <b>if</b> (<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type18isIntOrIntVectorTyEj" title='llvm::Type::isIntOrIntVectorTy' data-ref="_ZNK4llvm4Type18isIntOrIntVectorTyEj">isIntOrIntVectorTy</a>(<var>1</var>))</td></tr>
<tr><th id="831">831</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="832">832</th><td></td></tr>
<tr><th id="833">833</th><td>  <i>// If it's a bitcast involving vectors, make sure it has the same number of</i></td></tr>
<tr><th id="834">834</th><td><i>  // elements on both sides.</i></td></tr>
<tr><th id="835">835</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col4 decl" id="154BC" title='BC' data-type='llvm::BitCastInst *' data-ref="154BC"><a class="local col4 ref" href="#154BC" title='BC' data-ref="154BC">BC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a>&gt;(&amp;<a class="local col0 ref" href="#150Op" title='Op' data-ref="150Op">Op</a>)) {</td></tr>
<tr><th id="836">836</th><td>    <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a> *<dfn class="local col5 decl" id="155DestTy" title='DestTy' data-type='llvm::VectorType *' data-ref="155DestTy">DestTy</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col4 ref" href="#154BC" title='BC' data-ref="154BC">BC</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getDestTyEv" title='llvm::CastInst::getDestTy' data-ref="_ZNK4llvm8CastInst9getDestTyEv">getDestTy</a>());</td></tr>
<tr><th id="837">837</th><td>    <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a> *<dfn class="local col6 decl" id="156SrcTy" title='SrcTy' data-type='llvm::VectorType *' data-ref="156SrcTy">SrcTy</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col4 ref" href="#154BC" title='BC' data-ref="154BC">BC</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst8getSrcTyEv" title='llvm::CastInst::getSrcTy' data-ref="_ZNK4llvm8CastInst8getSrcTyEv">getSrcTy</a>());</td></tr>
<tr><th id="838">838</th><td></td></tr>
<tr><th id="839">839</th><td>    <i>// Verify that either both or neither are vectors.</i></td></tr>
<tr><th id="840">840</th><td>    <b>if</b> ((<a class="local col6 ref" href="#156SrcTy" title='SrcTy' data-ref="156SrcTy">SrcTy</a> == <b>nullptr</b>) != (<a class="local col5 ref" href="#155DestTy" title='DestTy' data-ref="155DestTy">DestTy</a> == <b>nullptr</b>))</td></tr>
<tr><th id="841">841</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="842">842</th><td></td></tr>
<tr><th id="843">843</th><td>    <i>// If vectors, verify that they have the same number of elements.</i></td></tr>
<tr><th id="844">844</th><td>    <b>if</b> (<a class="local col6 ref" href="#156SrcTy" title='SrcTy' data-ref="156SrcTy">SrcTy</a> &amp;&amp; <a class="local col6 ref" href="#156SrcTy" title='SrcTy' data-ref="156SrcTy">SrcTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>() != <a class="local col5 ref" href="#155DestTy" title='DestTy' data-ref="155DestTy">DestTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>())</td></tr>
<tr><th id="845">845</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="846">846</th><td>  }</td></tr>
<tr><th id="847">847</th><td></td></tr>
<tr><th id="848">848</th><td>  <i>// Test if a CmpInst instruction is used exclusively by a select as</i></td></tr>
<tr><th id="849">849</th><td><i>  // part of a minimum or maximum operation. If so, refrain from doing</i></td></tr>
<tr><th id="850">850</th><td><i>  // any other folding. This helps out other analyses which understand</i></td></tr>
<tr><th id="851">851</th><td><i>  // non-obfuscated minimum and maximum idioms, such as ScalarEvolution</i></td></tr>
<tr><th id="852">852</th><td><i>  // and CodeGen. And in this case, at least one of the comparison</i></td></tr>
<tr><th id="853">853</th><td><i>  // operands has at least one user besides the compare (the select),</i></td></tr>
<tr><th id="854">854</th><td><i>  // which would often largely negate the benefit of folding anyway.</i></td></tr>
<tr><th id="855">855</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col7 decl" id="157CI" title='CI' data-type='llvm::CmpInst *' data-ref="157CI"><a class="local col7 ref" href="#157CI" title='CI' data-ref="157CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a>&gt;(<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst12getConditionEv" title='llvm::SelectInst::getCondition' data-ref="_ZN4llvm10SelectInst12getConditionEv">getCondition</a>())) {</td></tr>
<tr><th id="856">856</th><td>    <b>if</b> (<a class="local col7 ref" href="#157CI" title='CI' data-ref="157CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="857">857</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="158Op0" title='Op0' data-type='llvm::Value *' data-ref="158Op0">Op0</dfn> = <a class="local col7 ref" href="#157CI" title='CI' data-ref="157CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#885" title='llvm::CmpInst::getOperand' data-ref="_ZNK4llvm7CmpInst10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col9 decl" id="159Op1" title='Op1' data-type='llvm::Value *' data-ref="159Op1">Op1</dfn> = <a class="local col7 ref" href="#157CI" title='CI' data-ref="157CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#885" title='llvm::CmpInst::getOperand' data-ref="_ZNK4llvm7CmpInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="858">858</th><td>      <b>if</b> ((<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#1770" title='llvm::SelectInst::getOperand' data-ref="_ZNK4llvm10SelectInst10getOperandEj">getOperand</a>(<var>1</var>) == <a class="local col8 ref" href="#158Op0" title='Op0' data-ref="158Op0">Op0</a> &amp;&amp; <a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#1770" title='llvm::SelectInst::getOperand' data-ref="_ZNK4llvm10SelectInst10getOperandEj">getOperand</a>(<var>2</var>) == <a class="local col9 ref" href="#159Op1" title='Op1' data-ref="159Op1">Op1</a>) ||</td></tr>
<tr><th id="859">859</th><td>          (<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#1770" title='llvm::SelectInst::getOperand' data-ref="_ZNK4llvm10SelectInst10getOperandEj">getOperand</a>(<var>2</var>) == <a class="local col8 ref" href="#158Op0" title='Op0' data-ref="158Op0">Op0</a> &amp;&amp; <a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#1770" title='llvm::SelectInst::getOperand' data-ref="_ZNK4llvm10SelectInst10getOperandEj">getOperand</a>(<var>1</var>) == <a class="local col9 ref" href="#159Op1" title='Op1' data-ref="159Op1">Op1</a>))</td></tr>
<tr><th id="860">860</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="861">861</th><td>    }</td></tr>
<tr><th id="862">862</th><td>  }</td></tr>
<tr><th id="863">863</th><td></td></tr>
<tr><th id="864">864</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="160NewTV" title='NewTV' data-type='llvm::Value *' data-ref="160NewTV">NewTV</dfn> = <a class="tu ref" href="#_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE" title='foldOperationIntoSelectOperand' data-use='c' data-ref="_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE">foldOperationIntoSelectOperand</a>(<span class='refarg'><a class="local col0 ref" href="#150Op" title='Op' data-ref="150Op">Op</a></span>, <a class="local col2 ref" href="#152TV" title='TV' data-ref="152TV">TV</a>, <span class='refarg'><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a></span>);</td></tr>
<tr><th id="865">865</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="161NewFV" title='NewFV' data-type='llvm::Value *' data-ref="161NewFV">NewFV</dfn> = <a class="tu ref" href="#_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE" title='foldOperationIntoSelectOperand' data-use='c' data-ref="_ZL30foldOperationIntoSelectOperandRN4llvm11InstructionEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE">foldOperationIntoSelectOperand</a>(<span class='refarg'><a class="local col0 ref" href="#150Op" title='Op' data-ref="150Op">Op</a></span>, <a class="local col3 ref" href="#153FV" title='FV' data-ref="153FV">FV</a>, <span class='refarg'><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a></span>);</td></tr>
<tr><th id="866">866</th><td>  <b>return</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst">SelectInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst6CreateEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionES7_" title='llvm::SelectInst::Create' data-ref="_ZN4llvm10SelectInst6CreateEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionES7_">Create</a>(<a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst12getConditionEv" title='llvm::SelectInst::getCondition' data-ref="_ZN4llvm10SelectInst12getConditionEv">getCondition</a>(), <a class="local col0 ref" href="#160NewTV" title='NewTV' data-ref="160NewTV">NewTV</a>, <a class="local col1 ref" href="#161NewFV" title='NewFV' data-ref="161NewFV">NewFV</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>""</q>, <b>nullptr</b>, <a class="local col1 ref" href="#151SI" title='SI' data-ref="151SI">SI</a>);</td></tr>
<tr><th id="867">867</th><td>}</td></tr>
<tr><th id="868">868</th><td></td></tr>
<tr><th id="869">869</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl def" id="_ZL25foldOperationIntoPhiValuePN4llvm14BinaryOperatorEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE" title='foldOperationIntoPhiValue' data-type='llvm::Value * foldOperationIntoPhiValue(llvm::BinaryOperator * I, llvm::Value * InV, InstCombiner::BuilderTy &amp; Builder)' data-ref="_ZL25foldOperationIntoPhiValuePN4llvm14BinaryOperatorEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE">foldOperationIntoPhiValue</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col2 decl" id="162I" title='I' data-type='llvm::BinaryOperator *' data-ref="162I">I</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="163InV" title='InV' data-type='llvm::Value *' data-ref="163InV">InV</dfn>,</td></tr>
<tr><th id="870">870</th><td>                                        <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<a class="typedef" href="InstCombineInternal.h.html#llvm::InstCombiner::BuilderTy" title='llvm::InstCombiner::BuilderTy' data-type='IRBuilder&lt;llvm::TargetFolder, llvm::IRBuilderCallbackInserter&gt;' data-ref="llvm::InstCombiner::BuilderTy">BuilderTy</a> &amp;<dfn class="local col4 decl" id="164Builder" title='Builder' data-type='InstCombiner::BuilderTy &amp;' data-ref="164Builder">Builder</dfn>) {</td></tr>
<tr><th id="871">871</th><td>  <em>bool</em> <dfn class="local col5 decl" id="165ConstIsRHS" title='ConstIsRHS' data-type='bool' data-ref="165ConstIsRHS">ConstIsRHS</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="872">872</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="166C" title='C' data-type='llvm::Constant *' data-ref="166C">C</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#165ConstIsRHS" title='ConstIsRHS' data-ref="165ConstIsRHS">ConstIsRHS</a>));</td></tr>
<tr><th id="873">873</th><td></td></tr>
<tr><th id="874">874</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col7 decl" id="167InC" title='InC' data-type='llvm::Constant *' data-ref="167InC"><a class="local col7 ref" href="#167InC" title='InC' data-ref="167InC">InC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col3 ref" href="#163InV" title='InV' data-ref="163InV">InV</a>)) {</td></tr>
<tr><th id="875">875</th><td>    <b>if</b> (<a class="local col5 ref" href="#165ConstIsRHS" title='ConstIsRHS' data-ref="165ConstIsRHS">ConstIsRHS</a>)</td></tr>
<tr><th id="876">876</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col7 ref" href="#167InC" title='InC' data-ref="167InC">InC</a>, <a class="local col6 ref" href="#166C" title='C' data-ref="166C">C</a>);</td></tr>
<tr><th id="877">877</th><td>    <b>return</b> <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col6 ref" href="#166C" title='C' data-ref="166C">C</a>, <a class="local col7 ref" href="#167InC" title='InC' data-ref="167InC">InC</a>);</td></tr>
<tr><th id="878">878</th><td>  }</td></tr>
<tr><th id="879">879</th><td></td></tr>
<tr><th id="880">880</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="168Op0" title='Op0' data-type='llvm::Value *' data-ref="168Op0">Op0</dfn> = <a class="local col3 ref" href="#163InV" title='InV' data-ref="163InV">InV</a>, *<dfn class="local col9 decl" id="169Op1" title='Op1' data-type='llvm::Value *' data-ref="169Op1">Op1</dfn> = <a class="local col6 ref" href="#166C" title='C' data-ref="166C">C</a>;</td></tr>
<tr><th id="881">881</th><td>  <b>if</b> (!<a class="local col5 ref" href="#165ConstIsRHS" title='ConstIsRHS' data-ref="165ConstIsRHS">ConstIsRHS</a>)</td></tr>
<tr><th id="882">882</th><td>    <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col8 ref" href="#168Op0" title='Op0' data-ref="168Op0">Op0</a></span>, <span class='refarg'><a class="local col9 ref" href="#169Op1" title='Op1' data-ref="169Op1">Op1</a></span>);</td></tr>
<tr><th id="883">883</th><td></td></tr>
<tr><th id="884">884</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="170RI" title='RI' data-type='llvm::Value *' data-ref="170RI">RI</dfn> = <a class="local col4 ref" href="#164Builder" title='Builder' data-ref="164Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col8 ref" href="#168Op0" title='Op0' data-ref="168Op0">Op0</a>, <a class="local col9 ref" href="#169Op1" title='Op1' data-ref="169Op1">Op1</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"phitmp"</q>);</td></tr>
<tr><th id="885">885</th><td>  <em>auto</em> *<dfn class="local col1 decl" id="171FPInst" title='FPInst' data-type='llvm::Instruction *' data-ref="171FPInst">FPInst</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col0 ref" href="#170RI" title='RI' data-ref="170RI">RI</a>);</td></tr>
<tr><th id="886">886</th><td>  <b>if</b> (<a class="local col1 ref" href="#171FPInst" title='FPInst' data-ref="171FPInst">FPInst</a> &amp;&amp; <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::FPMathOperator" title='llvm::FPMathOperator' data-ref="llvm::FPMathOperator">FPMathOperator</a>&gt;(<a class="local col1 ref" href="#171FPInst" title='FPInst' data-ref="171FPInst">FPInst</a>))</td></tr>
<tr><th id="887">887</th><td>    <a class="local col1 ref" href="#171FPInst" title='FPInst' data-ref="171FPInst">FPInst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction17copyFastMathFlagsEPKS0_" title='llvm::Instruction::copyFastMathFlags' data-ref="_ZN4llvm11Instruction17copyFastMathFlagsEPKS0_">copyFastMathFlags</a>(<a class="local col2 ref" href="#162I" title='I' data-ref="162I">I</a>);</td></tr>
<tr><th id="888">888</th><td>  <b>return</b> <a class="local col0 ref" href="#170RI" title='RI' data-ref="170RI">RI</a>;</td></tr>
<tr><th id="889">889</th><td>}</td></tr>
<tr><th id="890">890</th><td></td></tr>
<tr><th id="891">891</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner13foldOpIntoPhiERNS_11InstructionEPNS_7PHINodeE" title='llvm::InstCombiner::foldOpIntoPhi' data-ref="_ZN4llvm12InstCombiner13foldOpIntoPhiERNS_11InstructionEPNS_7PHINodeE">foldOpIntoPhi</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col2 decl" id="172I" title='I' data-type='llvm::Instruction &amp;' data-ref="172I">I</dfn>, <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col3 decl" id="173PN" title='PN' data-type='llvm::PHINode *' data-ref="173PN">PN</dfn>) {</td></tr>
<tr><th id="892">892</th><td>  <em>unsigned</em> <dfn class="local col4 decl" id="174NumPHIValues" title='NumPHIValues' data-type='unsigned int' data-ref="174NumPHIValues">NumPHIValues</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode20getNumIncomingValuesEv" title='llvm::PHINode::getNumIncomingValues' data-ref="_ZNK4llvm7PHINode20getNumIncomingValuesEv">getNumIncomingValues</a>();</td></tr>
<tr><th id="893">893</th><td>  <b>if</b> (<a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a> == <var>0</var>)</td></tr>
<tr><th id="894">894</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="895">895</th><td></td></tr>
<tr><th id="896">896</th><td>  <i>// We normally only transform phis with a single use.  However, if a PHI has</i></td></tr>
<tr><th id="897">897</th><td><i>  // multiple uses and they are all the same operation, we can fold *all* of the</i></td></tr>
<tr><th id="898">898</th><td><i>  // uses into the PHI.</i></td></tr>
<tr><th id="899">899</th><td>  <b>if</b> (!<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="900">900</th><td>    <i>// Walk the use list for the instruction, comparing them to I.</i></td></tr>
<tr><th id="901">901</th><td>    <b>for</b> (<a class="type" href="../../../include/llvm/IR/User.h.html#llvm::User" title='llvm::User' data-ref="llvm::User">User</a> *<dfn class="local col5 decl" id="175U" title='U' data-type='llvm::User *' data-ref="175U">U</dfn> : <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value5usersEv" title='llvm::Value::users' data-ref="_ZN4llvm5Value5usersEv">users</a>()) {</td></tr>
<tr><th id="902">902</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col6 decl" id="176UI" title='UI' data-type='llvm::Instruction *' data-ref="176UI">UI</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col5 ref" href="#175U" title='U' data-ref="175U">U</a>);</td></tr>
<tr><th id="903">903</th><td>      <b>if</b> (<a class="local col6 ref" href="#176UI" title='UI' data-ref="176UI">UI</a> != &amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a> &amp;&amp; !<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isIdenticalToEPKS0_" title='llvm::Instruction::isIdenticalTo' data-ref="_ZNK4llvm11Instruction13isIdenticalToEPKS0_">isIdenticalTo</a>(<a class="local col6 ref" href="#176UI" title='UI' data-ref="176UI">UI</a>))</td></tr>
<tr><th id="904">904</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="905">905</th><td>    }</td></tr>
<tr><th id="906">906</th><td>    <i>// Otherwise, we can replace *all* users with the new PHI we form.</i></td></tr>
<tr><th id="907">907</th><td>  }</td></tr>
<tr><th id="908">908</th><td></td></tr>
<tr><th id="909">909</th><td>  <i>// Check to see if all of the operands of the PHI are simple constants</i></td></tr>
<tr><th id="910">910</th><td><i>  // (constantint/constantfp/undef).  If there is one non-constant value,</i></td></tr>
<tr><th id="911">911</th><td><i>  // remember the BB it is in.  If there is more than one or if *it* is a PHI,</i></td></tr>
<tr><th id="912">912</th><td><i>  // bail out.  We don't do arbitrary constant expressions here because moving</i></td></tr>
<tr><th id="913">913</th><td><i>  // their computation can be expensive without a cost model.</i></td></tr>
<tr><th id="914">914</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col7 decl" id="177NonConstBB" title='NonConstBB' data-type='llvm::BasicBlock *' data-ref="177NonConstBB">NonConstBB</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="915">915</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="178i" title='i' data-type='unsigned int' data-ref="178i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#178i" title='i' data-ref="178i">i</a> != <a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a>; ++<a class="local col8 ref" href="#178i" title='i' data-ref="178i">i</a>) {</td></tr>
<tr><th id="916">916</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="179InVal" title='InVal' data-type='llvm::Value *' data-ref="179InVal">InVal</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col8 ref" href="#178i" title='i' data-ref="178i">i</a>);</td></tr>
<tr><th id="917">917</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col9 ref" href="#179InVal" title='InVal' data-ref="179InVal">InVal</a>) &amp;&amp; !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>&gt;(<a class="local col9 ref" href="#179InVal" title='InVal' data-ref="179InVal">InVal</a>))</td></tr>
<tr><th id="918">918</th><td>      <b>continue</b>;</td></tr>
<tr><th id="919">919</th><td></td></tr>
<tr><th id="920">920</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col9 ref" href="#179InVal" title='InVal' data-ref="179InVal">InVal</a>)) <b>return</b> <b>nullptr</b>;  <i>// Itself a phi.</i></td></tr>
<tr><th id="921">921</th><td>    <b>if</b> (<a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>) <b>return</b> <b>nullptr</b>;  <i>// More than one non-const value.</i></td></tr>
<tr><th id="922">922</th><td></td></tr>
<tr><th id="923">923</th><td>    <a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockEj" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockEj">getIncomingBlock</a>(<a class="local col8 ref" href="#178i" title='i' data-ref="178i">i</a>);</td></tr>
<tr><th id="924">924</th><td></td></tr>
<tr><th id="925">925</th><td>    <i>// If the InVal is an invoke at the end of the pred block, then we can't</i></td></tr>
<tr><th id="926">926</th><td><i>    // insert a computation after it without breaking the edge.</i></td></tr>
<tr><th id="927">927</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InvokeInst" title='llvm::InvokeInst' data-ref="llvm::InvokeInst">InvokeInst</a>&gt;(<a class="local col9 ref" href="#179InVal" title='InVal' data-ref="179InVal">InVal</a>))</td></tr>
<tr><th id="928">928</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col9 ref" href="#179InVal" title='InVal' data-ref="179InVal">InVal</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>() == <a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>)</td></tr>
<tr><th id="929">929</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="930">930</th><td></td></tr>
<tr><th id="931">931</th><td>    <i>// If the incoming non-constant value is in I's block, we will remove one</i></td></tr>
<tr><th id="932">932</th><td><i>    // instruction, but insert another equivalent one, leading to infinite</i></td></tr>
<tr><th id="933">933</th><td><i>    // instcombine.</i></td></tr>
<tr><th id="934">934</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Analysis/CFG.h.html#_ZN4llvm22isPotentiallyReachableEPKNS_10BasicBlockES2_PKNS_13DominatorTreeEPKNS_8LoopInfoE" title='llvm::isPotentiallyReachable' data-ref="_ZN4llvm22isPotentiallyReachableEPKNS_10BasicBlockES2_PKNS_13DominatorTreeEPKNS_8LoopInfoE">isPotentiallyReachable</a>(<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>(), <a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DT" title='llvm::InstCombiner::DT' data-ref="llvm::InstCombiner::DT">DT</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::LI" title='llvm::InstCombiner::LI' data-ref="llvm::InstCombiner::LI">LI</a>))</td></tr>
<tr><th id="935">935</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="936">936</th><td>  }</td></tr>
<tr><th id="937">937</th><td></td></tr>
<tr><th id="938">938</th><td>  <i>// If there is exactly one non-constant value, we can insert a copy of the</i></td></tr>
<tr><th id="939">939</th><td><i>  // operation in that block.  However, if this is a critical edge, we would be</i></td></tr>
<tr><th id="940">940</th><td><i>  // inserting the computation on some other paths (e.g. inside a loop).  Only</i></td></tr>
<tr><th id="941">941</th><td><i>  // do this if the pred block is unconditionally branching into the phi block.</i></td></tr>
<tr><th id="942">942</th><td>  <b>if</b> (<a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a> != <b>nullptr</b>) {</td></tr>
<tr><th id="943">943</th><td>    <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BranchInst" title='llvm::BranchInst' data-ref="llvm::BranchInst">BranchInst</a> *<dfn class="local col0 decl" id="180BI" title='BI' data-type='llvm::BranchInst *' data-ref="180BI">BI</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BranchInst" title='llvm::BranchInst' data-ref="llvm::BranchInst">BranchInst</a>&gt;(<a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>());</td></tr>
<tr><th id="944">944</th><td>    <b>if</b> (!<a class="local col0 ref" href="#180BI" title='BI' data-ref="180BI">BI</a> || !<a class="local col0 ref" href="#180BI" title='BI' data-ref="180BI">BI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst15isUnconditionalEv" title='llvm::BranchInst::isUnconditional' data-ref="_ZNK4llvm10BranchInst15isUnconditionalEv">isUnconditional</a>()) <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="945">945</th><td>  }</td></tr>
<tr><th id="946">946</th><td></td></tr>
<tr><th id="947">947</th><td>  <i>// Okay, we can do the transformation: create the new PHI node.</i></td></tr>
<tr><th id="948">948</th><td>  <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col1 decl" id="181NewPN" title='NewPN' data-type='llvm::PHINode *' data-ref="181NewPN">NewPN</dfn> = <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode6CreateEPNS_4TypeEjRKNS_5TwineEPNS_11InstructionE" title='llvm::PHINode::Create' data-ref="_ZN4llvm7PHINode6CreateEPNS_4TypeEjRKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode20getNumIncomingValuesEv" title='llvm::PHINode::getNumIncomingValues' data-ref="_ZNK4llvm7PHINode20getNumIncomingValuesEv">getNumIncomingValues</a>());</td></tr>
<tr><th id="949">949</th><td>  <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19InsertNewInstBeforeEPNS_11InstructionERS1_" title='llvm::InstCombiner::InsertNewInstBefore' data-ref="_ZN4llvm12InstCombiner19InsertNewInstBeforeEPNS_11InstructionERS1_">InsertNewInstBefore</a>(<a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>, <span class='refarg'>*<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a></span>);</td></tr>
<tr><th id="950">950</th><td>  <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>);</td></tr>
<tr><th id="951">951</th><td></td></tr>
<tr><th id="952">952</th><td>  <i>// If we are going to have to insert a new computation, do so right before the</i></td></tr>
<tr><th id="953">953</th><td><i>  // predecessor's terminator.</i></td></tr>
<tr><th id="954">954</th><td>  <b>if</b> (<a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>)</td></tr>
<tr><th id="955">955</th><td>    <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col7 ref" href="#177NonConstBB" title='NonConstBB' data-ref="177NonConstBB">NonConstBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>());</td></tr>
<tr><th id="956">956</th><td></td></tr>
<tr><th id="957">957</th><td>  <i>// Next, add all of the operands to the PHI.</i></td></tr>
<tr><th id="958">958</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst">SelectInst</a> *<dfn class="local col2 decl" id="182SI" title='SI' data-type='llvm::SelectInst *' data-ref="182SI"><a class="local col2 ref" href="#182SI" title='SI' data-ref="182SI">SI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst">SelectInst</a>&gt;(&amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>)) {</td></tr>
<tr><th id="959">959</th><td>    <i>// We only currently try to fold the condition of a select when it is a phi,</i></td></tr>
<tr><th id="960">960</th><td><i>    // not the true/false values.</i></td></tr>
<tr><th id="961">961</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="183TrueV" title='TrueV' data-type='llvm::Value *' data-ref="183TrueV">TrueV</dfn> = <a class="local col2 ref" href="#182SI" title='SI' data-ref="182SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst12getTrueValueEv" title='llvm::SelectInst::getTrueValue' data-ref="_ZN4llvm10SelectInst12getTrueValueEv">getTrueValue</a>();</td></tr>
<tr><th id="962">962</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="184FalseV" title='FalseV' data-type='llvm::Value *' data-ref="184FalseV">FalseV</dfn> = <a class="local col2 ref" href="#182SI" title='SI' data-ref="182SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SelectInst13getFalseValueEv" title='llvm::SelectInst::getFalseValue' data-ref="_ZN4llvm10SelectInst13getFalseValueEv">getFalseValue</a>();</td></tr>
<tr><th id="963">963</th><td>    <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col5 decl" id="185PhiTransBB" title='PhiTransBB' data-type='llvm::BasicBlock *' data-ref="185PhiTransBB">PhiTransBB</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="964">964</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col6 decl" id="186i" title='i' data-type='unsigned int' data-ref="186i">i</dfn> = <var>0</var>; <a class="local col6 ref" href="#186i" title='i' data-ref="186i">i</a> != <a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a>; ++<a class="local col6 ref" href="#186i" title='i' data-ref="186i">i</a>) {</td></tr>
<tr><th id="965">965</th><td>      <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col7 decl" id="187ThisBB" title='ThisBB' data-type='llvm::BasicBlock *' data-ref="187ThisBB">ThisBB</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockEj" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockEj">getIncomingBlock</a>(<a class="local col6 ref" href="#186i" title='i' data-ref="186i">i</a>);</td></tr>
<tr><th id="966">966</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="188TrueVInPred" title='TrueVInPred' data-type='llvm::Value *' data-ref="188TrueVInPred">TrueVInPred</dfn> = <a class="local col3 ref" href="#183TrueV" title='TrueV' data-ref="183TrueV">TrueV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value16DoPHITranslationEPKNS_10BasicBlockES3_" title='llvm::Value::DoPHITranslation' data-ref="_ZN4llvm5Value16DoPHITranslationEPKNS_10BasicBlockES3_">DoPHITranslation</a>(<a class="local col5 ref" href="#185PhiTransBB" title='PhiTransBB' data-ref="185PhiTransBB">PhiTransBB</a>, <a class="local col7 ref" href="#187ThisBB" title='ThisBB' data-ref="187ThisBB">ThisBB</a>);</td></tr>
<tr><th id="967">967</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="189FalseVInPred" title='FalseVInPred' data-type='llvm::Value *' data-ref="189FalseVInPred">FalseVInPred</dfn> = <a class="local col4 ref" href="#184FalseV" title='FalseV' data-ref="184FalseV">FalseV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value16DoPHITranslationEPKNS_10BasicBlockES3_" title='llvm::Value::DoPHITranslation' data-ref="_ZN4llvm5Value16DoPHITranslationEPKNS_10BasicBlockES3_">DoPHITranslation</a>(<a class="local col5 ref" href="#185PhiTransBB" title='PhiTransBB' data-ref="185PhiTransBB">PhiTransBB</a>, <a class="local col7 ref" href="#187ThisBB" title='ThisBB' data-ref="187ThisBB">ThisBB</a>);</td></tr>
<tr><th id="968">968</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="190InV" title='InV' data-type='llvm::Value *' data-ref="190InV">InV</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="969">969</th><td>      <i>// Beware of ConstantExpr:  it may eventually evaluate to getNullValue,</i></td></tr>
<tr><th id="970">970</th><td><i>      // even if currently isNullValue gives false.</i></td></tr>
<tr><th id="971">971</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col1 decl" id="191InC" title='InC' data-type='llvm::Constant *' data-ref="191InC">InC</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col6 ref" href="#186i" title='i' data-ref="186i">i</a>));</td></tr>
<tr><th id="972">972</th><td>      <i>// For vector constants, we cannot use isNullValue to fold into</i></td></tr>
<tr><th id="973">973</th><td><i>      // FalseVInPred versus TrueVInPred. When we have individual nonzero</i></td></tr>
<tr><th id="974">974</th><td><i>      // elements in the vector, we will incorrectly fold InC to</i></td></tr>
<tr><th id="975">975</th><td><i>      // `TrueVInPred`.</i></td></tr>
<tr><th id="976">976</th><td>      <b>if</b> (<a class="local col1 ref" href="#191InC" title='InC' data-ref="191InC">InC</a> &amp;&amp; !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>&gt;(<a class="local col1 ref" href="#191InC" title='InC' data-ref="191InC">InC</a>) &amp;&amp; <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col1 ref" href="#191InC" title='InC' data-ref="191InC">InC</a>))</td></tr>
<tr><th id="977">977</th><td>        <a class="local col0 ref" href="#190InV" title='InV' data-ref="190InV">InV</a> = <a class="local col1 ref" href="#191InC" title='InC' data-ref="191InC">InC</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>() ? <a class="local col9 ref" href="#189FalseVInPred" title='FalseVInPred' data-ref="189FalseVInPred">FalseVInPred</a> : <a class="local col8 ref" href="#188TrueVInPred" title='TrueVInPred' data-ref="188TrueVInPred">TrueVInPred</a>;</td></tr>
<tr><th id="978">978</th><td>      <b>else</b> {</td></tr>
<tr><th id="979">979</th><td>        <i>// Generate the select in the same block as PN's current incoming block.</i></td></tr>
<tr><th id="980">980</th><td><i>        // Note: ThisBB need not be the NonConstBB because vector constants</i></td></tr>
<tr><th id="981">981</th><td><i>        // which are constants by definition are handled here.</i></td></tr>
<tr><th id="982">982</th><td><i>        // FIXME: This can lead to an increase in IR generation because we might</i></td></tr>
<tr><th id="983">983</th><td><i>        // generate selects for vector constant phi operand, that could not be</i></td></tr>
<tr><th id="984">984</th><td><i>        // folded to TrueVInPred or FalseVInPred as done for ConstantInt. For</i></td></tr>
<tr><th id="985">985</th><td><i>        // non-vector phis, this transformation was always profitable because</i></td></tr>
<tr><th id="986">986</th><td><i>        // the select would be generated exactly once in the NonConstBB.</i></td></tr>
<tr><th id="987">987</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col7 ref" href="#187ThisBB" title='ThisBB' data-ref="187ThisBB">ThisBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>());</td></tr>
<tr><th id="988">988</th><td>        <a class="local col0 ref" href="#190InV" title='InV' data-ref="190InV">InV</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col6 ref" href="#186i" title='i' data-ref="186i">i</a>), <a class="local col8 ref" href="#188TrueVInPred" title='TrueVInPred' data-ref="188TrueVInPred">TrueVInPred</a>,</td></tr>
<tr><th id="989">989</th><td>                                   <a class="local col9 ref" href="#189FalseVInPred" title='FalseVInPred' data-ref="189FalseVInPred">FalseVInPred</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"phitmp"</q>);</td></tr>
<tr><th id="990">990</th><td>      }</td></tr>
<tr><th id="991">991</th><td>      <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col0 ref" href="#190InV" title='InV' data-ref="190InV">InV</a>, <a class="local col7 ref" href="#187ThisBB" title='ThisBB' data-ref="187ThisBB">ThisBB</a>);</td></tr>
<tr><th id="992">992</th><td>    }</td></tr>
<tr><th id="993">993</th><td>  } <b>else</b> <b>if</b> (<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a> *<dfn class="local col2 decl" id="192CI" title='CI' data-type='llvm::CmpInst *' data-ref="192CI"><a class="local col2 ref" href="#192CI" title='CI' data-ref="192CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a>&gt;(&amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>)) {</td></tr>
<tr><th id="994">994</th><td>    <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="193C" title='C' data-type='llvm::Constant *' data-ref="193C">C</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>.<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="995">995</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col4 decl" id="194i" title='i' data-type='unsigned int' data-ref="194i">i</dfn> = <var>0</var>; <a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a> != <a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a>; ++<a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a>) {</td></tr>
<tr><th id="996">996</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="195InV" title='InV' data-type='llvm::Value *' data-ref="195InV">InV</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="997">997</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="196InC" title='InC' data-type='llvm::Constant *' data-ref="196InC"><a class="local col6 ref" href="#196InC" title='InC' data-ref="196InC">InC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a>)))</td></tr>
<tr><th id="998">998</th><td>        <a class="local col5 ref" href="#195InV" title='InV' data-ref="195InV">InV</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr10getCompareEtPNS_8ConstantES2_b" title='llvm::ConstantExpr::getCompare' data-ref="_ZN4llvm12ConstantExpr10getCompareEtPNS_8ConstantES2_b">getCompare</a>(<a class="local col2 ref" href="#192CI" title='CI' data-ref="192CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm7CmpInst12getPredicateEv" title='llvm::CmpInst::getPredicate' data-ref="_ZNK4llvm7CmpInst12getPredicateEv">getPredicate</a>(), <a class="local col6 ref" href="#196InC" title='InC' data-ref="196InC">InC</a>, <a class="local col3 ref" href="#193C" title='C' data-ref="193C">C</a>);</td></tr>
<tr><th id="999">999</th><td>      <b>else</b> <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>&gt;(<a class="local col2 ref" href="#192CI" title='CI' data-ref="192CI">CI</a>))</td></tr>
<tr><th id="1000">1000</th><td>        <a class="local col5 ref" href="#195InV" title='InV' data-ref="195InV">InV</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateICmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmp' data-ref="_ZN4llvm9IRBuilder10CreateICmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE">CreateICmp</a>(<a class="local col2 ref" href="#192CI" title='CI' data-ref="192CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm7CmpInst12getPredicateEv" title='llvm::CmpInst::getPredicate' data-ref="_ZNK4llvm7CmpInst12getPredicateEv">getPredicate</a>(), <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a>),</td></tr>
<tr><th id="1001">1001</th><td>                                 <a class="local col3 ref" href="#193C" title='C' data-ref="193C">C</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"phitmp"</q>);</td></tr>
<tr><th id="1002">1002</th><td>      <b>else</b></td></tr>
<tr><th id="1003">1003</th><td>        <a class="local col5 ref" href="#195InV" title='InV' data-ref="195InV">InV</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateFCmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateFCmp' data-ref="_ZN4llvm9IRBuilder10CreateFCmpENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateFCmp</a>(<a class="local col2 ref" href="#192CI" title='CI' data-ref="192CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm7CmpInst12getPredicateEv" title='llvm::CmpInst::getPredicate' data-ref="_ZNK4llvm7CmpInst12getPredicateEv">getPredicate</a>(), <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a>),</td></tr>
<tr><th id="1004">1004</th><td>                                 <a class="local col3 ref" href="#193C" title='C' data-ref="193C">C</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"phitmp"</q>);</td></tr>
<tr><th id="1005">1005</th><td>      <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col5 ref" href="#195InV" title='InV' data-ref="195InV">InV</a>, <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockEj" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockEj">getIncomingBlock</a>(<a class="local col4 ref" href="#194i" title='i' data-ref="194i">i</a>));</td></tr>
<tr><th id="1006">1006</th><td>    }</td></tr>
<tr><th id="1007">1007</th><td>  } <b>else</b> <b>if</b> (<em>auto</em> *<dfn class="local col7 decl" id="197BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="197BO"><a class="local col7 ref" href="#197BO" title='BO' data-ref="197BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(&amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>)) {</td></tr>
<tr><th id="1008">1008</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="198i" title='i' data-type='unsigned int' data-ref="198i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#198i" title='i' data-ref="198i">i</a> != <a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a>; ++<a class="local col8 ref" href="#198i" title='i' data-ref="198i">i</a>) {</td></tr>
<tr><th id="1009">1009</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="199InV" title='InV' data-type='llvm::Value *' data-ref="199InV">InV</dfn> = <a class="tu ref" href="#_ZL25foldOperationIntoPhiValuePN4llvm14BinaryOperatorEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE" title='foldOperationIntoPhiValue' data-use='c' data-ref="_ZL25foldOperationIntoPhiValuePN4llvm14BinaryOperatorEPNS_5ValueERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEE">foldOperationIntoPhiValue</a>(<a class="local col7 ref" href="#197BO" title='BO' data-ref="197BO">BO</a>, <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col8 ref" href="#198i" title='i' data-ref="198i">i</a>),</td></tr>
<tr><th id="1010">1010</th><td>                                             <span class='refarg'><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a></span>);</td></tr>
<tr><th id="1011">1011</th><td>      <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col9 ref" href="#199InV" title='InV' data-ref="199InV">InV</a>, <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockEj" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockEj">getIncomingBlock</a>(<a class="local col8 ref" href="#198i" title='i' data-ref="198i">i</a>));</td></tr>
<tr><th id="1012">1012</th><td>    }</td></tr>
<tr><th id="1013">1013</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1014">1014</th><td>    <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a> *<dfn class="local col0 decl" id="200CI" title='CI' data-type='llvm::CastInst *' data-ref="200CI">CI</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>&gt;(&amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>);</td></tr>
<tr><th id="1015">1015</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col1 decl" id="201RetTy" title='RetTy' data-type='llvm::Type *' data-ref="201RetTy">RetTy</dfn> = <a class="local col0 ref" href="#200CI" title='CI' data-ref="200CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="1016">1016</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col2 decl" id="202i" title='i' data-type='unsigned int' data-ref="202i">i</dfn> = <var>0</var>; <a class="local col2 ref" href="#202i" title='i' data-ref="202i">i</a> != <a class="local col4 ref" href="#174NumPHIValues" title='NumPHIValues' data-ref="174NumPHIValues">NumPHIValues</a>; ++<a class="local col2 ref" href="#202i" title='i' data-ref="202i">i</a>) {</td></tr>
<tr><th id="1017">1017</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="203InV" title='InV' data-type='llvm::Value *' data-ref="203InV">InV</dfn>;</td></tr>
<tr><th id="1018">1018</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col4 decl" id="204InC" title='InC' data-type='llvm::Constant *' data-ref="204InC"><a class="local col4 ref" href="#204InC" title='InC' data-ref="204InC">InC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col2 ref" href="#202i" title='i' data-ref="202i">i</a>)))</td></tr>
<tr><th id="1019">1019</th><td>        <a class="local col3 ref" href="#203InV" title='InV' data-ref="203InV">InV</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb" title='llvm::ConstantExpr::getCast' data-ref="_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb">getCast</a>(<a class="local col0 ref" href="#200CI" title='CI' data-ref="200CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>(), <a class="local col4 ref" href="#204InC" title='InC' data-ref="204InC">InC</a>, <a class="local col1 ref" href="#201RetTy" title='RetTy' data-ref="201RetTy">RetTy</a>);</td></tr>
<tr><th id="1020">1020</th><td>      <b>else</b></td></tr>
<tr><th id="1021">1021</th><td>        <a class="local col3 ref" href="#203InV" title='InV' data-ref="203InV">InV</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateCast' data-ref="_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateCast</a>(<a class="local col0 ref" href="#200CI" title='CI' data-ref="200CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>(), <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingValueEj" title='llvm::PHINode::getIncomingValue' data-ref="_ZNK4llvm7PHINode16getIncomingValueEj">getIncomingValue</a>(<a class="local col2 ref" href="#202i" title='i' data-ref="202i">i</a>),</td></tr>
<tr><th id="1022">1022</th><td>                                 <a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"phitmp"</q>);</td></tr>
<tr><th id="1023">1023</th><td>      <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col3 ref" href="#203InV" title='InV' data-ref="203InV">InV</a>, <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockEj" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockEj">getIncomingBlock</a>(<a class="local col2 ref" href="#202i" title='i' data-ref="202i">i</a>));</td></tr>
<tr><th id="1024">1024</th><td>    }</td></tr>
<tr><th id="1025">1025</th><td>  }</td></tr>
<tr><th id="1026">1026</th><td></td></tr>
<tr><th id="1027">1027</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="205UI" title='UI' data-type='llvm::Value::user_iterator_impl&lt;llvm::User&gt;' data-ref="205UI">UI</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value10user_beginEv" title='llvm::Value::user_begin' data-ref="_ZN4llvm5Value10user_beginEv">user_begin</a>(), <dfn class="local col6 decl" id="206E" title='E' data-type='llvm::Value::user_iterator_impl&lt;llvm::User&gt;' data-ref="206E">E</dfn> = <a class="local col3 ref" href="#173PN" title='PN' data-ref="173PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8user_endEv" title='llvm::Value::user_end' data-ref="_ZN4llvm5Value8user_endEv">user_end</a>(); <a class="local col5 ref" href="#205UI" title='UI' data-ref="205UI">UI</a> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value18user_iterator_implneERKNS0_18user_iterator_implIT_EE" title='llvm::Value::user_iterator_impl::operator!=' data-ref="_ZNK4llvm5Value18user_iterator_implneERKNS0_18user_iterator_implIT_EE">!=</a> <a class="local col6 ref" href="#206E" title='E' data-ref="206E">E</a>;) {</td></tr>
<tr><th id="1028">1028</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col7 decl" id="207User" title='User' data-type='llvm::Instruction *' data-ref="207User">User</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value18user_iterator_impldeEv" title='llvm::Value::user_iterator_impl::operator*' data-ref="_ZNK4llvm5Value18user_iterator_impldeEv">*</a><a class="local col5 ref" href="#205UI" title='UI' data-ref="205UI">UI</a><a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18user_iterator_implppEi" title='llvm::Value::user_iterator_impl::operator++' data-ref="_ZN4llvm5Value18user_iterator_implppEi">++</a>);</td></tr>
<tr><th id="1029">1029</th><td>    <b>if</b> (<a class="local col7 ref" href="#207User" title='User' data-ref="207User">User</a> == &amp;<a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a>) <b>continue</b>;</td></tr>
<tr><th id="1030">1030</th><td>    <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col7 ref" href="#207User" title='User' data-ref="207User">User</a></span>, <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>);</td></tr>
<tr><th id="1031">1031</th><td>    <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col7 ref" href="#207User" title='User' data-ref="207User">User</a></span>);</td></tr>
<tr><th id="1032">1032</th><td>  }</td></tr>
<tr><th id="1033">1033</th><td>  <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col2 ref" href="#172I" title='I' data-ref="172I">I</a></span>, <a class="local col1 ref" href="#181NewPN" title='NewPN' data-ref="181NewPN">NewPN</a>);</td></tr>
<tr><th id="1034">1034</th><td>}</td></tr>
<tr><th id="1035">1035</th><td></td></tr>
<tr><th id="1036">1036</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner24foldBinOpIntoSelectOrPhiERNS_14BinaryOperatorE" title='llvm::InstCombiner::foldBinOpIntoSelectOrPhi' data-ref="_ZN4llvm12InstCombiner24foldBinOpIntoSelectOrPhiERNS_14BinaryOperatorE">foldBinOpIntoSelectOrPhi</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col8 decl" id="208I" title='I' data-type='llvm::BinaryOperator &amp;' data-ref="208I">I</dfn>) {</td></tr>
<tr><th id="1037">1037</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col8 ref" href="#208I" title='I' data-ref="208I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>)))</td></tr>
<tr><th id="1038">1038</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1039">1039</th><td></td></tr>
<tr><th id="1040">1040</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col9 decl" id="209Sel" title='Sel' data-type='llvm::SelectInst *' data-ref="209Sel"><a class="local col9 ref" href="#209Sel" title='Sel' data-ref="209Sel">Sel</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SelectInst" title='llvm::SelectInst' data-ref="llvm::SelectInst">SelectInst</a>&gt;(<a class="local col8 ref" href="#208I" title='I' data-ref="208I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>))) {</td></tr>
<tr><th id="1041">1041</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col0 decl" id="210NewSel" title='NewSel' data-type='llvm::Instruction *' data-ref="210NewSel"><a class="local col0 ref" href="#210NewSel" title='NewSel' data-ref="210NewSel">NewSel</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner16FoldOpIntoSelectERNS_11InstructionEPNS_10SelectInstE" title='llvm::InstCombiner::FoldOpIntoSelect' data-ref="_ZN4llvm12InstCombiner16FoldOpIntoSelectERNS_11InstructionEPNS_10SelectInstE">FoldOpIntoSelect</a>(<span class='refarg'><a class="local col8 ref" href="#208I" title='I' data-ref="208I">I</a></span>, <a class="local col9 ref" href="#209Sel" title='Sel' data-ref="209Sel">Sel</a>))</td></tr>
<tr><th id="1042">1042</th><td>      <b>return</b> <a class="local col0 ref" href="#210NewSel" title='NewSel' data-ref="210NewSel">NewSel</a>;</td></tr>
<tr><th id="1043">1043</th><td>  } <b>else</b> <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="211PN" title='PN' data-type='llvm::PHINode *' data-ref="211PN"><a class="local col1 ref" href="#211PN" title='PN' data-ref="211PN">PN</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col8 ref" href="#208I" title='I' data-ref="208I">I</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>))) {</td></tr>
<tr><th id="1044">1044</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col2 decl" id="212NewPhi" title='NewPhi' data-type='llvm::Instruction *' data-ref="212NewPhi"><a class="local col2 ref" href="#212NewPhi" title='NewPhi' data-ref="212NewPhi">NewPhi</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner13foldOpIntoPhiERNS_11InstructionEPNS_7PHINodeE" title='llvm::InstCombiner::foldOpIntoPhi' data-ref="_ZN4llvm12InstCombiner13foldOpIntoPhiERNS_11InstructionEPNS_7PHINodeE">foldOpIntoPhi</a>(<span class='refarg'><a class="local col8 ref" href="#208I" title='I' data-ref="208I">I</a></span>, <a class="local col1 ref" href="#211PN" title='PN' data-ref="211PN">PN</a>))</td></tr>
<tr><th id="1045">1045</th><td>      <b>return</b> <a class="local col2 ref" href="#212NewPhi" title='NewPhi' data-ref="212NewPhi">NewPhi</a>;</td></tr>
<tr><th id="1046">1046</th><td>  }</td></tr>
<tr><th id="1047">1047</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1048">1048</th><td>}</td></tr>
<tr><th id="1049">1049</th><td></td></tr>
<tr><th id="1050">1050</th><td><i class="doc">/// Given a pointer type and a constant offset, determine whether or not there</i></td></tr>
<tr><th id="1051">1051</th><td><i class="doc">/// is a sequence of GEP indices into the pointed type that will land us at the</i></td></tr>
<tr><th id="1052">1052</th><td><i class="doc">/// specified offset. If so, fill them into NewIndices and return the resultant</i></td></tr>
<tr><th id="1053">1053</th><td><i class="doc">/// element type, otherwise return null.</i></td></tr>
<tr><th id="1054">1054</th><td><a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner19FindElementAtOffsetEPNS_11PointerTypeElRNS_15SmallVectorImplIPNS_5ValueEEE" title='llvm::InstCombiner::FindElementAtOffset' data-ref="_ZN4llvm12InstCombiner19FindElementAtOffsetEPNS_11PointerTypeElRNS_15SmallVectorImplIPNS_5ValueEEE">FindElementAtOffset</dfn>(<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a> *<dfn class="local col3 decl" id="213PtrTy" title='PtrTy' data-type='llvm::PointerType *' data-ref="213PtrTy">PtrTy</dfn>, <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t">int64_t</a> <dfn class="local col4 decl" id="214Offset" title='Offset' data-type='int64_t' data-ref="214Offset">Offset</dfn>,</td></tr>
<tr><th id="1055">1055</th><td>                                        <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl">SmallVectorImpl</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&gt; &amp;<dfn class="local col5 decl" id="215NewIndices" title='NewIndices' data-type='SmallVectorImpl&lt;llvm::Value *&gt; &amp;' data-ref="215NewIndices">NewIndices</dfn>) {</td></tr>
<tr><th id="1056">1056</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="216Ty" title='Ty' data-type='llvm::Type *' data-ref="216Ty">Ty</dfn> = <a class="local col3 ref" href="#213PtrTy" title='PtrTy' data-ref="213PtrTy">PtrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType14getElementTypeEv" title='llvm::PointerType::getElementType' data-ref="_ZNK4llvm11PointerType14getElementTypeEv">getElementType</a>();</td></tr>
<tr><th id="1057">1057</th><td>  <b>if</b> (!<a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>())</td></tr>
<tr><th id="1058">1058</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1059">1059</th><td></td></tr>
<tr><th id="1060">1060</th><td>  <i>// Start with the index over the outer type.  Note that the type size</i></td></tr>
<tr><th id="1061">1061</th><td><i>  // might be zero (even if the offset isn't zero) if the indexed type</i></td></tr>
<tr><th id="1062">1062</th><td><i>  // is something like [0 x {int, int}]</i></td></tr>
<tr><th id="1063">1063</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col7 decl" id="217IndexTy" title='IndexTy' data-type='llvm::Type *' data-ref="217IndexTy">IndexTy</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col3 ref" href="#213PtrTy" title='PtrTy' data-ref="213PtrTy">PtrTy</a>);</td></tr>
<tr><th id="1064">1064</th><td>  <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t">int64_t</a> <dfn class="local col8 decl" id="218FirstIdx" title='FirstIdx' data-type='int64_t' data-ref="218FirstIdx">FirstIdx</dfn> = <var>0</var>;</td></tr>
<tr><th id="1065">1065</th><td>  <b>if</b> (<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t">int64_t</a> <dfn class="local col9 decl" id="219TySize" title='TySize' data-type='int64_t' data-ref="219TySize"><a class="local col9 ref" href="#219TySize" title='TySize' data-ref="219TySize">TySize</a></dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>)) {</td></tr>
<tr><th id="1066">1066</th><td>    <a class="local col8 ref" href="#218FirstIdx" title='FirstIdx' data-ref="218FirstIdx">FirstIdx</a> = <a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a>/<a class="local col9 ref" href="#219TySize" title='TySize' data-ref="219TySize">TySize</a>;</td></tr>
<tr><th id="1067">1067</th><td>    <a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> -= <a class="local col8 ref" href="#218FirstIdx" title='FirstIdx' data-ref="218FirstIdx">FirstIdx</a>*<a class="local col9 ref" href="#219TySize" title='TySize' data-ref="219TySize">TySize</a>;</td></tr>
<tr><th id="1068">1068</th><td></td></tr>
<tr><th id="1069">1069</th><td>    <i>// Handle hosts where % returns negative instead of values [0..TySize).</i></td></tr>
<tr><th id="1070">1070</th><td>    <b>if</b> (<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> &lt; <var>0</var>) {</td></tr>
<tr><th id="1071">1071</th><td>      --<a class="local col8 ref" href="#218FirstIdx" title='FirstIdx' data-ref="218FirstIdx">FirstIdx</a>;</td></tr>
<tr><th id="1072">1072</th><td>      <a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> += <a class="local col9 ref" href="#219TySize" title='TySize' data-ref="219TySize">TySize</a>;</td></tr>
<tr><th id="1073">1073</th><td>      <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Offset &gt;= 0) ? void (0) : __assert_fail (&quot;Offset &gt;= 0&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1073, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> &gt;= <var>0</var>);</td></tr>
<tr><th id="1074">1074</th><td>    }</td></tr>
<tr><th id="1075">1075</th><td>    <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; ((uint64_t)Offset &lt; (uint64_t)TySize &amp;&amp; &quot;Out of range offset&quot;) ? void (0) : __assert_fail (&quot;(uint64_t)Offset &lt; (uint64_t)TySize &amp;&amp; \&quot;Out of range offset\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1075, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>((<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a>)<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> &lt; (<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a>)<a class="local col9 ref" href="#219TySize" title='TySize' data-ref="219TySize">TySize</a> &amp;&amp; <q>"Out of range offset"</q>);</td></tr>
<tr><th id="1076">1076</th><td>  }</td></tr>
<tr><th id="1077">1077</th><td></td></tr>
<tr><th id="1078">1078</th><td>  <a class="local col5 ref" href="#215NewIndices" title='NewIndices' data-ref="215NewIndices">NewIndices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</a>(<a class="local col7 ref" href="#217IndexTy" title='IndexTy' data-ref="217IndexTy">IndexTy</a>, <a class="local col8 ref" href="#218FirstIdx" title='FirstIdx' data-ref="218FirstIdx">FirstIdx</a>));</td></tr>
<tr><th id="1079">1079</th><td></td></tr>
<tr><th id="1080">1080</th><td>  <i>// Index into the types.  If we fail, set OrigBase to null.</i></td></tr>
<tr><th id="1081">1081</th><td>  <b>while</b> (<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a>) {</td></tr>
<tr><th id="1082">1082</th><td>    <i>// Indexing into tail padding between struct/array elements.</i></td></tr>
<tr><th id="1083">1083</th><td>    <b>if</b> (<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a>(<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> * <var>8</var>) &gt;= <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout17getTypeSizeInBitsEPNS_4TypeE" title='llvm::DataLayout::getTypeSizeInBits' data-ref="_ZNK4llvm10DataLayout17getTypeSizeInBitsEPNS_4TypeE">getTypeSizeInBits</a>(<a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>))</td></tr>
<tr><th id="1084">1084</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1085">1085</th><td></td></tr>
<tr><th id="1086">1086</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::StructType" title='llvm::StructType' data-ref="llvm::StructType">StructType</a> *<dfn class="local col0 decl" id="220STy" title='STy' data-type='llvm::StructType *' data-ref="220STy"><a class="local col0 ref" href="#220STy" title='STy' data-ref="220STy">STy</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::StructType" title='llvm::StructType' data-ref="llvm::StructType">StructType</a>&gt;(<a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>)) {</td></tr>
<tr><th id="1087">1087</th><td>      <em>const</em> <a class="type" href="../../../include/llvm/IR/DataLayout.h.html#llvm::StructLayout" title='llvm::StructLayout' data-ref="llvm::StructLayout">StructLayout</a> *<dfn class="local col1 decl" id="221SL" title='SL' data-type='const llvm::StructLayout *' data-ref="221SL">SL</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout15getStructLayoutEPNS_10StructTypeE" title='llvm::DataLayout::getStructLayout' data-ref="_ZNK4llvm10DataLayout15getStructLayoutEPNS_10StructTypeE">getStructLayout</a>(<a class="local col0 ref" href="#220STy" title='STy' data-ref="220STy">STy</a>);</td></tr>
<tr><th id="1088">1088</th><td>      <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Offset &lt; (int64_t)SL-&gt;getSizeInBytes() &amp;&amp; &quot;Offset must stay within the indexed type&quot;) ? void (0) : __assert_fail (&quot;Offset &lt; (int64_t)SL-&gt;getSizeInBytes() &amp;&amp; \&quot;Offset must stay within the indexed type\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1089, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> &lt; (<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int64_t" title='int64_t' data-type='__int64_t' data-ref="int64_t">int64_t</a>)<a class="local col1 ref" href="#221SL" title='SL' data-ref="221SL">SL</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm12StructLayout14getSizeInBytesEv" title='llvm::StructLayout::getSizeInBytes' data-ref="_ZNK4llvm12StructLayout14getSizeInBytesEv">getSizeInBytes</a>() &amp;&amp;</td></tr>
<tr><th id="1089">1089</th><td>             <q>"Offset must stay within the indexed type"</q>);</td></tr>
<tr><th id="1090">1090</th><td></td></tr>
<tr><th id="1091">1091</th><td>      <em>unsigned</em> <dfn class="local col2 decl" id="222Elt" title='Elt' data-type='unsigned int' data-ref="222Elt">Elt</dfn> = <a class="local col1 ref" href="#221SL" title='SL' data-ref="221SL">SL</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm12StructLayout26getElementContainingOffsetEm" title='llvm::StructLayout::getElementContainingOffset' data-ref="_ZNK4llvm12StructLayout26getElementContainingOffsetEm">getElementContainingOffset</a>(<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a>);</td></tr>
<tr><th id="1092">1092</th><td>      <a class="local col5 ref" href="#215NewIndices" title='NewIndices' data-ref="215NewIndices">NewIndices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE" title='llvm::Type::getInt32Ty' data-ref="_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE">getInt32Ty</a>(<span class='refarg'><a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10getContextEv" title='llvm::Type::getContext' data-ref="_ZNK4llvm4Type10getContextEv">getContext</a>()</span>),</td></tr>
<tr><th id="1093">1093</th><td>                                            <a class="local col2 ref" href="#222Elt" title='Elt' data-ref="222Elt">Elt</a>));</td></tr>
<tr><th id="1094">1094</th><td></td></tr>
<tr><th id="1095">1095</th><td>      <a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> -= <a class="local col1 ref" href="#221SL" title='SL' data-ref="221SL">SL</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm12StructLayout16getElementOffsetEj" title='llvm::StructLayout::getElementOffset' data-ref="_ZNK4llvm12StructLayout16getElementOffsetEj">getElementOffset</a>(<a class="local col2 ref" href="#222Elt" title='Elt' data-ref="222Elt">Elt</a>);</td></tr>
<tr><th id="1096">1096</th><td>      <a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a> = <a class="local col0 ref" href="#220STy" title='STy' data-ref="220STy">STy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm10StructType14getElementTypeEj" title='llvm::StructType::getElementType' data-ref="_ZNK4llvm10StructType14getElementTypeEj">getElementType</a>(<a class="local col2 ref" href="#222Elt" title='Elt' data-ref="222Elt">Elt</a>);</td></tr>
<tr><th id="1097">1097</th><td>    } <b>else</b> <b>if</b> (<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a> *<dfn class="local col3 decl" id="223AT" title='AT' data-type='llvm::ArrayType *' data-ref="223AT"><a class="local col3 ref" href="#223AT" title='AT' data-ref="223AT">AT</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>)) {</td></tr>
<tr><th id="1098">1098</th><td>      <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col4 decl" id="224EltSize" title='EltSize' data-type='uint64_t' data-ref="224EltSize">EltSize</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col3 ref" href="#223AT" title='AT' data-ref="223AT">AT</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>());</td></tr>
<tr><th id="1099">1099</th><td>      <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (EltSize &amp;&amp; &quot;Cannot index into a zero-sized array&quot;) ? void (0) : __assert_fail (&quot;EltSize &amp;&amp; \&quot;Cannot index into a zero-sized array\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1099, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#224EltSize" title='EltSize' data-ref="224EltSize">EltSize</a> &amp;&amp; <q>"Cannot index into a zero-sized array"</q>);</td></tr>
<tr><th id="1100">1100</th><td>      <a class="local col5 ref" href="#215NewIndices" title='NewIndices' data-ref="215NewIndices">NewIndices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</a>(<a class="local col7 ref" href="#217IndexTy" title='IndexTy' data-ref="217IndexTy">IndexTy</a>,<a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a>/<a class="local col4 ref" href="#224EltSize" title='EltSize' data-ref="224EltSize">EltSize</a>));</td></tr>
<tr><th id="1101">1101</th><td>      <a class="local col4 ref" href="#214Offset" title='Offset' data-ref="214Offset">Offset</a> %= <a class="local col4 ref" href="#224EltSize" title='EltSize' data-ref="224EltSize">EltSize</a>;</td></tr>
<tr><th id="1102">1102</th><td>      <a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a> = <a class="local col3 ref" href="#223AT" title='AT' data-ref="223AT">AT</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>();</td></tr>
<tr><th id="1103">1103</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1104">1104</th><td>      <i>// Otherwise, we can't index into the middle of this atomic type, bail.</i></td></tr>
<tr><th id="1105">1105</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1106">1106</th><td>    }</td></tr>
<tr><th id="1107">1107</th><td>  }</td></tr>
<tr><th id="1108">1108</th><td></td></tr>
<tr><th id="1109">1109</th><td>  <b>return</b> <a class="local col6 ref" href="#216Ty" title='Ty' data-ref="216Ty">Ty</a>;</td></tr>
<tr><th id="1110">1110</th><td>}</td></tr>
<tr><th id="1111">1111</th><td></td></tr>
<tr><th id="1112">1112</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_" title='shouldMergeGEPs' data-type='bool shouldMergeGEPs(llvm::GEPOperator &amp; GEP, llvm::GEPOperator &amp; Src)' data-ref="_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_">shouldMergeGEPs</dfn>(<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a> &amp;<dfn class="local col5 decl" id="225GEP" title='GEP' data-type='llvm::GEPOperator &amp;' data-ref="225GEP">GEP</dfn>, <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a> &amp;<dfn class="local col6 decl" id="226Src" title='Src' data-type='llvm::GEPOperator &amp;' data-ref="226Src">Src</dfn>) {</td></tr>
<tr><th id="1113">1113</th><td>  <i>// If this GEP has only 0 indices, it is the same pointer as</i></td></tr>
<tr><th id="1114">1114</th><td><i>  // Src. If Src is not a trivial GEP too, don't combine</i></td></tr>
<tr><th id="1115">1115</th><td><i>  // the indices.</i></td></tr>
<tr><th id="1116">1116</th><td>  <b>if</b> (<a class="local col5 ref" href="#225GEP" title='GEP' data-ref="225GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator17hasAllZeroIndicesEv" title='llvm::GEPOperator::hasAllZeroIndices' data-ref="_ZNK4llvm11GEPOperator17hasAllZeroIndicesEv">hasAllZeroIndices</a>() &amp;&amp; !<a class="local col6 ref" href="#226Src" title='Src' data-ref="226Src">Src</a>.<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator17hasAllZeroIndicesEv" title='llvm::GEPOperator::hasAllZeroIndices' data-ref="_ZNK4llvm11GEPOperator17hasAllZeroIndicesEv">hasAllZeroIndices</a>() &amp;&amp;</td></tr>
<tr><th id="1117">1117</th><td>      !<a class="local col6 ref" href="#226Src" title='Src' data-ref="226Src">Src</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1118">1118</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1119">1119</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1120">1120</th><td>}</td></tr>
<tr><th id="1121">1121</th><td></td></tr>
<tr><th id="1122">1122</th><td><i class="doc">/// Return a value X such that Val = X * Scale, or null if none.</i></td></tr>
<tr><th id="1123">1123</th><td><i class="doc">/// If the multiplication is known not to overflow, then NoSignedWrap is set.</i></td></tr>
<tr><th id="1124">1124</th><td><a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb" title='llvm::InstCombiner::Descale' data-ref="_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb">Descale</dfn>(<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="227Val" title='Val' data-type='llvm::Value *' data-ref="227Val">Val</dfn>, <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col8 decl" id="228Scale" title='Scale' data-type='llvm::APInt' data-ref="228Scale">Scale</dfn>, <em>bool</em> &amp;<dfn class="local col9 decl" id="229NoSignedWrap" title='NoSignedWrap' data-type='bool &amp;' data-ref="229NoSignedWrap">NoSignedWrap</dfn>) {</td></tr>
<tr><th id="1125">1125</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (isa&lt;IntegerType&gt;(Val-&gt;getType()) &amp;&amp; &quot;Can only descale integers!&quot;) ? void (0) : __assert_fail (&quot;isa&lt;IntegerType&gt;(Val-&gt;getType()) &amp;&amp; \&quot;Can only descale integers!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1125, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a>&gt;(<a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()) &amp;&amp; <q>"Can only descale integers!"</q>);</td></tr>
<tr><th id="1126">1126</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (cast&lt;IntegerType&gt;(Val-&gt;getType())-&gt;getBitWidth() == Scale.getBitWidth() &amp;&amp; &quot;Scale not compatible with value!&quot;) ? void (0) : __assert_fail (&quot;cast&lt;IntegerType&gt;(Val-&gt;getType())-&gt;getBitWidth() == Scale.getBitWidth() &amp;&amp; \&quot;Scale not compatible with value!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1127, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a>&gt;(<a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11IntegerType11getBitWidthEv" title='llvm::IntegerType::getBitWidth' data-ref="_ZNK4llvm11IntegerType11getBitWidthEv">getBitWidth</a>() ==</td></tr>
<tr><th id="1127">1127</th><td>         <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt11getBitWidthEv" title='llvm::APInt::getBitWidth' data-ref="_ZNK4llvm5APInt11getBitWidthEv">getBitWidth</a>() &amp;&amp; <q>"Scale not compatible with value!"</q>);</td></tr>
<tr><th id="1128">1128</th><td></td></tr>
<tr><th id="1129">1129</th><td>  <i>// If Val is zero or Scale is one then Val = Val * Scale.</i></td></tr>
<tr><th id="1130">1130</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_ZeroEv" title='llvm::PatternMatch::m_Zero' data-ref="_ZN4llvm12PatternMatch6m_ZeroEv">m_Zero</a>()) || <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a> <a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInteqEm" title='llvm::APInt::operator==' data-ref="_ZNK4llvm5APInteqEm">==</a> <var>1</var>) {</td></tr>
<tr><th id="1131">1131</th><td>    <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <b>true</b>;</td></tr>
<tr><th id="1132">1132</th><td>    <b>return</b> <a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>;</td></tr>
<tr><th id="1133">1133</th><td>  }</td></tr>
<tr><th id="1134">1134</th><td></td></tr>
<tr><th id="1135">1135</th><td>  <i>// If Scale is zero then it does not divide Val.</i></td></tr>
<tr><th id="1136">1136</th><td>  <b>if</b> (<a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt10isMinValueEv" title='llvm::APInt::isMinValue' data-ref="_ZNK4llvm5APInt10isMinValueEv">isMinValue</a>())</td></tr>
<tr><th id="1137">1137</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1138">1138</th><td></td></tr>
<tr><th id="1139">1139</th><td>  <i>// Look through chains of multiplications, searching for a constant that is</i></td></tr>
<tr><th id="1140">1140</th><td><i>  // divisible by Scale.  For example, descaling X*(Y*(Z*4)) by a factor of 4</i></td></tr>
<tr><th id="1141">1141</th><td><i>  // will find the constant factor 4 and produce X*(Y*Z).  Descaling X*(Y*8) by</i></td></tr>
<tr><th id="1142">1142</th><td><i>  // a factor of 4 will produce X*(Y*2).  The principle of operation is to bore</i></td></tr>
<tr><th id="1143">1143</th><td><i>  // down from Val:</i></td></tr>
<tr><th id="1144">1144</th><td><i>  //</i></td></tr>
<tr><th id="1145">1145</th><td><i>  //     Val = M1 * X          ||   Analysis starts here and works down</i></td></tr>
<tr><th id="1146">1146</th><td><i>  //      M1 = M2 * Y          ||   Doesn't descend into terms with more</i></td></tr>
<tr><th id="1147">1147</th><td><i>  //      M2 =  Z * 4          \/   than one use</i></td></tr>
<tr><th id="1148">1148</th><td><i>  //</i></td></tr>
<tr><th id="1149">1149</th><td><i>  // Then to modify a term at the bottom:</i></td></tr>
<tr><th id="1150">1150</th><td><i>  //</i></td></tr>
<tr><th id="1151">1151</th><td><i>  //     Val = M1 * X</i></td></tr>
<tr><th id="1152">1152</th><td><i>  //      M1 =  Z * Y          ||   Replaced M2 with Z</i></td></tr>
<tr><th id="1153">1153</th><td><i>  //</i></td></tr>
<tr><th id="1154">1154</th><td><i>  // Then to work back up correcting nsw flags.</i></td></tr>
<tr><th id="1155">1155</th><td><i></i></td></tr>
<tr><th id="1156">1156</th><td><i>  // Op - the term we are currently analyzing.  Starts at Val then drills down.</i></td></tr>
<tr><th id="1157">1157</th><td><i>  // Replaced with its descaled value before exiting from the drill down loop.</i></td></tr>
<tr><th id="1158">1158</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="230Op" title='Op' data-type='llvm::Value *' data-ref="230Op">Op</dfn> = <a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>;</td></tr>
<tr><th id="1159">1159</th><td></td></tr>
<tr><th id="1160">1160</th><td>  <i>// Parent - initially null, but after drilling down notes where Op came from.</i></td></tr>
<tr><th id="1161">1161</th><td><i>  // In the example above, Parent is (Val, 0) when Op is M1, because M1 is the</i></td></tr>
<tr><th id="1162">1162</th><td><i>  // 0'th operand of Val.</i></td></tr>
<tr><th id="1163">1163</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair" title='std::pair' data-ref="std::pair">pair</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *, <em>unsigned</em>&gt; <a class="ref fake" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairC1Ev" title='std::pair::pair&lt;_T1, _T2&gt;' data-ref="_ZNSt4pairC1Ev"></a><dfn class="local col1 decl" id="231Parent" title='Parent' data-type='std::pair&lt;Instruction *, unsigned int&gt;' data-ref="231Parent">Parent</dfn>;</td></tr>
<tr><th id="1164">1164</th><td></td></tr>
<tr><th id="1165">1165</th><td>  <i>// Set if the transform requires a descaling at deeper levels that doesn't</i></td></tr>
<tr><th id="1166">1166</th><td><i>  // overflow.</i></td></tr>
<tr><th id="1167">1167</th><td>  <em>bool</em> <dfn class="local col2 decl" id="232RequireNoSignedWrap" title='RequireNoSignedWrap' data-type='bool' data-ref="232RequireNoSignedWrap">RequireNoSignedWrap</dfn> = <b>false</b>;</td></tr>
<tr><th id="1168">1168</th><td></td></tr>
<tr><th id="1169">1169</th><td>  <i>// Log base 2 of the scale. Negative if not a power of 2.</i></td></tr>
<tr><th id="1170">1170</th><td>  <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t">int32_t</a> <dfn class="local col3 decl" id="233logScale" title='logScale' data-type='int32_t' data-ref="233logScale">logScale</dfn> = <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt13exactLogBase2Ev" title='llvm::APInt::exactLogBase2' data-ref="_ZNK4llvm5APInt13exactLogBase2Ev">exactLogBase2</a>();</td></tr>
<tr><th id="1171">1171</th><td></td></tr>
<tr><th id="1172">1172</th><td>  <b>for</b> (;; <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> = <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::second' data-ref="std::pair::second">second</a>)) { <i>// Drill down</i></td></tr>
<tr><th id="1173">1173</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col4 decl" id="234CI" title='CI' data-type='llvm::ConstantInt *' data-ref="234CI"><a class="local col4 ref" href="#234CI" title='CI' data-ref="234CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>)) {</td></tr>
<tr><th id="1174">1174</th><td>      <i>// If Op is a constant divisible by Scale then descale to the quotient.</i></td></tr>
<tr><th id="1175">1175</th><td>      <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col5 decl" id="235Quotient" title='Quotient' data-type='llvm::APInt' data-ref="235Quotient">Quotient</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1ERKS0_" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1ERKS0_">(</a><a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>), <dfn class="local col6 decl" id="236Remainder" title='Remainder' data-type='llvm::APInt' data-ref="236Remainder">Remainder</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1ERKS0_" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1ERKS0_">(</a><a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>); <i>// Init ensures right bitwidth.</i></td></tr>
<tr><th id="1176">1176</th><td>      <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a>::<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APInt7sdivremERKS0_S2_RS0_S3_" title='llvm::APInt::sdivrem' data-ref="_ZN4llvm5APInt7sdivremERKS0_S2_RS0_S3_">sdivrem</a>(<a class="local col4 ref" href="#234CI" title='CI' data-ref="234CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt8getValueEv" title='llvm::ConstantInt::getValue' data-ref="_ZNK4llvm11ConstantInt8getValueEv">getValue</a>(), <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>, <span class='refarg'><a class="local col5 ref" href="#235Quotient" title='Quotient' data-ref="235Quotient">Quotient</a></span>, <span class='refarg'><a class="local col6 ref" href="#236Remainder" title='Remainder' data-ref="236Remainder">Remainder</a></span>);</td></tr>
<tr><th id="1177">1177</th><td>      <b>if</b> (!<a class="local col6 ref" href="#236Remainder" title='Remainder' data-ref="236Remainder">Remainder</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt10isMinValueEv" title='llvm::APInt::isMinValue' data-ref="_ZNK4llvm5APInt10isMinValueEv">isMinValue</a>())</td></tr>
<tr><th id="1178">1178</th><td>        <i>// Not divisible by Scale.</i></td></tr>
<tr><th id="1179">1179</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1180">1180</th><td>      <i>// Replace with the quotient in the parent.</i></td></tr>
<tr><th id="1181">1181</th><td>      <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeERKNS_5APIntE" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeERKNS_5APIntE">get</a>(<a class="local col4 ref" href="#234CI" title='CI' data-ref="234CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt7getTypeEv" title='llvm::ConstantInt::getType' data-ref="_ZNK4llvm11ConstantInt7getTypeEv">getType</a>(), <a class="local col5 ref" href="#235Quotient" title='Quotient' data-ref="235Quotient">Quotient</a>);</td></tr>
<tr><th id="1182">1182</th><td>      <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <b>true</b>;</td></tr>
<tr><th id="1183">1183</th><td>      <b>break</b>;</td></tr>
<tr><th id="1184">1184</th><td>    }</td></tr>
<tr><th id="1185">1185</th><td></td></tr>
<tr><th id="1186">1186</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col7 decl" id="237BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="237BO"><a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>)) {</td></tr>
<tr><th id="1187">1187</th><td>      <b>if</b> (<a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#151" title='llvm::Instruction::BinaryOps::Mul' data-ref="llvm::Instruction::BinaryOps::Mul">Mul</a>) {</td></tr>
<tr><th id="1188">1188</th><td>        <i>// Multiplication.</i></td></tr>
<tr><th id="1189">1189</th><td>        <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction15hasNoSignedWrapEv" title='llvm::Instruction::hasNoSignedWrap' data-ref="_ZNK4llvm11Instruction15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="1190">1190</th><td>        <b>if</b> (<a class="local col2 ref" href="#232RequireNoSignedWrap" title='RequireNoSignedWrap' data-ref="232RequireNoSignedWrap">RequireNoSignedWrap</a> &amp;&amp; !<a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a>)</td></tr>
<tr><th id="1191">1191</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1192">1192</th><td></td></tr>
<tr><th id="1193">1193</th><td>        <i>// There are three cases for multiplication: multiplication by exactly</i></td></tr>
<tr><th id="1194">1194</th><td><i>        // the scale, multiplication by a constant different to the scale, and</i></td></tr>
<tr><th id="1195">1195</th><td><i>        // multiplication by something else.</i></td></tr>
<tr><th id="1196">1196</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="238LHS" title='LHS' data-type='llvm::Value *' data-ref="238LHS">LHS</dfn> = <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="1197">1197</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="239RHS" title='RHS' data-type='llvm::Value *' data-ref="239RHS">RHS</dfn> = <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1198">1198</th><td></td></tr>
<tr><th id="1199">1199</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col0 decl" id="240CI" title='CI' data-type='llvm::ConstantInt *' data-ref="240CI"><a class="local col0 ref" href="#240CI" title='CI' data-ref="240CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col9 ref" href="#239RHS" title='RHS' data-ref="239RHS">RHS</a>)) {</td></tr>
<tr><th id="1200">1200</th><td>          <i>// Multiplication by a constant.</i></td></tr>
<tr><th id="1201">1201</th><td>          <b>if</b> (<a class="local col0 ref" href="#240CI" title='CI' data-ref="240CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt8getValueEv" title='llvm::ConstantInt::getValue' data-ref="_ZNK4llvm11ConstantInt8getValueEv">getValue</a>() <a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInteqERKS0_" title='llvm::APInt::operator==' data-ref="_ZNK4llvm5APInteqERKS0_">==</a> <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>) {</td></tr>
<tr><th id="1202">1202</th><td>            <i>// Multiplication by exactly the scale, replace the multiplication</i></td></tr>
<tr><th id="1203">1203</th><td><i>            // by its left-hand side in the parent.</i></td></tr>
<tr><th id="1204">1204</th><td>            <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> = <a class="local col8 ref" href="#238LHS" title='LHS' data-ref="238LHS">LHS</a>;</td></tr>
<tr><th id="1205">1205</th><td>            <b>break</b>;</td></tr>
<tr><th id="1206">1206</th><td>          }</td></tr>
<tr><th id="1207">1207</th><td></td></tr>
<tr><th id="1208">1208</th><td>          <i>// Otherwise drill down into the constant.</i></td></tr>
<tr><th id="1209">1209</th><td>          <b>if</b> (!<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1210">1210</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1211">1211</th><td></td></tr>
<tr><th id="1212">1212</th><td>          <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a> <a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairaSEOSt4pairIT_T0_E" title='std::pair::operator=' data-ref="_ZNSt4pairaSEOSt4pairIT_T0_E">=</a> <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZSt9make_pairOT_OT0_" title='std::make_pair' data-ref="_ZSt9make_pairOT_OT0_">make_pair</a>(<span class='refarg'><a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a></span>, <var>1</var>);</td></tr>
<tr><th id="1213">1213</th><td>          <b>continue</b>;</td></tr>
<tr><th id="1214">1214</th><td>        }</td></tr>
<tr><th id="1215">1215</th><td></td></tr>
<tr><th id="1216">1216</th><td>        <i>// Multiplication by something else. Drill down into the left-hand side</i></td></tr>
<tr><th id="1217">1217</th><td><i>        // since that's where the reassociate pass puts the good stuff.</i></td></tr>
<tr><th id="1218">1218</th><td>        <b>if</b> (!<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1219">1219</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1220">1220</th><td></td></tr>
<tr><th id="1221">1221</th><td>        <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a> <a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairaSEOSt4pairIT_T0_E" title='std::pair::operator=' data-ref="_ZNSt4pairaSEOSt4pairIT_T0_E">=</a> <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZSt9make_pairOT_OT0_" title='std::make_pair' data-ref="_ZSt9make_pairOT_OT0_">make_pair</a>(<span class='refarg'><a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a></span>, <var>0</var>);</td></tr>
<tr><th id="1222">1222</th><td>        <b>continue</b>;</td></tr>
<tr><th id="1223">1223</th><td>      }</td></tr>
<tr><th id="1224">1224</th><td></td></tr>
<tr><th id="1225">1225</th><td>      <b>if</b> (<a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a> &gt; <var>0</var> &amp;&amp; <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#161" title='llvm::Instruction::BinaryOps::Shl' data-ref="llvm::Instruction::BinaryOps::Shl">Shl</a> &amp;&amp;</td></tr>
<tr><th id="1226">1226</th><td>          <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>))) {</td></tr>
<tr><th id="1227">1227</th><td>        <i>// Multiplication by a power of 2.</i></td></tr>
<tr><th id="1228">1228</th><td>        <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction15hasNoSignedWrapEv" title='llvm::Instruction::hasNoSignedWrap' data-ref="_ZNK4llvm11Instruction15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="1229">1229</th><td>        <b>if</b> (<a class="local col2 ref" href="#232RequireNoSignedWrap" title='RequireNoSignedWrap' data-ref="232RequireNoSignedWrap">RequireNoSignedWrap</a> &amp;&amp; !<a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a>)</td></tr>
<tr><th id="1230">1230</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1231">1231</th><td></td></tr>
<tr><th id="1232">1232</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="241LHS" title='LHS' data-type='llvm::Value *' data-ref="241LHS">LHS</dfn> = <a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="1233">1233</th><td>        <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t">int32_t</a> <dfn class="local col2 decl" id="242Amt" title='Amt' data-type='int32_t' data-ref="242Amt">Amt</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>))-&gt;</td></tr>
<tr><th id="1234">1234</th><td>          <a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt15getLimitedValueEm" title='llvm::ConstantInt::getLimitedValue' data-ref="_ZNK4llvm11ConstantInt15getLimitedValueEm">getLimitedValue</a>(<a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt11getBitWidthEv" title='llvm::APInt::getBitWidth' data-ref="_ZNK4llvm5APInt11getBitWidthEv">getBitWidth</a>());</td></tr>
<tr><th id="1235">1235</th><td>        <i>// Op = LHS &lt;&lt; Amt.</i></td></tr>
<tr><th id="1236">1236</th><td></td></tr>
<tr><th id="1237">1237</th><td>        <b>if</b> (<a class="local col2 ref" href="#242Amt" title='Amt' data-ref="242Amt">Amt</a> == <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a>) {</td></tr>
<tr><th id="1238">1238</th><td>          <i>// Multiplication by exactly the scale, replace the multiplication</i></td></tr>
<tr><th id="1239">1239</th><td><i>          // by its left-hand side in the parent.</i></td></tr>
<tr><th id="1240">1240</th><td>          <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> = <a class="local col1 ref" href="#241LHS" title='LHS' data-ref="241LHS">LHS</a>;</td></tr>
<tr><th id="1241">1241</th><td>          <b>break</b>;</td></tr>
<tr><th id="1242">1242</th><td>        }</td></tr>
<tr><th id="1243">1243</th><td>        <b>if</b> (<a class="local col2 ref" href="#242Amt" title='Amt' data-ref="242Amt">Amt</a> &lt; <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a> || !<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1244">1244</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1245">1245</th><td></td></tr>
<tr><th id="1246">1246</th><td>        <i>// Multiplication by more than the scale.  Reduce the multiplying amount</i></td></tr>
<tr><th id="1247">1247</th><td><i>        // by the scale in the parent.</i></td></tr>
<tr><th id="1248">1248</th><td>        <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a> <a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairaSEOSt4pairIT_T0_E" title='std::pair::operator=' data-ref="_ZNSt4pairaSEOSt4pairIT_T0_E">=</a> <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZSt9make_pairOT_OT0_" title='std::make_pair' data-ref="_ZSt9make_pairOT_OT0_">make_pair</a>(<span class='refarg'><a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a></span>, <var>1</var>);</td></tr>
<tr><th id="1249">1249</th><td>        <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</a>(<a class="local col7 ref" href="#237BO" title='BO' data-ref="237BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col2 ref" href="#242Amt" title='Amt' data-ref="242Amt">Amt</a> - <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a>);</td></tr>
<tr><th id="1250">1250</th><td>        <b>break</b>;</td></tr>
<tr><th id="1251">1251</th><td>      }</td></tr>
<tr><th id="1252">1252</th><td>    }</td></tr>
<tr><th id="1253">1253</th><td></td></tr>
<tr><th id="1254">1254</th><td>    <b>if</b> (!<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1255">1255</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1256">1256</th><td></td></tr>
<tr><th id="1257">1257</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a> *<dfn class="local col3 decl" id="243Cast" title='Cast' data-type='llvm::CastInst *' data-ref="243Cast"><a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>&gt;(<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>)) {</td></tr>
<tr><th id="1258">1258</th><td>      <b>if</b> (<a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#186" title='llvm::Instruction::CastOps::SExt' data-ref="llvm::Instruction::CastOps::SExt">SExt</a>) {</td></tr>
<tr><th id="1259">1259</th><td>        <i>// Op is sign-extended from a smaller type, descale in the smaller type.</i></td></tr>
<tr><th id="1260">1260</th><td>        <em>unsigned</em> <dfn class="local col4 decl" id="244SmallSize" title='SmallSize' data-type='unsigned int' data-ref="244SmallSize">SmallSize</dfn> = <a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst8getSrcTyEv" title='llvm::CastInst::getSrcTy' data-ref="_ZNK4llvm8CastInst8getSrcTyEv">getSrcTy</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="1261">1261</th><td>        <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col5 decl" id="245SmallScale" title='SmallScale' data-type='llvm::APInt' data-ref="245SmallScale">SmallScale</dfn> = <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt5truncEj" title='llvm::APInt::trunc' data-ref="_ZNK4llvm5APInt5truncEj">trunc</a>(<a class="local col4 ref" href="#244SmallSize" title='SmallSize' data-ref="244SmallSize">SmallSize</a>);</td></tr>
<tr><th id="1262">1262</th><td>        <i>// Suppose Op = sext X, and we descale X as Y * SmallScale.  We want to</i></td></tr>
<tr><th id="1263">1263</th><td><i>        // descale Op as (sext Y) * Scale.  In order to have</i></td></tr>
<tr><th id="1264">1264</th><td><i>        //   sext (Y * SmallScale) = (sext Y) * Scale</i></td></tr>
<tr><th id="1265">1265</th><td><i>        // some conditions need to hold however: SmallScale must sign-extend to</i></td></tr>
<tr><th id="1266">1266</th><td><i>        // Scale and the multiplication Y * SmallScale should not overflow.</i></td></tr>
<tr><th id="1267">1267</th><td>        <b>if</b> (<a class="local col5 ref" href="#245SmallScale" title='SmallScale' data-ref="245SmallScale">SmallScale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt4sextEj" title='llvm::APInt::sext' data-ref="_ZNK4llvm5APInt4sextEj">sext</a>(<a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt11getBitWidthEv" title='llvm::APInt::getBitWidth' data-ref="_ZNK4llvm5APInt11getBitWidthEv">getBitWidth</a>()) <a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APIntneERKS0_" title='llvm::APInt::operator!=' data-ref="_ZNK4llvm5APIntneERKS0_">!=</a> <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>)</td></tr>
<tr><th id="1268">1268</th><td>          <i>// SmallScale does not sign-extend to Scale.</i></td></tr>
<tr><th id="1269">1269</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1270">1270</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (SmallScale.exactLogBase2() == logScale) ? void (0) : __assert_fail (&quot;SmallScale.exactLogBase2() == logScale&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1270, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#245SmallScale" title='SmallScale' data-ref="245SmallScale">SmallScale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt13exactLogBase2Ev" title='llvm::APInt::exactLogBase2' data-ref="_ZNK4llvm5APInt13exactLogBase2Ev">exactLogBase2</a>() == <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a>);</td></tr>
<tr><th id="1271">1271</th><td>        <i>// Require that Y * SmallScale must not overflow.</i></td></tr>
<tr><th id="1272">1272</th><td>        <a class="local col2 ref" href="#232RequireNoSignedWrap" title='RequireNoSignedWrap' data-ref="232RequireNoSignedWrap">RequireNoSignedWrap</a> = <b>true</b>;</td></tr>
<tr><th id="1273">1273</th><td></td></tr>
<tr><th id="1274">1274</th><td>        <i>// Drill down through the cast.</i></td></tr>
<tr><th id="1275">1275</th><td>        <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a> <a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairaSEOSt4pairIT_T0_E" title='std::pair::operator=' data-ref="_ZNSt4pairaSEOSt4pairIT_T0_E">=</a> <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZSt9make_pairOT_OT0_" title='std::make_pair' data-ref="_ZSt9make_pairOT_OT0_">make_pair</a>(<span class='refarg'><a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a></span>, <var>0</var>);</td></tr>
<tr><th id="1276">1276</th><td>        <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a> <a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntaSERKS0_" title='llvm::APInt::operator=' data-ref="_ZN4llvm5APIntaSERKS0_">=</a> <a class="local col5 ref" href="#245SmallScale" title='SmallScale' data-ref="245SmallScale">SmallScale</a>;</td></tr>
<tr><th id="1277">1277</th><td>        <b>continue</b>;</td></tr>
<tr><th id="1278">1278</th><td>      }</td></tr>
<tr><th id="1279">1279</th><td></td></tr>
<tr><th id="1280">1280</th><td>      <b>if</b> (<a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst9getOpcodeEv" title='llvm::CastInst::getOpcode' data-ref="_ZNK4llvm8CastInst9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#184" title='llvm::Instruction::CastOps::Trunc' data-ref="llvm::Instruction::CastOps::Trunc">Trunc</a>) {</td></tr>
<tr><th id="1281">1281</th><td>        <i>// Op is truncated from a larger type, descale in the larger type.</i></td></tr>
<tr><th id="1282">1282</th><td><i>        // Suppose Op = trunc X, and we descale X as Y * sext Scale.  Then</i></td></tr>
<tr><th id="1283">1283</th><td><i>        //   trunc (Y * sext Scale) = (trunc Y) * Scale</i></td></tr>
<tr><th id="1284">1284</th><td><i>        // always holds.  However (trunc Y) * Scale may overflow even if</i></td></tr>
<tr><th id="1285">1285</th><td><i>        // trunc (Y * sext Scale) does not, so nsw flags need to be cleared</i></td></tr>
<tr><th id="1286">1286</th><td><i>        // from this point up in the expression (see later).</i></td></tr>
<tr><th id="1287">1287</th><td>        <b>if</b> (<a class="local col2 ref" href="#232RequireNoSignedWrap" title='RequireNoSignedWrap' data-ref="232RequireNoSignedWrap">RequireNoSignedWrap</a>)</td></tr>
<tr><th id="1288">1288</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1289">1289</th><td></td></tr>
<tr><th id="1290">1290</th><td>        <i>// Drill down through the cast.</i></td></tr>
<tr><th id="1291">1291</th><td>        <em>unsigned</em> <dfn class="local col6 decl" id="246LargeSize" title='LargeSize' data-type='unsigned int' data-ref="246LargeSize">LargeSize</dfn> = <a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst8getSrcTyEv" title='llvm::CastInst::getSrcTy' data-ref="_ZNK4llvm8CastInst8getSrcTyEv">getSrcTy</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="1292">1292</th><td>        <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a> <a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZNSt4pairaSEOSt4pairIT_T0_E" title='std::pair::operator=' data-ref="_ZNSt4pairaSEOSt4pairIT_T0_E">=</a> <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#_ZSt9make_pairOT_OT0_" title='std::make_pair' data-ref="_ZSt9make_pairOT_OT0_">make_pair</a>(<span class='refarg'><a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a></span>, <var>0</var>);</td></tr>
<tr><th id="1293">1293</th><td>        <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a> <a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntaSEOS0_" title='llvm::APInt::operator=' data-ref="_ZN4llvm5APIntaSEOS0_">=</a> <a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt4sextEj" title='llvm::APInt::sext' data-ref="_ZNK4llvm5APInt4sextEj">sext</a>(<a class="local col6 ref" href="#246LargeSize" title='LargeSize' data-ref="246LargeSize">LargeSize</a>);</td></tr>
<tr><th id="1294">1294</th><td>        <b>if</b> (<a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a> + <var>1</var> == (<a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-intn.h.html#int32_t" title='int32_t' data-type='__int32_t' data-ref="int32_t">int32_t</a>)<a class="local col3 ref" href="#243Cast" title='Cast' data-ref="243Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>())</td></tr>
<tr><th id="1295">1295</th><td>          <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a> = -<var>1</var>;</td></tr>
<tr><th id="1296">1296</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Scale.exactLogBase2() == logScale) ? void (0) : __assert_fail (&quot;Scale.exactLogBase2() == logScale&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1296, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col8 ref" href="#228Scale" title='Scale' data-ref="228Scale">Scale</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt13exactLogBase2Ev" title='llvm::APInt::exactLogBase2' data-ref="_ZNK4llvm5APInt13exactLogBase2Ev">exactLogBase2</a>() == <a class="local col3 ref" href="#233logScale" title='logScale' data-ref="233logScale">logScale</a>);</td></tr>
<tr><th id="1297">1297</th><td>        <b>continue</b>;</td></tr>
<tr><th id="1298">1298</th><td>      }</td></tr>
<tr><th id="1299">1299</th><td>    }</td></tr>
<tr><th id="1300">1300</th><td></td></tr>
<tr><th id="1301">1301</th><td>    <i>// Unsupported expression, bail out.</i></td></tr>
<tr><th id="1302">1302</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1303">1303</th><td>  }</td></tr>
<tr><th id="1304">1304</th><td></td></tr>
<tr><th id="1305">1305</th><td>  <i>// If Op is zero then Val = Op * Scale.</i></td></tr>
<tr><th id="1306">1306</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_ZeroEv" title='llvm::PatternMatch::m_Zero' data-ref="_ZN4llvm12PatternMatch6m_ZeroEv">m_Zero</a>())) {</td></tr>
<tr><th id="1307">1307</th><td>    <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <b>true</b>;</td></tr>
<tr><th id="1308">1308</th><td>    <b>return</b> <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>;</td></tr>
<tr><th id="1309">1309</th><td>  }</td></tr>
<tr><th id="1310">1310</th><td></td></tr>
<tr><th id="1311">1311</th><td>  <i>// We know that we can successfully descale, so from here on we can safely</i></td></tr>
<tr><th id="1312">1312</th><td><i>  // modify the IR.  Op holds the descaled version of the deepest term in the</i></td></tr>
<tr><th id="1313">1313</th><td><i>  // expression.  NoSignedWrap is 'true' if multiplying Op by Scale is known</i></td></tr>
<tr><th id="1314">1314</th><td><i>  // not to overflow.</i></td></tr>
<tr><th id="1315">1315</th><td></td></tr>
<tr><th id="1316">1316</th><td>  <b>if</b> (!<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>)</td></tr>
<tr><th id="1317">1317</th><td>    <i>// The expression only had one term.</i></td></tr>
<tr><th id="1318">1318</th><td>    <b>return</b> <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>;</td></tr>
<tr><th id="1319">1319</th><td></td></tr>
<tr><th id="1320">1320</th><td>  <i>// Rewrite the parent using the descaled version of its operand.</i></td></tr>
<tr><th id="1321">1321</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Parent.first-&gt;hasOneUse() &amp;&amp; &quot;Drilled down when more than one use!&quot;) ? void (0) : __assert_fail (&quot;Parent.first-&gt;hasOneUse() &amp;&amp; \&quot;Drilled down when more than one use!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1321, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <q>"Drilled down when more than one use!"</q>);</td></tr>
<tr><th id="1322">1322</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Op != Parent.first-&gt;getOperand(Parent.second) &amp;&amp; &quot;Descaling was a no-op?&quot;) ? void (0) : __assert_fail (&quot;Op != Parent.first-&gt;getOperand(Parent.second) &amp;&amp; \&quot;Descaling was a no-op?\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1323, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a> != <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::second' data-ref="std::pair::second">second</a>) &amp;&amp;</td></tr>
<tr><th id="1323">1323</th><td>         <q>"Descaling was a no-op?"</q>);</td></tr>
<tr><th id="1324">1324</th><td>  <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User10setOperandEjPNS_5ValueE" title='llvm::User::setOperand' data-ref="_ZN4llvm4User10setOperandEjPNS_5ValueE">setOperand</a>(<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::second' data-ref="std::pair::second">second</a>, <a class="local col0 ref" href="#230Op" title='Op' data-ref="230Op">Op</a>);</td></tr>
<tr><th id="1325">1325</th><td>  <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>);</td></tr>
<tr><th id="1326">1326</th><td></td></tr>
<tr><th id="1327">1327</th><td>  <i>// Now work back up the expression correcting nsw flags.  The logic is based</i></td></tr>
<tr><th id="1328">1328</th><td><i>  // on the following observation: if X * Y is known not to overflow as a signed</i></td></tr>
<tr><th id="1329">1329</th><td><i>  // multiplication, and Y is replaced by a value Z with smaller absolute value,</i></td></tr>
<tr><th id="1330">1330</th><td><i>  // then X * Z will not overflow as a signed multiplication either.  As we work</i></td></tr>
<tr><th id="1331">1331</th><td><i>  // our way up, having NoSignedWrap 'true' means that the descaled value at the</i></td></tr>
<tr><th id="1332">1332</th><td><i>  // current level has strictly smaller absolute value than the original.</i></td></tr>
<tr><th id="1333">1333</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col7 decl" id="247Ancestor" title='Ancestor' data-type='llvm::Instruction *' data-ref="247Ancestor">Ancestor</dfn> = <a class="local col1 ref" href="#231Parent" title='Parent' data-ref="231Parent">Parent</a>.<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::first" title='std::pair&lt;llvm::Instruction *, unsigned int&gt;::first' data-ref="std::pair::first">first</a>;</td></tr>
<tr><th id="1334">1334</th><td>  <b>do</b> {</td></tr>
<tr><th id="1335">1335</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> *<dfn class="local col8 decl" id="248BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="248BO"><a class="local col8 ref" href="#248BO" title='BO' data-ref="248BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>)) {</td></tr>
<tr><th id="1336">1336</th><td>      <i>// If the multiplication wasn't nsw then we can't say anything about the</i></td></tr>
<tr><th id="1337">1337</th><td><i>      // value of the descaled multiplication, and we have to clear nsw flags</i></td></tr>
<tr><th id="1338">1338</th><td><i>      // from this point on up.</i></td></tr>
<tr><th id="1339">1339</th><td>      <em>bool</em> <dfn class="local col9 decl" id="249OpNoSignedWrap" title='OpNoSignedWrap' data-type='bool' data-ref="249OpNoSignedWrap">OpNoSignedWrap</dfn> = <a class="local col8 ref" href="#248BO" title='BO' data-ref="248BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction15hasNoSignedWrapEv" title='llvm::Instruction::hasNoSignedWrap' data-ref="_ZNK4llvm11Instruction15hasNoSignedWrapEv">hasNoSignedWrap</a>();</td></tr>
<tr><th id="1340">1340</th><td>      <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> &amp;= <a class="local col9 ref" href="#249OpNoSignedWrap" title='OpNoSignedWrap' data-ref="249OpNoSignedWrap">OpNoSignedWrap</a>;</td></tr>
<tr><th id="1341">1341</th><td>      <b>if</b> (<a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> != <a class="local col9 ref" href="#249OpNoSignedWrap" title='OpNoSignedWrap' data-ref="249OpNoSignedWrap">OpNoSignedWrap</a>) {</td></tr>
<tr><th id="1342">1342</th><td>        <a class="local col8 ref" href="#248BO" title='BO' data-ref="248BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction18setHasNoSignedWrapEb" title='llvm::Instruction::setHasNoSignedWrap' data-ref="_ZN4llvm11Instruction18setHasNoSignedWrapEb">setHasNoSignedWrap</a>(<a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a>);</td></tr>
<tr><th id="1343">1343</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>);</td></tr>
<tr><th id="1344">1344</th><td>      }</td></tr>
<tr><th id="1345">1345</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#184" title='llvm::Instruction::CastOps::Trunc' data-ref="llvm::Instruction::CastOps::Trunc">Trunc</a>) {</td></tr>
<tr><th id="1346">1346</th><td>      <i>// The fact that the descaled input to the trunc has smaller absolute</i></td></tr>
<tr><th id="1347">1347</th><td><i>      // value than the original input doesn't tell us anything useful about</i></td></tr>
<tr><th id="1348">1348</th><td><i>      // the absolute values of the truncations.</i></td></tr>
<tr><th id="1349">1349</th><td>      <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a> = <b>false</b>;</td></tr>
<tr><th id="1350">1350</th><td>    }</td></tr>
<tr><th id="1351">1351</th><td>    <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; ((Ancestor-&gt;getOpcode() != Instruction::SExt || NoSignedWrap) &amp;&amp; &quot;Failed to keep proper track of nsw flags while drilling down?&quot;) ? void (0) : __assert_fail (&quot;(Ancestor-&gt;getOpcode() != Instruction::SExt || NoSignedWrap) &amp;&amp; \&quot;Failed to keep proper track of nsw flags while drilling down?\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1352, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>((<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>() != <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#186" title='llvm::Instruction::CastOps::SExt' data-ref="llvm::Instruction::CastOps::SExt">SExt</a> || <a class="local col9 ref" href="#229NoSignedWrap" title='NoSignedWrap' data-ref="229NoSignedWrap">NoSignedWrap</a>) &amp;&amp;</td></tr>
<tr><th id="1352">1352</th><td>           <q>"Failed to keep proper track of nsw flags while drilling down?"</q>);</td></tr>
<tr><th id="1353">1353</th><td></td></tr>
<tr><th id="1354">1354</th><td>    <b>if</b> (<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a> == <a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>)</td></tr>
<tr><th id="1355">1355</th><td>      <i>// Got to the top, all done!</i></td></tr>
<tr><th id="1356">1356</th><td>      <b>return</b> <a class="local col7 ref" href="#227Val" title='Val' data-ref="227Val">Val</a>;</td></tr>
<tr><th id="1357">1357</th><td></td></tr>
<tr><th id="1358">1358</th><td>    <i>// Move up one level in the expression.</i></td></tr>
<tr><th id="1359">1359</th><td>    <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Ancestor-&gt;hasOneUse() &amp;&amp; &quot;Drilled down when more than one use!&quot;) ? void (0) : __assert_fail (&quot;Ancestor-&gt;hasOneUse() &amp;&amp; \&quot;Drilled down when more than one use!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1359, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <q>"Drilled down when more than one use!"</q>);</td></tr>
<tr><th id="1360">1360</th><td>    <a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a> = <a class="local col7 ref" href="#247Ancestor" title='Ancestor' data-ref="247Ancestor">Ancestor</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9user_backEv" title='llvm::Instruction::user_back' data-ref="_ZN4llvm11Instruction9user_backEv">user_back</a>();</td></tr>
<tr><th id="1361">1361</th><td>  } <b>while</b> (<b>true</b>);</td></tr>
<tr><th id="1362">1362</th><td>}</td></tr>
<tr><th id="1363">1363</th><td></td></tr>
<tr><th id="1364">1364</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner15foldVectorBinopERNS_14BinaryOperatorE" title='llvm::InstCombiner::foldVectorBinop' data-ref="_ZN4llvm12InstCombiner15foldVectorBinopERNS_14BinaryOperatorE">foldVectorBinop</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col0 decl" id="250Inst" title='Inst' data-type='llvm::BinaryOperator &amp;' data-ref="250Inst">Inst</dfn>) {</td></tr>
<tr><th id="1365">1365</th><td>  <b>if</b> (!<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>()) <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1366">1366</th><td></td></tr>
<tr><th id="1367">1367</th><td>  <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col1 decl" id="251Opcode" title='Opcode' data-type='BinaryOperator::BinaryOps' data-ref="251Opcode">Opcode</dfn> = <a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>();</td></tr>
<tr><th id="1368">1368</th><td>  <em>unsigned</em> <dfn class="local col2 decl" id="252NumElts" title='NumElts' data-type='unsigned int' data-ref="252NumElts">NumElts</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="1369">1369</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="253LHS" title='LHS' data-type='llvm::Value *' data-ref="253LHS">LHS</dfn> = <a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col4 decl" id="254RHS" title='RHS' data-type='llvm::Value *' data-ref="254RHS">RHS</dfn> = <a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1370">1370</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (cast&lt;VectorType&gt;(LHS-&gt;getType())-&gt;getNumElements() == NumElts) ? void (0) : __assert_fail (&quot;cast&lt;VectorType&gt;(LHS-&gt;getType())-&gt;getNumElements() == NumElts&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1370, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>() == <a class="local col2 ref" href="#252NumElts" title='NumElts' data-ref="252NumElts">NumElts</a>);</td></tr>
<tr><th id="1371">1371</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (cast&lt;VectorType&gt;(RHS-&gt;getType())-&gt;getNumElements() == NumElts) ? void (0) : __assert_fail (&quot;cast&lt;VectorType&gt;(RHS-&gt;getType())-&gt;getNumElements() == NumElts&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1371, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>() == <a class="local col2 ref" href="#252NumElts" title='NumElts' data-ref="252NumElts">NumElts</a>);</td></tr>
<tr><th id="1372">1372</th><td></td></tr>
<tr><th id="1373">1373</th><td>  <i>// If both operands of the binop are vector concatenations, then perform the</i></td></tr>
<tr><th id="1374">1374</th><td><i>  // narrow binop on each pair of the source operands followed by concatenation</i></td></tr>
<tr><th id="1375">1375</th><td><i>  // of the results.</i></td></tr>
<tr><th id="1376">1376</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="255L0" title='L0' data-type='llvm::Value *' data-ref="255L0">L0</dfn>, *<dfn class="local col6 decl" id="256L1" title='L1' data-type='llvm::Value *' data-ref="256L1">L1</dfn>, *<dfn class="local col7 decl" id="257R0" title='R0' data-type='llvm::Value *' data-ref="257R0">R0</dfn>, *<dfn class="local col8 decl" id="258R1" title='R1' data-type='llvm::Value *' data-ref="258R1">R1</dfn>;</td></tr>
<tr><th id="1377">1377</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col9 decl" id="259Mask" title='Mask' data-type='llvm::Constant *' data-ref="259Mask">Mask</dfn>;</td></tr>
<tr><th id="1378">1378</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col5 ref" href="#255L0" title='L0' data-ref="255L0">L0</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col6 ref" href="#256L1" title='L1' data-ref="256L1">L1</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a></span>))) &amp;&amp;</td></tr>
<tr><th id="1379">1379</th><td>      <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col7 ref" href="#257R0" title='R0' data-ref="257R0">R0</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col8 ref" href="#258R1" title='R1' data-ref="258R1">R1</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>))) &amp;&amp;</td></tr>
<tr><th id="1380">1380</th><td>      <a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp;</td></tr>
<tr><th id="1381">1381</th><td>      <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst8isConcatEv" title='llvm::ShuffleVectorInst::isConcat' data-ref="_ZNK4llvm17ShuffleVectorInst8isConcatEv">isConcat</a>() &amp;&amp;</td></tr>
<tr><th id="1382">1382</th><td>      <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst8isConcatEv" title='llvm::ShuffleVectorInst::isConcat' data-ref="_ZNK4llvm17ShuffleVectorInst8isConcatEv">isConcat</a>()) {</td></tr>
<tr><th id="1383">1383</th><td>    <i>// This transform does not have the speculative execution constraint as</i></td></tr>
<tr><th id="1384">1384</th><td><i>    // below because the shuffle is a concatenation. The new binops are</i></td></tr>
<tr><th id="1385">1385</th><td><i>    // operating on exactly the same elements as the existing binop.</i></td></tr>
<tr><th id="1386">1386</th><td><i>    // TODO: We could ease the mask requirement to allow different undef lanes,</i></td></tr>
<tr><th id="1387">1387</th><td><i>    //       but that requires an analysis of the binop-with-undef output value.</i></td></tr>
<tr><th id="1388">1388</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="260NewBO0" title='NewBO0' data-type='llvm::Value *' data-ref="260NewBO0">NewBO0</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col5 ref" href="#255L0" title='L0' data-ref="255L0">L0</a>, <a class="local col7 ref" href="#257R0" title='R0' data-ref="257R0">R0</a>);</td></tr>
<tr><th id="1389">1389</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="261BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="261BO"><a class="local col1 ref" href="#261BO" title='BO' data-ref="261BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col0 ref" href="#260NewBO0" title='NewBO0' data-ref="260NewBO0">NewBO0</a>))</td></tr>
<tr><th id="1390">1390</th><td>      <a class="local col1 ref" href="#261BO" title='BO' data-ref="261BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb" title='llvm::Instruction::copyIRFlags' data-ref="_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb">copyIRFlags</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>);</td></tr>
<tr><th id="1391">1391</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="262NewBO1" title='NewBO1' data-type='llvm::Value *' data-ref="262NewBO1">NewBO1</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col6 ref" href="#256L1" title='L1' data-ref="256L1">L1</a>, <a class="local col8 ref" href="#258R1" title='R1' data-ref="258R1">R1</a>);</td></tr>
<tr><th id="1392">1392</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col3 decl" id="263BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="263BO"><a class="local col3 ref" href="#263BO" title='BO' data-ref="263BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col2 ref" href="#262NewBO1" title='NewBO1' data-ref="262NewBO1">NewBO1</a>))</td></tr>
<tr><th id="1393">1393</th><td>      <a class="local col3 ref" href="#263BO" title='BO' data-ref="263BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb" title='llvm::Instruction::copyIRFlags' data-ref="_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb">copyIRFlags</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>);</td></tr>
<tr><th id="1394">1394</th><td>    <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17ShuffleVectorInstC1EPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::ShuffleVectorInst::ShuffleVectorInst' data-ref="_ZN4llvm17ShuffleVectorInstC1EPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">(</a><a class="local col0 ref" href="#260NewBO0" title='NewBO0' data-ref="260NewBO0">NewBO0</a>, <a class="local col2 ref" href="#262NewBO1" title='NewBO1' data-ref="262NewBO1">NewBO1</a>, <a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>);</td></tr>
<tr><th id="1395">1395</th><td>  }</td></tr>
<tr><th id="1396">1396</th><td></td></tr>
<tr><th id="1397">1397</th><td>  <i>// It may not be safe to reorder shuffles and things like div, urem, etc.</i></td></tr>
<tr><th id="1398">1398</th><td><i>  // because we may trap when executing those ops on unknown vector elements.</i></td></tr>
<tr><th id="1399">1399</th><td><i>  // See PR20059.</i></td></tr>
<tr><th id="1400">1400</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/Analysis/ValueTracking.h.html#_ZN4llvm28isSafeToSpeculativelyExecuteEPKNS_5ValueEPKNS_11InstructionEPKNS_13DominatorTreeE" title='llvm::isSafeToSpeculativelyExecute' data-ref="_ZN4llvm28isSafeToSpeculativelyExecuteEPKNS_5ValueEPKNS_11InstructionEPKNS_13DominatorTreeE">isSafeToSpeculativelyExecute</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>))</td></tr>
<tr><th id="1401">1401</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1402">1402</th><td></td></tr>
<tr><th id="1403">1403</th><td>  <em>auto</em> <dfn class="local col4 decl" id="264createBinOpShuffle" title='createBinOpShuffle' data-type='(lambda at /root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp:1403:29)' data-ref="264createBinOpShuffle">createBinOpShuffle</dfn> = [&amp;](<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="265X" title='X' data-type='llvm::Value *' data-ref="265X">X</dfn>, <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="266Y" title='Y' data-type='llvm::Value *' data-ref="266Y">Y</dfn>, <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col7 decl" id="267M" title='M' data-type='llvm::Constant *' data-ref="267M">M</dfn>) {</td></tr>
<tr><th id="1404">1404</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="268XY" title='XY' data-type='llvm::Value *' data-ref="268XY">XY</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col5 ref" href="#265X" title='X' data-ref="265X">X</a>, <a class="local col6 ref" href="#266Y" title='Y' data-ref="266Y">Y</a>);</td></tr>
<tr><th id="1405">1405</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col9 decl" id="269BO" title='BO' data-type='llvm::BinaryOperator *' data-ref="269BO"><a class="local col9 ref" href="#269BO" title='BO' data-ref="269BO">BO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col8 ref" href="#268XY" title='XY' data-ref="268XY">XY</a>))</td></tr>
<tr><th id="1406">1406</th><td>      <a class="local col9 ref" href="#269BO" title='BO' data-ref="269BO">BO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb" title='llvm::Instruction::copyIRFlags' data-ref="_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb">copyIRFlags</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>);</td></tr>
<tr><th id="1407">1407</th><td>    <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17ShuffleVectorInstC1EPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::ShuffleVectorInst::ShuffleVectorInst' data-ref="_ZN4llvm17ShuffleVectorInstC1EPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">(</a><a class="local col8 ref" href="#268XY" title='XY' data-ref="268XY">XY</a>, <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col8 ref" href="#268XY" title='XY' data-ref="268XY">XY</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()), <a class="local col7 ref" href="#267M" title='M' data-ref="267M">M</a>);</td></tr>
<tr><th id="1408">1408</th><td>  };</td></tr>
<tr><th id="1409">1409</th><td></td></tr>
<tr><th id="1410">1410</th><td>  <i>// If both arguments of the binary operation are shuffles that use the same</i></td></tr>
<tr><th id="1411">1411</th><td><i>  // mask and shuffle within a single vector, move the shuffle after the binop.</i></td></tr>
<tr><th id="1412">1412</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="270V1" title='V1' data-type='llvm::Value *' data-ref="270V1">V1</dfn>, *<dfn class="local col1 decl" id="271V2" title='V2' data-type='llvm::Value *' data-ref="271V2">V2</dfn>;</td></tr>
<tr><th id="1413">1413</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_UndefEv" title='llvm::PatternMatch::m_Undef' data-ref="_ZN4llvm12PatternMatch7m_UndefEv">m_Undef</a>(), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a></span>))) &amp;&amp;</td></tr>
<tr><th id="1414">1414</th><td>      <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_UndefEv" title='llvm::PatternMatch::m_Undef' data-ref="_ZN4llvm12PatternMatch7m_UndefEv">m_Undef</a>(), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>))) &amp;&amp;</td></tr>
<tr><th id="1415">1415</th><td>      <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() == <a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() &amp;&amp;</td></tr>
<tr><th id="1416">1416</th><td>      (<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() || <a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() || <a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a> == <a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>)) {</td></tr>
<tr><th id="1417">1417</th><td>    <i>// Op(shuffle(V1, Mask), shuffle(V2, Mask)) -&gt; shuffle(Op(V1, V2), Mask)</i></td></tr>
<tr><th id="1418">1418</th><td>    <b>return</b> <a class="local col4 ref" href="#264createBinOpShuffle" title='createBinOpShuffle' data-ref="264createBinOpShuffle">createBinOpShuffle</a>(<a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>, <a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a>, <a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>);</td></tr>
<tr><th id="1419">1419</th><td>  }</td></tr>
<tr><th id="1420">1420</th><td></td></tr>
<tr><th id="1421">1421</th><td>  <i>// If both arguments of a commutative binop are select-shuffles that use the</i></td></tr>
<tr><th id="1422">1422</th><td><i>  // same mask with commuted operands, the shuffles are unnecessary.</i></td></tr>
<tr><th id="1423">1423</th><td>  <b>if</b> (<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13isCommutativeEv" title='llvm::Instruction::isCommutative' data-ref="_ZNK4llvm11Instruction13isCommutativeEv">isCommutative</a>() &amp;&amp;</td></tr>
<tr><th id="1424">1424</th><td>      <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a></span>))) &amp;&amp;</td></tr>
<tr><th id="1425">1425</th><td>      <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>),</td></tr>
<tr><th id="1426">1426</th><td>                                 <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>)))) {</td></tr>
<tr><th id="1427">1427</th><td>    <em>auto</em> *<dfn class="local col2 decl" id="272LShuf" title='LShuf' data-type='llvm::ShuffleVectorInst *' data-ref="272LShuf">LShuf</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col3 ref" href="#253LHS" title='LHS' data-ref="253LHS">LHS</a>);</td></tr>
<tr><th id="1428">1428</th><td>    <em>auto</em> *<dfn class="local col3 decl" id="273RShuf" title='RShuf' data-type='llvm::ShuffleVectorInst *' data-ref="273RShuf">RShuf</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a>&gt;(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>);</td></tr>
<tr><th id="1429">1429</th><td>    <i>// TODO: Allow shuffles that contain undefs in the mask?</i></td></tr>
<tr><th id="1430">1430</th><td><i>    //       That is legal, but it reduces undef knowledge.</i></td></tr>
<tr><th id="1431">1431</th><td><i>    // TODO: Allow arbitrary shuffles by shuffling after binop?</i></td></tr>
<tr><th id="1432">1432</th><td><i>    //       That might be legal, but we have to deal with poison.</i></td></tr>
<tr><th id="1433">1433</th><td>    <b>if</b> (<a class="local col2 ref" href="#272LShuf" title='LShuf' data-ref="272LShuf">LShuf</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst8isSelectEv" title='llvm::ShuffleVectorInst::isSelect' data-ref="_ZNK4llvm17ShuffleVectorInst8isSelectEv">isSelect</a>() &amp;&amp; !<a class="local col2 ref" href="#272LShuf" title='LShuf' data-ref="272LShuf">LShuf</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst7getMaskEv" title='llvm::ShuffleVectorInst::getMask' data-ref="_ZNK4llvm17ShuffleVectorInst7getMaskEv">getMask</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant20containsUndefElementEv" title='llvm::Constant::containsUndefElement' data-ref="_ZNK4llvm8Constant20containsUndefElementEv">containsUndefElement</a>() &amp;&amp;</td></tr>
<tr><th id="1434">1434</th><td>        <a class="local col3 ref" href="#273RShuf" title='RShuf' data-ref="273RShuf">RShuf</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst8isSelectEv" title='llvm::ShuffleVectorInst::isSelect' data-ref="_ZNK4llvm17ShuffleVectorInst8isSelectEv">isSelect</a>() &amp;&amp; !<a class="local col3 ref" href="#273RShuf" title='RShuf' data-ref="273RShuf">RShuf</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17ShuffleVectorInst7getMaskEv" title='llvm::ShuffleVectorInst::getMask' data-ref="_ZNK4llvm17ShuffleVectorInst7getMaskEv">getMask</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant20containsUndefElementEv" title='llvm::Constant::containsUndefElement' data-ref="_ZNK4llvm8Constant20containsUndefElementEv">containsUndefElement</a>()) {</td></tr>
<tr><th id="1435">1435</th><td>      <i>// Example:</i></td></tr>
<tr><th id="1436">1436</th><td><i>      // LHS = shuffle V1, V2, &lt;0, 5, 6, 3&gt;</i></td></tr>
<tr><th id="1437">1437</th><td><i>      // RHS = shuffle V2, V1, &lt;0, 5, 6, 3&gt;</i></td></tr>
<tr><th id="1438">1438</th><td><i>      // LHS + RHS --&gt; (V10+V20, V21+V11, V22+V12, V13+V23) --&gt; V1 + V2</i></td></tr>
<tr><th id="1439">1439</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="274NewBO" title='NewBO' data-type='llvm::Instruction *' data-ref="274NewBO">NewBO</dfn> = <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_" title='llvm::BinaryOperator::Create' data-ref="_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_">Create</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>, <a class="local col1 ref" href="#271V2" title='V2' data-ref="271V2">V2</a>);</td></tr>
<tr><th id="1440">1440</th><td>      <a class="local col4 ref" href="#274NewBO" title='NewBO' data-ref="274NewBO">NewBO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb" title='llvm::Instruction::copyIRFlags' data-ref="_ZN4llvm11Instruction11copyIRFlagsEPKNS_5ValueEb">copyIRFlags</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>);</td></tr>
<tr><th id="1441">1441</th><td>      <b>return</b> <a class="local col4 ref" href="#274NewBO" title='NewBO' data-ref="274NewBO">NewBO</a>;</td></tr>
<tr><th id="1442">1442</th><td>    }</td></tr>
<tr><th id="1443">1443</th><td>  }</td></tr>
<tr><th id="1444">1444</th><td></td></tr>
<tr><th id="1445">1445</th><td>  <i>// If one argument is a shuffle within one vector and the other is a constant,</i></td></tr>
<tr><th id="1446">1446</th><td><i>  // try moving the shuffle after the binary operation. This canonicalization</i></td></tr>
<tr><th id="1447">1447</th><td><i>  // intends to move shuffles closer to other shuffles and binops closer to</i></td></tr>
<tr><th id="1448">1448</th><td><i>  // other binops, so they can be folded. It may also enable demanded elements</i></td></tr>
<tr><th id="1449">1449</th><td><i>  // transforms.</i></td></tr>
<tr><th id="1450">1450</th><td>  <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col5 decl" id="275C" title='C' data-type='llvm::Constant *' data-ref="275C">C</dfn>;</td></tr>
<tr><th id="1451">1451</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(&amp;<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch9m_c_BinOpERKT_RKT0_" title='llvm::PatternMatch::m_c_BinOp' data-ref="_ZN4llvm12PatternMatch9m_c_BinOpERKT_RKT0_">m_c_BinOp</a>(</td></tr>
<tr><th id="1452">1452</th><td>          <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_OneUseERKT_" title='llvm::PatternMatch::m_OneUse' data-ref="_ZN4llvm12PatternMatch8m_OneUseERKT_">m_OneUse</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_" title='llvm::PatternMatch::m_ShuffleVector' data-ref="_ZN4llvm12PatternMatch15m_ShuffleVectorERKT_RKT0_RKT1_">m_ShuffleVector</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_UndefEv" title='llvm::PatternMatch::m_Undef' data-ref="_ZN4llvm12PatternMatch7m_UndefEv">m_Undef</a>(), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a></span>))),</td></tr>
<tr><th id="1453">1453</th><td>          <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col5 ref" href="#275C" title='C' data-ref="275C">C</a></span>))) &amp;&amp;</td></tr>
<tr><th id="1454">1454</th><td>      <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorNumElementsEv" title='llvm::Type::getVectorNumElements' data-ref="_ZNK4llvm4Type20getVectorNumElementsEv">getVectorNumElements</a>() &lt;= <a class="local col2 ref" href="#252NumElts" title='NumElts' data-ref="252NumElts">NumElts</a>) {</td></tr>
<tr><th id="1455">1455</th><td>    <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Inst.getType()-&gt;getScalarType() == V1-&gt;getType()-&gt;getScalarType() &amp;&amp; &quot;Shuffle should not change scalar type&quot;) ? void (0) : __assert_fail (&quot;Inst.getType()-&gt;getScalarType() == V1-&gt;getType()-&gt;getScalarType() &amp;&amp; \&quot;Shuffle should not change scalar type\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1456, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type13getScalarTypeEv" title='llvm::Type::getScalarType' data-ref="_ZNK4llvm4Type13getScalarTypeEv">getScalarType</a>() == <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type13getScalarTypeEv" title='llvm::Type::getScalarType' data-ref="_ZNK4llvm4Type13getScalarTypeEv">getScalarType</a>() &amp;&amp;</td></tr>
<tr><th id="1456">1456</th><td>           <q>"Shuffle should not change scalar type"</q>);</td></tr>
<tr><th id="1457">1457</th><td></td></tr>
<tr><th id="1458">1458</th><td>    <i>// Find constant NewC that has property:</i></td></tr>
<tr><th id="1459">1459</th><td><i>    //   shuffle(NewC, ShMask) = C</i></td></tr>
<tr><th id="1460">1460</th><td><i>    // If such constant does not exist (example: ShMask=&lt;0,0&gt; and C=&lt;1,2&gt;)</i></td></tr>
<tr><th id="1461">1461</th><td><i>    // reorder is not possible. A 1-to-1 mapping is not required. Example:</i></td></tr>
<tr><th id="1462">1462</th><td><i>    // ShMask = &lt;1,1,2,2&gt; and C = &lt;5,5,6,6&gt; --&gt; NewC = &lt;undef,5,6,undef&gt;</i></td></tr>
<tr><th id="1463">1463</th><td>    <em>bool</em> <dfn class="local col6 decl" id="276ConstOp1" title='ConstOp1' data-type='bool' data-ref="276ConstOp1">ConstOp1</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col4 ref" href="#254RHS" title='RHS' data-ref="254RHS">RHS</a>);</td></tr>
<tr><th id="1464">1464</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<em>int</em>, <var>16</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col7 decl" id="277ShMask" title='ShMask' data-type='SmallVector&lt;int, 16&gt;' data-ref="277ShMask">ShMask</dfn>;</td></tr>
<tr><th id="1465">1465</th><td>    <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ShuffleVectorInst" title='llvm::ShuffleVectorInst' data-ref="llvm::ShuffleVectorInst">ShuffleVectorInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17ShuffleVectorInst14getShuffleMaskEPKNS_8ConstantERNS_15SmallVectorImplIiEE" title='llvm::ShuffleVectorInst::getShuffleMask' data-ref="_ZN4llvm17ShuffleVectorInst14getShuffleMaskEPKNS_8ConstantERNS_15SmallVectorImplIiEE">getShuffleMask</a>(<a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>, <span class='refarg'><a class="local col7 ref" href="#277ShMask" title='ShMask' data-ref="277ShMask">ShMask</a></span>);</td></tr>
<tr><th id="1466">1466</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="278SrcVecNumElts" title='SrcVecNumElts' data-type='unsigned int' data-ref="278SrcVecNumElts">SrcVecNumElts</dfn> = <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorNumElementsEv" title='llvm::Type::getVectorNumElements' data-ref="_ZNK4llvm4Type20getVectorNumElementsEv">getVectorNumElements</a>();</td></tr>
<tr><th id="1467">1467</th><td>    <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a> *<dfn class="local col9 decl" id="279UndefScalar" title='UndefScalar' data-type='llvm::UndefValue *' data-ref="279UndefScalar">UndefScalar</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col5 ref" href="#275C" title='C' data-ref="275C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type13getScalarTypeEv" title='llvm::Type::getScalarType' data-ref="_ZNK4llvm4Type13getScalarTypeEv">getScalarType</a>());</td></tr>
<tr><th id="1468">1468</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *, <var>16</var>&gt; <dfn class="local col0 decl" id="280NewVecC" title='NewVecC' data-type='SmallVector&lt;llvm::Constant *, 16&gt;' data-ref="280NewVecC">NewVecC</dfn><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1EmRKT_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1EmRKT_">(</a><a class="local col8 ref" href="#278SrcVecNumElts" title='SrcVecNumElts' data-ref="278SrcVecNumElts">SrcVecNumElts</a>, <a class="local col9 ref" href="#279UndefScalar" title='UndefScalar' data-ref="279UndefScalar">UndefScalar</a>);</td></tr>
<tr><th id="1469">1469</th><td>    <em>bool</em> <dfn class="local col1 decl" id="281MayChange" title='MayChange' data-type='bool' data-ref="281MayChange">MayChange</dfn> = <b>true</b>;</td></tr>
<tr><th id="1470">1470</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col2 decl" id="282I" title='I' data-type='unsigned int' data-ref="282I">I</dfn> = <var>0</var>; <a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a> &lt; <a class="local col2 ref" href="#252NumElts" title='NumElts' data-ref="252NumElts">NumElts</a>; ++<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>) {</td></tr>
<tr><th id="1471">1471</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="283CElt" title='CElt' data-type='llvm::Constant *' data-ref="283CElt">CElt</dfn> = <a class="local col5 ref" href="#275C" title='C' data-ref="275C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant19getAggregateElementEj" title='llvm::Constant::getAggregateElement' data-ref="_ZNK4llvm8Constant19getAggregateElementEj">getAggregateElement</a>(<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>);</td></tr>
<tr><th id="1472">1472</th><td>      <b>if</b> (<a class="local col7 ref" href="#277ShMask" title='ShMask' data-ref="277ShMask">ShMask</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>]</a> &gt;= <var>0</var>) {</td></tr>
<tr><th id="1473">1473</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (ShMask[I] &lt; (int)NumElts &amp;&amp; &quot;Not expecting narrowing shuffle&quot;) ? void (0) : __assert_fail (&quot;ShMask[I] &lt; (int)NumElts &amp;&amp; \&quot;Not expecting narrowing shuffle\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 1473, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col7 ref" href="#277ShMask" title='ShMask' data-ref="277ShMask">ShMask</a>[<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>] &lt; (<em>int</em>)<a class="local col2 ref" href="#252NumElts" title='NumElts' data-ref="252NumElts">NumElts</a> &amp;&amp; <q>"Not expecting narrowing shuffle"</q>);</td></tr>
<tr><th id="1474">1474</th><td>        <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col4 decl" id="284NewCElt" title='NewCElt' data-type='llvm::Constant *' data-ref="284NewCElt">NewCElt</dfn> = <a class="local col0 ref" href="#280NewVecC" title='NewVecC' data-ref="280NewVecC">NewVecC</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#277ShMask" title='ShMask' data-ref="277ShMask">ShMask</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>]</a>]</a>;</td></tr>
<tr><th id="1475">1475</th><td>        <i>// Bail out if:</i></td></tr>
<tr><th id="1476">1476</th><td><i>        // 1. The constant vector contains a constant expression.</i></td></tr>
<tr><th id="1477">1477</th><td><i>        // 2. The shuffle needs an element of the constant vector that can't</i></td></tr>
<tr><th id="1478">1478</th><td><i>        //    be mapped to a new constant vector.</i></td></tr>
<tr><th id="1479">1479</th><td><i>        // 3. This is a widening shuffle that copies elements of V1 into the</i></td></tr>
<tr><th id="1480">1480</th><td><i>        //    extended elements (extending with undef is allowed).</i></td></tr>
<tr><th id="1481">1481</th><td>        <b>if</b> (!<a class="local col3 ref" href="#283CElt" title='CElt' data-ref="283CElt">CElt</a> || (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>&gt;(<a class="local col4 ref" href="#284NewCElt" title='NewCElt' data-ref="284NewCElt">NewCElt</a>) &amp;&amp; <a class="local col4 ref" href="#284NewCElt" title='NewCElt' data-ref="284NewCElt">NewCElt</a> != <a class="local col3 ref" href="#283CElt" title='CElt' data-ref="283CElt">CElt</a>) ||</td></tr>
<tr><th id="1482">1482</th><td>            <a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a> &gt;= <a class="local col8 ref" href="#278SrcVecNumElts" title='SrcVecNumElts' data-ref="278SrcVecNumElts">SrcVecNumElts</a>) {</td></tr>
<tr><th id="1483">1483</th><td>          <a class="local col1 ref" href="#281MayChange" title='MayChange' data-ref="281MayChange">MayChange</a> = <b>false</b>;</td></tr>
<tr><th id="1484">1484</th><td>          <b>break</b>;</td></tr>
<tr><th id="1485">1485</th><td>        }</td></tr>
<tr><th id="1486">1486</th><td>        <a class="local col0 ref" href="#280NewVecC" title='NewVecC' data-ref="280NewVecC">NewVecC</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#277ShMask" title='ShMask' data-ref="277ShMask">ShMask</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a>]</a>]</a> = <a class="local col3 ref" href="#283CElt" title='CElt' data-ref="283CElt">CElt</a>;</td></tr>
<tr><th id="1487">1487</th><td>      }</td></tr>
<tr><th id="1488">1488</th><td>      <i>// If this is a widening shuffle, we must be able to extend with undef</i></td></tr>
<tr><th id="1489">1489</th><td><i>      // elements. If the original binop does not produce an undef in the high</i></td></tr>
<tr><th id="1490">1490</th><td><i>      // lanes, then this transform is not safe.</i></td></tr>
<tr><th id="1491">1491</th><td><i>      // TODO: We could shuffle those non-undef constant values into the</i></td></tr>
<tr><th id="1492">1492</th><td><i>      //       result by using a constant vector (rather than an undef vector)</i></td></tr>
<tr><th id="1493">1493</th><td><i>      //       as operand 1 of the new binop, but that might be too aggressive</i></td></tr>
<tr><th id="1494">1494</th><td><i>      //       for target-independent shuffle creation.</i></td></tr>
<tr><th id="1495">1495</th><td>      <b>if</b> (<a class="local col2 ref" href="#282I" title='I' data-ref="282I">I</a> &gt;= <a class="local col8 ref" href="#278SrcVecNumElts" title='SrcVecNumElts' data-ref="278SrcVecNumElts">SrcVecNumElts</a>) {</td></tr>
<tr><th id="1496">1496</th><td>        <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col5 decl" id="285MaybeUndef" title='MaybeUndef' data-type='llvm::Constant *' data-ref="285MaybeUndef">MaybeUndef</dfn> =</td></tr>
<tr><th id="1497">1497</th><td>            <a class="local col6 ref" href="#276ConstOp1" title='ConstOp1' data-ref="276ConstOp1">ConstOp1</a> ? <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col9 ref" href="#279UndefScalar" title='UndefScalar' data-ref="279UndefScalar">UndefScalar</a>, <a class="local col3 ref" href="#283CElt" title='CElt' data-ref="283CElt">CElt</a>)</td></tr>
<tr><th id="1498">1498</th><td>                     : <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE" title='llvm::ConstantExpr::get' data-ref="_ZN4llvm12ConstantExpr3getEjPNS_8ConstantES2_jPNS_4TypeE">get</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col3 ref" href="#283CElt" title='CElt' data-ref="283CElt">CElt</a>, <a class="local col9 ref" href="#279UndefScalar" title='UndefScalar' data-ref="279UndefScalar">UndefScalar</a>);</td></tr>
<tr><th id="1499">1499</th><td>        <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>&gt;(<a class="local col5 ref" href="#285MaybeUndef" title='MaybeUndef' data-ref="285MaybeUndef">MaybeUndef</a>)) {</td></tr>
<tr><th id="1500">1500</th><td>          <a class="local col1 ref" href="#281MayChange" title='MayChange' data-ref="281MayChange">MayChange</a> = <b>false</b>;</td></tr>
<tr><th id="1501">1501</th><td>          <b>break</b>;</td></tr>
<tr><th id="1502">1502</th><td>        }</td></tr>
<tr><th id="1503">1503</th><td>      }</td></tr>
<tr><th id="1504">1504</th><td>    }</td></tr>
<tr><th id="1505">1505</th><td>    <b>if</b> (<a class="local col1 ref" href="#281MayChange" title='MayChange' data-ref="281MayChange">MayChange</a>) {</td></tr>
<tr><th id="1506">1506</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="286NewC" title='NewC' data-type='llvm::Constant *' data-ref="286NewC">NewC</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantVector" title='llvm::ConstantVector' data-ref="llvm::ConstantVector">ConstantVector</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm14ConstantVector3getENS_8ArrayRefIPNS_8ConstantEEE" title='llvm::ConstantVector::get' data-ref="_ZN4llvm14ConstantVector3getENS_8ArrayRefIPNS_8ConstantEEE">get</a>(<a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col0 ref" href="#280NewVecC" title='NewVecC' data-ref="280NewVecC">NewVecC</a>);</td></tr>
<tr><th id="1507">1507</th><td>      <i>// It may not be safe to execute a binop on a vector with undef elements</i></td></tr>
<tr><th id="1508">1508</th><td><i>      // because the entire instruction can be folded to undef or create poison</i></td></tr>
<tr><th id="1509">1509</th><td><i>      // that did not exist in the original code.</i></td></tr>
<tr><th id="1510">1510</th><td>      <b>if</b> (<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction11isIntDivRemEv" title='llvm::Instruction::isIntDivRem' data-ref="_ZNK4llvm11Instruction11isIntDivRemEv">isIntDivRem</a>() || (<a class="local col0 ref" href="#250Inst" title='Inst' data-ref="250Inst">Inst</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction7isShiftEv" title='llvm::Instruction::isShift' data-ref="_ZN4llvm11Instruction7isShiftEv">isShift</a>() &amp;&amp; <a class="local col6 ref" href="#276ConstOp1" title='ConstOp1' data-ref="276ConstOp1">ConstOp1</a>))</td></tr>
<tr><th id="1511">1511</th><td>        <a class="local col6 ref" href="#286NewC" title='NewC' data-ref="286NewC">NewC</a> = <a class="ref" href="InstCombineInternal.h.html#_ZN4llvmL29getSafeVectorConstantForBinopENS_11Instruction9BinaryOpsEPNS_8ConstantEb" title='llvm::getSafeVectorConstantForBinop' data-ref="_ZN4llvmL29getSafeVectorConstantForBinopENS_11Instruction9BinaryOpsEPNS_8ConstantEb">getSafeVectorConstantForBinop</a>(<a class="local col1 ref" href="#251Opcode" title='Opcode' data-ref="251Opcode">Opcode</a>, <a class="local col6 ref" href="#286NewC" title='NewC' data-ref="286NewC">NewC</a>, <a class="local col6 ref" href="#276ConstOp1" title='ConstOp1' data-ref="276ConstOp1">ConstOp1</a>);</td></tr>
<tr><th id="1512">1512</th><td></td></tr>
<tr><th id="1513">1513</th><td>      <i>// Op(shuffle(V1, Mask), C) -&gt; shuffle(Op(V1, NewC), Mask)</i></td></tr>
<tr><th id="1514">1514</th><td><i>      // Op(C, shuffle(V1, Mask)) -&gt; shuffle(Op(NewC, V1), Mask)</i></td></tr>
<tr><th id="1515">1515</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="287NewLHS" title='NewLHS' data-type='llvm::Value *' data-ref="287NewLHS">NewLHS</dfn> = <a class="local col6 ref" href="#276ConstOp1" title='ConstOp1' data-ref="276ConstOp1">ConstOp1</a> ? <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a> : <a class="local col6 ref" href="#286NewC" title='NewC' data-ref="286NewC">NewC</a>;</td></tr>
<tr><th id="1516">1516</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="288NewRHS" title='NewRHS' data-type='llvm::Value *' data-ref="288NewRHS">NewRHS</dfn> = <a class="local col6 ref" href="#276ConstOp1" title='ConstOp1' data-ref="276ConstOp1">ConstOp1</a> ? <a class="local col6 ref" href="#286NewC" title='NewC' data-ref="286NewC">NewC</a> : <a class="local col0 ref" href="#270V1" title='V1' data-ref="270V1">V1</a>;</td></tr>
<tr><th id="1517">1517</th><td>      <b>return</b> <a class="local col4 ref" href="#264createBinOpShuffle" title='createBinOpShuffle' data-ref="264createBinOpShuffle">createBinOpShuffle</a>(<a class="local col7 ref" href="#287NewLHS" title='NewLHS' data-ref="287NewLHS">NewLHS</a>, <a class="local col8 ref" href="#288NewRHS" title='NewRHS' data-ref="288NewRHS">NewRHS</a>, <a class="local col9 ref" href="#259Mask" title='Mask' data-ref="259Mask">Mask</a>);</td></tr>
<tr><th id="1518">1518</th><td>    }</td></tr>
<tr><th id="1519">1519</th><td>  }</td></tr>
<tr><th id="1520">1520</th><td></td></tr>
<tr><th id="1521">1521</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1522">1522</th><td>}</td></tr>
<tr><th id="1523">1523</th><td></td></tr>
<tr><th id="1524">1524</th><td><i class="doc">/// Try to narrow the width of a binop if at least 1 operand is an extend of</i></td></tr>
<tr><th id="1525">1525</th><td><i class="doc">/// of a value. This requires a potentially expensive known bits check to make</i></td></tr>
<tr><th id="1526">1526</th><td><i class="doc">/// sure the narrow op does not overflow.</i></td></tr>
<tr><th id="1527">1527</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner22narrowMathIfNoOverflowERNS_14BinaryOperatorE" title='llvm::InstCombiner::narrowMathIfNoOverflow' data-ref="_ZN4llvm12InstCombiner22narrowMathIfNoOverflowERNS_14BinaryOperatorE">narrowMathIfNoOverflow</dfn>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a> &amp;<dfn class="local col9 decl" id="289BO" title='BO' data-type='llvm::BinaryOperator &amp;' data-ref="289BO">BO</dfn>) {</td></tr>
<tr><th id="1528">1528</th><td>  <i>// We need at least one extended operand.</i></td></tr>
<tr><th id="1529">1529</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="290Op0" title='Op0' data-type='llvm::Value *' data-ref="290Op0">Op0</dfn> = <a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>0</var>), *<dfn class="local col1 decl" id="291Op1" title='Op1' data-type='llvm::Value *' data-ref="291Op1">Op1</dfn> = <a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#209" title='llvm::BinaryOperator::getOperand' data-ref="_ZNK4llvm14BinaryOperator10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1530">1530</th><td></td></tr>
<tr><th id="1531">1531</th><td>  <i>// If this is a sub, we swap the operands since we always want an extension</i></td></tr>
<tr><th id="1532">1532</th><td><i>  // on the RHS. The LHS can be an extension or a constant.</i></td></tr>
<tr><th id="1533">1533</th><td>  <b>if</b> (<a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::BinaryOps::Sub' data-ref="llvm::Instruction::BinaryOps::Sub">Sub</a>)</td></tr>
<tr><th id="1534">1534</th><td>    <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col0 ref" href="#290Op0" title='Op0' data-ref="290Op0">Op0</a></span>, <span class='refarg'><a class="local col1 ref" href="#291Op1" title='Op1' data-ref="291Op1">Op1</a></span>);</td></tr>
<tr><th id="1535">1535</th><td></td></tr>
<tr><th id="1536">1536</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="292X" title='X' data-type='llvm::Value *' data-ref="292X">X</dfn>;</td></tr>
<tr><th id="1537">1537</th><td>  <em>bool</em> <dfn class="local col3 decl" id="293IsSext" title='IsSext' data-type='bool' data-ref="293IsSext">IsSext</dfn> = <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#290Op0" title='Op0' data-ref="290Op0">Op0</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_SExtERKT_" title='llvm::PatternMatch::m_SExt' data-ref="_ZN4llvm12PatternMatch6m_SExtERKT_">m_SExt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a></span>)));</td></tr>
<tr><th id="1538">1538</th><td>  <b>if</b> (!<a class="local col3 ref" href="#293IsSext" title='IsSext' data-ref="293IsSext">IsSext</a> &amp;&amp; !<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#290Op0" title='Op0' data-ref="290Op0">Op0</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_ZExtERKT_" title='llvm::PatternMatch::m_ZExt' data-ref="_ZN4llvm12PatternMatch6m_ZExtERKT_">m_ZExt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a></span>))))</td></tr>
<tr><th id="1539">1539</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1540">1540</th><td></td></tr>
<tr><th id="1541">1541</th><td>  <i>// If both operands are the same extension from the same source type and we</i></td></tr>
<tr><th id="1542">1542</th><td><i>  // can eliminate at least one (hasOneUse), this might work.</i></td></tr>
<tr><th id="1543">1543</th><td>  <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::CastOps" title='llvm::Instruction::CastOps' data-ref="llvm::Instruction::CastOps">CastOps</a> <dfn class="local col4 decl" id="294CastOpc" title='CastOpc' data-type='CastInst::CastOps' data-ref="294CastOpc">CastOpc</dfn> = <a class="local col3 ref" href="#293IsSext" title='IsSext' data-ref="293IsSext">IsSext</a> ? <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#186" title='llvm::Instruction::CastOps::SExt' data-ref="llvm::Instruction::CastOps::SExt">SExt</a> : <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#185" title='llvm::Instruction::CastOps::ZExt' data-ref="llvm::Instruction::CastOps::ZExt">ZExt</a>;</td></tr>
<tr><th id="1544">1544</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="295Y" title='Y' data-type='llvm::Value *' data-ref="295Y">Y</dfn>;</td></tr>
<tr><th id="1545">1545</th><td>  <b>if</b> (!(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col1 ref" href="#291Op1" title='Op1' data-ref="291Op1">Op1</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch12m_ZExtOrSExtERKT_" title='llvm::PatternMatch::m_ZExtOrSExt' data-ref="_ZN4llvm12PatternMatch12m_ZExtOrSExtERKT_">m_ZExtOrSExt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a></span>))) &amp;&amp; <a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() == <a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() &amp;&amp;</td></tr>
<tr><th id="1546">1546</th><td>        <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::Operator" title='llvm::Operator' data-ref="llvm::Operator">Operator</a>&gt;(<a class="local col1 ref" href="#291Op1" title='Op1' data-ref="291Op1">Op1</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm8Operator9getOpcodeEv" title='llvm::Operator::getOpcode' data-ref="_ZNK4llvm8Operator9getOpcodeEv">getOpcode</a>() == <a class="local col4 ref" href="#294CastOpc" title='CastOpc' data-ref="294CastOpc">CastOpc</a> &amp;&amp;</td></tr>
<tr><th id="1547">1547</th><td>        (<a class="local col0 ref" href="#290Op0" title='Op0' data-ref="290Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() || <a class="local col1 ref" href="#291Op1" title='Op1' data-ref="291Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()))) {</td></tr>
<tr><th id="1548">1548</th><td>    <i>// If that did not match, see if we have a suitable constant operand.</i></td></tr>
<tr><th id="1549">1549</th><td><i>    // Truncating and extending must produce the same constant.</i></td></tr>
<tr><th id="1550">1550</th><td>    <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="296WideC" title='WideC' data-type='llvm::Constant *' data-ref="296WideC">WideC</dfn>;</td></tr>
<tr><th id="1551">1551</th><td>    <b>if</b> (!<a class="local col0 ref" href="#290Op0" title='Op0' data-ref="290Op0">Op0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() || !<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col1 ref" href="#291Op1" title='Op1' data-ref="291Op1">Op1</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE" title='llvm::PatternMatch::m_Constant' data-ref="_ZN4llvm12PatternMatch10m_ConstantERPNS_8ConstantE">m_Constant</a>(<span class='refarg'><a class="local col6 ref" href="#296WideC" title='WideC' data-ref="296WideC">WideC</a></span>)))</td></tr>
<tr><th id="1552">1552</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1553">1553</th><td>    <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col7 decl" id="297NarrowC" title='NarrowC' data-type='llvm::Constant *' data-ref="297NarrowC">NarrowC</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr8getTruncEPNS_8ConstantEPNS_4TypeEb" title='llvm::ConstantExpr::getTrunc' data-ref="_ZN4llvm12ConstantExpr8getTruncEPNS_8ConstantEPNS_4TypeEb">getTrunc</a>(<a class="local col6 ref" href="#296WideC" title='WideC' data-ref="296WideC">WideC</a>, <a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1554">1554</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb" title='llvm::ConstantExpr::getCast' data-ref="_ZN4llvm12ConstantExpr7getCastEjPNS_8ConstantEPNS_4TypeEb">getCast</a>(<a class="local col4 ref" href="#294CastOpc" title='CastOpc' data-ref="294CastOpc">CastOpc</a>, <a class="local col7 ref" href="#297NarrowC" title='NarrowC' data-ref="297NarrowC">NarrowC</a>, <a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()) != <a class="local col6 ref" href="#296WideC" title='WideC' data-ref="296WideC">WideC</a>)</td></tr>
<tr><th id="1555">1555</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1556">1556</th><td>    <a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a> = <a class="local col7 ref" href="#297NarrowC" title='NarrowC' data-ref="297NarrowC">NarrowC</a>;</td></tr>
<tr><th id="1557">1557</th><td>  }</td></tr>
<tr><th id="1558">1558</th><td></td></tr>
<tr><th id="1559">1559</th><td>  <i>// Swap back now that we found our operands.</i></td></tr>
<tr><th id="1560">1560</th><td>  <b>if</b> (<a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>() == <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#149" title='llvm::Instruction::BinaryOps::Sub' data-ref="llvm::Instruction::BinaryOps::Sub">Sub</a>)</td></tr>
<tr><th id="1561">1561</th><td>    <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/move.h.html#_ZSt4swapRT_S0_" title='std::swap' data-ref="_ZSt4swapRT_S0_">swap</a>(<span class='refarg'><a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a></span>, <span class='refarg'><a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a></span>);</td></tr>
<tr><th id="1562">1562</th><td></td></tr>
<tr><th id="1563">1563</th><td>  <i>// Both operands have narrow versions. Last step: the math must not overflow</i></td></tr>
<tr><th id="1564">1564</th><td><i>  // in the narrow width.</i></td></tr>
<tr><th id="1565">1565</th><td>  <b>if</b> (!<a class="member" href="InstCombineInternal.h.html#_ZNK4llvm12InstCombiner15willNotOverflowENS_11Instruction9BinaryOpsEPKNS_5ValueES5_RKS1_b" title='llvm::InstCombiner::willNotOverflow' data-ref="_ZNK4llvm12InstCombiner15willNotOverflowENS_11Instruction9BinaryOpsEPKNS_5ValueES5_RKS1_b">willNotOverflow</a>(<a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a>, <a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a>, <a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>, <a class="local col3 ref" href="#293IsSext" title='IsSext' data-ref="293IsSext">IsSext</a>))</td></tr>
<tr><th id="1566">1566</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1567">1567</th><td></td></tr>
<tr><th id="1568">1568</th><td>  <i>// bo (ext X), (ext Y) --&gt; ext (bo X, Y)</i></td></tr>
<tr><th id="1569">1569</th><td><i>  // bo (ext X), C       --&gt; ext (bo X, C')</i></td></tr>
<tr><th id="1570">1570</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="298NarrowBO" title='NarrowBO' data-type='llvm::Value *' data-ref="298NarrowBO">NarrowBO</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateBinOp' data-ref="_ZN4llvm9IRBuilder11CreateBinOpENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPNS_6MDNodeE">CreateBinOp</a>(<a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm14BinaryOperator9getOpcodeEv" title='llvm::BinaryOperator::getOpcode' data-ref="_ZNK4llvm14BinaryOperator9getOpcodeEv">getOpcode</a>(), <a class="local col2 ref" href="#292X" title='X' data-ref="292X">X</a>, <a class="local col5 ref" href="#295Y" title='Y' data-ref="295Y">Y</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"narrow"</q>);</td></tr>
<tr><th id="1571">1571</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col9 decl" id="299NewBinOp" title='NewBinOp' data-type='llvm::BinaryOperator *' data-ref="299NewBinOp"><a class="local col9 ref" href="#299NewBinOp" title='NewBinOp' data-ref="299NewBinOp">NewBinOp</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>&gt;(<a class="local col8 ref" href="#298NarrowBO" title='NarrowBO' data-ref="298NarrowBO">NarrowBO</a>)) {</td></tr>
<tr><th id="1572">1572</th><td>    <b>if</b> (<a class="local col3 ref" href="#293IsSext" title='IsSext' data-ref="293IsSext">IsSext</a>)</td></tr>
<tr><th id="1573">1573</th><td>      <a class="local col9 ref" href="#299NewBinOp" title='NewBinOp' data-ref="299NewBinOp">NewBinOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction18setHasNoSignedWrapEb" title='llvm::Instruction::setHasNoSignedWrap' data-ref="_ZN4llvm11Instruction18setHasNoSignedWrapEb">setHasNoSignedWrap</a>();</td></tr>
<tr><th id="1574">1574</th><td>    <b>else</b></td></tr>
<tr><th id="1575">1575</th><td>      <a class="local col9 ref" href="#299NewBinOp" title='NewBinOp' data-ref="299NewBinOp">NewBinOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction20setHasNoUnsignedWrapEb" title='llvm::Instruction::setHasNoUnsignedWrap' data-ref="_ZN4llvm11Instruction20setHasNoUnsignedWrapEb">setHasNoUnsignedWrap</a>();</td></tr>
<tr><th id="1576">1576</th><td>  }</td></tr>
<tr><th id="1577">1577</th><td>  <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst6CreateENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineEPS1_" title='llvm::CastInst::Create' data-ref="_ZN4llvm8CastInst6CreateENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineEPS1_">Create</a>(<a class="local col4 ref" href="#294CastOpc" title='CastOpc' data-ref="294CastOpc">CastOpc</a>, <a class="local col8 ref" href="#298NarrowBO" title='NarrowBO' data-ref="298NarrowBO">NarrowBO</a>, <a class="local col9 ref" href="#289BO" title='BO' data-ref="289BO">BO</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1578">1578</th><td>}</td></tr>
<tr><th id="1579">1579</th><td></td></tr>
<tr><th id="1580">1580</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner22visitGetElementPtrInstERNS_17GetElementPtrInstE" title='llvm::InstCombiner::visitGetElementPtrInst' data-ref="_ZN4llvm12InstCombiner22visitGetElementPtrInstERNS_17GetElementPtrInstE">visitGetElementPtrInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a> &amp;<dfn class="local col0 decl" id="300GEP" title='GEP' data-type='llvm::GetElementPtrInst &amp;' data-ref="300GEP">GEP</dfn>) {</td></tr>
<tr><th id="1581">1581</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>*, <var>8</var>&gt; <dfn class="local col1 decl" id="301Ops" title='Ops' data-type='SmallVector&lt;llvm::Value *, 8&gt;' data-ref="301Ops">Ops</dfn><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1ET_S1_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1ET_S1_">(</a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_begin' data-ref="_ZN4llvm17GetElementPtrInst8op_beginEv">op_begin</a>(), <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_end' data-ref="_ZN4llvm17GetElementPtrInst6op_endEv">op_end</a>());</td></tr>
<tr><th id="1582">1582</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col2 decl" id="302GEPType" title='GEPType' data-type='llvm::Type *' data-ref="302GEPType">GEPType</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="1583">1583</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col3 decl" id="303GEPEltType" title='GEPEltType' data-type='llvm::Type *' data-ref="303GEPEltType">GEPEltType</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv" title='llvm::GetElementPtrInst::getSourceElementType' data-ref="_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv">getSourceElementType</a>();</td></tr>
<tr><th id="1584">1584</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="304V" title='V' data-type='llvm::Value *' data-ref="304V"><a class="local col4 ref" href="#304V" title='V' data-ref="304V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm15SimplifyGEPInstEPNS_4TypeENS_8ArrayRefIPNS_5ValueEEERKNS_13SimplifyQueryE" title='llvm::SimplifyGEPInst' data-ref="_ZN4llvm15SimplifyGEPInstEPNS_4TypeENS_8ArrayRefIPNS_5ValueEEERKNS_13SimplifyQueryE">SimplifyGEPInst</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>)))</td></tr>
<tr><th id="1585">1585</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a></span>, <a class="local col4 ref" href="#304V" title='V' data-ref="304V">V</a>);</td></tr>
<tr><th id="1586">1586</th><td></td></tr>
<tr><th id="1587">1587</th><td>  <i>// For vector geps, use the generic demanded vector support.</i></td></tr>
<tr><th id="1588">1588</th><td>  <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>()) {</td></tr>
<tr><th id="1589">1589</th><td>    <em>auto</em> <dfn class="local col5 decl" id="305VWidth" title='VWidth' data-type='unsigned int' data-ref="305VWidth">VWidth</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorNumElementsEv" title='llvm::Type::getVectorNumElements' data-ref="_ZNK4llvm4Type20getVectorNumElementsEv">getVectorNumElements</a>();</td></tr>
<tr><th id="1590">1590</th><td>    <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col6 decl" id="306UndefElts" title='UndefElts' data-type='llvm::APInt' data-ref="306UndefElts">UndefElts</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col5 ref" href="#305VWidth" title='VWidth' data-ref="305VWidth">VWidth</a>, <var>0</var>);</td></tr>
<tr><th id="1591">1591</th><td>    <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col7 decl" id="307AllOnesEltMask" title='AllOnesEltMask' data-type='llvm::APInt' data-ref="307AllOnesEltMask">AllOnesEltMask</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1EOS0_" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1EOS0_">(</a><a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a>::<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APInt15getAllOnesValueEj" title='llvm::APInt::getAllOnesValue' data-ref="_ZN4llvm5APInt15getAllOnesValueEj">getAllOnesValue</a>(<a class="local col5 ref" href="#305VWidth" title='VWidth' data-ref="305VWidth">VWidth</a>));</td></tr>
<tr><th id="1592">1592</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="308V" title='V' data-type='llvm::Value *' data-ref="308V"><a class="local col8 ref" href="#308V" title='V' data-ref="308V">V</a></dfn> = <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner26SimplifyDemandedVectorEltsEPNS_5ValueENS_5APIntERS3_j" title='llvm::InstCombiner::SimplifyDemandedVectorElts' data-ref="_ZN4llvm12InstCombiner26SimplifyDemandedVectorEltsEPNS_5ValueENS_5APIntERS3_j">SimplifyDemandedVectorElts</a>(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>, <a class="ref fake" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1ERKS0_" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1ERKS0_"></a><a class="local col7 ref" href="#307AllOnesEltMask" title='AllOnesEltMask' data-ref="307AllOnesEltMask">AllOnesEltMask</a>,</td></tr>
<tr><th id="1593">1593</th><td>                                              <span class='refarg'><a class="local col6 ref" href="#306UndefElts" title='UndefElts' data-ref="306UndefElts">UndefElts</a></span>)) {</td></tr>
<tr><th id="1594">1594</th><td>      <b>if</b> (<a class="local col8 ref" href="#308V" title='V' data-ref="308V">V</a> != &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>)</td></tr>
<tr><th id="1595">1595</th><td>        <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a></span>, <a class="local col8 ref" href="#308V" title='V' data-ref="308V">V</a>);</td></tr>
<tr><th id="1596">1596</th><td>      <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="1597">1597</th><td>    }</td></tr>
<tr><th id="1598">1598</th><td></td></tr>
<tr><th id="1599">1599</th><td>    <i>// TODO: 1) Scalarize splat operands, 2) scalarize entire instruction if</i></td></tr>
<tr><th id="1600">1600</th><td><i>    // possible (decide on canonical form for pointer broadcast), 3) exploit</i></td></tr>
<tr><th id="1601">1601</th><td><i>    // undef elements to decrease demanded bits  </i></td></tr>
<tr><th id="1602">1602</th><td>  }</td></tr>
<tr><th id="1603">1603</th><td></td></tr>
<tr><th id="1604">1604</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="309PtrOp" title='PtrOp' data-type='llvm::Value *' data-ref="309PtrOp">PtrOp</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="1605">1605</th><td></td></tr>
<tr><th id="1606">1606</th><td>  <i>// Eliminate unneeded casts for indices, and replace indices which displace</i></td></tr>
<tr><th id="1607">1607</th><td><i>  // by multiples of a zero size type with zero.</i></td></tr>
<tr><th id="1608">1608</th><td>  <em>bool</em> <dfn class="local col0 decl" id="310MadeChange" title='MadeChange' data-type='bool' data-ref="310MadeChange">MadeChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="1609">1609</th><td></td></tr>
<tr><th id="1610">1610</th><td>  <i>// Index width may not be the same width as pointer width.</i></td></tr>
<tr><th id="1611">1611</th><td><i>  // Data layout chooses the right type based on supported integer types.</i></td></tr>
<tr><th id="1612">1612</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col1 decl" id="311NewScalarIndexTy" title='NewScalarIndexTy' data-type='llvm::Type *' data-ref="311NewScalarIndexTy">NewScalarIndexTy</dfn> =</td></tr>
<tr><th id="1613">1613</th><td>      <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst21getPointerOperandTypeEv" title='llvm::GetElementPtrInst::getPointerOperandType' data-ref="_ZNK4llvm17GetElementPtrInst21getPointerOperandTypeEv">getPointerOperandType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type13getScalarTypeEv" title='llvm::Type::getScalarType' data-ref="_ZNK4llvm4Type13getScalarTypeEv">getScalarType</a>());</td></tr>
<tr><th id="1614">1614</th><td></td></tr>
<tr><th id="1615">1615</th><td>  <a class="typedef" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#llvm::gep_type_iterator" title='llvm::gep_type_iterator' data-type='generic_gep_type_iterator&lt;&gt;' data-ref="llvm::gep_type_iterator">gep_type_iterator</a> <dfn class="local col2 decl" id="312GTI" title='GTI' data-type='gep_type_iterator' data-ref="312GTI">GTI</dfn> = <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZN4llvm14gep_type_beginERKNS_4UserE" title='llvm::gep_type_begin' data-ref="_ZN4llvm14gep_type_beginERKNS_4UserE">gep_type_begin</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>);</td></tr>
<tr><th id="1616">1616</th><td>  <b>for</b> (<a class="type" href="../../../include/llvm/IR/User.h.html#llvm::User" title='llvm::User' data-ref="llvm::User">User</a>::<a class="typedef" href="../../../include/llvm/IR/User.h.html#llvm::User::op_iterator" title='llvm::User::op_iterator' data-type='llvm::Use *' data-ref="llvm::User::op_iterator">op_iterator</a> <dfn class="local col3 decl" id="313I" title='I' data-type='User::op_iterator' data-ref="313I">I</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_begin' data-ref="_ZN4llvm17GetElementPtrInst8op_beginEv">op_begin</a>() + <var>1</var>, <dfn class="local col4 decl" id="314E" title='E' data-type='User::op_iterator' data-ref="314E">E</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_end' data-ref="_ZN4llvm17GetElementPtrInst6op_endEv">op_end</a>(); <a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a> != <a class="local col4 ref" href="#314E" title='E' data-ref="314E">E</a>;</td></tr>
<tr><th id="1617">1617</th><td>       ++<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a>, <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZN4llvm25generic_gep_type_iteratorppEv" title='llvm::generic_gep_type_iterator::operator++' data-ref="_ZN4llvm25generic_gep_type_iteratorppEv">++</a><a class="local col2 ref" href="#312GTI" title='GTI' data-ref="312GTI">GTI</a>) {</td></tr>
<tr><th id="1618">1618</th><td>    <i>// Skip indices into struct types.</i></td></tr>
<tr><th id="1619">1619</th><td>    <b>if</b> (<a class="local col2 ref" href="#312GTI" title='GTI' data-ref="312GTI">GTI</a>.<a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZNK4llvm25generic_gep_type_iterator8isStructEv" title='llvm::generic_gep_type_iterator::isStruct' data-ref="_ZNK4llvm25generic_gep_type_iterator8isStructEv">isStruct</a>())</td></tr>
<tr><th id="1620">1620</th><td>      <b>continue</b>;</td></tr>
<tr><th id="1621">1621</th><td></td></tr>
<tr><th id="1622">1622</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="315IndexTy" title='IndexTy' data-type='llvm::Type *' data-ref="315IndexTy">IndexTy</dfn> = (*<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a>)<a class="ref" href="../../../include/llvm/IR/Use.h.html#_ZN4llvm3UseptEv" title='llvm::Use::operator-&gt;' data-ref="_ZN4llvm3UseptEv">-&gt;</a><a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="1623">1623</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="316NewIndexType" title='NewIndexType' data-type='llvm::Type *' data-ref="316NewIndexType">NewIndexType</dfn> =</td></tr>
<tr><th id="1624">1624</th><td>        <a class="local col5 ref" href="#315IndexTy" title='IndexTy' data-ref="315IndexTy">IndexTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>()</td></tr>
<tr><th id="1625">1625</th><td>            ? <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>::<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm10VectorType3getEPNS_4TypeEj" title='llvm::VectorType::get' data-ref="_ZN4llvm10VectorType3getEPNS_4TypeEj">get</a>(<a class="local col1 ref" href="#311NewScalarIndexTy" title='NewScalarIndexTy' data-ref="311NewScalarIndexTy">NewScalarIndexTy</a>, <a class="local col5 ref" href="#315IndexTy" title='IndexTy' data-ref="315IndexTy">IndexTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorNumElementsEv" title='llvm::Type::getVectorNumElements' data-ref="_ZNK4llvm4Type20getVectorNumElementsEv">getVectorNumElements</a>())</td></tr>
<tr><th id="1626">1626</th><td>            : <a class="local col1 ref" href="#311NewScalarIndexTy" title='NewScalarIndexTy' data-ref="311NewScalarIndexTy">NewScalarIndexTy</a>;</td></tr>
<tr><th id="1627">1627</th><td></td></tr>
<tr><th id="1628">1628</th><td>    <i>// If the element type has zero size then any index over it is equivalent</i></td></tr>
<tr><th id="1629">1629</th><td><i>    // to an index of zero, so replace it with zero if it is not zero already.</i></td></tr>
<tr><th id="1630">1630</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col7 decl" id="317EltTy" title='EltTy' data-type='llvm::Type *' data-ref="317EltTy">EltTy</dfn> = <a class="local col2 ref" href="#312GTI" title='GTI' data-ref="312GTI">GTI</a>.<a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZNK4llvm25generic_gep_type_iterator14getIndexedTypeEv" title='llvm::generic_gep_type_iterator::getIndexedType' data-ref="_ZNK4llvm25generic_gep_type_iterator14getIndexedTypeEv">getIndexedType</a>();</td></tr>
<tr><th id="1631">1631</th><td>    <b>if</b> (<a class="local col7 ref" href="#317EltTy" title='EltTy' data-ref="317EltTy">EltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>() &amp;&amp; <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col7 ref" href="#317EltTy" title='EltTy' data-ref="317EltTy">EltTy</a>) == <var>0</var>)</td></tr>
<tr><th id="1632">1632</th><td>      <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(*<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a>) || !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castERT0_" title='llvm::cast' data-ref="_ZN4llvm4castERT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<span class='refarg'>*<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a></span>)-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>()) {</td></tr>
<tr><th id="1633">1633</th><td>        *<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a> <a class="ref" href="../../../include/llvm/IR/Use.h.html#_ZN4llvm3UseaSEPNS_5ValueE" title='llvm::Use::operator=' data-ref="_ZN4llvm3UseaSEPNS_5ValueE">=</a> <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col6 ref" href="#316NewIndexType" title='NewIndexType' data-ref="316NewIndexType">NewIndexType</a>);</td></tr>
<tr><th id="1634">1634</th><td>        <a class="local col0 ref" href="#310MadeChange" title='MadeChange' data-ref="310MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="1635">1635</th><td>      }</td></tr>
<tr><th id="1636">1636</th><td></td></tr>
<tr><th id="1637">1637</th><td>    <b>if</b> (<a class="local col5 ref" href="#315IndexTy" title='IndexTy' data-ref="315IndexTy">IndexTy</a> != <a class="local col6 ref" href="#316NewIndexType" title='NewIndexType' data-ref="316NewIndexType">NewIndexType</a>) {</td></tr>
<tr><th id="1638">1638</th><td>      <i>// If we are using a wider index than needed for this platform, shrink</i></td></tr>
<tr><th id="1639">1639</th><td><i>      // it to what we need.  If narrower, sign-extend it to what we need.</i></td></tr>
<tr><th id="1640">1640</th><td><i>      // This explicit cast can make subsequent optimizations more obvious.</i></td></tr>
<tr><th id="1641">1641</th><td>      *<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a> <a class="ref" href="../../../include/llvm/IR/Use.h.html#_ZN4llvm3UseaSEPNS_5ValueE" title='llvm::Use::operator=' data-ref="_ZN4llvm3UseaSEPNS_5ValueE">=</a> <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateIntCastEPNS_5ValueEPNS_4TypeEbRKNS_5TwineE" title='llvm::IRBuilder::CreateIntCast' data-ref="_ZN4llvm9IRBuilder13CreateIntCastEPNS_5ValueEPNS_4TypeEbRKNS_5TwineE">CreateIntCast</a>(<a class="ref fake" href="../../../include/llvm/IR/Use.h.html#_ZNK4llvm3UsecvPNS_5ValueEEv" title='llvm::Use::operator llvm::Value *' data-ref="_ZNK4llvm3UsecvPNS_5ValueEEv"></a>*<a class="local col3 ref" href="#313I" title='I' data-ref="313I">I</a>, <a class="local col6 ref" href="#316NewIndexType" title='NewIndexType' data-ref="316NewIndexType">NewIndexType</a>, <b>true</b>);</td></tr>
<tr><th id="1642">1642</th><td>      <a class="local col0 ref" href="#310MadeChange" title='MadeChange' data-ref="310MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="1643">1643</th><td>    }</td></tr>
<tr><th id="1644">1644</th><td>  }</td></tr>
<tr><th id="1645">1645</th><td>  <b>if</b> (<a class="local col0 ref" href="#310MadeChange" title='MadeChange' data-ref="310MadeChange">MadeChange</a>)</td></tr>
<tr><th id="1646">1646</th><td>    <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="1647">1647</th><td></td></tr>
<tr><th id="1648">1648</th><td>  <i>// Check to see if the inputs to the PHI node are getelementptr instructions.</i></td></tr>
<tr><th id="1649">1649</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col8 decl" id="318PN" title='PN' data-type='llvm::PHINode *' data-ref="318PN"><a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>)) {</td></tr>
<tr><th id="1650">1650</th><td>    <em>auto</em> *<dfn class="local col9 decl" id="319Op1" title='Op1' data-type='llvm::GetElementPtrInst *' data-ref="319Op1">Op1</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>&gt;(<a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2586" title='llvm::PHINode::getOperand' data-ref="_ZNK4llvm7PHINode10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="1651">1651</th><td>    <b>if</b> (!<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>)</td></tr>
<tr><th id="1652">1652</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1653">1653</th><td></td></tr>
<tr><th id="1654">1654</th><td>    <i>// Don't fold a GEP into itself through a PHI node. This can only happen</i></td></tr>
<tr><th id="1655">1655</th><td><i>    // through the back-edge of a loop. Folding a GEP into itself means that</i></td></tr>
<tr><th id="1656">1656</th><td><i>    // the value of the previous iteration needs to be stored in the meantime,</i></td></tr>
<tr><th id="1657">1657</th><td><i>    // thus requiring an additional register variable to be live, but not</i></td></tr>
<tr><th id="1658">1658</th><td><i>    // actually achieving anything (the GEP still needs to be executed once per</i></td></tr>
<tr><th id="1659">1659</th><td><i>    // loop iteration).</i></td></tr>
<tr><th id="1660">1660</th><td>    <b>if</b> (<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a> == &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>)</td></tr>
<tr><th id="1661">1661</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1662">1662</th><td></td></tr>
<tr><th id="1663">1663</th><td>    <em>int</em> <dfn class="local col0 decl" id="320DI" title='DI' data-type='int' data-ref="320DI">DI</dfn> = -<var>1</var>;</td></tr>
<tr><th id="1664">1664</th><td></td></tr>
<tr><th id="1665">1665</th><td>    <b>for</b> (<em>auto</em> <dfn class="local col1 decl" id="321I" title='I' data-type='llvm::Use *' data-ref="321I">I</dfn> = <a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2586" title='llvm::PHINode::op_begin' data-ref="_ZN4llvm7PHINode8op_beginEv">op_begin</a>()+<var>1</var>, <dfn class="local col2 decl" id="322E" title='E' data-type='llvm::Use *' data-ref="322E">E</dfn> = <a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2586" title='llvm::PHINode::op_end' data-ref="_ZN4llvm7PHINode6op_endEv">op_end</a>(); <a class="local col1 ref" href="#321I" title='I' data-ref="321I">I</a> !=<a class="local col2 ref" href="#322E" title='E' data-ref="322E">E</a>; ++<a class="local col1 ref" href="#321I" title='I' data-ref="321I">I</a>) {</td></tr>
<tr><th id="1666">1666</th><td>      <em>auto</em> *<dfn class="local col3 decl" id="323Op2" title='Op2' data-type='llvm::GetElementPtrInst *' data-ref="323Op2">Op2</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castERT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castERT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>&gt;(<span class='refarg'>*<a class="local col1 ref" href="#321I" title='I' data-ref="321I">I</a></span>);</td></tr>
<tr><th id="1667">1667</th><td>      <b>if</b> (!<a class="local col3 ref" href="#323Op2" title='Op2' data-ref="323Op2">Op2</a> || <a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>() != <a class="local col3 ref" href="#323Op2" title='Op2' data-ref="323Op2">Op2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>())</td></tr>
<tr><th id="1668">1668</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1669">1669</th><td></td></tr>
<tr><th id="1670">1670</th><td>      <i>// As for Op1 above, don't try to fold a GEP into itself.</i></td></tr>
<tr><th id="1671">1671</th><td>      <b>if</b> (<a class="local col3 ref" href="#323Op2" title='Op2' data-ref="323Op2">Op2</a> == &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>)</td></tr>
<tr><th id="1672">1672</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1673">1673</th><td></td></tr>
<tr><th id="1674">1674</th><td>      <i>// Keep track of the type as we walk the GEP.</i></td></tr>
<tr><th id="1675">1675</th><td>      <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col4 decl" id="324CurTy" title='CurTy' data-type='llvm::Type *' data-ref="324CurTy">CurTy</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1676">1676</th><td></td></tr>
<tr><th id="1677">1677</th><td>      <b>for</b> (<em>unsigned</em> <dfn class="local col5 decl" id="325J" title='J' data-type='unsigned int' data-ref="325J">J</dfn> = <var>0</var>, <dfn class="local col6 decl" id="326F" title='F' data-type='unsigned int' data-ref="326F">F</dfn> = <a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>(); <a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a> != <a class="local col6 ref" href="#326F" title='F' data-ref="326F">F</a>; ++<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>) {</td></tr>
<tr><th id="1678">1678</th><td>        <b>if</b> (<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() != <a class="local col3 ref" href="#323Op2" title='Op2' data-ref="323Op2">Op2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())</td></tr>
<tr><th id="1679">1679</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1680">1680</th><td></td></tr>
<tr><th id="1681">1681</th><td>        <b>if</b> (<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>) != <a class="local col3 ref" href="#323Op2" title='Op2' data-ref="323Op2">Op2</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>)) {</td></tr>
<tr><th id="1682">1682</th><td>          <b>if</b> (<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a> == -<var>1</var>) {</td></tr>
<tr><th id="1683">1683</th><td>            <i>// We have not seen any differences yet in the GEPs feeding the</i></td></tr>
<tr><th id="1684">1684</th><td><i>            // PHI yet, so we record this one if it is allowed to be a</i></td></tr>
<tr><th id="1685">1685</th><td><i>            // variable.</i></td></tr>
<tr><th id="1686">1686</th><td><i></i></td></tr>
<tr><th id="1687">1687</th><td><i>            // The first two arguments can vary for any GEP, the rest have to be</i></td></tr>
<tr><th id="1688">1688</th><td><i>            // static for struct slots</i></td></tr>
<tr><th id="1689">1689</th><td>            <b>if</b> (<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a> &gt; <var>1</var> &amp;&amp; <a class="local col4 ref" href="#324CurTy" title='CurTy' data-ref="324CurTy">CurTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isStructTyEv" title='llvm::Type::isStructTy' data-ref="_ZNK4llvm4Type10isStructTyEv">isStructTy</a>())</td></tr>
<tr><th id="1690">1690</th><td>              <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1691">1691</th><td></td></tr>
<tr><th id="1692">1692</th><td>            <a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a> = <a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>;</td></tr>
<tr><th id="1693">1693</th><td>          } <b>else</b> {</td></tr>
<tr><th id="1694">1694</th><td>            <i>// The GEP is different by more than one input. While this could be</i></td></tr>
<tr><th id="1695">1695</th><td><i>            // extended to support GEPs that vary by more than one variable it</i></td></tr>
<tr><th id="1696">1696</th><td><i>            // doesn't make sense since it greatly increases the complexity and</i></td></tr>
<tr><th id="1697">1697</th><td><i>            // would result in an R+R+R addressing mode which no backend</i></td></tr>
<tr><th id="1698">1698</th><td><i>            // directly supports and would need to be broken into several</i></td></tr>
<tr><th id="1699">1699</th><td><i>            // simpler instructions anyway.</i></td></tr>
<tr><th id="1700">1700</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1701">1701</th><td>          }</td></tr>
<tr><th id="1702">1702</th><td>        }</td></tr>
<tr><th id="1703">1703</th><td></td></tr>
<tr><th id="1704">1704</th><td>        <i>// Sink down a layer of the type for the next iteration.</i></td></tr>
<tr><th id="1705">1705</th><td>        <b>if</b> (<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a> &gt; <var>0</var>) {</td></tr>
<tr><th id="1706">1706</th><td>          <b>if</b> (<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a> == <var>1</var>) {</td></tr>
<tr><th id="1707">1707</th><td>            <a class="local col4 ref" href="#324CurTy" title='CurTy' data-ref="324CurTy">CurTy</a> = <a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv" title='llvm::GetElementPtrInst::getSourceElementType' data-ref="_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv">getSourceElementType</a>();</td></tr>
<tr><th id="1708">1708</th><td>          } <b>else</b> <b>if</b> (<em>auto</em> *<dfn class="local col7 decl" id="327CT" title='CT' data-type='llvm::CompositeType *' data-ref="327CT"><a class="local col7 ref" href="#327CT" title='CT' data-ref="327CT">CT</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::CompositeType" title='llvm::CompositeType' data-ref="llvm::CompositeType">CompositeType</a>&gt;(<a class="local col4 ref" href="#324CurTy" title='CurTy' data-ref="324CurTy">CurTy</a>)) {</td></tr>
<tr><th id="1709">1709</th><td>            <a class="local col4 ref" href="#324CurTy" title='CurTy' data-ref="324CurTy">CurTy</a> = <a class="local col7 ref" href="#327CT" title='CT' data-ref="327CT">CT</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm13CompositeType14getTypeAtIndexEPKNS_5ValueE" title='llvm::CompositeType::getTypeAtIndex' data-ref="_ZNK4llvm13CompositeType14getTypeAtIndexEPKNS_5ValueE">getTypeAtIndex</a>(<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col5 ref" href="#325J" title='J' data-ref="325J">J</a>));</td></tr>
<tr><th id="1710">1710</th><td>          } <b>else</b> {</td></tr>
<tr><th id="1711">1711</th><td>            <a class="local col4 ref" href="#324CurTy" title='CurTy' data-ref="324CurTy">CurTy</a> = <b>nullptr</b>;</td></tr>
<tr><th id="1712">1712</th><td>          }</td></tr>
<tr><th id="1713">1713</th><td>        }</td></tr>
<tr><th id="1714">1714</th><td>      }</td></tr>
<tr><th id="1715">1715</th><td>    }</td></tr>
<tr><th id="1716">1716</th><td></td></tr>
<tr><th id="1717">1717</th><td>    <i>// If not all GEPs are identical we'll have to create a new PHI node.</i></td></tr>
<tr><th id="1718">1718</th><td><i>    // Check that the old PHI node has only one use so that it will get</i></td></tr>
<tr><th id="1719">1719</th><td><i>    // removed.</i></td></tr>
<tr><th id="1720">1720</th><td>    <b>if</b> (<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a> != -<var>1</var> &amp;&amp; !<a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>())</td></tr>
<tr><th id="1721">1721</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1722">1722</th><td></td></tr>
<tr><th id="1723">1723</th><td>    <em>auto</em> *<dfn class="local col8 decl" id="328NewGEP" title='NewGEP' data-type='llvm::GetElementPtrInst *' data-ref="328NewGEP">NewGEP</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>&gt;(<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction5cloneEv" title='llvm::Instruction::clone' data-ref="_ZNK4llvm11Instruction5cloneEv">clone</a>());</td></tr>
<tr><th id="1724">1724</th><td>    <b>if</b> (<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a> == -<var>1</var>) {</td></tr>
<tr><th id="1725">1725</th><td>      <i>// All the GEPs feeding the PHI are identical. Clone one down into our</i></td></tr>
<tr><th id="1726">1726</th><td><i>      // BB so that it can be merged with the current GEP.</i></td></tr>
<tr><th id="1727">1727</th><td>      <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock11getInstListEv" title='llvm::BasicBlock::getInstList' data-ref="_ZN4llvm10BasicBlock11getInstListEv">getInstList</a>().<a class="ref" href="../../../include/llvm/ADT/ilist.h.html#_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE" title='llvm::iplist_impl::insert' data-ref="_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE">insert</a>(</td></tr>
<tr><th id="1728">1728</th><td>          <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock19getFirstInsertionPtEv" title='llvm::BasicBlock::getFirstInsertionPt' data-ref="_ZN4llvm10BasicBlock19getFirstInsertionPtEv">getFirstInsertionPt</a>(), <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>);</td></tr>
<tr><th id="1729">1729</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1730">1730</th><td>      <i>// All the GEPs feeding the PHI differ at a single offset. Clone a GEP</i></td></tr>
<tr><th id="1731">1731</th><td><i>      // into the current block so it can be merged, and create a new PHI to</i></td></tr>
<tr><th id="1732">1732</th><td><i>      // set that index.</i></td></tr>
<tr><th id="1733">1733</th><td>      <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col9 decl" id="329NewPN" title='NewPN' data-type='llvm::PHINode *' data-ref="329NewPN">NewPN</dfn>;</td></tr>
<tr><th id="1734">1734</th><td>      {</td></tr>
<tr><th id="1735">1735</th><td>        <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilderBase" title='llvm::IRBuilderBase' data-ref="llvm::IRBuilderBase">IRBuilderBase</a>::<a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilderBase::InsertPointGuard" title='llvm::IRBuilderBase::InsertPointGuard' data-ref="llvm::IRBuilderBase::InsertPointGuard">InsertPointGuard</a> <dfn class="local col0 decl" id="330Guard" title='Guard' data-type='IRBuilderBase::InsertPointGuard' data-ref="330Guard">Guard</dfn><a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase16InsertPointGuardC1ERS0_" title='llvm::IRBuilderBase::InsertPointGuard::InsertPointGuard' data-ref="_ZN4llvm13IRBuilderBase16InsertPointGuardC1ERS0_">(</a><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>);</td></tr>
<tr><th id="1736">1736</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>);</td></tr>
<tr><th id="1737">1737</th><td>        <a class="local col9 ref" href="#329NewPN" title='NewPN' data-ref="329NewPN">NewPN</a> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col9 ref" href="#319Op1" title='Op1' data-ref="319Op1">Op1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="1738">1738</th><td>                                  <a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2586" title='llvm::PHINode::getNumOperands' data-ref="_ZNK4llvm7PHINode14getNumOperandsEv">getNumOperands</a>());</td></tr>
<tr><th id="1739">1739</th><td>      }</td></tr>
<tr><th id="1740">1740</th><td></td></tr>
<tr><th id="1741">1741</th><td>      <b>for</b> (<em>auto</em> &amp;<dfn class="local col1 decl" id="331I" title='I' data-type='llvm::Use &amp;' data-ref="331I">I</dfn> : <a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8operandsEv" title='llvm::User::operands' data-ref="_ZN4llvm4User8operandsEv">operands</a>())</td></tr>
<tr><th id="1742">1742</th><td>        <a class="local col9 ref" href="#329NewPN" title='NewPN' data-ref="329NewPN">NewPN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castERT0_" title='llvm::cast' data-ref="_ZN4llvm4castERT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a>&gt;(<span class='refarg'><a class="local col1 ref" href="#331I" title='I' data-ref="331I">I</a></span>)-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a>),</td></tr>
<tr><th id="1743">1743</th><td>                           <a class="local col8 ref" href="#318PN" title='PN' data-ref="318PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockERKNS_3UseE" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockERKNS_3UseE">getIncomingBlock</a>(<a class="local col1 ref" href="#331I" title='I' data-ref="331I">I</a>));</td></tr>
<tr><th id="1744">1744</th><td></td></tr>
<tr><th id="1745">1745</th><td>      <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a>, <a class="local col9 ref" href="#329NewPN" title='NewPN' data-ref="329NewPN">NewPN</a>);</td></tr>
<tr><th id="1746">1746</th><td>      <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock11getInstListEv" title='llvm::BasicBlock::getInstList' data-ref="_ZN4llvm10BasicBlock11getInstListEv">getInstList</a>().<a class="ref" href="../../../include/llvm/ADT/ilist.h.html#_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE" title='llvm::iplist_impl::insert' data-ref="_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE">insert</a>(</td></tr>
<tr><th id="1747">1747</th><td>          <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock19getFirstInsertionPtEv" title='llvm::BasicBlock::getFirstInsertionPt' data-ref="_ZN4llvm10BasicBlock19getFirstInsertionPtEv">getFirstInsertionPt</a>(), <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>);</td></tr>
<tr><th id="1748">1748</th><td>      <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<a class="local col0 ref" href="#320DI" title='DI' data-ref="320DI">DI</a>, <a class="local col9 ref" href="#329NewPN" title='NewPN' data-ref="329NewPN">NewPN</a>);</td></tr>
<tr><th id="1749">1749</th><td>    }</td></tr>
<tr><th id="1750">1750</th><td></td></tr>
<tr><th id="1751">1751</th><td>    <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>);</td></tr>
<tr><th id="1752">1752</th><td>    <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a> = <a class="local col8 ref" href="#328NewGEP" title='NewGEP' data-ref="328NewGEP">NewGEP</a>;</td></tr>
<tr><th id="1753">1753</th><td>  }</td></tr>
<tr><th id="1754">1754</th><td></td></tr>
<tr><th id="1755">1755</th><td>  <i>// Combine Indices - If the source pointer to this getelementptr instruction</i></td></tr>
<tr><th id="1756">1756</th><td><i>  // is a getelementptr instruction, combine the indices of the two</i></td></tr>
<tr><th id="1757">1757</th><td><i>  // getelementptr instructions into a single instruction.</i></td></tr>
<tr><th id="1758">1758</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col2 decl" id="332Src" title='Src' data-type='llvm::GEPOperator *' data-ref="332Src"><a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a>&gt;(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>)) {</td></tr>
<tr><th id="1759">1759</th><td>    <b>if</b> (!<a class="tu ref" href="#_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_" title='shouldMergeGEPs' data-use='c' data-ref="_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_">shouldMergeGEPs</a>(<span class='refarg'>*<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a>&gt;(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>)</span>, <span class='refarg'>*<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a></span>))</td></tr>
<tr><th id="1760">1760</th><td>      <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1761">1761</th><td></td></tr>
<tr><th id="1762">1762</th><td>    <i>// Try to reassociate loop invariant GEP chains to enable LICM.</i></td></tr>
<tr><th id="1763">1763</th><td>    <b>if</b> (<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::LI" title='llvm::InstCombiner::LI' data-ref="llvm::InstCombiner::LI">LI</a> &amp;&amp; <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() == <var>2</var> &amp;&amp; <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>() == <var>2</var> &amp;&amp;</td></tr>
<tr><th id="1764">1764</th><td>        <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="1765">1765</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/Analysis/LoopInfo.h.html#llvm::Loop" title='llvm::Loop' data-ref="llvm::Loop">Loop</a> *<dfn class="local col3 decl" id="333L" title='L' data-type='llvm::Loop *' data-ref="333L"><a class="local col3 ref" href="#333L" title='L' data-ref="333L">L</a></dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::LI" title='llvm::InstCombiner::LI' data-ref="llvm::InstCombiner::LI">LI</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/LoopInfo.h.html#_ZNK4llvm12LoopInfoBase10getLoopForEPKT_" title='llvm::LoopInfoBase::getLoopFor' data-ref="_ZNK4llvm12LoopInfoBase10getLoopForEPKT_">getLoopFor</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>())) {</td></tr>
<tr><th id="1766">1766</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="334GO1" title='GO1' data-type='llvm::Value *' data-ref="334GO1">GO1</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1767">1767</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="335SO1" title='SO1' data-type='llvm::Value *' data-ref="335SO1">SO1</dfn> = <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1768">1768</th><td>        <i>// Reassociate the two GEPs if SO1 is variant in the loop and GO1 is</i></td></tr>
<tr><th id="1769">1769</th><td><i>        // invariant: this breaks the dependence between GEPs and allows LICM</i></td></tr>
<tr><th id="1770">1770</th><td><i>        // to hoist the invariant part out of the loop.</i></td></tr>
<tr><th id="1771">1771</th><td>        <b>if</b> (<a class="local col3 ref" href="#333L" title='L' data-ref="333L">L</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/LoopInfo.h.html#_ZNK4llvm4Loop15isLoopInvariantEPKNS_5ValueE" title='llvm::Loop::isLoopInvariant' data-ref="_ZNK4llvm4Loop15isLoopInvariantEPKNS_5ValueE">isLoopInvariant</a>(<a class="local col4 ref" href="#334GO1" title='GO1' data-ref="334GO1">GO1</a>) &amp;&amp; !<a class="local col3 ref" href="#333L" title='L' data-ref="333L">L</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/LoopInfo.h.html#_ZNK4llvm4Loop15isLoopInvariantEPKNS_5ValueE" title='llvm::Loop::isLoopInvariant' data-ref="_ZNK4llvm4Loop15isLoopInvariantEPKNS_5ValueE">isLoopInvariant</a>(<a class="local col5 ref" href="#335SO1" title='SO1' data-ref="335SO1">SO1</a>)) {</td></tr>
<tr><th id="1772">1772</th><td>          <i>// We have to be careful here.</i></td></tr>
<tr><th id="1773">1773</th><td><i>          // We have something like:</i></td></tr>
<tr><th id="1774">1774</th><td><i>          //  %src = getelementptr &lt;ty&gt;, &lt;ty&gt;* %base, &lt;ty&gt; %idx</i></td></tr>
<tr><th id="1775">1775</th><td><i>          //  %gep = getelementptr &lt;ty&gt;, &lt;ty&gt;* %src, &lt;ty&gt; %idx2</i></td></tr>
<tr><th id="1776">1776</th><td><i>          // If we just swap idx &amp; idx2 then we could inadvertantly</i></td></tr>
<tr><th id="1777">1777</th><td><i>          // change %src from a vector to a scalar, or vice versa.</i></td></tr>
<tr><th id="1778">1778</th><td><i>          // Cases:</i></td></tr>
<tr><th id="1779">1779</th><td><i>          //  1) %base a scalar &amp; idx a scalar &amp; idx2 a vector</i></td></tr>
<tr><th id="1780">1780</th><td><i>          //      =&gt; Swapping idx &amp; idx2 turns %src into a vector type.</i></td></tr>
<tr><th id="1781">1781</th><td><i>          //  2) %base a scalar &amp; idx a vector &amp; idx2 a scalar</i></td></tr>
<tr><th id="1782">1782</th><td><i>          //      =&gt; Swapping idx &amp; idx2 turns %src in a scalar type</i></td></tr>
<tr><th id="1783">1783</th><td><i>          //  3) %base, %idx, and %idx2 are scalars</i></td></tr>
<tr><th id="1784">1784</th><td><i>          //      =&gt; %src &amp; %gep are scalars</i></td></tr>
<tr><th id="1785">1785</th><td><i>          //      =&gt; swapping idx &amp; idx2 is safe</i></td></tr>
<tr><th id="1786">1786</th><td><i>          //  4) %base a vector</i></td></tr>
<tr><th id="1787">1787</th><td><i>          //      =&gt; %src is a vector</i></td></tr>
<tr><th id="1788">1788</th><td><i>          //      =&gt; swapping idx &amp; idx2 is safe.</i></td></tr>
<tr><th id="1789">1789</th><td>          <em>auto</em> *<dfn class="local col6 decl" id="336SO0" title='SO0' data-type='llvm::Value *' data-ref="336SO0">SO0</dfn> = <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="1790">1790</th><td>          <em>auto</em> *<dfn class="local col7 decl" id="337SO0Ty" title='SO0Ty' data-type='llvm::Type *' data-ref="337SO0Ty">SO0Ty</dfn> = <a class="local col6 ref" href="#336SO0" title='SO0' data-ref="336SO0">SO0</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="1791">1791</th><td>          <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>) || <i>// case 3</i></td></tr>
<tr><th id="1792">1792</th><td>              <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::VectorType" title='llvm::VectorType' data-ref="llvm::VectorType">VectorType</a>&gt;(<a class="local col7 ref" href="#337SO0Ty" title='SO0Ty' data-ref="337SO0Ty">SO0Ty</a>)) {    <i>// case 4</i></td></tr>
<tr><th id="1793">1793</th><td>            <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User10setOperandEjPNS_5ValueE" title='llvm::User::setOperand' data-ref="_ZN4llvm4User10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col4 ref" href="#334GO1" title='GO1' data-ref="334GO1">GO1</a>);</td></tr>
<tr><th id="1794">1794</th><td>            <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col5 ref" href="#335SO1" title='SO1' data-ref="335SO1">SO1</a>);</td></tr>
<tr><th id="1795">1795</th><td>            <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="1796">1796</th><td>          } <b>else</b> {</td></tr>
<tr><th id="1797">1797</th><td>            <i>// Case 1 or 2</i></td></tr>
<tr><th id="1798">1798</th><td><i>            // -- have to recreate %src &amp; %gep</i></td></tr>
<tr><th id="1799">1799</th><td><i>            // put NewSrc at same location as %src</i></td></tr>
<tr><th id="1800">1800</th><td>            <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>));</td></tr>
<tr><th id="1801">1801</th><td>            <em>auto</em> *<dfn class="local col8 decl" id="338NewSrc" title='NewSrc' data-type='llvm::GetElementPtrInst *' data-ref="338NewSrc">NewSrc</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>&gt;(</td></tr>
<tr><th id="1802">1802</th><td>                <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE">CreateGEP</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>, <a class="local col6 ref" href="#336SO0" title='SO0' data-ref="336SO0">SO0</a>, <a class="local col4 ref" href="#334GO1" title='GO1' data-ref="334GO1">GO1</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>()));</td></tr>
<tr><th id="1803">1803</th><td>            <a class="local col8 ref" href="#338NewSrc" title='NewSrc' data-ref="338NewSrc">NewSrc</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst13setIsInBoundsEb" title='llvm::GetElementPtrInst::setIsInBounds' data-ref="_ZN4llvm17GetElementPtrInst13setIsInBoundsEb">setIsInBounds</a>(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator10isInBoundsEv" title='llvm::GEPOperator::isInBounds' data-ref="_ZNK4llvm11GEPOperator10isInBoundsEv">isInBounds</a>());</td></tr>
<tr><th id="1804">1804</th><td>            <em>auto</em> *<dfn class="local col9 decl" id="339NewGEP" title='NewGEP' data-type='llvm::GetElementPtrInst *' data-ref="339NewGEP">NewGEP</dfn> = <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE" title='llvm::GetElementPtrInst::Create' data-ref="_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>, <a class="local col8 ref" href="#338NewSrc" title='NewSrc' data-ref="338NewSrc">NewSrc</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></a>{<a class="local col5 ref" href="#335SO1" title='SO1' data-ref="335SO1">SO1</a>});</td></tr>
<tr><th id="1805">1805</th><td>            <a class="local col9 ref" href="#339NewGEP" title='NewGEP' data-ref="339NewGEP">NewGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst13setIsInBoundsEb" title='llvm::GetElementPtrInst::setIsInBounds' data-ref="_ZN4llvm17GetElementPtrInst13setIsInBoundsEb">setIsInBounds</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>());</td></tr>
<tr><th id="1806">1806</th><td>            <b>return</b> <a class="local col9 ref" href="#339NewGEP" title='NewGEP' data-ref="339NewGEP">NewGEP</a>;</td></tr>
<tr><th id="1807">1807</th><td>          }</td></tr>
<tr><th id="1808">1808</th><td>        }</td></tr>
<tr><th id="1809">1809</th><td>      }</td></tr>
<tr><th id="1810">1810</th><td>    }</td></tr>
<tr><th id="1811">1811</th><td></td></tr>
<tr><th id="1812">1812</th><td>    <i>// Note that if our source is a gep chain itself then we wait for that</i></td></tr>
<tr><th id="1813">1813</th><td><i>    // chain to be resolved before we perform this transformation.  This</i></td></tr>
<tr><th id="1814">1814</th><td><i>    // avoids us creating a TON of code in some cases.</i></td></tr>
<tr><th id="1815">1815</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col0 decl" id="340SrcGEP" title='SrcGEP' data-type='llvm::GEPOperator *' data-ref="340SrcGEP"><a class="local col0 ref" href="#340SrcGEP" title='SrcGEP' data-ref="340SrcGEP">SrcGEP</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::GEPOperator" title='llvm::GEPOperator' data-ref="llvm::GEPOperator">GEPOperator</a>&gt;(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>)))</td></tr>
<tr><th id="1816">1816</th><td>      <b>if</b> (<a class="local col0 ref" href="#340SrcGEP" title='SrcGEP' data-ref="340SrcGEP">SrcGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() == <var>2</var> &amp;&amp; <a class="tu ref" href="#_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_" title='shouldMergeGEPs' data-use='c' data-ref="_ZL15shouldMergeGEPsRN4llvm11GEPOperatorES1_">shouldMergeGEPs</a>(<span class='refarg'>*<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a></span>, <span class='refarg'>*<a class="local col0 ref" href="#340SrcGEP" title='SrcGEP' data-ref="340SrcGEP">SrcGEP</a></span>))</td></tr>
<tr><th id="1817">1817</th><td>        <b>return</b> <b>nullptr</b>;   <i>// Wait until our source is folded to completion.</i></td></tr>
<tr><th id="1818">1818</th><td></td></tr>
<tr><th id="1819">1819</th><td>    <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>*, <var>8</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col1 decl" id="341Indices" title='Indices' data-type='SmallVector&lt;llvm::Value *, 8&gt;' data-ref="341Indices">Indices</dfn>;</td></tr>
<tr><th id="1820">1820</th><td></td></tr>
<tr><th id="1821">1821</th><td>    <i>// Find out whether the last index in the source GEP is a sequential idx.</i></td></tr>
<tr><th id="1822">1822</th><td>    <em>bool</em> <dfn class="local col2 decl" id="342EndsWithSequential" title='EndsWithSequential' data-type='bool' data-ref="342EndsWithSequential">EndsWithSequential</dfn> = <b>false</b>;</td></tr>
<tr><th id="1823">1823</th><td>    <b>for</b> (<a class="typedef" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#llvm::gep_type_iterator" title='llvm::gep_type_iterator' data-type='generic_gep_type_iterator&lt;&gt;' data-ref="llvm::gep_type_iterator">gep_type_iterator</a> <dfn class="local col3 decl" id="343I" title='I' data-type='gep_type_iterator' data-ref="343I">I</dfn> = <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZN4llvm14gep_type_beginERKNS_4UserE" title='llvm::gep_type_begin' data-ref="_ZN4llvm14gep_type_beginERKNS_4UserE">gep_type_begin</a>(*<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>), <dfn class="local col4 decl" id="344E" title='E' data-type='gep_type_iterator' data-ref="344E">E</dfn> = <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZN4llvm12gep_type_endERKNS_4UserE" title='llvm::gep_type_end' data-ref="_ZN4llvm12gep_type_endERKNS_4UserE">gep_type_end</a>(*<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>);</td></tr>
<tr><th id="1824">1824</th><td>         <a class="local col3 ref" href="#343I" title='I' data-ref="343I">I</a> <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZNK4llvm25generic_gep_type_iteratorneERKNS_25generic_gep_type_iteratorIT_EE" title='llvm::generic_gep_type_iterator::operator!=' data-ref="_ZNK4llvm25generic_gep_type_iteratorneERKNS_25generic_gep_type_iteratorIT_EE">!=</a> <a class="local col4 ref" href="#344E" title='E' data-ref="344E">E</a>; <a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZN4llvm25generic_gep_type_iteratorppEv" title='llvm::generic_gep_type_iterator::operator++' data-ref="_ZN4llvm25generic_gep_type_iteratorppEv">++</a><a class="local col3 ref" href="#343I" title='I' data-ref="343I">I</a>)</td></tr>
<tr><th id="1825">1825</th><td>      <a class="local col2 ref" href="#342EndsWithSequential" title='EndsWithSequential' data-ref="342EndsWithSequential">EndsWithSequential</a> = <a class="local col3 ref" href="#343I" title='I' data-ref="343I">I</a>.<a class="ref" href="../../../include/llvm/IR/GetElementPtrTypeIterator.h.html#_ZNK4llvm25generic_gep_type_iterator12isSequentialEv" title='llvm::generic_gep_type_iterator::isSequential' data-ref="_ZNK4llvm25generic_gep_type_iterator12isSequentialEv">isSequential</a>();</td></tr>
<tr><th id="1826">1826</th><td></td></tr>
<tr><th id="1827">1827</th><td>    <i>// Can we combine the two pointer arithmetics offsets?</i></td></tr>
<tr><th id="1828">1828</th><td>    <b>if</b> (<a class="local col2 ref" href="#342EndsWithSequential" title='EndsWithSequential' data-ref="342EndsWithSequential">EndsWithSequential</a>) {</td></tr>
<tr><th id="1829">1829</th><td>      <i>// Replace: gep (gep %P, long B), long A, ...</i></td></tr>
<tr><th id="1830">1830</th><td><i>      // With:    T = long A+B; gep %P, T, ...</i></td></tr>
<tr><th id="1831">1831</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="345SO1" title='SO1' data-type='llvm::Value *' data-ref="345SO1">SO1</dfn> = <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>()-<var>1</var>);</td></tr>
<tr><th id="1832">1832</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="346GO1" title='GO1' data-type='llvm::Value *' data-ref="346GO1">GO1</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1833">1833</th><td></td></tr>
<tr><th id="1834">1834</th><td>      <i>// If they aren't the same type, then the input hasn't been processed</i></td></tr>
<tr><th id="1835">1835</th><td><i>      // by the loop above yet (which canonicalizes sequential index types to</i></td></tr>
<tr><th id="1836">1836</th><td><i>      // intptr_t).  Just avoid transforming this until the input has been</i></td></tr>
<tr><th id="1837">1837</th><td><i>      // normalized.</i></td></tr>
<tr><th id="1838">1838</th><td>      <b>if</b> (<a class="local col5 ref" href="#345SO1" title='SO1' data-ref="345SO1">SO1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() != <a class="local col6 ref" href="#346GO1" title='GO1' data-ref="346GO1">GO1</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())</td></tr>
<tr><th id="1839">1839</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1840">1840</th><td></td></tr>
<tr><th id="1841">1841</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="347Sum" title='Sum' data-type='llvm::Value *' data-ref="347Sum">Sum</dfn> =</td></tr>
<tr><th id="1842">1842</th><td>          <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm15SimplifyAddInstEPNS_5ValueES1_bbRKNS_13SimplifyQueryE" title='llvm::SimplifyAddInst' data-ref="_ZN4llvm15SimplifyAddInstEPNS_5ValueES1_bbRKNS_13SimplifyQueryE">SimplifyAddInst</a>(<a class="local col6 ref" href="#346GO1" title='GO1' data-ref="346GO1">GO1</a>, <a class="local col5 ref" href="#345SO1" title='SO1' data-ref="345SO1">SO1</a>, <b>false</b>, <b>false</b>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>));</td></tr>
<tr><th id="1843">1843</th><td>      <i>// Only do the combine when we are sure the cost after the</i></td></tr>
<tr><th id="1844">1844</th><td><i>      // merge is never more than that before the merge.</i></td></tr>
<tr><th id="1845">1845</th><td>      <b>if</b> (<a class="local col7 ref" href="#347Sum" title='Sum' data-ref="347Sum">Sum</a> == <b>nullptr</b>)</td></tr>
<tr><th id="1846">1846</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1847">1847</th><td></td></tr>
<tr><th id="1848">1848</th><td>      <i>// Update the GEP in place if possible.</i></td></tr>
<tr><th id="1849">1849</th><td>      <b>if</b> (<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() == <var>2</var>) {</td></tr>
<tr><th id="1850">1850</th><td>        <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>));</td></tr>
<tr><th id="1851">1851</th><td>        <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>1</var>, <a class="local col7 ref" href="#347Sum" title='Sum' data-ref="347Sum">Sum</a>);</td></tr>
<tr><th id="1852">1852</th><td>        <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="1853">1853</th><td>      }</td></tr>
<tr><th id="1854">1854</th><td>      <a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl6appendET_S1_" title='llvm::SmallVectorImpl::append' data-ref="_ZN4llvm15SmallVectorImpl6appendET_S1_">append</a>(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8op_beginEv" title='llvm::User::op_begin' data-ref="_ZN4llvm4User8op_beginEv">op_begin</a>()+<var>1</var>, <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User6op_endEv" title='llvm::User::op_end' data-ref="_ZN4llvm4User6op_endEv">op_end</a>()-<var>1</var>);</td></tr>
<tr><th id="1855">1855</th><td>      <a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col7 ref" href="#347Sum" title='Sum' data-ref="347Sum">Sum</a>);</td></tr>
<tr><th id="1856">1856</th><td>      <a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl6appendET_S1_" title='llvm::SmallVectorImpl::append' data-ref="_ZN4llvm15SmallVectorImpl6appendET_S1_">append</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_begin' data-ref="_ZN4llvm17GetElementPtrInst8op_beginEv">op_begin</a>()+<var>2</var>, <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::op_end' data-ref="_ZN4llvm17GetElementPtrInst6op_endEv">op_end</a>());</td></tr>
<tr><th id="1857">1857</th><td>    } <b>else</b> <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(*<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst9idx_beginEv" title='llvm::GetElementPtrInst::idx_begin' data-ref="_ZN4llvm17GetElementPtrInst9idx_beginEv">idx_begin</a>()) &amp;&amp;</td></tr>
<tr><th id="1858">1858</th><td>               <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castERT0_" title='llvm::cast' data-ref="_ZN4llvm4castERT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<span class='refarg'>*<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst9idx_beginEv" title='llvm::GetElementPtrInst::idx_begin' data-ref="_ZN4llvm17GetElementPtrInst9idx_beginEv">idx_begin</a>()</span>)-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>() &amp;&amp;</td></tr>
<tr><th id="1859">1859</th><td>               <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() != <var>1</var>) {</td></tr>
<tr><th id="1860">1860</th><td>      <i>// Otherwise we can do the fold if the first index of the GEP is a zero</i></td></tr>
<tr><th id="1861">1861</th><td>      <a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl6appendET_S1_" title='llvm::SmallVectorImpl::append' data-ref="_ZN4llvm15SmallVectorImpl6appendET_S1_">append</a>(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8op_beginEv" title='llvm::User::op_begin' data-ref="_ZN4llvm4User8op_beginEv">op_begin</a>()+<var>1</var>, <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User6op_endEv" title='llvm::User::op_end' data-ref="_ZN4llvm4User6op_endEv">op_end</a>());</td></tr>
<tr><th id="1862">1862</th><td>      <a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl6appendET_S1_" title='llvm::SmallVectorImpl::append' data-ref="_ZN4llvm15SmallVectorImpl6appendET_S1_">append</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst9idx_beginEv" title='llvm::GetElementPtrInst::idx_begin' data-ref="_ZN4llvm17GetElementPtrInst9idx_beginEv">idx_begin</a>()+<var>1</var>, <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst7idx_endEv" title='llvm::GetElementPtrInst::idx_end' data-ref="_ZN4llvm17GetElementPtrInst7idx_endEv">idx_end</a>());</td></tr>
<tr><th id="1863">1863</th><td>    }</td></tr>
<tr><th id="1864">1864</th><td></td></tr>
<tr><th id="1865">1865</th><td>    <b>if</b> (!<a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase5emptyEv" title='llvm::SmallVectorBase::empty' data-ref="_ZNK4llvm15SmallVectorBase5emptyEv">empty</a>())</td></tr>
<tr><th id="1866">1866</th><td>      <b>return</b> <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>() &amp;&amp; <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator10isInBoundsEv" title='llvm::GEPOperator::isInBounds' data-ref="_ZNK4llvm11GEPOperator10isInBoundsEv">isInBounds</a>()</td></tr>
<tr><th id="1867">1867</th><td>                 ? <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst14CreateInBoundsEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE" title='llvm::GetElementPtrInst::CreateInBounds' data-ref="_ZN4llvm17GetElementPtrInst14CreateInBoundsEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE">CreateInBounds</a>(</td></tr>
<tr><th id="1868">1868</th><td>                       <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator20getSourceElementTypeEv" title='llvm::GEPOperator::getSourceElementType' data-ref="_ZNK4llvm11GEPOperator20getSourceElementTypeEv">getSourceElementType</a>(), <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>), <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>,</td></tr>
<tr><th id="1869">1869</th><td>                       <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>())</td></tr>
<tr><th id="1870">1870</th><td>                 : <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE" title='llvm::GetElementPtrInst::Create' data-ref="_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Operator.h.html#_ZNK4llvm11GEPOperator20getSourceElementTypeEv" title='llvm::GEPOperator::getSourceElementType' data-ref="_ZNK4llvm11GEPOperator20getSourceElementTypeEv">getSourceElementType</a>(),</td></tr>
<tr><th id="1871">1871</th><td>                                             <a class="local col2 ref" href="#332Src" title='Src' data-ref="332Src">Src</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>), <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#341Indices" title='Indices' data-ref="341Indices">Indices</a>,</td></tr>
<tr><th id="1872">1872</th><td>                                             <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="1873">1873</th><td>  }</td></tr>
<tr><th id="1874">1874</th><td></td></tr>
<tr><th id="1875">1875</th><td>  <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst13getNumIndicesEv" title='llvm::GetElementPtrInst::getNumIndices' data-ref="_ZNK4llvm17GetElementPtrInst13getNumIndicesEv">getNumIndices</a>() == <var>1</var>) {</td></tr>
<tr><th id="1876">1876</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="348AS" title='AS' data-type='unsigned int' data-ref="348AS">AS</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst22getPointerAddressSpaceEv" title='llvm::GetElementPtrInst::getPointerAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst22getPointerAddressSpaceEv">getPointerAddressSpace</a>();</td></tr>
<tr><th id="1877">1877</th><td>    <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>)-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getScalarSizeInBitsEv" title='llvm::Type::getScalarSizeInBits' data-ref="_ZNK4llvm4Type19getScalarSizeInBitsEv">getScalarSizeInBits</a>() ==</td></tr>
<tr><th id="1878">1878</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout18getIndexSizeInBitsEj" title='llvm::DataLayout::getIndexSizeInBits' data-ref="_ZNK4llvm10DataLayout18getIndexSizeInBitsEj">getIndexSizeInBits</a>(<a class="local col8 ref" href="#348AS" title='AS' data-ref="348AS">AS</a>)) {</td></tr>
<tr><th id="1879">1879</th><td>      <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="349TyAllocSize" title='TyAllocSize' data-type='uint64_t' data-ref="349TyAllocSize">TyAllocSize</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>);</td></tr>
<tr><th id="1880">1880</th><td></td></tr>
<tr><th id="1881">1881</th><td>      <em>bool</em> <dfn class="local col0 decl" id="350Matched" title='Matched' data-type='bool' data-ref="350Matched">Matched</dfn> = <b>false</b>;</td></tr>
<tr><th id="1882">1882</th><td>      <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="351C" title='C' data-type='uint64_t' data-ref="351C">C</dfn>;</td></tr>
<tr><th id="1883">1883</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="352V" title='V' data-type='llvm::Value *' data-ref="352V">V</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1884">1884</th><td>      <b>if</b> (<a class="local col9 ref" href="#349TyAllocSize" title='TyAllocSize' data-ref="349TyAllocSize">TyAllocSize</a> == <var>1</var>) {</td></tr>
<tr><th id="1885">1885</th><td>        <a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="1886">1886</th><td>        <a class="local col0 ref" href="#350Matched" title='Matched' data-ref="350Matched">Matched</a> = <b>true</b>;</td></tr>
<tr><th id="1887">1887</th><td>      } <b>else</b> <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>),</td></tr>
<tr><th id="1888">1888</th><td>                       <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_AShrERKT_RKT0_" title='llvm::PatternMatch::m_AShr' data-ref="_ZN4llvm12PatternMatch6m_AShrERKT_RKT0_">m_AShr</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch13m_ConstantIntERm" title='llvm::PatternMatch::m_ConstantInt' data-ref="_ZN4llvm12PatternMatch13m_ConstantIntERm">m_ConstantInt</a>(<span class='refarg'><a class="local col1 ref" href="#351C" title='C' data-ref="351C">C</a></span>)))) {</td></tr>
<tr><th id="1889">1889</th><td>        <b>if</b> (<a class="local col9 ref" href="#349TyAllocSize" title='TyAllocSize' data-ref="349TyAllocSize">TyAllocSize</a> == <var>1ULL</var> &lt;&lt; <a class="local col1 ref" href="#351C" title='C' data-ref="351C">C</a>)</td></tr>
<tr><th id="1890">1890</th><td>          <a class="local col0 ref" href="#350Matched" title='Matched' data-ref="350Matched">Matched</a> = <b>true</b>;</td></tr>
<tr><th id="1891">1891</th><td>      } <b>else</b> <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>),</td></tr>
<tr><th id="1892">1892</th><td>                       <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_SDivERKT_RKT0_" title='llvm::PatternMatch::m_SDiv' data-ref="_ZN4llvm12PatternMatch6m_SDivERKT_RKT0_">m_SDiv</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch13m_ConstantIntERm" title='llvm::PatternMatch::m_ConstantInt' data-ref="_ZN4llvm12PatternMatch13m_ConstantIntERm">m_ConstantInt</a>(<span class='refarg'><a class="local col1 ref" href="#351C" title='C' data-ref="351C">C</a></span>)))) {</td></tr>
<tr><th id="1893">1893</th><td>        <b>if</b> (<a class="local col9 ref" href="#349TyAllocSize" title='TyAllocSize' data-ref="349TyAllocSize">TyAllocSize</a> == <a class="local col1 ref" href="#351C" title='C' data-ref="351C">C</a>)</td></tr>
<tr><th id="1894">1894</th><td>          <a class="local col0 ref" href="#350Matched" title='Matched' data-ref="350Matched">Matched</a> = <b>true</b>;</td></tr>
<tr><th id="1895">1895</th><td>      }</td></tr>
<tr><th id="1896">1896</th><td></td></tr>
<tr><th id="1897">1897</th><td>      <b>if</b> (<a class="local col0 ref" href="#350Matched" title='Matched' data-ref="350Matched">Matched</a>) {</td></tr>
<tr><th id="1898">1898</th><td>        <i>// Canonicalize (gep i8* X, -(ptrtoint Y))</i></td></tr>
<tr><th id="1899">1899</th><td><i>        // to (inttoptr (sub (ptrtoint X), (ptrtoint Y)))</i></td></tr>
<tr><th id="1900">1900</th><td><i>        // The GEP pattern is emitted by the SCEV expander for certain kinds of</i></td></tr>
<tr><th id="1901">1901</th><td><i>        // pointer arithmetic.</i></td></tr>
<tr><th id="1902">1902</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_NegERKT_" title='llvm::PatternMatch::m_Neg' data-ref="_ZN4llvm12PatternMatch5m_NegERKT_">m_Neg</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_PtrToIntERKT_" title='llvm::PatternMatch::m_PtrToInt' data-ref="_ZN4llvm12PatternMatch10m_PtrToIntERKT_">m_PtrToInt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueEv" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueEv">m_Value</a>())))) {</td></tr>
<tr><th id="1903">1903</th><td>          <a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::Operator" title='llvm::Operator' data-ref="llvm::Operator">Operator</a> *<dfn class="local col3 decl" id="353Index" title='Index' data-type='llvm::Operator *' data-ref="353Index">Index</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Operator.h.html#llvm::Operator" title='llvm::Operator' data-ref="llvm::Operator">Operator</a>&gt;(<a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a>);</td></tr>
<tr><th id="1904">1904</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="354PtrToInt" title='PtrToInt' data-type='llvm::Value *' data-ref="354PtrToInt">PtrToInt</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreatePtrToInt' data-ref="_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePtrToInt</a>(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>, <a class="local col3 ref" href="#353Index" title='Index' data-ref="353Index">Index</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1905">1905</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="355NewSub" title='NewSub' data-type='llvm::Value *' data-ref="355NewSub">NewSub</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateSubEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateSub' data-ref="_ZN4llvm9IRBuilder9CreateSubEPNS_5ValueES2_RKNS_5TwineEbb">CreateSub</a>(<a class="local col4 ref" href="#354PtrToInt" title='PtrToInt' data-ref="354PtrToInt">PtrToInt</a>, <a class="local col3 ref" href="#353Index" title='Index' data-ref="353Index">Index</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>1</var>));</td></tr>
<tr><th id="1906">1906</th><td>          <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst6CreateENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineEPS1_" title='llvm::CastInst::Create' data-ref="_ZN4llvm8CastInst6CreateENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineEPS1_">Create</a>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#194" title='llvm::Instruction::CastOps::IntToPtr' data-ref="llvm::Instruction::CastOps::IntToPtr">IntToPtr</a>, <a class="local col5 ref" href="#355NewSub" title='NewSub' data-ref="355NewSub">NewSub</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="1907">1907</th><td>        }</td></tr>
<tr><th id="1908">1908</th><td>        <i>// Canonicalize (gep i8* X, (ptrtoint Y)-(ptrtoint X))</i></td></tr>
<tr><th id="1909">1909</th><td><i>        // to (bitcast Y)</i></td></tr>
<tr><th id="1910">1910</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="356Y" title='Y' data-type='llvm::Value *' data-ref="356Y">Y</dfn>;</td></tr>
<tr><th id="1911">1911</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col2 ref" href="#352V" title='V' data-ref="352V">V</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_SubERKT_RKT0_" title='llvm::PatternMatch::m_Sub' data-ref="_ZN4llvm12PatternMatch5m_SubERKT_RKT0_">m_Sub</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_PtrToIntERKT_" title='llvm::PatternMatch::m_PtrToInt' data-ref="_ZN4llvm12PatternMatch10m_PtrToIntERKT_">m_PtrToInt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col6 ref" href="#356Y" title='Y' data-ref="356Y">Y</a></span>)),</td></tr>
<tr><th id="1912">1912</th><td>                           <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_PtrToIntERKT_" title='llvm::PatternMatch::m_PtrToInt' data-ref="_ZN4llvm12PatternMatch10m_PtrToIntERKT_">m_PtrToInt</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>0</var>))))))</td></tr>
<tr><th id="1913">1913</th><td>          <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::CastInst::CreatePointerBitCastOrAddrSpaceCast' data-ref="_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">CreatePointerBitCastOrAddrSpaceCast</a>(<a class="local col6 ref" href="#356Y" title='Y' data-ref="356Y">Y</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="1914">1914</th><td>      }</td></tr>
<tr><th id="1915">1915</th><td>    }</td></tr>
<tr><th id="1916">1916</th><td>  }</td></tr>
<tr><th id="1917">1917</th><td></td></tr>
<tr><th id="1918">1918</th><td>  <i>// We do not handle pointer-vector geps here.</i></td></tr>
<tr><th id="1919">1919</th><td>  <b>if</b> (<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>())</td></tr>
<tr><th id="1920">1920</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1921">1921</th><td></td></tr>
<tr><th id="1922">1922</th><td>  <i>// Handle gep(bitcast x) and gep(gep x, 0, 0, 0).</i></td></tr>
<tr><th id="1923">1923</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="357StrippedPtr" title='StrippedPtr' data-type='llvm::Value *' data-ref="357StrippedPtr">StrippedPtr</dfn> = <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value17stripPointerCastsEv" title='llvm::Value::stripPointerCasts' data-ref="_ZN4llvm5Value17stripPointerCastsEv">stripPointerCasts</a>();</td></tr>
<tr><th id="1924">1924</th><td>  <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a> *<dfn class="local col8 decl" id="358StrippedPtrTy" title='StrippedPtrTy' data-type='llvm::PointerType *' data-ref="358StrippedPtrTy">StrippedPtrTy</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>&gt;(<a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1925">1925</th><td></td></tr>
<tr><th id="1926">1926</th><td>  <b>if</b> (<a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a> != <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>) {</td></tr>
<tr><th id="1927">1927</th><td>    <em>bool</em> <dfn class="local col9 decl" id="359HasZeroPointerIndex" title='HasZeroPointerIndex' data-type='bool' data-ref="359HasZeroPointerIndex">HasZeroPointerIndex</dfn> = <b>false</b>;</td></tr>
<tr><th id="1928">1928</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col0 decl" id="360StrippedPtrEltTy" title='StrippedPtrEltTy' data-type='llvm::Type *' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</dfn> = <a class="local col8 ref" href="#358StrippedPtrTy" title='StrippedPtrTy' data-ref="358StrippedPtrTy">StrippedPtrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType14getElementTypeEv" title='llvm::PointerType::getElementType' data-ref="_ZNK4llvm11PointerType14getElementTypeEv">getElementType</a>();</td></tr>
<tr><th id="1929">1929</th><td></td></tr>
<tr><th id="1930">1930</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="361C" title='C' data-type='llvm::ConstantInt *' data-ref="361C"><a class="local col1 ref" href="#361C" title='C' data-ref="361C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>)))</td></tr>
<tr><th id="1931">1931</th><td>      <a class="local col9 ref" href="#359HasZeroPointerIndex" title='HasZeroPointerIndex' data-ref="359HasZeroPointerIndex">HasZeroPointerIndex</a> = <a class="local col1 ref" href="#361C" title='C' data-ref="361C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt6isZeroEv" title='llvm::ConstantInt::isZero' data-ref="_ZNK4llvm11ConstantInt6isZeroEv">isZero</a>();</td></tr>
<tr><th id="1932">1932</th><td></td></tr>
<tr><th id="1933">1933</th><td>    <i>// Transform: GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ...</i></td></tr>
<tr><th id="1934">1934</th><td><i>    // into     : GEP [10 x i8]* X, i32 0, ...</i></td></tr>
<tr><th id="1935">1935</th><td><i>    //</i></td></tr>
<tr><th id="1936">1936</th><td><i>    // Likewise, transform: GEP (bitcast i8* X to [0 x i8]*), i32 0, ...</i></td></tr>
<tr><th id="1937">1937</th><td><i>    //           into     : GEP i8* X, ...</i></td></tr>
<tr><th id="1938">1938</th><td><i>    //</i></td></tr>
<tr><th id="1939">1939</th><td><i>    // This occurs when the program declares an array extern like "int X[];"</i></td></tr>
<tr><th id="1940">1940</th><td>    <b>if</b> (<a class="local col9 ref" href="#359HasZeroPointerIndex" title='HasZeroPointerIndex' data-ref="359HasZeroPointerIndex">HasZeroPointerIndex</a>) {</td></tr>
<tr><th id="1941">1941</th><td>      <b>if</b> (<em>auto</em> *<dfn class="local col2 decl" id="362CATy" title='CATy' data-type='llvm::ArrayType *' data-ref="362CATy"><a class="local col2 ref" href="#362CATy" title='CATy' data-ref="362CATy">CATy</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>)) {</td></tr>
<tr><th id="1942">1942</th><td>        <i>// GEP (bitcast i8* X to [0 x i8]*), i32 0, ... ?</i></td></tr>
<tr><th id="1943">1943</th><td>        <b>if</b> (<a class="local col2 ref" href="#362CATy" title='CATy' data-ref="362CATy">CATy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>() == <a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>) {</td></tr>
<tr><th id="1944">1944</th><td>          <b>if</b> (<a class="local col8 ref" href="#358StrippedPtrTy" title='StrippedPtrTy' data-ref="358StrippedPtrTy">StrippedPtrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType15getAddressSpaceEv" title='llvm::PointerType::getAddressSpace' data-ref="_ZNK4llvm11PointerType15getAddressSpaceEv">getAddressSpace</a>() != <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="1945">1945</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1946">1946</th><td>          <i>// -&gt; GEP i8* X, ...</i></td></tr>
<tr><th id="1947">1947</th><td>          <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>*, <var>8</var>&gt; <dfn class="local col3 decl" id="363Idx" title='Idx' data-type='SmallVector&lt;llvm::Value *, 8&gt;' data-ref="363Idx">Idx</dfn><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1ET_S1_" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1ET_S1_">(</a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst9idx_beginEv" title='llvm::GetElementPtrInst::idx_begin' data-ref="_ZN4llvm17GetElementPtrInst9idx_beginEv">idx_begin</a>()+<var>1</var>, <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst7idx_endEv" title='llvm::GetElementPtrInst::idx_end' data-ref="_ZN4llvm17GetElementPtrInst7idx_endEv">idx_end</a>());</td></tr>
<tr><th id="1948">1948</th><td>          <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a> *<dfn class="local col4 decl" id="364Res" title='Res' data-type='llvm::GetElementPtrInst *' data-ref="364Res">Res</dfn> = <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE" title='llvm::GetElementPtrInst::Create' data-ref="_ZN4llvm17GetElementPtrInst6CreateEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE">Create</a>(</td></tr>
<tr><th id="1949">1949</th><td>              <a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col3 ref" href="#363Idx" title='Idx' data-ref="363Idx">Idx</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="1950">1950</th><td>          <a class="local col4 ref" href="#364Res" title='Res' data-ref="364Res">Res</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst13setIsInBoundsEb" title='llvm::GetElementPtrInst::setIsInBounds' data-ref="_ZN4llvm17GetElementPtrInst13setIsInBoundsEb">setIsInBounds</a>(<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>());</td></tr>
<tr><th id="1951">1951</th><td>          <b>if</b> (<a class="local col8 ref" href="#358StrippedPtrTy" title='StrippedPtrTy' data-ref="358StrippedPtrTy">StrippedPtrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType15getAddressSpaceEv" title='llvm::PointerType::getAddressSpace' data-ref="_ZNK4llvm11PointerType15getAddressSpaceEv">getAddressSpace</a>() == <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="1952">1952</th><td>            <b>return</b> <a class="local col4 ref" href="#364Res" title='Res' data-ref="364Res">Res</a>;</td></tr>
<tr><th id="1953">1953</th><td>          <i>// Insert Res, and create an addrspacecast.</i></td></tr>
<tr><th id="1954">1954</th><td><i>          // e.g.,</i></td></tr>
<tr><th id="1955">1955</th><td><i>          // GEP (addrspacecast i8 addrspace(1)* X to [0 x i8]*), i32 0, ...</i></td></tr>
<tr><th id="1956">1956</th><td><i>          // -&gt;</i></td></tr>
<tr><th id="1957">1957</th><td><i>          // %0 = GEP i8 addrspace(1)* X, ...</i></td></tr>
<tr><th id="1958">1958</th><td><i>          // addrspacecast i8 addrspace(1)* %0 to i8*</i></td></tr>
<tr><th id="1959">1959</th><td>          <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::AddrSpaceCastInst::AddrSpaceCastInst' data-ref="_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm9IRBuilder6InsertEPT_RKNS_5TwineE" title='llvm::IRBuilder::Insert' data-ref="_ZNK4llvm9IRBuilder6InsertEPT_RKNS_5TwineE">Insert</a>(<a class="local col4 ref" href="#364Res" title='Res' data-ref="364Res">Res</a>), <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="1960">1960</th><td>        }</td></tr>
<tr><th id="1961">1961</th><td></td></tr>
<tr><th id="1962">1962</th><td>        <b>if</b> (<em>auto</em> *<dfn class="local col5 decl" id="365XATy" title='XATy' data-type='llvm::ArrayType *' data-ref="365XATy"><a class="local col5 ref" href="#365XATy" title='XATy' data-ref="365XATy">XATy</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>)) {</td></tr>
<tr><th id="1963">1963</th><td>          <i>// GEP (bitcast [10 x i8]* X to [0 x i8]*), i32 0, ... ?</i></td></tr>
<tr><th id="1964">1964</th><td>          <b>if</b> (<a class="local col2 ref" href="#362CATy" title='CATy' data-ref="362CATy">CATy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>() == <a class="local col5 ref" href="#365XATy" title='XATy' data-ref="365XATy">XATy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>()) {</td></tr>
<tr><th id="1965">1965</th><td>            <i>// -&gt; GEP [10 x i8]* X, i32 0, ...</i></td></tr>
<tr><th id="1966">1966</th><td><i>            // At this point, we know that the cast source type is a pointer</i></td></tr>
<tr><th id="1967">1967</th><td><i>            // to an array of the same type as the destination pointer</i></td></tr>
<tr><th id="1968">1968</th><td><i>            // array.  Because the array type is never stepped over (there</i></td></tr>
<tr><th id="1969">1969</th><td><i>            // is a leading zero) we can fold the cast into this GEP.</i></td></tr>
<tr><th id="1970">1970</th><td>            <b>if</b> (<a class="local col8 ref" href="#358StrippedPtrTy" title='StrippedPtrTy' data-ref="358StrippedPtrTy">StrippedPtrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType15getAddressSpaceEv" title='llvm::PointerType::getAddressSpace' data-ref="_ZNK4llvm11PointerType15getAddressSpaceEv">getAddressSpace</a>() == <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>()) {</td></tr>
<tr><th id="1971">1971</th><td>              <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::setOperand' data-ref="_ZN4llvm17GetElementPtrInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>);</td></tr>
<tr><th id="1972">1972</th><td>              <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst20setSourceElementTypeEPNS_4TypeE" title='llvm::GetElementPtrInst::setSourceElementType' data-ref="_ZN4llvm17GetElementPtrInst20setSourceElementTypeEPNS_4TypeE">setSourceElementType</a>(<a class="local col5 ref" href="#365XATy" title='XATy' data-ref="365XATy">XATy</a>);</td></tr>
<tr><th id="1973">1973</th><td>              <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="1974">1974</th><td>            }</td></tr>
<tr><th id="1975">1975</th><td>            <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="1976">1976</th><td>            <i>// This transform appears to break things:</i></td></tr>
<tr><th id="1977">1977</th><td><u>#<span data-ppcond="1977">if</span> 0</u></td></tr>
<tr><th id="1978">1978</th><td>            <i>// Cannot replace the base pointer directly because StrippedPtr's</i></td></tr>
<tr><th id="1979">1979</th><td><i>            // address space is different. Instead, create a new GEP followed by</i></td></tr>
<tr><th id="1980">1980</th><td><i>            // an addrspacecast.</i></td></tr>
<tr><th id="1981">1981</th><td><i>            // e.g.,</i></td></tr>
<tr><th id="1982">1982</th><td><i>            // GEP (addrspacecast [10 x i8] addrspace(1)* X to [0 x i8]*),</i></td></tr>
<tr><th id="1983">1983</th><td><i>            //   i32 0, ...</i></td></tr>
<tr><th id="1984">1984</th><td><i>            // -&gt;</i></td></tr>
<tr><th id="1985">1985</th><td><i>            // %0 = GEP [10 x i8] addrspace(1)* X, ...</i></td></tr>
<tr><th id="1986">1986</th><td><i>            // addrspacecast i8 addrspace(1)* %0 to i8*</i></td></tr>
<tr><th id="1987">1987</th><td>            SmallVector&lt;Value*, <var>8</var>&gt; Idx(GEP.idx_begin(), GEP.idx_end());</td></tr>
<tr><th id="1988">1988</th><td>            Value *NewGEP =</td></tr>
<tr><th id="1989">1989</th><td>                GEP.isInBounds()</td></tr>
<tr><th id="1990">1990</th><td>                    ? Builder.CreateInBoundsGEP(StrippedPtrEltTy, StrippedPtr,</td></tr>
<tr><th id="1991">1991</th><td>                                                Idx, GEP.getName())</td></tr>
<tr><th id="1992">1992</th><td>                    : Builder.CreateGEP(StrippedPtrEltTy, StrippedPtr, Idx,</td></tr>
<tr><th id="1993">1993</th><td>                                        GEP.getName());</td></tr>
<tr><th id="1994">1994</th><td>            <b>return</b> <b>new</b> AddrSpaceCastInst(NewGEP, GEPType);</td></tr>
<tr><th id="1995">1995</th><td><u>#<span data-ppcond="1977">endif</span></u></td></tr>
<tr><th id="1996">1996</th><td>          }</td></tr>
<tr><th id="1997">1997</th><td>        }</td></tr>
<tr><th id="1998">1998</th><td>      }</td></tr>
<tr><th id="1999">1999</th><td>    } <b>else</b> <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>() == <var>2</var>) {</td></tr>
<tr><th id="2000">2000</th><td>      <i>// Transform things like:</i></td></tr>
<tr><th id="2001">2001</th><td><i>      // %t = getelementptr i32* bitcast ([2 x i32]* %str to i32*), i32 %V</i></td></tr>
<tr><th id="2002">2002</th><td><i>      // into:  %t1 = getelementptr [2 x i32]* %str, i32 0, i32 %V; bitcast</i></td></tr>
<tr><th id="2003">2003</th><td>      <b>if</b> (<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type9isArrayTyEv" title='llvm::Type::isArrayTy' data-ref="_ZNK4llvm4Type9isArrayTyEv">isArrayTy</a>() &amp;&amp;</td></tr>
<tr><th id="2004">2004</th><td>          <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getArrayElementTypeEv" title='llvm::Type::getArrayElementType' data-ref="_ZNK4llvm4Type19getArrayElementTypeEv">getArrayElementType</a>()) ==</td></tr>
<tr><th id="2005">2005</th><td>              <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>)) {</td></tr>
<tr><th id="2006">2006</th><td>        <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="366IdxType" title='IdxType' data-type='llvm::Type *' data-ref="366IdxType">IdxType</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2007">2007</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="367Idx" title='Idx' data-type='llvm::Value *[2]' data-ref="367Idx">Idx</dfn>[<var>2</var>] = { <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col6 ref" href="#366IdxType" title='IdxType' data-ref="366IdxType">IdxType</a>), <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>) };</td></tr>
<tr><th id="2008">2008</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="368NewGEP" title='NewGEP' data-type='llvm::Value *' data-ref="368NewGEP">NewGEP</dfn> =</td></tr>
<tr><th id="2009">2009</th><td>            <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>()</td></tr>
<tr><th id="2010">2010</th><td>                ? <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col7 ref" href="#367Idx" title='Idx' data-ref="367Idx">Idx</a>,</td></tr>
<tr><th id="2011">2011</th><td>                                            <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>())</td></tr>
<tr><th id="2012">2012</th><td>                : <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col7 ref" href="#367Idx" title='Idx' data-ref="367Idx">Idx</a>,</td></tr>
<tr><th id="2013">2013</th><td>                                    <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="2014">2014</th><td></td></tr>
<tr><th id="2015">2015</th><td>        <i>// V and GEP are both pointer types --&gt; BitCast</i></td></tr>
<tr><th id="2016">2016</th><td>        <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::CastInst::CreatePointerBitCastOrAddrSpaceCast' data-ref="_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">CreatePointerBitCastOrAddrSpaceCast</a>(<a class="local col8 ref" href="#368NewGEP" title='NewGEP' data-ref="368NewGEP">NewGEP</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2017">2017</th><td>      }</td></tr>
<tr><th id="2018">2018</th><td></td></tr>
<tr><th id="2019">2019</th><td>      <i>// Transform things like:</i></td></tr>
<tr><th id="2020">2020</th><td><i>      // %V = mul i64 %N, 4</i></td></tr>
<tr><th id="2021">2021</th><td><i>      // %t = getelementptr i8* bitcast (i32* %arr to i8*), i32 %V</i></td></tr>
<tr><th id="2022">2022</th><td><i>      // into:  %t1 = getelementptr i32* %arr, i32 %N; bitcast</i></td></tr>
<tr><th id="2023">2023</th><td>      <b>if</b> (<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>() &amp;&amp; <a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>()) {</td></tr>
<tr><th id="2024">2024</th><td>        <i>// Check that changing the type amounts to dividing the index by a scale</i></td></tr>
<tr><th id="2025">2025</th><td><i>        // factor.</i></td></tr>
<tr><th id="2026">2026</th><td>        <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col9 decl" id="369ResSize" title='ResSize' data-type='uint64_t' data-ref="369ResSize">ResSize</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>);</td></tr>
<tr><th id="2027">2027</th><td>        <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col0 decl" id="370SrcSize" title='SrcSize' data-type='uint64_t' data-ref="370SrcSize">SrcSize</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>);</td></tr>
<tr><th id="2028">2028</th><td>        <b>if</b> (<a class="local col9 ref" href="#369ResSize" title='ResSize' data-ref="369ResSize">ResSize</a> &amp;&amp; <a class="local col0 ref" href="#370SrcSize" title='SrcSize' data-ref="370SrcSize">SrcSize</a> % <a class="local col9 ref" href="#369ResSize" title='ResSize' data-ref="369ResSize">ResSize</a> == <var>0</var>) {</td></tr>
<tr><th id="2029">2029</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="371Idx" title='Idx' data-type='llvm::Value *' data-ref="371Idx">Idx</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="2030">2030</th><td>          <em>unsigned</em> <dfn class="local col2 decl" id="372BitWidth" title='BitWidth' data-type='unsigned int' data-ref="372BitWidth">BitWidth</dfn> = <a class="local col1 ref" href="#371Idx" title='Idx' data-ref="371Idx">Idx</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="2031">2031</th><td>          <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col3 decl" id="373Scale" title='Scale' data-type='uint64_t' data-ref="373Scale">Scale</dfn> = <a class="local col0 ref" href="#370SrcSize" title='SrcSize' data-ref="370SrcSize">SrcSize</a> / <a class="local col9 ref" href="#369ResSize" title='ResSize' data-ref="369ResSize">ResSize</a>;</td></tr>
<tr><th id="2032">2032</th><td></td></tr>
<tr><th id="2033">2033</th><td>          <i>// Earlier transforms ensure that the index has the right type</i></td></tr>
<tr><th id="2034">2034</th><td><i>          // according to Data Layout, which considerably simplifies the</i></td></tr>
<tr><th id="2035">2035</th><td><i>          // logic by eliminating implicit casts.</i></td></tr>
<tr><th id="2036">2036</th><td>          <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Idx-&gt;getType() == DL.getIndexType(GEPType) &amp;&amp; &quot;Index type does not match the Data Layout preferences&quot;) ? void (0) : __assert_fail (&quot;Idx-&gt;getType() == DL.getIndexType(GEPType) &amp;&amp; \&quot;Index type does not match the Data Layout preferences\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2037, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col1 ref" href="#371Idx" title='Idx' data-ref="371Idx">Idx</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() == <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>) &amp;&amp;</td></tr>
<tr><th id="2037">2037</th><td>                 <q>"Index type does not match the Data Layout preferences"</q>);</td></tr>
<tr><th id="2038">2038</th><td></td></tr>
<tr><th id="2039">2039</th><td>          <em>bool</em> <dfn class="local col4 decl" id="374NSW" title='NSW' data-type='bool' data-ref="374NSW">NSW</dfn>;</td></tr>
<tr><th id="2040">2040</th><td>          <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="375NewIdx" title='NewIdx' data-type='llvm::Value *' data-ref="375NewIdx"><a class="local col5 ref" href="#375NewIdx" title='NewIdx' data-ref="375NewIdx">NewIdx</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb" title='llvm::InstCombiner::Descale' data-ref="_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb">Descale</a>(<a class="local col1 ref" href="#371Idx" title='Idx' data-ref="371Idx">Idx</a>, <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col2 ref" href="#372BitWidth" title='BitWidth' data-ref="372BitWidth">BitWidth</a>, <a class="local col3 ref" href="#373Scale" title='Scale' data-ref="373Scale">Scale</a>), <span class='refarg'><a class="local col4 ref" href="#374NSW" title='NSW' data-ref="374NSW">NSW</a></span>)) {</td></tr>
<tr><th id="2041">2041</th><td>            <i>// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</i></td></tr>
<tr><th id="2042">2042</th><td><i>            // If the multiplication NewIdx * Scale may overflow then the new</i></td></tr>
<tr><th id="2043">2043</th><td><i>            // GEP may not be "inbounds".</i></td></tr>
<tr><th id="2044">2044</th><td>            <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="376NewGEP" title='NewGEP' data-type='llvm::Value *' data-ref="376NewGEP">NewGEP</dfn> =</td></tr>
<tr><th id="2045">2045</th><td>                <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>() &amp;&amp; <a class="local col4 ref" href="#374NSW" title='NSW' data-ref="374NSW">NSW</a></td></tr>
<tr><th id="2046">2046</th><td>                    ? <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>,</td></tr>
<tr><th id="2047">2047</th><td>                                                <a class="local col5 ref" href="#375NewIdx" title='NewIdx' data-ref="375NewIdx">NewIdx</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>())</td></tr>
<tr><th id="2048">2048</th><td>                    : <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueES4_RKNS_5TwineE">CreateGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>, <a class="local col5 ref" href="#375NewIdx" title='NewIdx' data-ref="375NewIdx">NewIdx</a>,</td></tr>
<tr><th id="2049">2049</th><td>                                        <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="2050">2050</th><td></td></tr>
<tr><th id="2051">2051</th><td>            <i>// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</i></td></tr>
<tr><th id="2052">2052</th><td>            <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::CastInst::CreatePointerBitCastOrAddrSpaceCast' data-ref="_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">CreatePointerBitCastOrAddrSpaceCast</a>(<a class="local col6 ref" href="#376NewGEP" title='NewGEP' data-ref="376NewGEP">NewGEP</a>,</td></tr>
<tr><th id="2053">2053</th><td>                                                                 <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2054">2054</th><td>          }</td></tr>
<tr><th id="2055">2055</th><td>        }</td></tr>
<tr><th id="2056">2056</th><td>      }</td></tr>
<tr><th id="2057">2057</th><td></td></tr>
<tr><th id="2058">2058</th><td>      <i>// Similarly, transform things like:</i></td></tr>
<tr><th id="2059">2059</th><td><i>      // getelementptr i8* bitcast ([100 x double]* X to i8*), i32 %tmp</i></td></tr>
<tr><th id="2060">2060</th><td><i>      //   (where tmp = 8*tmp2) into:</i></td></tr>
<tr><th id="2061">2061</th><td><i>      // getelementptr [100 x double]* %arr, i32 0, i32 %tmp2; bitcast</i></td></tr>
<tr><th id="2062">2062</th><td>      <b>if</b> (<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>() &amp;&amp; <a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE" title='llvm::Type::isSized' data-ref="_ZNK4llvm4Type7isSizedEPNS_15SmallPtrSetImplIPS0_EE">isSized</a>() &amp;&amp;</td></tr>
<tr><th id="2063">2063</th><td>          <a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type9isArrayTyEv" title='llvm::Type::isArrayTy' data-ref="_ZNK4llvm4Type9isArrayTyEv">isArrayTy</a>()) {</td></tr>
<tr><th id="2064">2064</th><td>        <i>// Check that changing to the array element type amounts to dividing the</i></td></tr>
<tr><th id="2065">2065</th><td><i>        // index by a scale factor.</i></td></tr>
<tr><th id="2066">2066</th><td>        <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col7 decl" id="377ResSize" title='ResSize' data-type='uint64_t' data-ref="377ResSize">ResSize</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>);</td></tr>
<tr><th id="2067">2067</th><td>        <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col8 decl" id="378ArrayEltSize" title='ArrayEltSize' data-type='uint64_t' data-ref="378ArrayEltSize">ArrayEltSize</dfn> =</td></tr>
<tr><th id="2068">2068</th><td>            <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getArrayElementTypeEv" title='llvm::Type::getArrayElementType' data-ref="_ZNK4llvm4Type19getArrayElementTypeEv">getArrayElementType</a>());</td></tr>
<tr><th id="2069">2069</th><td>        <b>if</b> (<a class="local col7 ref" href="#377ResSize" title='ResSize' data-ref="377ResSize">ResSize</a> &amp;&amp; <a class="local col8 ref" href="#378ArrayEltSize" title='ArrayEltSize' data-ref="378ArrayEltSize">ArrayEltSize</a> % <a class="local col7 ref" href="#377ResSize" title='ResSize' data-ref="377ResSize">ResSize</a> == <var>0</var>) {</td></tr>
<tr><th id="2070">2070</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="379Idx" title='Idx' data-type='llvm::Value *' data-ref="379Idx">Idx</dfn> = <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getOperand' data-ref="_ZNK4llvm17GetElementPtrInst10getOperandEj">getOperand</a>(<var>1</var>);</td></tr>
<tr><th id="2071">2071</th><td>          <em>unsigned</em> <dfn class="local col0 decl" id="380BitWidth" title='BitWidth' data-type='unsigned int' data-ref="380BitWidth">BitWidth</dfn> = <a class="local col9 ref" href="#379Idx" title='Idx' data-ref="379Idx">Idx</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>();</td></tr>
<tr><th id="2072">2072</th><td>          <a class="typedef" href="../../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a> <dfn class="local col1 decl" id="381Scale" title='Scale' data-type='uint64_t' data-ref="381Scale">Scale</dfn> = <a class="local col8 ref" href="#378ArrayEltSize" title='ArrayEltSize' data-ref="378ArrayEltSize">ArrayEltSize</a> / <a class="local col7 ref" href="#377ResSize" title='ResSize' data-ref="377ResSize">ResSize</a>;</td></tr>
<tr><th id="2073">2073</th><td></td></tr>
<tr><th id="2074">2074</th><td>          <i>// Earlier transforms ensure that the index has the right type</i></td></tr>
<tr><th id="2075">2075</th><td><i>          // according to the Data Layout, which considerably simplifies</i></td></tr>
<tr><th id="2076">2076</th><td><i>          // the logic by eliminating implicit casts.</i></td></tr>
<tr><th id="2077">2077</th><td>          <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Idx-&gt;getType() == DL.getIndexType(GEPType) &amp;&amp; &quot;Index type does not match the Data Layout preferences&quot;) ? void (0) : __assert_fail (&quot;Idx-&gt;getType() == DL.getIndexType(GEPType) &amp;&amp; \&quot;Index type does not match the Data Layout preferences\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2078, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col9 ref" href="#379Idx" title='Idx' data-ref="379Idx">Idx</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() == <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>) &amp;&amp;</td></tr>
<tr><th id="2078">2078</th><td>                 <q>"Index type does not match the Data Layout preferences"</q>);</td></tr>
<tr><th id="2079">2079</th><td></td></tr>
<tr><th id="2080">2080</th><td>          <em>bool</em> <dfn class="local col2 decl" id="382NSW" title='NSW' data-type='bool' data-ref="382NSW">NSW</dfn>;</td></tr>
<tr><th id="2081">2081</th><td>          <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="383NewIdx" title='NewIdx' data-type='llvm::Value *' data-ref="383NewIdx"><a class="local col3 ref" href="#383NewIdx" title='NewIdx' data-ref="383NewIdx">NewIdx</a></dfn> = <a class="member" href="#_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb" title='llvm::InstCombiner::Descale' data-ref="_ZN4llvm12InstCombiner7DescaleEPNS_5ValueENS_5APIntERb">Descale</a>(<a class="local col9 ref" href="#379Idx" title='Idx' data-ref="379Idx">Idx</a>, <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col0 ref" href="#380BitWidth" title='BitWidth' data-ref="380BitWidth">BitWidth</a>, <a class="local col1 ref" href="#381Scale" title='Scale' data-ref="381Scale">Scale</a>), <span class='refarg'><a class="local col2 ref" href="#382NSW" title='NSW' data-ref="382NSW">NSW</a></span>)) {</td></tr>
<tr><th id="2082">2082</th><td>            <i>// Successfully decomposed Idx as NewIdx * Scale, form a new GEP.</i></td></tr>
<tr><th id="2083">2083</th><td><i>            // If the multiplication NewIdx * Scale may overflow then the new</i></td></tr>
<tr><th id="2084">2084</th><td><i>            // GEP may not be "inbounds".</i></td></tr>
<tr><th id="2085">2085</th><td>            <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col4 decl" id="384IndTy" title='IndTy' data-type='llvm::Type *' data-ref="384IndTy">IndTy</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE" title='llvm::DataLayout::getIndexType' data-ref="_ZNK4llvm10DataLayout12getIndexTypeEPNS_4TypeE">getIndexType</a>(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2086">2086</th><td>            <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="385Off" title='Off' data-type='llvm::Value *[2]' data-ref="385Off">Off</dfn>[<var>2</var>] = {<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col4 ref" href="#384IndTy" title='IndTy' data-ref="384IndTy">IndTy</a>), <a class="local col3 ref" href="#383NewIdx" title='NewIdx' data-ref="383NewIdx">NewIdx</a>};</td></tr>
<tr><th id="2087">2087</th><td></td></tr>
<tr><th id="2088">2088</th><td>            <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="386NewGEP" title='NewGEP' data-type='llvm::Value *' data-ref="386NewGEP">NewGEP</dfn> =</td></tr>
<tr><th id="2089">2089</th><td>                <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>() &amp;&amp; <a class="local col2 ref" href="#382NSW" title='NSW' data-ref="382NSW">NSW</a></td></tr>
<tr><th id="2090">2090</th><td>                    ? <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>,</td></tr>
<tr><th id="2091">2091</th><td>                                                <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col5 ref" href="#385Off" title='Off' data-ref="385Off">Off</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>())</td></tr>
<tr><th id="2092">2092</th><td>                    : <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateGEP</a>(<a class="local col0 ref" href="#360StrippedPtrEltTy" title='StrippedPtrEltTy' data-ref="360StrippedPtrEltTy">StrippedPtrEltTy</a>, <a class="local col7 ref" href="#357StrippedPtr" title='StrippedPtr' data-ref="357StrippedPtr">StrippedPtr</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col5 ref" href="#385Off" title='Off' data-ref="385Off">Off</a>,</td></tr>
<tr><th id="2093">2093</th><td>                                        <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="2094">2094</th><td>            <i>// The NewGEP must be pointer typed, so must the old one -&gt; BitCast</i></td></tr>
<tr><th id="2095">2095</th><td>            <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::CastInst::CreatePointerBitCastOrAddrSpaceCast' data-ref="_ZN4llvm8CastInst35CreatePointerBitCastOrAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">CreatePointerBitCastOrAddrSpaceCast</a>(<a class="local col6 ref" href="#386NewGEP" title='NewGEP' data-ref="386NewGEP">NewGEP</a>,</td></tr>
<tr><th id="2096">2096</th><td>                                                                 <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2097">2097</th><td>          }</td></tr>
<tr><th id="2098">2098</th><td>        }</td></tr>
<tr><th id="2099">2099</th><td>      }</td></tr>
<tr><th id="2100">2100</th><td>    }</td></tr>
<tr><th id="2101">2101</th><td>  }</td></tr>
<tr><th id="2102">2102</th><td></td></tr>
<tr><th id="2103">2103</th><td>  <i>// addrspacecast between types is canonicalized as a bitcast, then an</i></td></tr>
<tr><th id="2104">2104</th><td><i>  // addrspacecast. To take advantage of the below bitcast + struct GEP, look</i></td></tr>
<tr><th id="2105">2105</th><td><i>  // through the addrspacecast.</i></td></tr>
<tr><th id="2106">2106</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="387ASCStrippedPtrOp" title='ASCStrippedPtrOp' data-type='llvm::Value *' data-ref="387ASCStrippedPtrOp">ASCStrippedPtrOp</dfn> = <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>;</td></tr>
<tr><th id="2107">2107</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col8 decl" id="388ASC" title='ASC' data-type='llvm::AddrSpaceCastInst *' data-ref="388ASC"><a class="local col8 ref" href="#388ASC" title='ASC' data-ref="388ASC">ASC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a>&gt;(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>)) {</td></tr>
<tr><th id="2108">2108</th><td>    <i>//   X = bitcast A addrspace(1)* to B addrspace(1)*</i></td></tr>
<tr><th id="2109">2109</th><td><i>    //   Y = addrspacecast A addrspace(1)* to B addrspace(2)*</i></td></tr>
<tr><th id="2110">2110</th><td><i>    //   Z = gep Y, &lt;...constant indices...&gt;</i></td></tr>
<tr><th id="2111">2111</th><td><i>    // Into an addrspacecasted GEP of the struct.</i></td></tr>
<tr><th id="2112">2112</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col9 decl" id="389BC" title='BC' data-type='llvm::BitCastInst *' data-ref="389BC"><a class="local col9 ref" href="#389BC" title='BC' data-ref="389BC">BC</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a>&gt;(<a class="local col8 ref" href="#388ASC" title='ASC' data-ref="388ASC">ASC</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>)))</td></tr>
<tr><th id="2113">2113</th><td>      <a class="local col7 ref" href="#387ASCStrippedPtrOp" title='ASCStrippedPtrOp' data-ref="387ASCStrippedPtrOp">ASCStrippedPtrOp</a> = <a class="local col9 ref" href="#389BC" title='BC' data-ref="389BC">BC</a>;</td></tr>
<tr><th id="2114">2114</th><td>  }</td></tr>
<tr><th id="2115">2115</th><td></td></tr>
<tr><th id="2116">2116</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col0 decl" id="390BCI" title='BCI' data-type='llvm::BitCastInst *' data-ref="390BCI"><a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a>&gt;(<a class="local col7 ref" href="#387ASCStrippedPtrOp" title='ASCStrippedPtrOp' data-ref="387ASCStrippedPtrOp">ASCStrippedPtrOp</a>)) {</td></tr>
<tr><th id="2117">2117</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="391SrcOp" title='SrcOp' data-type='llvm::Value *' data-ref="391SrcOp">SrcOp</dfn> = <a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#76" title='llvm::UnaryInstruction::getOperand' data-ref="_ZNK4llvm16UnaryInstruction10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="2118">2118</th><td>    <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a> *<dfn class="local col2 decl" id="392SrcType" title='SrcType' data-type='llvm::PointerType *' data-ref="392SrcType">SrcType</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>&gt;(<a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst8getSrcTyEv" title='llvm::CastInst::getSrcTy' data-ref="_ZNK4llvm8CastInst8getSrcTyEv">getSrcTy</a>());</td></tr>
<tr><th id="2119">2119</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col3 decl" id="393SrcEltType" title='SrcEltType' data-type='llvm::Type *' data-ref="393SrcEltType">SrcEltType</dfn> = <a class="local col2 ref" href="#392SrcType" title='SrcType' data-ref="392SrcType">SrcType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType14getElementTypeEv" title='llvm::PointerType::getElementType' data-ref="_ZNK4llvm11PointerType14getElementTypeEv">getElementType</a>();</td></tr>
<tr><th id="2120">2120</th><td></td></tr>
<tr><th id="2121">2121</th><td>    <i>// GEP directly using the source operand if this GEP is accessing an element</i></td></tr>
<tr><th id="2122">2122</th><td><i>    // of a bitcasted pointer to vector or array of the same dimensions:</i></td></tr>
<tr><th id="2123">2123</th><td><i>    // gep (bitcast &lt;c x ty&gt;* X to [c x ty]*), Y, Z --&gt; gep X, Y, Z</i></td></tr>
<tr><th id="2124">2124</th><td><i>    // gep (bitcast [c x ty]* X to &lt;c x ty&gt;*), Y, Z --&gt; gep X, Y, Z</i></td></tr>
<tr><th id="2125">2125</th><td>    <em>auto</em> <dfn class="local col4 decl" id="394areMatchingArrayAndVecTypes" title='areMatchingArrayAndVecTypes' data-type='(lambda at /root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp:2125:40)' data-ref="394areMatchingArrayAndVecTypes">areMatchingArrayAndVecTypes</dfn> = [](<a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="395ArrTy" title='ArrTy' data-type='llvm::Type *' data-ref="395ArrTy">ArrTy</dfn>, <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="396VecTy" title='VecTy' data-type='llvm::Type *' data-ref="396VecTy">VecTy</dfn>) {</td></tr>
<tr><th id="2126">2126</th><td>      <b>return</b> <a class="local col5 ref" href="#395ArrTy" title='ArrTy' data-ref="395ArrTy">ArrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getArrayElementTypeEv" title='llvm::Type::getArrayElementType' data-ref="_ZNK4llvm4Type19getArrayElementTypeEv">getArrayElementType</a>() == <a class="local col6 ref" href="#396VecTy" title='VecTy' data-ref="396VecTy">VecTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorElementTypeEv" title='llvm::Type::getVectorElementType' data-ref="_ZNK4llvm4Type20getVectorElementTypeEv">getVectorElementType</a>() &amp;&amp;</td></tr>
<tr><th id="2127">2127</th><td>             <a class="local col5 ref" href="#395ArrTy" title='ArrTy' data-ref="395ArrTy">ArrTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type19getArrayNumElementsEv" title='llvm::Type::getArrayNumElements' data-ref="_ZNK4llvm4Type19getArrayNumElementsEv">getArrayNumElements</a>() == <a class="local col6 ref" href="#396VecTy" title='VecTy' data-ref="396VecTy">VecTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type20getVectorNumElementsEv" title='llvm::Type::getVectorNumElements' data-ref="_ZNK4llvm4Type20getVectorNumElementsEv">getVectorNumElements</a>();</td></tr>
<tr><th id="2128">2128</th><td>    };</td></tr>
<tr><th id="2129">2129</th><td>    <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#968" title='llvm::GetElementPtrInst::getNumOperands' data-ref="_ZNK4llvm17GetElementPtrInst14getNumOperandsEv">getNumOperands</a>() == <var>3</var> &amp;&amp;</td></tr>
<tr><th id="2130">2130</th><td>        ((<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type9isArrayTyEv" title='llvm::Type::isArrayTy' data-ref="_ZNK4llvm4Type9isArrayTyEv">isArrayTy</a>() &amp;&amp; <a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>() &amp;&amp;</td></tr>
<tr><th id="2131">2131</th><td>          <a class="local col4 ref" href="#394areMatchingArrayAndVecTypes" title='areMatchingArrayAndVecTypes' data-ref="394areMatchingArrayAndVecTypes">areMatchingArrayAndVecTypes</a>(<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>, <a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>)) ||</td></tr>
<tr><th id="2132">2132</th><td>         (<a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10isVectorTyEv" title='llvm::Type::isVectorTy' data-ref="_ZNK4llvm4Type10isVectorTyEv">isVectorTy</a>() &amp;&amp; <a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type9isArrayTyEv" title='llvm::Type::isArrayTy' data-ref="_ZNK4llvm4Type9isArrayTyEv">isArrayTy</a>() &amp;&amp;</td></tr>
<tr><th id="2133">2133</th><td>          <a class="local col4 ref" href="#394areMatchingArrayAndVecTypes" title='areMatchingArrayAndVecTypes' data-ref="394areMatchingArrayAndVecTypes">areMatchingArrayAndVecTypes</a>(<a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>, <a class="local col3 ref" href="#303GEPEltType" title='GEPEltType' data-ref="303GEPEltType">GEPEltType</a>)))) {</td></tr>
<tr><th id="2134">2134</th><td></td></tr>
<tr><th id="2135">2135</th><td>      <i>// Create a new GEP here, as using `setOperand()` followed by</i></td></tr>
<tr><th id="2136">2136</th><td><i>      // `setSourceElementType()` won't actually update the type of the</i></td></tr>
<tr><th id="2137">2137</th><td><i>      // existing GEP Value. Causing issues if this Value is accessed when</i></td></tr>
<tr><th id="2138">2138</th><td><i>      // constructing an AddrSpaceCastInst</i></td></tr>
<tr><th id="2139">2139</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="397NGEP" title='NGEP' data-type='llvm::Value *' data-ref="397NGEP">NGEP</dfn> =</td></tr>
<tr><th id="2140">2140</th><td>          <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>()</td></tr>
<tr><th id="2141">2141</th><td>              ? <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>, <a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></a>{<a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>1</var>]</a>, <a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>2</var>]</a>})</td></tr>
<tr><th id="2142">2142</th><td>              : <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateGEP</a>(<a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>, <a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKSt16initializer_listIT_E"></a>{<a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>1</var>]</a>, <a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>2</var>]</a>});</td></tr>
<tr><th id="2143">2143</th><td>      <a class="local col7 ref" href="#397NGEP" title='NGEP' data-ref="397NGEP">NGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>);</td></tr>
<tr><th id="2144">2144</th><td></td></tr>
<tr><th id="2145">2145</th><td>      <i>// Preserve GEP address space to satisfy users</i></td></tr>
<tr><th id="2146">2146</th><td>      <b>if</b> (<a class="local col7 ref" href="#397NGEP" title='NGEP' data-ref="397NGEP">NGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>() != <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="2147">2147</th><td>        <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::AddrSpaceCastInst::AddrSpaceCastInst' data-ref="_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="local col7 ref" href="#397NGEP" title='NGEP' data-ref="397NGEP">NGEP</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2148">2148</th><td></td></tr>
<tr><th id="2149">2149</th><td>      <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a></span>, <a class="local col7 ref" href="#397NGEP" title='NGEP' data-ref="397NGEP">NGEP</a>);</td></tr>
<tr><th id="2150">2150</th><td>    }</td></tr>
<tr><th id="2151">2151</th><td></td></tr>
<tr><th id="2152">2152</th><td>    <i>// See if we can simplify:</i></td></tr>
<tr><th id="2153">2153</th><td><i>    //   X = bitcast A* to B*</i></td></tr>
<tr><th id="2154">2154</th><td><i>    //   Y = gep X, &lt;...constant indices...&gt;</i></td></tr>
<tr><th id="2155">2155</th><td><i>    // into a gep of the original struct. This is important for SROA and alias</i></td></tr>
<tr><th id="2156">2156</th><td><i>    // analysis of unions. If "A" is also a bitcast, wait for A/X to be merged.</i></td></tr>
<tr><th id="2157">2157</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="398OffsetBits" title='OffsetBits' data-type='unsigned int' data-ref="398OffsetBits">OffsetBits</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout22getIndexTypeSizeInBitsEPNS_4TypeE" title='llvm::DataLayout::getIndexTypeSizeInBits' data-ref="_ZNK4llvm10DataLayout22getIndexTypeSizeInBitsEPNS_4TypeE">getIndexTypeSizeInBits</a>(<a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2158">2158</th><td>    <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col9 decl" id="399Offset" title='Offset' data-type='llvm::APInt' data-ref="399Offset">Offset</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col8 ref" href="#398OffsetBits" title='OffsetBits' data-ref="398OffsetBits">OffsetBits</a>, <var>0</var>);</td></tr>
<tr><th id="2159">2159</th><td>    <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a>&gt;(<a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>) &amp;&amp; <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst24accumulateConstantOffsetERKNS_10DataLayoutERNS_5APIntE" title='llvm::GetElementPtrInst::accumulateConstantOffset' data-ref="_ZNK4llvm17GetElementPtrInst24accumulateConstantOffsetERKNS_10DataLayoutERNS_5APIntE">accumulateConstantOffset</a>(<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>, <span class='refarg'><a class="local col9 ref" href="#399Offset" title='Offset' data-ref="399Offset">Offset</a></span>)) {</td></tr>
<tr><th id="2160">2160</th><td>      <i>// If this GEP instruction doesn't move the pointer, just replace the GEP</i></td></tr>
<tr><th id="2161">2161</th><td><i>      // with a bitcast of the real input to the dest type.</i></td></tr>
<tr><th id="2162">2162</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APIntntEv" title='llvm::APInt::operator!' data-ref="_ZNK4llvm5APIntntEv">!</a><a class="local col9 ref" href="#399Offset" title='Offset' data-ref="399Offset">Offset</a>) {</td></tr>
<tr><th id="2163">2163</th><td>        <i>// If the bitcast is of an allocation, and the allocation will be</i></td></tr>
<tr><th id="2164">2164</th><td><i>        // converted to match the type of the cast, don't touch this.</i></td></tr>
<tr><th id="2165">2165</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a>&gt;(<a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>) || <a class="ref" href="../../../include/llvm/Analysis/MemoryBuiltins.h.html#_ZN4llvm14isAllocationFnEPKNS_5ValueEPKNS_17TargetLibraryInfoEb" title='llvm::isAllocationFn' data-ref="_ZN4llvm14isAllocationFnEPKNS_5ValueEPKNS_17TargetLibraryInfoEb">isAllocationFn</a>(<a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>)) {</td></tr>
<tr><th id="2166">2166</th><td>          <i>// See if the bitcast simplifies, if so, don't nuke this GEP yet.</i></td></tr>
<tr><th id="2167">2167</th><td>          <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col0 decl" id="400I" title='I' data-type='llvm::Instruction *' data-ref="400I"><a class="local col0 ref" href="#400I" title='I' data-ref="400I">I</a></dfn> = <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner12visitBitCastERNS_11BitCastInstE" title='llvm::InstCombiner::visitBitCast' data-ref="_ZN4llvm12InstCombiner12visitBitCastERNS_11BitCastInstE">visitBitCast</a>(<span class='refarg'>*<a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a></span>)) {</td></tr>
<tr><th id="2168">2168</th><td>            <b>if</b> (<a class="local col0 ref" href="#400I" title='I' data-ref="400I">I</a> != <a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>) {</td></tr>
<tr><th id="2169">2169</th><td>              <a class="local col0 ref" href="#400I" title='I' data-ref="400I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(<a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>);</td></tr>
<tr><th id="2170">2170</th><td>              <a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock11getInstListEv" title='llvm::BasicBlock::getInstList' data-ref="_ZN4llvm10BasicBlock11getInstListEv">getInstList</a>().<a class="ref" href="../../../include/llvm/ADT/ilist.h.html#_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE" title='llvm::iplist_impl::insert' data-ref="_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE">insert</a>(<a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/ilist_node.h.html#_ZN4llvm15ilist_node_impl11getIteratorEv" title='llvm::ilist_node_impl::getIterator' data-ref="_ZN4llvm15ilist_node_impl11getIteratorEv">getIterator</a>(), <a class="local col0 ref" href="#400I" title='I' data-ref="400I">I</a>);</td></tr>
<tr><th id="2171">2171</th><td>              <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col0 ref" href="#390BCI" title='BCI' data-ref="390BCI">BCI</a></span>, <a class="local col0 ref" href="#400I" title='I' data-ref="400I">I</a>);</td></tr>
<tr><th id="2172">2172</th><td>            }</td></tr>
<tr><th id="2173">2173</th><td>            <b>return</b> &amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>;</td></tr>
<tr><th id="2174">2174</th><td>          }</td></tr>
<tr><th id="2175">2175</th><td>        }</td></tr>
<tr><th id="2176">2176</th><td></td></tr>
<tr><th id="2177">2177</th><td>        <b>if</b> (<a class="local col2 ref" href="#392SrcType" title='SrcType' data-ref="392SrcType">SrcType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>() != <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="2178">2178</th><td>          <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::AddrSpaceCastInst::AddrSpaceCastInst' data-ref="_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2179">2179</th><td>        <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm11BitCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::BitCastInst::BitCastInst' data-ref="_ZN4llvm11BitCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2180">2180</th><td>      }</td></tr>
<tr><th id="2181">2181</th><td></td></tr>
<tr><th id="2182">2182</th><td>      <i>// Otherwise, if the offset is non-zero, we need to find out if there is a</i></td></tr>
<tr><th id="2183">2183</th><td><i>      // field at Offset in 'A's type.  If so, we can pull the cast through the</i></td></tr>
<tr><th id="2184">2184</th><td><i>      // GEP.</i></td></tr>
<tr><th id="2185">2185</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>*, <var>8</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col1 decl" id="401NewIndices" title='NewIndices' data-type='SmallVector&lt;llvm::Value *, 8&gt;' data-ref="401NewIndices">NewIndices</dfn>;</td></tr>
<tr><th id="2186">2186</th><td>      <b>if</b> (<a class="member" href="#_ZN4llvm12InstCombiner19FindElementAtOffsetEPNS_11PointerTypeElRNS_15SmallVectorImplIPNS_5ValueEEE" title='llvm::InstCombiner::FindElementAtOffset' data-ref="_ZN4llvm12InstCombiner19FindElementAtOffsetEPNS_11PointerTypeElRNS_15SmallVectorImplIPNS_5ValueEEE">FindElementAtOffset</a>(<a class="local col2 ref" href="#392SrcType" title='SrcType' data-ref="392SrcType">SrcType</a>, <a class="local col9 ref" href="#399Offset" title='Offset' data-ref="399Offset">Offset</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt12getSExtValueEv" title='llvm::APInt::getSExtValue' data-ref="_ZNK4llvm5APInt12getSExtValueEv">getSExtValue</a>(), <span class='refarg'><a class="local col1 ref" href="#401NewIndices" title='NewIndices' data-ref="401NewIndices">NewIndices</a></span>)) {</td></tr>
<tr><th id="2187">2187</th><td>        <i>// XXXAR: taken from before merge, not sure if this is needed</i></td></tr>
<tr><th id="2188">2188</th><td>        <b>if</b> (<a class="local col2 ref" href="#392SrcType" title='SrcType' data-ref="392SrcType">SrcType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>() != <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="2189">2189</th><td>          <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2190">2190</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="402NGEP" title='NGEP' data-type='llvm::Value *' data-ref="402NGEP">NGEP</dfn> =</td></tr>
<tr><th id="2191">2191</th><td>            <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>()</td></tr>
<tr><th id="2192">2192</th><td>                ? <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>, <a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#401NewIndices" title='NewIndices' data-ref="401NewIndices">NewIndices</a>)</td></tr>
<tr><th id="2193">2193</th><td>                : <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateGEP' data-ref="_ZN4llvm9IRBuilder9CreateGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateGEP</a>(<a class="local col3 ref" href="#393SrcEltType" title='SrcEltType' data-ref="393SrcEltType">SrcEltType</a>, <a class="local col1 ref" href="#391SrcOp" title='SrcOp' data-ref="391SrcOp">SrcOp</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#401NewIndices" title='NewIndices' data-ref="401NewIndices">NewIndices</a>);</td></tr>
<tr><th id="2194">2194</th><td></td></tr>
<tr><th id="2195">2195</th><td>        <b>if</b> (<a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() == <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>)</td></tr>
<tr><th id="2196">2196</th><td>          <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a></span>, <a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>);</td></tr>
<tr><th id="2197">2197</th><td>        <a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(&amp;<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>);</td></tr>
<tr><th id="2198">2198</th><td></td></tr>
<tr><th id="2199">2199</th><td>        <b>if</b> (<a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>() != <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv" title='llvm::GetElementPtrInst::getAddressSpace' data-ref="_ZNK4llvm17GetElementPtrInst15getAddressSpaceEv">getAddressSpace</a>())</td></tr>
<tr><th id="2200">2200</th><td>          <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::AddrSpaceCastInst::AddrSpaceCastInst' data-ref="_ZN4llvm17AddrSpaceCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2201">2201</th><td>        <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm11BitCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE" title='llvm::BitCastInst::BitCastInst' data-ref="_ZN4llvm11BitCastInstC1EPNS_5ValueEPNS_4TypeERKNS_5TwineEPNS_11InstructionE">(</a><a class="local col2 ref" href="#402NGEP" title='NGEP' data-ref="402NGEP">NGEP</a>, <a class="local col2 ref" href="#302GEPType" title='GEPType' data-ref="302GEPType">GEPType</a>);</td></tr>
<tr><th id="2202">2202</th><td>      }</td></tr>
<tr><th id="2203">2203</th><td>    }</td></tr>
<tr><th id="2204">2204</th><td>  }</td></tr>
<tr><th id="2205">2205</th><td></td></tr>
<tr><th id="2206">2206</th><td>  <b>if</b> (!<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst10isInBoundsEv" title='llvm::GetElementPtrInst::isInBounds' data-ref="_ZNK4llvm17GetElementPtrInst10isInBoundsEv">isInBounds</a>()) {</td></tr>
<tr><th id="2207">2207</th><td>    <em>unsigned</em> <dfn class="local col3 decl" id="403IdxWidth" title='IdxWidth' data-type='unsigned int' data-ref="403IdxWidth">IdxWidth</dfn> =</td></tr>
<tr><th id="2208">2208</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout18getIndexSizeInBitsEj" title='llvm::DataLayout::getIndexSizeInBits' data-ref="_ZNK4llvm10DataLayout18getIndexSizeInBitsEj">getIndexSizeInBits</a>(<a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>());</td></tr>
<tr><th id="2209">2209</th><td>    <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col4 decl" id="404BasePtrOffset" title='BasePtrOffset' data-type='llvm::APInt' data-ref="404BasePtrOffset">BasePtrOffset</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col3 ref" href="#403IdxWidth" title='IdxWidth' data-ref="403IdxWidth">IdxWidth</a>, <var>0</var>);</td></tr>
<tr><th id="2210">2210</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="405UnderlyingPtrOp" title='UnderlyingPtrOp' data-type='llvm::Value *' data-ref="405UnderlyingPtrOp">UnderlyingPtrOp</dfn> =</td></tr>
<tr><th id="2211">2211</th><td>            <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value41stripAndAccumulateInBoundsConstantOffsetsERKNS_10DataLayoutERNS_5APIntE" title='llvm::Value::stripAndAccumulateInBoundsConstantOffsets' data-ref="_ZN4llvm5Value41stripAndAccumulateInBoundsConstantOffsetsERKNS_10DataLayoutERNS_5APIntE">stripAndAccumulateInBoundsConstantOffsets</a>(<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>,</td></tr>
<tr><th id="2212">2212</th><td>                                                             <span class='refarg'><a class="local col4 ref" href="#404BasePtrOffset" title='BasePtrOffset' data-ref="404BasePtrOffset">BasePtrOffset</a></span>);</td></tr>
<tr><th id="2213">2213</th><td>    <b>if</b> (<em>auto</em> *<dfn class="local col6 decl" id="406AI" title='AI' data-type='llvm::AllocaInst *' data-ref="406AI"><a class="local col6 ref" href="#406AI" title='AI' data-ref="406AI">AI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a>&gt;(<a class="local col5 ref" href="#405UnderlyingPtrOp" title='UnderlyingPtrOp' data-ref="405UnderlyingPtrOp">UnderlyingPtrOp</a>)) {</td></tr>
<tr><th id="2214">2214</th><td>      <b>if</b> (<a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst24accumulateConstantOffsetERKNS_10DataLayoutERNS_5APIntE" title='llvm::GetElementPtrInst::accumulateConstantOffset' data-ref="_ZNK4llvm17GetElementPtrInst24accumulateConstantOffsetERKNS_10DataLayoutERNS_5APIntE">accumulateConstantOffset</a>(<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>, <span class='refarg'><a class="local col4 ref" href="#404BasePtrOffset" title='BasePtrOffset' data-ref="404BasePtrOffset">BasePtrOffset</a></span>) &amp;&amp;</td></tr>
<tr><th id="2215">2215</th><td>          <a class="local col4 ref" href="#404BasePtrOffset" title='BasePtrOffset' data-ref="404BasePtrOffset">BasePtrOffset</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt13isNonNegativeEv" title='llvm::APInt::isNonNegative' data-ref="_ZNK4llvm5APInt13isNonNegativeEv">isNonNegative</a>()) {</td></tr>
<tr><th id="2216">2216</th><td>        <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col7 decl" id="407AllocSize" title='AllocSize' data-type='llvm::APInt' data-ref="407AllocSize">AllocSize</dfn><a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZN4llvm5APIntC1Ejmb" title='llvm::APInt::APInt' data-ref="_ZN4llvm5APIntC1Ejmb">(</a><a class="local col3 ref" href="#403IdxWidth" title='IdxWidth' data-ref="403IdxWidth">IdxWidth</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>.<a class="ref" href="../../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeAllocSize' data-ref="_ZNK4llvm10DataLayout16getTypeAllocSizeEPNS_4TypeE">getTypeAllocSize</a>(<a class="local col6 ref" href="#406AI" title='AI' data-ref="406AI">AI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10AllocaInst16getAllocatedTypeEv" title='llvm::AllocaInst::getAllocatedType' data-ref="_ZNK4llvm10AllocaInst16getAllocatedTypeEv">getAllocatedType</a>()));</td></tr>
<tr><th id="2217">2217</th><td>        <b>if</b> (<a class="local col4 ref" href="#404BasePtrOffset" title='BasePtrOffset' data-ref="404BasePtrOffset">BasePtrOffset</a>.<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt3uleERKS0_" title='llvm::APInt::ule' data-ref="_ZNK4llvm5APInt3uleERKS0_">ule</a>(<a class="local col7 ref" href="#407AllocSize" title='AllocSize' data-ref="407AllocSize">AllocSize</a>)) {</td></tr>
<tr><th id="2218">2218</th><td>          <b>return</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm17GetElementPtrInst14CreateInBoundsEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE" title='llvm::GetElementPtrInst::CreateInBounds' data-ref="_ZN4llvm17GetElementPtrInst14CreateInBoundsEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineEPNS_11InstructionE">CreateInBounds</a>(</td></tr>
<tr><th id="2219">2219</th><td>              <a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv" title='llvm::GetElementPtrInst::getSourceElementType' data-ref="_ZNK4llvm17GetElementPtrInst20getSourceElementTypeEv">getSourceElementType</a>(), <a class="local col9 ref" href="#309PtrOp" title='PtrOp' data-ref="309PtrOp">PtrOp</a>, <a class="ref" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERKNS_11SmallVectorIT_XT0_EEE" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERKNS_11SmallVectorIT_XT0_EEE">makeArrayRef</a>(<a class="local col1 ref" href="#301Ops" title='Ops' data-ref="301Ops">Ops</a>).<a class="ref" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRef5sliceEm" title='llvm::ArrayRef::slice' data-ref="_ZNK4llvm8ArrayRef5sliceEm">slice</a>(<var>1</var>),</td></tr>
<tr><th id="2220">2220</th><td>              <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1ERKNS_9StringRefE" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1ERKNS_9StringRefE"></a><a class="local col0 ref" href="#300GEP" title='GEP' data-ref="300GEP">GEP</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>());</td></tr>
<tr><th id="2221">2221</th><td>        }</td></tr>
<tr><th id="2222">2222</th><td>      }</td></tr>
<tr><th id="2223">2223</th><td>    }</td></tr>
<tr><th id="2224">2224</th><td>  }</td></tr>
<tr><th id="2225">2225</th><td></td></tr>
<tr><th id="2226">2226</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2227">2227</th><td>}</td></tr>
<tr><th id="2228">2228</th><td></td></tr>
<tr><th id="2229">2229</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL28isNeverEqualToUnescapedAllocPN4llvm5ValueEPKNS_17TargetLibraryInfoEPNS_11InstructionE" title='isNeverEqualToUnescapedAlloc' data-type='bool isNeverEqualToUnescapedAlloc(llvm::Value * V, const llvm::TargetLibraryInfo * TLI, llvm::Instruction * AI)' data-ref="_ZL28isNeverEqualToUnescapedAllocPN4llvm5ValueEPKNS_17TargetLibraryInfoEPNS_11InstructionE">isNeverEqualToUnescapedAlloc</dfn>(<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="408V" title='V' data-type='llvm::Value *' data-ref="408V">V</dfn>, <em>const</em> <a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfo" title='llvm::TargetLibraryInfo' data-ref="llvm::TargetLibraryInfo">TargetLibraryInfo</a> *<dfn class="local col9 decl" id="409TLI" title='TLI' data-type='const llvm::TargetLibraryInfo *' data-ref="409TLI">TLI</dfn>,</td></tr>
<tr><th id="2230">2230</th><td>                                         <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col0 decl" id="410AI" title='AI' data-type='llvm::Instruction *' data-ref="410AI">AI</dfn>) {</td></tr>
<tr><th id="2231">2231</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantPointerNull" title='llvm::ConstantPointerNull' data-ref="llvm::ConstantPointerNull">ConstantPointerNull</a>&gt;(<a class="local col8 ref" href="#408V" title='V' data-ref="408V">V</a>))</td></tr>
<tr><th id="2232">2232</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="2233">2233</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="411LI" title='LI' data-type='llvm::LoadInst *' data-ref="411LI"><a class="local col1 ref" href="#411LI" title='LI' data-ref="411LI">LI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a>&gt;(<a class="local col8 ref" href="#408V" title='V' data-ref="408V">V</a>))</td></tr>
<tr><th id="2234">2234</th><td>    <b>return</b> <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/GlobalVariable.h.html#llvm::GlobalVariable" title='llvm::GlobalVariable' data-ref="llvm::GlobalVariable">GlobalVariable</a>&gt;(<a class="local col1 ref" href="#411LI" title='LI' data-ref="411LI">LI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>());</td></tr>
<tr><th id="2235">2235</th><td>  <i>// Two distinct allocations will never be equal.</i></td></tr>
<tr><th id="2236">2236</th><td><i>  // We rely on LookThroughBitCast in isAllocLikeFn being false, since looking</i></td></tr>
<tr><th id="2237">2237</th><td><i>  // through bitcasts of V can cause</i></td></tr>
<tr><th id="2238">2238</th><td><i>  // the result statement below to be true, even when AI and V (ex:</i></td></tr>
<tr><th id="2239">2239</th><td><i>  // i8* -&gt;i32* -&gt;i8* of AI) are the same allocations.</i></td></tr>
<tr><th id="2240">2240</th><td>  <b>return</b> <a class="ref" href="../../../include/llvm/Analysis/MemoryBuiltins.h.html#_ZN4llvm13isAllocLikeFnEPKNS_5ValueEPKNS_17TargetLibraryInfoEb" title='llvm::isAllocLikeFn' data-ref="_ZN4llvm13isAllocLikeFnEPKNS_5ValueEPKNS_17TargetLibraryInfoEb">isAllocLikeFn</a>(<a class="local col8 ref" href="#408V" title='V' data-ref="408V">V</a>, <a class="local col9 ref" href="#409TLI" title='TLI' data-ref="409TLI">TLI</a>) &amp;&amp; <a class="local col8 ref" href="#408V" title='V' data-ref="408V">V</a> != <a class="local col0 ref" href="#410AI" title='AI' data-ref="410AI">AI</a>;</td></tr>
<tr><th id="2241">2241</th><td>}</td></tr>
<tr><th id="2242">2242</th><td></td></tr>
<tr><th id="2243">2243</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL20isAllocSiteRemovablePN4llvm11InstructionERNS_15SmallVectorImplINS_14WeakTrackingVHEEEPKNS_17TargetLibraryInfoE" title='isAllocSiteRemovable' data-type='bool isAllocSiteRemovable(llvm::Instruction * AI, SmallVectorImpl&lt;llvm::WeakTrackingVH&gt; &amp; Users, const llvm::TargetLibraryInfo * TLI)' data-ref="_ZL20isAllocSiteRemovablePN4llvm11InstructionERNS_15SmallVectorImplINS_14WeakTrackingVHEEEPKNS_17TargetLibraryInfoE">isAllocSiteRemovable</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col2 decl" id="412AI" title='AI' data-type='llvm::Instruction *' data-ref="412AI">AI</dfn>,</td></tr>
<tr><th id="2244">2244</th><td>                                 <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl">SmallVectorImpl</a>&lt;<a class="type" href="../../../include/llvm/IR/ValueHandle.h.html#llvm::WeakTrackingVH" title='llvm::WeakTrackingVH' data-ref="llvm::WeakTrackingVH">WeakTrackingVH</a>&gt; &amp;<dfn class="local col3 decl" id="413Users" title='Users' data-type='SmallVectorImpl&lt;llvm::WeakTrackingVH&gt; &amp;' data-ref="413Users">Users</dfn>,</td></tr>
<tr><th id="2245">2245</th><td>                                 <em>const</em> <a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfo" title='llvm::TargetLibraryInfo' data-ref="llvm::TargetLibraryInfo">TargetLibraryInfo</a> *<dfn class="local col4 decl" id="414TLI" title='TLI' data-type='const llvm::TargetLibraryInfo *' data-ref="414TLI">TLI</dfn>) {</td></tr>
<tr><th id="2246">2246</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>*, <var>4</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col5 decl" id="415Worklist" title='Worklist' data-type='SmallVector&lt;llvm::Instruction *, 4&gt;' data-ref="415Worklist">Worklist</dfn>;</td></tr>
<tr><th id="2247">2247</th><td>  <a class="local col5 ref" href="#415Worklist" title='Worklist' data-ref="415Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col2 ref" href="#412AI" title='AI' data-ref="412AI">AI</a>);</td></tr>
<tr><th id="2248">2248</th><td></td></tr>
<tr><th id="2249">2249</th><td>  <b>do</b> {</td></tr>
<tr><th id="2250">2250</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col6 decl" id="416PI" title='PI' data-type='llvm::Instruction *' data-ref="416PI">PI</dfn> = <a class="local col5 ref" href="#415Worklist" title='Worklist' data-ref="415Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12pop_back_valEv" title='llvm::SmallVectorImpl::pop_back_val' data-ref="_ZN4llvm15SmallVectorImpl12pop_back_valEv">pop_back_val</a>();</td></tr>
<tr><th id="2251">2251</th><td>    <b>for</b> (<a class="type" href="../../../include/llvm/IR/User.h.html#llvm::User" title='llvm::User' data-ref="llvm::User">User</a> *<dfn class="local col7 decl" id="417U" title='U' data-type='llvm::User *' data-ref="417U">U</dfn> : <a class="local col6 ref" href="#416PI" title='PI' data-ref="416PI">PI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value5usersEv" title='llvm::Value::users' data-ref="_ZN4llvm5Value5usersEv">users</a>()) {</td></tr>
<tr><th id="2252">2252</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col8 decl" id="418I" title='I' data-type='llvm::Instruction *' data-ref="418I">I</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col7 ref" href="#417U" title='U' data-ref="417U">U</a>);</td></tr>
<tr><th id="2253">2253</th><td>      <b>switch</b> (<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction9getOpcodeEv" title='llvm::Instruction::getOpcode' data-ref="_ZNK4llvm11Instruction9getOpcodeEv">getOpcode</a>()) {</td></tr>
<tr><th id="2254">2254</th><td>      <b>default</b>:</td></tr>
<tr><th id="2255">2255</th><td>        <i>// Give up the moment we see something we can't handle.</i></td></tr>
<tr><th id="2256">2256</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2257">2257</th><td></td></tr>
<tr><th id="2258">2258</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#196" title='llvm::Instruction::CastOps::AddrSpaceCast' data-ref="llvm::Instruction::CastOps::AddrSpaceCast">AddrSpaceCast</a>:</td></tr>
<tr><th id="2259">2259</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#195" title='llvm::Instruction::CastOps::BitCast' data-ref="llvm::Instruction::CastOps::BitCast">BitCast</a>:</td></tr>
<tr><th id="2260">2260</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#174" title='llvm::Instruction::MemoryOps::GetElementPtr' data-ref="llvm::Instruction::MemoryOps::GetElementPtr">GetElementPtr</a>:</td></tr>
<tr><th id="2261">2261</th><td>        <a class="local col3 ref" href="#413Users" title='Users' data-ref="413Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_" title='llvm::SmallVectorImpl::emplace_back' data-ref="_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_">emplace_back</a>(<span class='refarg'><a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a></span>);</td></tr>
<tr><th id="2262">2262</th><td>        <a class="local col5 ref" href="#415Worklist" title='Worklist' data-ref="415Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>);</td></tr>
<tr><th id="2263">2263</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2264">2264</th><td></td></tr>
<tr><th id="2265">2265</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#206" title='llvm::Instruction::OtherOps::ICmp' data-ref="llvm::Instruction::OtherOps::ICmp">ICmp</a>: {</td></tr>
<tr><th id="2266">2266</th><td>        <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a> *<dfn class="local col9 decl" id="419ICI" title='ICI' data-type='llvm::ICmpInst *' data-ref="419ICI">ICI</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>&gt;(<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>);</td></tr>
<tr><th id="2267">2267</th><td>        <i>// We can fold eq/ne comparisons with null to false/true, respectively.</i></td></tr>
<tr><th id="2268">2268</th><td><i>        // We also fold comparisons in some conditions provided the alloc has</i></td></tr>
<tr><th id="2269">2269</th><td><i>        // not escaped (see isNeverEqualToUnescapedAlloc).</i></td></tr>
<tr><th id="2270">2270</th><td>        <b>if</b> (!<a class="local col9 ref" href="#419ICI" title='ICI' data-ref="419ICI">ICI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8ICmpInst10isEqualityEv" title='llvm::ICmpInst::isEquality' data-ref="_ZNK4llvm8ICmpInst10isEqualityEv">isEquality</a>())</td></tr>
<tr><th id="2271">2271</th><td>          <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2272">2272</th><td>        <em>unsigned</em> <dfn class="local col0 decl" id="420OtherIndex" title='OtherIndex' data-type='unsigned int' data-ref="420OtherIndex">OtherIndex</dfn> = (<a class="local col9 ref" href="#419ICI" title='ICI' data-ref="419ICI">ICI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#885" title='llvm::CmpInst::getOperand' data-ref="_ZNK4llvm7CmpInst10getOperandEj">getOperand</a>(<var>0</var>) == <a class="local col6 ref" href="#416PI" title='PI' data-ref="416PI">PI</a>) ? <var>1</var> : <var>0</var>;</td></tr>
<tr><th id="2273">2273</th><td>        <b>if</b> (!<a class="tu ref" href="#_ZL28isNeverEqualToUnescapedAllocPN4llvm5ValueEPKNS_17TargetLibraryInfoEPNS_11InstructionE" title='isNeverEqualToUnescapedAlloc' data-use='c' data-ref="_ZL28isNeverEqualToUnescapedAllocPN4llvm5ValueEPKNS_17TargetLibraryInfoEPNS_11InstructionE">isNeverEqualToUnescapedAlloc</a>(<a class="local col9 ref" href="#419ICI" title='ICI' data-ref="419ICI">ICI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#885" title='llvm::CmpInst::getOperand' data-ref="_ZNK4llvm7CmpInst10getOperandEj">getOperand</a>(<a class="local col0 ref" href="#420OtherIndex" title='OtherIndex' data-ref="420OtherIndex">OtherIndex</a>), <a class="local col4 ref" href="#414TLI" title='TLI' data-ref="414TLI">TLI</a>, <a class="local col2 ref" href="#412AI" title='AI' data-ref="412AI">AI</a>))</td></tr>
<tr><th id="2274">2274</th><td>          <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2275">2275</th><td>        <a class="local col3 ref" href="#413Users" title='Users' data-ref="413Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_" title='llvm::SmallVectorImpl::emplace_back' data-ref="_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_">emplace_back</a>(<span class='refarg'><a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a></span>);</td></tr>
<tr><th id="2276">2276</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2277">2277</th><td>      }</td></tr>
<tr><th id="2278">2278</th><td></td></tr>
<tr><th id="2279">2279</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#209" title='llvm::Instruction::OtherOps::Call' data-ref="llvm::Instruction::OtherOps::Call">Call</a>:</td></tr>
<tr><th id="2280">2280</th><td>        <i>// Ignore no-op and store intrinsics.</i></td></tr>
<tr><th id="2281">2281</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::IntrinsicInst" title='llvm::IntrinsicInst' data-ref="llvm::IntrinsicInst">IntrinsicInst</a> *<dfn class="local col1 decl" id="421II" title='II' data-type='llvm::IntrinsicInst *' data-ref="421II"><a class="local col1 ref" href="#421II" title='II' data-ref="421II">II</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::IntrinsicInst" title='llvm::IntrinsicInst' data-ref="llvm::IntrinsicInst">IntrinsicInst</a>&gt;(<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>)) {</td></tr>
<tr><th id="2282">2282</th><td>          <b>switch</b> (II-&gt;getIntrinsicID()) {</td></tr>
<tr><th id="2283">2283</th><td>          <b>default</b>:</td></tr>
<tr><th id="2284">2284</th><td>            <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2285">2285</th><td></td></tr>
<tr><th id="2286">2286</th><td>          <b>case</b> <span class='error' title="no member named &apos;memmove&apos; in namespace &apos;llvm::Intrinsic&apos;; did you mean simply &apos;memmove&apos;?">Intrinsic</span>::<span class='error' title="value of type &apos;void *(void *, const void *, size_t) throw()&apos; (aka &apos;void *(void *, const void *, unsigned long) throw()&apos;) is not implicitly convertible to &apos;unsigned int&apos;">memmove</span>:</td></tr>
<tr><th id="2287">2287</th><td>          <b>case</b> <span class='error' title="no member named &apos;memcpy&apos; in namespace &apos;llvm::Intrinsic&apos;; did you mean simply &apos;memcpy&apos;?">Intrinsic</span>::<span class='error' title="value of type &apos;void *(void *__restrict, const void *__restrict, size_t) throw()&apos; (aka &apos;void *(void *__restrict, const void *__restrict, unsigned long) throw()&apos;) is not implicitly convertible to &apos;unsigned int&apos;">memcpy</span>:</td></tr>
<tr><th id="2288">2288</th><td>          <b>case</b> <span class='error' title="no member named &apos;memset&apos; in namespace &apos;llvm::Intrinsic&apos;; did you mean simply &apos;memset&apos;?">Intrinsic</span>::<span class='error' title="value of type &apos;void *(void *, int, size_t) throw()&apos; (aka &apos;void *(void *, int, unsigned long) throw()&apos;) is not implicitly convertible to &apos;unsigned int&apos;">memset</span>: {</td></tr>
<tr><th id="2289">2289</th><td>            MemIntrinsic *MI = cast&lt;MemIntrinsic&gt;(II);</td></tr>
<tr><th id="2290">2290</th><td>            <b>if</b> (MI-&gt;isVolatile() || MI-&gt;getRawDest() != PI)</td></tr>
<tr><th id="2291">2291</th><td>              <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2292">2292</th><td>            <a class="macro" href="../../../include/llvm/Support/Compiler.h.html#252" title="[[clang::fallthrough]]" data-ref="_M/LLVM_FALLTHROUGH">LLVM_FALLTHROUGH</a>;</td></tr>
<tr><th id="2293">2293</th><td>          }</td></tr>
<tr><th id="2294">2294</th><td>          <b>case</b> Intrinsic::<span class='error' title="no member named &apos;invariant_start&apos; in namespace &apos;llvm::Intrinsic&apos;">invariant_start</span>:</td></tr>
<tr><th id="2295">2295</th><td>          <b>case</b> Intrinsic::<span class='error' title="no member named &apos;invariant_end&apos; in namespace &apos;llvm::Intrinsic&apos;">invariant_end</span>:</td></tr>
<tr><th id="2296">2296</th><td>          <b>case</b> Intrinsic::<span class='error' title="no member named &apos;lifetime_start&apos; in namespace &apos;llvm::Intrinsic&apos;">lifetime_start</span>:</td></tr>
<tr><th id="2297">2297</th><td>          <b>case</b> Intrinsic::<span class='error' title="no member named &apos;lifetime_end&apos; in namespace &apos;llvm::Intrinsic&apos;">lifetime_end</span>:</td></tr>
<tr><th id="2298">2298</th><td>          <b>case</b> Intrinsic::<span class='error' title="no member named &apos;objectsize&apos; in namespace &apos;llvm::Intrinsic&apos;">objectsize</span>:</td></tr>
<tr><th id="2299">2299</th><td>            Users.emplace_back(I);</td></tr>
<tr><th id="2300">2300</th><td>            <b>continue</b>;</td></tr>
<tr><th id="2301">2301</th><td>          }</td></tr>
<tr><th id="2302">2302</th><td>        }</td></tr>
<tr><th id="2303">2303</th><td></td></tr>
<tr><th id="2304">2304</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Analysis/MemoryBuiltins.h.html#_ZN4llvm10isFreeCallEPNS_5ValueEPKNS_17TargetLibraryInfoE" title='llvm::isFreeCall' data-ref="_ZN4llvm10isFreeCallEPNS_5ValueEPKNS_17TargetLibraryInfoE">isFreeCall</a>(<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>, <a class="local col4 ref" href="#414TLI" title='TLI' data-ref="414TLI">TLI</a>)) {</td></tr>
<tr><th id="2305">2305</th><td>          <a class="local col3 ref" href="#413Users" title='Users' data-ref="413Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_" title='llvm::SmallVectorImpl::emplace_back' data-ref="_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_">emplace_back</a>(<span class='refarg'><a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a></span>);</td></tr>
<tr><th id="2306">2306</th><td>          <b>continue</b>;</td></tr>
<tr><th id="2307">2307</th><td>        }</td></tr>
<tr><th id="2308">2308</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2309">2309</th><td></td></tr>
<tr><th id="2310">2310</th><td>      <b>case</b> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../../include/llvm/IR/Instruction.def.html#173" title='llvm::Instruction::MemoryOps::Store' data-ref="llvm::Instruction::MemoryOps::Store">Store</a>: {</td></tr>
<tr><th id="2311">2311</th><td>        <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col2 decl" id="422SI" title='SI' data-type='llvm::StoreInst *' data-ref="422SI">SI</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a>&gt;(<a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a>);</td></tr>
<tr><th id="2312">2312</th><td>        <b>if</b> (<a class="local col2 ref" href="#422SI" title='SI' data-ref="422SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst10isVolatileEv" title='llvm::StoreInst::isVolatile' data-ref="_ZNK4llvm9StoreInst10isVolatileEv">isVolatile</a>() || <a class="local col2 ref" href="#422SI" title='SI' data-ref="422SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst17getPointerOperandEv" title='llvm::StoreInst::getPointerOperand' data-ref="_ZN4llvm9StoreInst17getPointerOperandEv">getPointerOperand</a>() != <a class="local col6 ref" href="#416PI" title='PI' data-ref="416PI">PI</a>)</td></tr>
<tr><th id="2313">2313</th><td>          <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2314">2314</th><td>        <a class="local col3 ref" href="#413Users" title='Users' data-ref="413Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_" title='llvm::SmallVectorImpl::emplace_back' data-ref="_ZN4llvm15SmallVectorImpl12emplace_backEDpOT_">emplace_back</a>(<span class='refarg'><a class="local col8 ref" href="#418I" title='I' data-ref="418I">I</a></span>);</td></tr>
<tr><th id="2315">2315</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2316">2316</th><td>      }</td></tr>
<tr><th id="2317">2317</th><td>      }</td></tr>
<tr><th id="2318">2318</th><td>      <a class="macro" href="../../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;missing a return?&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2318)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"missing a return?"</q>);</td></tr>
<tr><th id="2319">2319</th><td>    }</td></tr>
<tr><th id="2320">2320</th><td>  } <b>while</b> (!<a class="local col5 ref" href="#415Worklist" title='Worklist' data-ref="415Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase5emptyEv" title='llvm::SmallVectorBase::empty' data-ref="_ZNK4llvm15SmallVectorBase5emptyEv">empty</a>());</td></tr>
<tr><th id="2321">2321</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="2322">2322</th><td>}</td></tr>
<tr><th id="2323">2323</th><td></td></tr>
<tr><th id="2324">2324</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner14visitAllocSiteERNS_11InstructionE" title='llvm::InstCombiner::visitAllocSite' data-ref="_ZN4llvm12InstCombiner14visitAllocSiteERNS_11InstructionE">visitAllocSite</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col3 decl" id="423MI" title='MI' data-type='llvm::Instruction &amp;' data-ref="423MI">MI</dfn>) {</td></tr>
<tr><th id="2325">2325</th><td>  <i>// If we have a malloc call which is only used in any amount of comparisons to</i></td></tr>
<tr><th id="2326">2326</th><td><i>  // null and free calls, delete the calls and replace the comparisons with true</i></td></tr>
<tr><th id="2327">2327</th><td><i>  // or false as appropriate.</i></td></tr>
<tr><th id="2328">2328</th><td><i></i></td></tr>
<tr><th id="2329">2329</th><td><i>  // This is based on the principle that we can substitute our own allocation</i></td></tr>
<tr><th id="2330">2330</th><td><i>  // function (which will never return null) rather than knowledge of the</i></td></tr>
<tr><th id="2331">2331</th><td><i>  // specific function being called. In some sense this can change the permitted</i></td></tr>
<tr><th id="2332">2332</th><td><i>  // outputs of a program (when we convert a malloc to an alloca, the fact that</i></td></tr>
<tr><th id="2333">2333</th><td><i>  // the allocation is now on the stack is potentially visible, for example),</i></td></tr>
<tr><th id="2334">2334</th><td><i>  // but we believe in a permissible manner.</i></td></tr>
<tr><th id="2335">2335</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/ValueHandle.h.html#llvm::WeakTrackingVH" title='llvm::WeakTrackingVH' data-ref="llvm::WeakTrackingVH">WeakTrackingVH</a>, <var>64</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col4 decl" id="424Users" title='Users' data-type='SmallVector&lt;llvm::WeakTrackingVH, 64&gt;' data-ref="424Users">Users</dfn>;</td></tr>
<tr><th id="2336">2336</th><td></td></tr>
<tr><th id="2337">2337</th><td>  <i>// If we are removing an alloca with a dbg.declare, insert dbg.value calls</i></td></tr>
<tr><th id="2338">2338</th><td><i>  // before each store.</i></td></tr>
<tr><th id="2339">2339</th><td>  <a class="type" href="../../../include/llvm/ADT/TinyPtrVector.h.html#llvm::TinyPtrVector" title='llvm::TinyPtrVector' data-ref="llvm::TinyPtrVector">TinyPtrVector</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::DbgVariableIntrinsic" title='llvm::DbgVariableIntrinsic' data-ref="llvm::DbgVariableIntrinsic">DbgVariableIntrinsic</a> *&gt; <a class="ref fake" href="../../../include/llvm/ADT/TinyPtrVector.h.html#_ZN4llvm13TinyPtrVectorC1Ev" title='llvm::TinyPtrVector::TinyPtrVector&lt;EltTy&gt;' data-ref="_ZN4llvm13TinyPtrVectorC1Ev"></a><dfn class="local col5 decl" id="425DIIs" title='DIIs' data-type='TinyPtrVector&lt;llvm::DbgVariableIntrinsic *&gt;' data-ref="425DIIs">DIIs</dfn>;</td></tr>
<tr><th id="2340">2340</th><td>  <span class="namespace">std::</span><a class="type" href="../../../../../include/c++/7/bits/unique_ptr.h.html#std::unique_ptr" title='std::unique_ptr' data-ref="std::unique_ptr">unique_ptr</a>&lt;<a class="type" href="../../../include/llvm/IR/DIBuilder.h.html#llvm::DIBuilder" title='llvm::DIBuilder' data-ref="llvm::DIBuilder">DIBuilder</a>&gt; <a class="ref fake" href="../../../../../include/c++/7/bits/unique_ptr.h.html#_ZNSt10unique_ptrC1Ev" title='std::unique_ptr::unique_ptr&lt;_Tp, _Dp&gt;' data-ref="_ZNSt10unique_ptrC1Ev"></a><dfn class="local col6 decl" id="426DIB" title='DIB' data-type='std::unique_ptr&lt;DIBuilder&gt;' data-ref="426DIB">DIB</dfn>;</td></tr>
<tr><th id="2341">2341</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a>&gt;(<a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a>)) {</td></tr>
<tr><th id="2342">2342</th><td>    <a class="local col5 ref" href="#425DIIs" title='DIIs' data-ref="425DIIs">DIIs</a> <a class="ref" href="../../../include/llvm/ADT/TinyPtrVector.h.html#_ZN4llvm13TinyPtrVectoraSEONS_13TinyPtrVectorIT_EE" title='llvm::TinyPtrVector::operator=' data-ref="_ZN4llvm13TinyPtrVectoraSEONS_13TinyPtrVectorIT_EE">=</a> <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm15FindDbgAddrUsesEPNS_5ValueE" title='llvm::FindDbgAddrUses' data-ref="_ZN4llvm15FindDbgAddrUsesEPNS_5ValueE">FindDbgAddrUses</a>(&amp;<a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a>);</td></tr>
<tr><th id="2343">2343</th><td>    <a class="local col6 ref" href="#426DIB" title='DIB' data-ref="426DIB">DIB</a>.<a class="ref" href="../../../../../include/c++/7/bits/unique_ptr.h.html#_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE" title='std::unique_ptr::reset' data-ref="_ZNSt10unique_ptr5resetENSt15__uniq_ptr_implIT_T0_E7pointerE">reset</a>(<b>new</b> <a class="type" href="../../../include/llvm/IR/DIBuilder.h.html#llvm::DIBuilder" title='llvm::DIBuilder' data-ref="llvm::DIBuilder">DIBuilder</a><a class="ref" href="../../../include/llvm/IR/DIBuilder.h.html#_ZN4llvm9DIBuilderC1ERNS_6ModuleEbPNS_13DICompileUnitE" title='llvm::DIBuilder::DIBuilder' data-ref="_ZN4llvm9DIBuilderC1ERNS_6ModuleEbPNS_13DICompileUnitE">(</a>*<a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>(), <i>/*AllowUnresolved=*/</i><b>false</b>));</td></tr>
<tr><th id="2344">2344</th><td>  }</td></tr>
<tr><th id="2345">2345</th><td></td></tr>
<tr><th id="2346">2346</th><td>  <b>if</b> (<a class="tu ref" href="#_ZL20isAllocSiteRemovablePN4llvm11InstructionERNS_15SmallVectorImplINS_14WeakTrackingVHEEEPKNS_17TargetLibraryInfoE" title='isAllocSiteRemovable' data-use='c' data-ref="_ZL20isAllocSiteRemovablePN4llvm11InstructionERNS_15SmallVectorImplINS_14WeakTrackingVHEEEPKNS_17TargetLibraryInfoE">isAllocSiteRemovable</a>(&amp;<a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a>, <span class='refarg'><a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a></span>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>)) {</td></tr>
<tr><th id="2347">2347</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col7 decl" id="427i" title='i' data-type='unsigned int' data-ref="427i">i</dfn> = <var>0</var>, <dfn class="local col8 decl" id="428e" title='e' data-type='unsigned int' data-ref="428e">e</dfn> = <a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); <a class="local col7 ref" href="#427i" title='i' data-ref="427i">i</a> != <a class="local col8 ref" href="#428e" title='e' data-ref="428e">e</a>; ++<a class="local col7 ref" href="#427i" title='i' data-ref="427i">i</a>) {</td></tr>
<tr><th id="2348">2348</th><td>      <i>// Lowering all @llvm.objectsize calls first because they may</i></td></tr>
<tr><th id="2349">2349</th><td><i>      // use a bitcast/GEP of the alloca we are removing.</i></td></tr>
<tr><th id="2350">2350</th><td>      <b>if</b> (!<a class="ref fake" href="../../../include/llvm/IR/ValueHandle.h.html#_ZNK4llvm14WeakTrackingVHcvPNS_5ValueEEv" title='llvm::WeakTrackingVH::operator llvm::Value *' data-ref="_ZNK4llvm14WeakTrackingVHcvPNS_5ValueEEv"></a><a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#427i" title='i' data-ref="427i">i</a>]</a>)</td></tr>
<tr><th id="2351">2351</th><td>       <b>continue</b>;</td></tr>
<tr><th id="2352">2352</th><td></td></tr>
<tr><th id="2353">2353</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col9 decl" id="429I" title='I' data-type='llvm::Instruction *' data-ref="429I">I</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(&amp;<a class="ref" href="../../../include/llvm/IR/ValueHandle.h.html#_ZNK4llvm15ValueHandleBasedeEv" title='llvm::ValueHandleBase::operator*' data-ref="_ZNK4llvm15ValueHandleBasedeEv">*</a><a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#427i" title='i' data-ref="427i">i</a>]</a>);</td></tr>
<tr><th id="2354">2354</th><td></td></tr>
<tr><th id="2355">2355</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::IntrinsicInst" title='llvm::IntrinsicInst' data-ref="llvm::IntrinsicInst">IntrinsicInst</a> *<dfn class="local col0 decl" id="430II" title='II' data-type='llvm::IntrinsicInst *' data-ref="430II"><a class="local col0 ref" href="#430II" title='II' data-ref="430II">II</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::IntrinsicInst" title='llvm::IntrinsicInst' data-ref="llvm::IntrinsicInst">IntrinsicInst</a>&gt;(<a class="local col9 ref" href="#429I" title='I' data-ref="429I">I</a>)) {</td></tr>
<tr><th id="2356">2356</th><td>        <b>if</b> (II-&gt;getIntrinsicID() == Intrinsic::<span class='error' title="no member named &apos;objectsize&apos; in namespace &apos;llvm::Intrinsic&apos;">objectsize</span>) {</td></tr>
<tr><th id="2357">2357</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="431Result" title='Result' data-type='llvm::Value *' data-ref="431Result">Result</dfn> =</td></tr>
<tr><th id="2358">2358</th><td>              <a class="ref" href="../../../include/llvm/Analysis/MemoryBuiltins.h.html#_ZN4llvm19lowerObjectSizeCallEPNS_13IntrinsicInstERKNS_10DataLayoutEPKNS_17TargetLibraryInfoEb" title='llvm::lowerObjectSizeCall' data-ref="_ZN4llvm19lowerObjectSizeCallEPNS_13IntrinsicInstERKNS_10DataLayoutEPKNS_17TargetLibraryInfoEb">lowerObjectSizeCall</a>(<a class="local col0 ref" href="#430II" title='II' data-ref="430II">II</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>, <i>/*MustSucceed=*/</i><b>true</b>);</td></tr>
<tr><th id="2359">2359</th><td>          <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col9 ref" href="#429I" title='I' data-ref="429I">I</a></span>, <a class="local col1 ref" href="#431Result" title='Result' data-ref="431Result">Result</a>);</td></tr>
<tr><th id="2360">2360</th><td>          <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#429I" title='I' data-ref="429I">I</a></span>);</td></tr>
<tr><th id="2361">2361</th><td>          <a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#427i" title='i' data-ref="427i">i</a>]</a> <a class="ref" href="../../../include/llvm/IR/ValueHandle.h.html#_ZN4llvm14WeakTrackingVHaSEPNS_5ValueE" title='llvm::WeakTrackingVH::operator=' data-ref="_ZN4llvm14WeakTrackingVHaSEPNS_5ValueE">=</a> <b>nullptr</b>; <i>// Skip examining in the next loop.</i></td></tr>
<tr><th id="2362">2362</th><td>        }</td></tr>
<tr><th id="2363">2363</th><td>      }</td></tr>
<tr><th id="2364">2364</th><td>    }</td></tr>
<tr><th id="2365">2365</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col2 decl" id="432i" title='i' data-type='unsigned int' data-ref="432i">i</dfn> = <var>0</var>, <dfn class="local col3 decl" id="433e" title='e' data-type='unsigned int' data-ref="433e">e</dfn> = <a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); <a class="local col2 ref" href="#432i" title='i' data-ref="432i">i</a> != <a class="local col3 ref" href="#433e" title='e' data-ref="433e">e</a>; ++<a class="local col2 ref" href="#432i" title='i' data-ref="432i">i</a>) {</td></tr>
<tr><th id="2366">2366</th><td>      <b>if</b> (!<a class="ref fake" href="../../../include/llvm/IR/ValueHandle.h.html#_ZNK4llvm14WeakTrackingVHcvPNS_5ValueEEv" title='llvm::WeakTrackingVH::operator llvm::Value *' data-ref="_ZNK4llvm14WeakTrackingVHcvPNS_5ValueEEv"></a><a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#432i" title='i' data-ref="432i">i</a>]</a>)</td></tr>
<tr><th id="2367">2367</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2368">2368</th><td></td></tr>
<tr><th id="2369">2369</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="434I" title='I' data-type='llvm::Instruction *' data-ref="434I">I</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(&amp;<a class="ref" href="../../../include/llvm/IR/ValueHandle.h.html#_ZNK4llvm15ValueHandleBasedeEv" title='llvm::ValueHandleBase::operator*' data-ref="_ZNK4llvm15ValueHandleBasedeEv">*</a><a class="local col4 ref" href="#424Users" title='Users' data-ref="424Users">Users</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#432i" title='i' data-ref="432i">i</a>]</a>);</td></tr>
<tr><th id="2370">2370</th><td></td></tr>
<tr><th id="2371">2371</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a> *<dfn class="local col5 decl" id="435C" title='C' data-type='llvm::ICmpInst *' data-ref="435C"><a class="local col5 ref" href="#435C" title='C' data-ref="435C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>&gt;(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>)) {</td></tr>
<tr><th id="2372">2372</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col5 ref" href="#435C" title='C' data-ref="435C">C</a></span>,</td></tr>
<tr><th id="2373">2373</th><td>                            <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE" title='llvm::Type::getInt1Ty' data-ref="_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE">getInt1Ty</a>(<span class='refarg'><a class="local col5 ref" href="#435C" title='C' data-ref="435C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value10getContextEv" title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</a>()</span>),</td></tr>
<tr><th id="2374">2374</th><td>                                             <a class="local col5 ref" href="#435C" title='C' data-ref="435C">C</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm7CmpInst16isFalseWhenEqualEv" title='llvm::CmpInst::isFalseWhenEqual' data-ref="_ZNK4llvm7CmpInst16isFalseWhenEqualEv">isFalseWhenEqual</a>()));</td></tr>
<tr><th id="2375">2375</th><td>      } <b>else</b> <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BitCastInst" title='llvm::BitCastInst' data-ref="llvm::BitCastInst">BitCastInst</a>&gt;(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>) || <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::GetElementPtrInst" title='llvm::GetElementPtrInst' data-ref="llvm::GetElementPtrInst">GetElementPtrInst</a>&gt;(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>) ||</td></tr>
<tr><th id="2376">2376</th><td>                 <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AddrSpaceCastInst" title='llvm::AddrSpaceCastInst' data-ref="llvm::AddrSpaceCastInst">AddrSpaceCastInst</a>&gt;(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>)) {</td></tr>
<tr><th id="2377">2377</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a></span>, <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()));</td></tr>
<tr><th id="2378">2378</th><td>      } <b>else</b> <b>if</b> (<em>auto</em> *<dfn class="local col6 decl" id="436SI" title='SI' data-type='llvm::StoreInst *' data-ref="436SI"><a class="local col6 ref" href="#436SI" title='SI' data-ref="436SI">SI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a>&gt;(<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a>)) {</td></tr>
<tr><th id="2379">2379</th><td>        <b>for</b> (<em>auto</em> *<dfn class="local col7 decl" id="437DII" title='DII' data-type='llvm::DbgVariableIntrinsic *' data-ref="437DII">DII</dfn> : <a class="local col5 ref" href="#425DIIs" title='DIIs' data-ref="425DIIs">DIIs</a>)</td></tr>
<tr><th id="2380">2380</th><td>          <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm31ConvertDebugDeclareToDebugValueEPNS_20DbgVariableIntrinsicEPNS_9StoreInstERNS_9DIBuilderE" title='llvm::ConvertDebugDeclareToDebugValue' data-ref="_ZN4llvm31ConvertDebugDeclareToDebugValueEPNS_20DbgVariableIntrinsicEPNS_9StoreInstERNS_9DIBuilderE">ConvertDebugDeclareToDebugValue</a>(<a class="local col7 ref" href="#437DII" title='DII' data-ref="437DII">DII</a>, <a class="local col6 ref" href="#436SI" title='SI' data-ref="436SI">SI</a>, <span class='refarg'><a class="ref" href="../../../../../include/c++/7/bits/unique_ptr.h.html#_ZNKSt10unique_ptrdeEv" title='std::unique_ptr::operator*' data-ref="_ZNKSt10unique_ptrdeEv">*</a><a class="local col6 ref" href="#426DIB" title='DIB' data-ref="426DIB">DIB</a></span>);</td></tr>
<tr><th id="2381">2381</th><td>      }</td></tr>
<tr><th id="2382">2382</th><td>      <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col4 ref" href="#434I" title='I' data-ref="434I">I</a></span>);</td></tr>
<tr><th id="2383">2383</th><td>    }</td></tr>
<tr><th id="2384">2384</th><td></td></tr>
<tr><th id="2385">2385</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InvokeInst" title='llvm::InvokeInst' data-ref="llvm::InvokeInst">InvokeInst</a> *<dfn class="local col8 decl" id="438II" title='II' data-type='llvm::InvokeInst *' data-ref="438II"><a class="local col8 ref" href="#438II" title='II' data-ref="438II">II</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InvokeInst" title='llvm::InvokeInst' data-ref="llvm::InvokeInst">InvokeInst</a>&gt;(&amp;<a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a>)) {</td></tr>
<tr><th id="2386">2386</th><td>      <i>// Replace invoke with a NOP intrinsic to maintain the original CFG</i></td></tr>
<tr><th id="2387">2387</th><td>      <a class="type" href="../../../include/llvm/IR/Module.h.html#llvm::Module" title='llvm::Module' data-ref="llvm::Module">Module</a> *<dfn class="local col9 decl" id="439M" title='M' data-type='llvm::Module *' data-ref="439M">M</dfn> = <a class="local col8 ref" href="#438II" title='II' data-ref="438II">II</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="2388">2388</th><td>      <a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col0 decl" id="440F" title='F' data-type='llvm::Function *' data-ref="440F">F</dfn> = Intrinsic::getDeclaration(M, Intrinsic::<span class='error' title="no member named &apos;donothing&apos; in namespace &apos;llvm::Intrinsic&apos;">donothing</span>);</td></tr>
<tr><th id="2389">2389</th><td>      InvokeInst::Create(F, II-&gt;getNormalDest(), II-&gt;getUnwindDest(),</td></tr>
<tr><th id="2390">2390</th><td>                         None, <q>""</q>, II-&gt;getParent());</td></tr>
<tr><th id="2391">2391</th><td>    }</td></tr>
<tr><th id="2392">2392</th><td></td></tr>
<tr><th id="2393">2393</th><td>    <b>for</b> (<em>auto</em> *<dfn class="local col1 decl" id="441DII" title='DII' data-type='llvm::DbgVariableIntrinsic *' data-ref="441DII">DII</dfn> : <a class="local col5 ref" href="#425DIIs" title='DIIs' data-ref="425DIIs">DIIs</a>)</td></tr>
<tr><th id="2394">2394</th><td>      <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col1 ref" href="#441DII" title='DII' data-ref="441DII">DII</a></span>);</td></tr>
<tr><th id="2395">2395</th><td></td></tr>
<tr><th id="2396">2396</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'><a class="local col3 ref" href="#423MI" title='MI' data-ref="423MI">MI</a></span>);</td></tr>
<tr><th id="2397">2397</th><td>  }</td></tr>
<tr><th id="2398">2398</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2399">2399</th><td>}</td></tr>
<tr><th id="2400">2400</th><td></td></tr>
<tr><th id="2401">2401</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// Move the call to free before a NULL test.</i></td></tr>
<tr><th id="2402">2402</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">///</i></td></tr>
<tr><th id="2403">2403</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// Check if this free is accessed after its argument has been test</i></td></tr>
<tr><th id="2404">2404</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// against NULL (property 0).</i></td></tr>
<tr><th id="2405">2405</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// If yes, it is legal to move this call in its predecessor block.</i></td></tr>
<tr><th id="2406">2406</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">///</i></td></tr>
<tr><th id="2407">2407</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// The move is performed only if the block containing the call to free</i></td></tr>
<tr><th id="2408">2408</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// will be removed, i.e.:</i></td></tr>
<tr><th id="2409">2409</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// 1. it has only one predecessor P, and P has two successors</i></td></tr>
<tr><th id="2410">2410</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// 2. it contains the call, noops, and an unconditional branch</i></td></tr>
<tr><th id="2411">2411</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// 3. its successor is the same as its predecessor's successor</i></td></tr>
<tr><th id="2412">2412</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">///</i></td></tr>
<tr><th id="2413">2413</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// The profitability is out-of concern here and this function should</i></td></tr>
<tr><th id="2414">2414</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// be called only if the caller knows this transformation would be</i></td></tr>
<tr><th id="2415">2415</th><td><i class="doc" data-doc="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">/// profitable (e.g., for code size).</i></td></tr>
<tr><th id="2416">2416</th><td><em>static</em> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="tu decl def" id="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE" title='tryToMoveFreeBeforeNullTest' data-type='llvm::Instruction * tryToMoveFreeBeforeNullTest(llvm::CallInst &amp; FI, const llvm::DataLayout &amp; DL)' data-ref="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">tryToMoveFreeBeforeNullTest</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::CallInst" title='llvm::CallInst' data-ref="llvm::CallInst">CallInst</a> &amp;<dfn class="local col2 decl" id="442FI" title='FI' data-type='llvm::CallInst &amp;' data-ref="442FI">FI</dfn>,</td></tr>
<tr><th id="2417">2417</th><td>                                                <em>const</em> <a class="type" href="../../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col3 decl" id="443DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="443DL">DL</dfn>) {</td></tr>
<tr><th id="2418">2418</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="444Op" title='Op' data-type='llvm::Value *' data-ref="444Op">Op</dfn> = <a class="local col2 ref" href="#442FI" title='FI' data-ref="442FI">FI</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CallBase13getArgOperandEj" title='llvm::CallBase::getArgOperand' data-ref="_ZNK4llvm8CallBase13getArgOperandEj">getArgOperand</a>(<var>0</var>);</td></tr>
<tr><th id="2419">2419</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col5 decl" id="445FreeInstrBB" title='FreeInstrBB' data-type='llvm::BasicBlock *' data-ref="445FreeInstrBB">FreeInstrBB</dfn> = <a class="local col2 ref" href="#442FI" title='FI' data-ref="442FI">FI</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="2420">2420</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col6 decl" id="446PredBB" title='PredBB' data-type='llvm::BasicBlock *' data-ref="446PredBB">PredBB</dfn> = <a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock20getSinglePredecessorEv" title='llvm::BasicBlock::getSinglePredecessor' data-ref="_ZN4llvm10BasicBlock20getSinglePredecessorEv">getSinglePredecessor</a>();</td></tr>
<tr><th id="2421">2421</th><td></td></tr>
<tr><th id="2422">2422</th><td>  <i>// Validate part of constraint #1: Only one predecessor</i></td></tr>
<tr><th id="2423">2423</th><td><i>  // FIXME: We can extend the number of predecessor, but in that case, we</i></td></tr>
<tr><th id="2424">2424</th><td><i>  //        would duplicate the call to free in each predecessor and it may</i></td></tr>
<tr><th id="2425">2425</th><td><i>  //        not be profitable even for code size.</i></td></tr>
<tr><th id="2426">2426</th><td>  <b>if</b> (!<a class="local col6 ref" href="#446PredBB" title='PredBB' data-ref="446PredBB">PredBB</a>)</td></tr>
<tr><th id="2427">2427</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2428">2428</th><td></td></tr>
<tr><th id="2429">2429</th><td>  <i>// Validate constraint #2: Does this block contains only the call to</i></td></tr>
<tr><th id="2430">2430</th><td><i>  //                         free, noops, and an unconditional branch?</i></td></tr>
<tr><th id="2431">2431</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col7 decl" id="447SuccBB" title='SuccBB' data-type='llvm::BasicBlock *' data-ref="447SuccBB">SuccBB</dfn>;</td></tr>
<tr><th id="2432">2432</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col8 decl" id="448FreeInstrBBTerminator" title='FreeInstrBBTerminator' data-type='llvm::Instruction *' data-ref="448FreeInstrBBTerminator">FreeInstrBBTerminator</dfn> = <a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>();</td></tr>
<tr><th id="2433">2433</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col8 ref" href="#448FreeInstrBBTerminator" title='FreeInstrBBTerminator' data-ref="448FreeInstrBBTerminator">FreeInstrBBTerminator</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch17m_UnconditionalBrERPNS_10BasicBlockE" title='llvm::PatternMatch::m_UnconditionalBr' data-ref="_ZN4llvm12PatternMatch17m_UnconditionalBrERPNS_10BasicBlockE">m_UnconditionalBr</a>(<span class='refarg'><a class="local col7 ref" href="#447SuccBB" title='SuccBB' data-ref="447SuccBB">SuccBB</a></span>)))</td></tr>
<tr><th id="2434">2434</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2435">2435</th><td></td></tr>
<tr><th id="2436">2436</th><td>  <i>// If there are only 2 instructions in the block, at this point,</i></td></tr>
<tr><th id="2437">2437</th><td><i>  // this is the call to free and unconditional.</i></td></tr>
<tr><th id="2438">2438</th><td><i>  // If there are more than 2 instructions, check that they are noops</i></td></tr>
<tr><th id="2439">2439</th><td><i>  // i.e., they won't hurt the performance of the generated code.</i></td></tr>
<tr><th id="2440">2440</th><td>  <b>if</b> (<a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZNK4llvm10BasicBlock4sizeEv" title='llvm::BasicBlock::size' data-ref="_ZNK4llvm10BasicBlock4sizeEv">size</a>() != <var>2</var>) {</td></tr>
<tr><th id="2441">2441</th><td>    <b>for</b> (<em>const</em> <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col9 decl" id="449Inst" title='Inst' data-type='const llvm::Instruction &amp;' data-ref="449Inst">Inst</dfn> : *<a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>) {</td></tr>
<tr><th id="2442">2442</th><td>      <b>if</b> (&amp;<a class="local col9 ref" href="#449Inst" title='Inst' data-ref="449Inst">Inst</a> == &amp;<a class="local col2 ref" href="#442FI" title='FI' data-ref="442FI">FI</a> || &amp;<a class="local col9 ref" href="#449Inst" title='Inst' data-ref="449Inst">Inst</a> == <a class="local col8 ref" href="#448FreeInstrBBTerminator" title='FreeInstrBBTerminator' data-ref="448FreeInstrBBTerminator">FreeInstrBBTerminator</a>)</td></tr>
<tr><th id="2443">2443</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2444">2444</th><td>      <em>auto</em> *<dfn class="local col0 decl" id="450Cast" title='Cast' data-type='const llvm::CastInst *' data-ref="450Cast">Cast</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CastInst" title='llvm::CastInst' data-ref="llvm::CastInst">CastInst</a>&gt;(&amp;<a class="local col9 ref" href="#449Inst" title='Inst' data-ref="449Inst">Inst</a>);</td></tr>
<tr><th id="2445">2445</th><td>      <b>if</b> (!<a class="local col0 ref" href="#450Cast" title='Cast' data-ref="450Cast">Cast</a> || !<a class="local col0 ref" href="#450Cast" title='Cast' data-ref="450Cast">Cast</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CastInst10isNoopCastERKNS_10DataLayoutE" title='llvm::CastInst::isNoopCast' data-ref="_ZNK4llvm8CastInst10isNoopCastERKNS_10DataLayoutE">isNoopCast</a>(<a class="local col3 ref" href="#443DL" title='DL' data-ref="443DL">DL</a>))</td></tr>
<tr><th id="2446">2446</th><td>        <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2447">2447</th><td>    }</td></tr>
<tr><th id="2448">2448</th><td>  }</td></tr>
<tr><th id="2449">2449</th><td>  <i>// Validate the rest of constraint #1 by matching on the pred branch.</i></td></tr>
<tr><th id="2450">2450</th><td>  <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col1 decl" id="451TI" title='TI' data-type='llvm::Instruction *' data-ref="451TI">TI</dfn> = <a class="local col6 ref" href="#446PredBB" title='PredBB' data-ref="446PredBB">PredBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>();</td></tr>
<tr><th id="2451">2451</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col2 decl" id="452TrueBB" title='TrueBB' data-type='llvm::BasicBlock *' data-ref="452TrueBB">TrueBB</dfn>, *<dfn class="local col3 decl" id="453FalseBB" title='FalseBB' data-type='llvm::BasicBlock *' data-ref="453FalseBB">FalseBB</dfn>;</td></tr>
<tr><th id="2452">2452</th><td>  <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate" title='llvm::CmpInst::Predicate' data-ref="llvm::CmpInst::Predicate">Predicate</a> <dfn class="local col4 decl" id="454Pred" title='Pred' data-type='ICmpInst::Predicate' data-ref="454Pred">Pred</dfn>;</td></tr>
<tr><th id="2453">2453</th><td>  <b>if</b> (!<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col1 ref" href="#451TI" title='TI' data-ref="451TI">TI</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_" title='llvm::PatternMatch::m_Br' data-ref="_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_">m_Br</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_ICmpERNS_7CmpInst9PredicateERKT_RKT0_" title='llvm::PatternMatch::m_ICmp' data-ref="_ZN4llvm12PatternMatch6m_ICmpERNS_7CmpInst9PredicateERKT_RKT0_">m_ICmp</a>(<span class='refarg'><a class="local col4 ref" href="#454Pred" title='Pred' data-ref="454Pred">Pred</a></span>,</td></tr>
<tr><th id="2454">2454</th><td>                             <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch11m_CombineOrERKT_RKT0_" title='llvm::PatternMatch::m_CombineOr' data-ref="_ZN4llvm12PatternMatch11m_CombineOrERKT_RKT0_">m_CombineOr</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col4 ref" href="#444Op" title='Op' data-ref="444Op">Op</a>),</td></tr>
<tr><th id="2455">2455</th><td>                                         <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE" title='llvm::PatternMatch::m_Specific' data-ref="_ZN4llvm12PatternMatch10m_SpecificEPKNS_5ValueE">m_Specific</a>(<a class="local col4 ref" href="#444Op" title='Op' data-ref="444Op">Op</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value17stripPointerCastsEv" title='llvm::Value::stripPointerCasts' data-ref="_ZN4llvm5Value17stripPointerCastsEv">stripPointerCasts</a>())),</td></tr>
<tr><th id="2456">2456</th><td>                             <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch6m_ZeroEv" title='llvm::PatternMatch::m_Zero' data-ref="_ZN4llvm12PatternMatch6m_ZeroEv">m_Zero</a>()),</td></tr>
<tr><th id="2457">2457</th><td>                      <span class='refarg'><a class="local col2 ref" href="#452TrueBB" title='TrueBB' data-ref="452TrueBB">TrueBB</a></span>, <span class='refarg'><a class="local col3 ref" href="#453FalseBB" title='FalseBB' data-ref="453FalseBB">FalseBB</a></span>)))</td></tr>
<tr><th id="2458">2458</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2459">2459</th><td>  <b>if</b> (<a class="local col4 ref" href="#454Pred" title='Pred' data-ref="454Pred">Pred</a> != <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="enum" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate::ICMP_EQ" title='llvm::CmpInst::Predicate::ICMP_EQ' data-ref="llvm::CmpInst::Predicate::ICMP_EQ">ICMP_EQ</a> &amp;&amp; <a class="local col4 ref" href="#454Pred" title='Pred' data-ref="454Pred">Pred</a> != <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="enum" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate::ICMP_NE" title='llvm::CmpInst::Predicate::ICMP_NE' data-ref="llvm::CmpInst::Predicate::ICMP_NE">ICMP_NE</a>)</td></tr>
<tr><th id="2460">2460</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2461">2461</th><td></td></tr>
<tr><th id="2462">2462</th><td>  <i>// Validate constraint #3: Ensure the null case just falls through.</i></td></tr>
<tr><th id="2463">2463</th><td>  <b>if</b> (<a class="local col7 ref" href="#447SuccBB" title='SuccBB' data-ref="447SuccBB">SuccBB</a> != (<a class="local col4 ref" href="#454Pred" title='Pred' data-ref="454Pred">Pred</a> == <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="enum" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate::ICMP_EQ" title='llvm::CmpInst::Predicate::ICMP_EQ' data-ref="llvm::CmpInst::Predicate::ICMP_EQ">ICMP_EQ</a> ? <a class="local col2 ref" href="#452TrueBB" title='TrueBB' data-ref="452TrueBB">TrueBB</a> : <a class="local col3 ref" href="#453FalseBB" title='FalseBB' data-ref="453FalseBB">FalseBB</a>))</td></tr>
<tr><th id="2464">2464</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2465">2465</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (FreeInstrBB == (Pred == ICmpInst::ICMP_EQ ? FalseBB : TrueBB) &amp;&amp; &quot;Broken CFG: missing edge from predecessor to successor&quot;) ? void (0) : __assert_fail (&quot;FreeInstrBB == (Pred == ICmpInst::ICMP_EQ ? FalseBB : TrueBB) &amp;&amp; \&quot;Broken CFG: missing edge from predecessor to successor\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2466, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a> == (<a class="local col4 ref" href="#454Pred" title='Pred' data-ref="454Pred">Pred</a> == <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="enum" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate::ICMP_EQ" title='llvm::CmpInst::Predicate::ICMP_EQ' data-ref="llvm::CmpInst::Predicate::ICMP_EQ">ICMP_EQ</a> ? <a class="local col3 ref" href="#453FalseBB" title='FalseBB' data-ref="453FalseBB">FalseBB</a> : <a class="local col2 ref" href="#452TrueBB" title='TrueBB' data-ref="452TrueBB">TrueBB</a>) &amp;&amp;</td></tr>
<tr><th id="2466">2466</th><td>         <q>"Broken CFG: missing edge from predecessor to successor"</q>);</td></tr>
<tr><th id="2467">2467</th><td></td></tr>
<tr><th id="2468">2468</th><td>  <i>// At this point, we know that everything in FreeInstrBB can be moved</i></td></tr>
<tr><th id="2469">2469</th><td><i>  // before TI.</i></td></tr>
<tr><th id="2470">2470</th><td>  <b>for</b> (<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="typedef" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock::iterator" title='llvm::BasicBlock::iterator' data-type='InstListType::iterator' data-ref="llvm::BasicBlock::iterator">iterator</a> <dfn class="local col5 decl" id="455It" title='It' data-type='BasicBlock::iterator' data-ref="455It">It</dfn> = <a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>(), <dfn class="local col6 decl" id="456End" title='End' data-type='BasicBlock::iterator' data-ref="456End">End</dfn> = <a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>();</td></tr>
<tr><th id="2471">2471</th><td>       <a class="local col5 ref" href="#455It" title='It' data-ref="455It">It</a> <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_" title='llvm::operator!=' data-ref="_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_">!=</a> <a class="local col6 ref" href="#456End" title='End' data-ref="456End">End</a>;) {</td></tr>
<tr><th id="2472">2472</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> &amp;<dfn class="local col7 decl" id="457Instr" title='Instr' data-type='llvm::Instruction &amp;' data-ref="457Instr">Instr</dfn> = <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratordeEv" title='llvm::ilist_iterator::operator*' data-ref="_ZNK4llvm14ilist_iteratordeEv">*</a><a class="local col5 ref" href="#455It" title='It' data-ref="455It">It</a><a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvm14ilist_iteratorppEi" title='llvm::ilist_iterator::operator++' data-ref="_ZN4llvm14ilist_iteratorppEi">++</a>;</td></tr>
<tr><th id="2473">2473</th><td>    <b>if</b> (&amp;<a class="local col7 ref" href="#457Instr" title='Instr' data-ref="457Instr">Instr</a> == <a class="local col8 ref" href="#448FreeInstrBBTerminator" title='FreeInstrBBTerminator' data-ref="448FreeInstrBBTerminator">FreeInstrBBTerminator</a>)</td></tr>
<tr><th id="2474">2474</th><td>      <b>break</b>;</td></tr>
<tr><th id="2475">2475</th><td>    <a class="local col7 ref" href="#457Instr" title='Instr' data-ref="457Instr">Instr</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction10moveBeforeEPS0_" title='llvm::Instruction::moveBefore' data-ref="_ZN4llvm11Instruction10moveBeforeEPS0_">moveBefore</a>(<a class="local col1 ref" href="#451TI" title='TI' data-ref="451TI">TI</a>);</td></tr>
<tr><th id="2476">2476</th><td>  }</td></tr>
<tr><th id="2477">2477</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (FreeInstrBB-&gt;size() == 1 &amp;&amp; &quot;Only the branch instruction should remain&quot;) ? void (0) : __assert_fail (&quot;FreeInstrBB-&gt;size() == 1 &amp;&amp; \&quot;Only the branch instruction should remain\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2478, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#445FreeInstrBB" title='FreeInstrBB' data-ref="445FreeInstrBB">FreeInstrBB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZNK4llvm10BasicBlock4sizeEv" title='llvm::BasicBlock::size' data-ref="_ZNK4llvm10BasicBlock4sizeEv">size</a>() == <var>1</var> &amp;&amp;</td></tr>
<tr><th id="2478">2478</th><td>         <q>"Only the branch instruction should remain"</q>);</td></tr>
<tr><th id="2479">2479</th><td>  <b>return</b> &amp;<a class="local col2 ref" href="#442FI" title='FI' data-ref="442FI">FI</a>;</td></tr>
<tr><th id="2480">2480</th><td>}</td></tr>
<tr><th id="2481">2481</th><td></td></tr>
<tr><th id="2482">2482</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner9visitFreeERNS_8CallInstE" title='llvm::InstCombiner::visitFree' data-ref="_ZN4llvm12InstCombiner9visitFreeERNS_8CallInstE">visitFree</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::CallInst" title='llvm::CallInst' data-ref="llvm::CallInst">CallInst</a> &amp;<dfn class="local col8 decl" id="458FI" title='FI' data-type='llvm::CallInst &amp;' data-ref="458FI">FI</dfn>) {</td></tr>
<tr><th id="2483">2483</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="459Op" title='Op' data-type='llvm::Value *' data-ref="459Op">Op</dfn> = <a class="local col8 ref" href="#458FI" title='FI' data-ref="458FI">FI</a>.<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CallBase13getArgOperandEj" title='llvm::CallBase::getArgOperand' data-ref="_ZNK4llvm8CallBase13getArgOperandEj">getArgOperand</a>(<var>0</var>);</td></tr>
<tr><th id="2484">2484</th><td></td></tr>
<tr><th id="2485">2485</th><td>  <i>// free undef -&gt; unreachable.</i></td></tr>
<tr><th id="2486">2486</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>&gt;(<a class="local col9 ref" href="#459Op" title='Op' data-ref="459Op">Op</a>)) {</td></tr>
<tr><th id="2487">2487</th><td>    <i>// Leave a marker since we can't modify the CFG here.</i></td></tr>
<tr><th id="2488">2488</th><td>    <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner30CreateNonTerminatorUnreachableEPNS_11InstructionE" title='llvm::InstCombiner::CreateNonTerminatorUnreachable' data-ref="_ZN4llvm12InstCombiner30CreateNonTerminatorUnreachableEPNS_11InstructionE">CreateNonTerminatorUnreachable</a>(&amp;<a class="local col8 ref" href="#458FI" title='FI' data-ref="458FI">FI</a>);</td></tr>
<tr><th id="2489">2489</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'><a class="local col8 ref" href="#458FI" title='FI' data-ref="458FI">FI</a></span>);</td></tr>
<tr><th id="2490">2490</th><td>  }</td></tr>
<tr><th id="2491">2491</th><td></td></tr>
<tr><th id="2492">2492</th><td>  <i>// If we have 'free null' delete the instruction.  This can happen in stl code</i></td></tr>
<tr><th id="2493">2493</th><td><i>  // when lots of inlining happens.</i></td></tr>
<tr><th id="2494">2494</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantPointerNull" title='llvm::ConstantPointerNull' data-ref="llvm::ConstantPointerNull">ConstantPointerNull</a>&gt;(<a class="local col9 ref" href="#459Op" title='Op' data-ref="459Op">Op</a>))</td></tr>
<tr><th id="2495">2495</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'><a class="local col8 ref" href="#458FI" title='FI' data-ref="458FI">FI</a></span>);</td></tr>
<tr><th id="2496">2496</th><td></td></tr>
<tr><th id="2497">2497</th><td>  <i>// If we optimize for code size, try to move the call to free before the null</i></td></tr>
<tr><th id="2498">2498</th><td><i>  // test so that simplify cfg can remove the empty block and dead code</i></td></tr>
<tr><th id="2499">2499</th><td><i>  // elimination the branch. I.e., helps to turn something like:</i></td></tr>
<tr><th id="2500">2500</th><td><i>  // if (foo) free(foo);</i></td></tr>
<tr><th id="2501">2501</th><td><i>  // into</i></td></tr>
<tr><th id="2502">2502</th><td><i>  // free(foo);</i></td></tr>
<tr><th id="2503">2503</th><td>  <b>if</b> (<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MinimizeSize" title='llvm::InstCombiner::MinimizeSize' data-ref="llvm::InstCombiner::MinimizeSize">MinimizeSize</a>)</td></tr>
<tr><th id="2504">2504</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col0 decl" id="460I" title='I' data-type='llvm::Instruction *' data-ref="460I"><a class="local col0 ref" href="#460I" title='I' data-ref="460I">I</a></dfn> = <a class="tu ref" href="#_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE" title='tryToMoveFreeBeforeNullTest' data-use='c' data-ref="_ZL27tryToMoveFreeBeforeNullTestRN4llvm8CallInstERKNS_10DataLayoutE">tryToMoveFreeBeforeNullTest</a>(<span class='refarg'><a class="local col8 ref" href="#458FI" title='FI' data-ref="458FI">FI</a></span>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>))</td></tr>
<tr><th id="2505">2505</th><td>      <b>return</b> <a class="local col0 ref" href="#460I" title='I' data-ref="460I">I</a>;</td></tr>
<tr><th id="2506">2506</th><td></td></tr>
<tr><th id="2507">2507</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2508">2508</th><td>}</td></tr>
<tr><th id="2509">2509</th><td></td></tr>
<tr><th id="2510">2510</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner15visitReturnInstERNS_10ReturnInstE" title='llvm::InstCombiner::visitReturnInst' data-ref="_ZN4llvm12InstCombiner15visitReturnInstERNS_10ReturnInstE">visitReturnInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ReturnInst" title='llvm::ReturnInst' data-ref="llvm::ReturnInst">ReturnInst</a> &amp;<dfn class="local col1 decl" id="461RI" title='RI' data-type='llvm::ReturnInst &amp;' data-ref="461RI">RI</dfn>) {</td></tr>
<tr><th id="2511">2511</th><td>  <b>if</b> (<a class="local col1 ref" href="#461RI" title='RI' data-ref="461RI">RI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2910" title='llvm::ReturnInst::getNumOperands' data-ref="_ZNK4llvm10ReturnInst14getNumOperandsEv">getNumOperands</a>() == <var>0</var>) <i>// ret void</i></td></tr>
<tr><th id="2512">2512</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2513">2513</th><td></td></tr>
<tr><th id="2514">2514</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="462ResultOp" title='ResultOp' data-type='llvm::Value *' data-ref="462ResultOp">ResultOp</dfn> = <a class="local col1 ref" href="#461RI" title='RI' data-ref="461RI">RI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2910" title='llvm::ReturnInst::getOperand' data-ref="_ZNK4llvm10ReturnInst10getOperandEj">getOperand</a>(<var>0</var>);</td></tr>
<tr><th id="2515">2515</th><td>  <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col3 decl" id="463VTy" title='VTy' data-type='llvm::Type *' data-ref="463VTy">VTy</dfn> = <a class="local col2 ref" href="#462ResultOp" title='ResultOp' data-ref="462ResultOp">ResultOp</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="2516">2516</th><td>  <b>if</b> (!<a class="local col3 ref" href="#463VTy" title='VTy' data-ref="463VTy">VTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>())</td></tr>
<tr><th id="2517">2517</th><td>    <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2518">2518</th><td></td></tr>
<tr><th id="2519">2519</th><td>  <i>// There might be assume intrinsics dominating this return that completely</i></td></tr>
<tr><th id="2520">2520</th><td><i>  // determine the value. If so, constant fold it.</i></td></tr>
<tr><th id="2521">2521</th><td>  <a class="type" href="../../../include/llvm/Support/KnownBits.h.html#llvm::KnownBits" title='llvm::KnownBits' data-ref="llvm::KnownBits">KnownBits</a> <dfn class="local col4 decl" id="464Known" title='Known' data-type='llvm::KnownBits' data-ref="464Known">Known</dfn> = <a class="member" href="InstCombineInternal.h.html#_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE" title='llvm::InstCombiner::computeKnownBits' data-ref="_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE">computeKnownBits</a>(<a class="local col2 ref" href="#462ResultOp" title='ResultOp' data-ref="462ResultOp">ResultOp</a>, <var>0</var>, &amp;<a class="local col1 ref" href="#461RI" title='RI' data-ref="461RI">RI</a>);</td></tr>
<tr><th id="2522">2522</th><td>  <b>if</b> (<a class="local col4 ref" href="#464Known" title='Known' data-ref="464Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits10isConstantEv" title='llvm::KnownBits::isConstant' data-ref="_ZNK4llvm9KnownBits10isConstantEv">isConstant</a>())</td></tr>
<tr><th id="2523">2523</th><td>    <a class="local col1 ref" href="#461RI" title='RI' data-ref="461RI">RI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#2910" title='llvm::ReturnInst::setOperand' data-ref="_ZN4llvm10ReturnInst10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant15getIntegerValueEPNS_4TypeERKNS_5APIntE" title='llvm::Constant::getIntegerValue' data-ref="_ZN4llvm8Constant15getIntegerValueEPNS_4TypeERKNS_5APIntE">getIntegerValue</a>(<a class="local col3 ref" href="#463VTy" title='VTy' data-ref="463VTy">VTy</a>, <a class="local col4 ref" href="#464Known" title='Known' data-ref="464Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits11getConstantEv" title='llvm::KnownBits::getConstant' data-ref="_ZNK4llvm9KnownBits11getConstantEv">getConstant</a>()));</td></tr>
<tr><th id="2524">2524</th><td></td></tr>
<tr><th id="2525">2525</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2526">2526</th><td>}</td></tr>
<tr><th id="2527">2527</th><td></td></tr>
<tr><th id="2528">2528</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner15visitBranchInstERNS_10BranchInstE" title='llvm::InstCombiner::visitBranchInst' data-ref="_ZN4llvm12InstCombiner15visitBranchInstERNS_10BranchInstE">visitBranchInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BranchInst" title='llvm::BranchInst' data-ref="llvm::BranchInst">BranchInst</a> &amp;<dfn class="local col5 decl" id="465BI" title='BI' data-type='llvm::BranchInst &amp;' data-ref="465BI">BI</dfn>) {</td></tr>
<tr><th id="2529">2529</th><td>  <i>// Change br (not X), label True, label False to: br X, label False, True</i></td></tr>
<tr><th id="2530">2530</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="466X" title='X' data-type='llvm::Value *' data-ref="466X">X</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="2531">2531</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col7 decl" id="467TrueDest" title='TrueDest' data-type='llvm::BasicBlock *' data-ref="467TrueDest">TrueDest</dfn>;</td></tr>
<tr><th id="2532">2532</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col8 decl" id="468FalseDest" title='FalseDest' data-type='llvm::BasicBlock *' data-ref="468FalseDest">FalseDest</dfn>;</td></tr>
<tr><th id="2533">2533</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(&amp;<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_" title='llvm::PatternMatch::m_Br' data-ref="_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_">m_Br</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_NotERKT_" title='llvm::PatternMatch::m_Not' data-ref="_ZN4llvm12PatternMatch5m_NotERKT_">m_Not</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col6 ref" href="#466X" title='X' data-ref="466X">X</a></span>)), <span class='refarg'><a class="local col7 ref" href="#467TrueDest" title='TrueDest' data-ref="467TrueDest">TrueDest</a></span>, <span class='refarg'><a class="local col8 ref" href="#468FalseDest" title='FalseDest' data-ref="468FalseDest">FalseDest</a></span>)) &amp;&amp;</td></tr>
<tr><th id="2534">2534</th><td>      !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col6 ref" href="#466X" title='X' data-ref="466X">X</a>)) {</td></tr>
<tr><th id="2535">2535</th><td>    <i>// Swap Destinations and condition...</i></td></tr>
<tr><th id="2536">2536</th><td>    <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10BranchInst12setConditionEPNS_5ValueE" title='llvm::BranchInst::setCondition' data-ref="_ZN4llvm10BranchInst12setConditionEPNS_5ValueE">setCondition</a>(<a class="local col6 ref" href="#466X" title='X' data-ref="466X">X</a>);</td></tr>
<tr><th id="2537">2537</th><td>    <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10BranchInst14swapSuccessorsEv" title='llvm::BranchInst::swapSuccessors' data-ref="_ZN4llvm10BranchInst14swapSuccessorsEv">swapSuccessors</a>();</td></tr>
<tr><th id="2538">2538</th><td>    <b>return</b> &amp;<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>;</td></tr>
<tr><th id="2539">2539</th><td>  }</td></tr>
<tr><th id="2540">2540</th><td></td></tr>
<tr><th id="2541">2541</th><td>  <i>// If the condition is irrelevant, remove the use so that other</i></td></tr>
<tr><th id="2542">2542</th><td><i>  // transforms on the condition become more effective.</i></td></tr>
<tr><th id="2543">2543</th><td>  <b>if</b> (<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst13isConditionalEv" title='llvm::BranchInst::isConditional' data-ref="_ZNK4llvm10BranchInst13isConditionalEv">isConditional</a>() &amp;&amp; !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getConditionEv" title='llvm::BranchInst::getCondition' data-ref="_ZNK4llvm10BranchInst12getConditionEv">getCondition</a>()) &amp;&amp;</td></tr>
<tr><th id="2544">2544</th><td>      <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getSuccessorEj" title='llvm::BranchInst::getSuccessor' data-ref="_ZNK4llvm10BranchInst12getSuccessorEj">getSuccessor</a>(<var>0</var>) == <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getSuccessorEj" title='llvm::BranchInst::getSuccessor' data-ref="_ZNK4llvm10BranchInst12getSuccessorEj">getSuccessor</a>(<var>1</var>)) {</td></tr>
<tr><th id="2545">2545</th><td>    <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10BranchInst12setConditionEPNS_5ValueE" title='llvm::BranchInst::setCondition' data-ref="_ZN4llvm10BranchInst12setConditionEPNS_5ValueE">setCondition</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt8getFalseEPNS_4TypeE" title='llvm::ConstantInt::getFalse' data-ref="_ZN4llvm11ConstantInt8getFalseEPNS_4TypeE">getFalse</a>(<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getConditionEv" title='llvm::BranchInst::getCondition' data-ref="_ZNK4llvm10BranchInst12getConditionEv">getCondition</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()));</td></tr>
<tr><th id="2546">2546</th><td>    <b>return</b> &amp;<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>;</td></tr>
<tr><th id="2547">2547</th><td>  }</td></tr>
<tr><th id="2548">2548</th><td></td></tr>
<tr><th id="2549">2549</th><td>  <i>// Canonicalize, for example, icmp_ne -&gt; icmp_eq or fcmp_one -&gt; fcmp_oeq.</i></td></tr>
<tr><th id="2550">2550</th><td>  <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a>::<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate" title='llvm::CmpInst::Predicate' data-ref="llvm::CmpInst::Predicate">Predicate</a> <dfn class="local col9 decl" id="469Pred" title='Pred' data-type='CmpInst::Predicate' data-ref="469Pred">Pred</dfn>;</td></tr>
<tr><th id="2551">2551</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(&amp;<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_" title='llvm::PatternMatch::m_Br' data-ref="_ZN4llvm12PatternMatch4m_BrERKT_RPNS_10BasicBlockES6_">m_Br</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch8m_OneUseERKT_" title='llvm::PatternMatch::m_OneUse' data-ref="_ZN4llvm12PatternMatch8m_OneUseERKT_">m_OneUse</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_CmpERNS_7CmpInst9PredicateERKT_RKT0_" title='llvm::PatternMatch::m_Cmp' data-ref="_ZN4llvm12PatternMatch5m_CmpERNS_7CmpInst9PredicateERKT_RKT0_">m_Cmp</a>(<span class='refarg'><a class="local col9 ref" href="#469Pred" title='Pred' data-ref="469Pred">Pred</a></span>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueEv" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueEv">m_Value</a>(), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueEv" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueEv">m_Value</a>())), <span class='refarg'><a class="local col7 ref" href="#467TrueDest" title='TrueDest' data-ref="467TrueDest">TrueDest</a></span>,</td></tr>
<tr><th id="2552">2552</th><td>                      <span class='refarg'><a class="local col8 ref" href="#468FalseDest" title='FalseDest' data-ref="468FalseDest">FalseDest</a></span>)) &amp;&amp;</td></tr>
<tr><th id="2553">2553</th><td>      !<a class="ref" href="InstCombineInternal.h.html#_ZN4llvmL20isCanonicalPredicateENS_7CmpInst9PredicateE" title='llvm::isCanonicalPredicate' data-ref="_ZN4llvmL20isCanonicalPredicateENS_7CmpInst9PredicateE">isCanonicalPredicate</a>(<a class="local col9 ref" href="#469Pred" title='Pred' data-ref="469Pred">Pred</a>)) {</td></tr>
<tr><th id="2554">2554</th><td>    <i>// Swap destinations and condition.</i></td></tr>
<tr><th id="2555">2555</th><td>    <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a> *<dfn class="local col0 decl" id="470Cond" title='Cond' data-type='llvm::CmpInst *' data-ref="470Cond">Cond</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a>&gt;(<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getConditionEv" title='llvm::BranchInst::getCondition' data-ref="_ZNK4llvm10BranchInst12getConditionEv">getCondition</a>());</td></tr>
<tr><th id="2556">2556</th><td>    <a class="local col0 ref" href="#470Cond" title='Cond' data-ref="470Cond">Cond</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm7CmpInst12setPredicateENS0_9PredicateE" title='llvm::CmpInst::setPredicate' data-ref="_ZN4llvm7CmpInst12setPredicateENS0_9PredicateE">setPredicate</a>(<a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst" title='llvm::CmpInst' data-ref="llvm::CmpInst">CmpInst</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm7CmpInst19getInversePredicateENS0_9PredicateE" title='llvm::CmpInst::getInversePredicate' data-ref="_ZN4llvm7CmpInst19getInversePredicateENS0_9PredicateE">getInversePredicate</a>(<a class="local col9 ref" href="#469Pred" title='Pred' data-ref="469Pred">Pred</a>));</td></tr>
<tr><th id="2557">2557</th><td>    <a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10BranchInst14swapSuccessorsEv" title='llvm::BranchInst::swapSuccessors' data-ref="_ZN4llvm10BranchInst14swapSuccessorsEv">swapSuccessors</a>();</td></tr>
<tr><th id="2558">2558</th><td>    <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col0 ref" href="#470Cond" title='Cond' data-ref="470Cond">Cond</a>);</td></tr>
<tr><th id="2559">2559</th><td>    <b>return</b> &amp;<a class="local col5 ref" href="#465BI" title='BI' data-ref="465BI">BI</a>;</td></tr>
<tr><th id="2560">2560</th><td>  }</td></tr>
<tr><th id="2561">2561</th><td></td></tr>
<tr><th id="2562">2562</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2563">2563</th><td>}</td></tr>
<tr><th id="2564">2564</th><td></td></tr>
<tr><th id="2565">2565</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner15visitSwitchInstERNS_10SwitchInstE" title='llvm::InstCombiner::visitSwitchInst' data-ref="_ZN4llvm12InstCombiner15visitSwitchInstERNS_10SwitchInstE">visitSwitchInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SwitchInst" title='llvm::SwitchInst' data-ref="llvm::SwitchInst">SwitchInst</a> &amp;<dfn class="local col1 decl" id="471SI" title='SI' data-type='llvm::SwitchInst &amp;' data-ref="471SI">SI</dfn>) {</td></tr>
<tr><th id="2566">2566</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="472Cond" title='Cond' data-type='llvm::Value *' data-ref="472Cond">Cond</dfn> = <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst12getConditionEv" title='llvm::SwitchInst::getCondition' data-ref="_ZNK4llvm10SwitchInst12getConditionEv">getCondition</a>();</td></tr>
<tr><th id="2567">2567</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="473Op0" title='Op0' data-type='llvm::Value *' data-ref="473Op0">Op0</dfn>;</td></tr>
<tr><th id="2568">2568</th><td>  <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col4 decl" id="474AddRHS" title='AddRHS' data-type='llvm::ConstantInt *' data-ref="474AddRHS">AddRHS</dfn>;</td></tr>
<tr><th id="2569">2569</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5matchEPT_RKT0_" title='llvm::PatternMatch::match' data-ref="_ZN4llvm12PatternMatch5matchEPT_RKT0_">match</a>(<a class="local col2 ref" href="#472Cond" title='Cond' data-ref="472Cond">Cond</a>, <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch5m_AddERKT_RKT0_" title='llvm::PatternMatch::m_Add' data-ref="_ZN4llvm12PatternMatch5m_AddERKT_RKT0_">m_Add</a>(<a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE" title='llvm::PatternMatch::m_Value' data-ref="_ZN4llvm12PatternMatch7m_ValueERPNS_5ValueE">m_Value</a>(<span class='refarg'><a class="local col3 ref" href="#473Op0" title='Op0' data-ref="473Op0">Op0</a></span>), <a class="ref" href="../../../include/llvm/IR/PatternMatch.h.html#_ZN4llvm12PatternMatch13m_ConstantIntERPNS_11ConstantIntE" title='llvm::PatternMatch::m_ConstantInt' data-ref="_ZN4llvm12PatternMatch13m_ConstantIntERPNS_11ConstantIntE">m_ConstantInt</a>(<span class='refarg'><a class="local col4 ref" href="#474AddRHS" title='AddRHS' data-ref="474AddRHS">AddRHS</a></span>)))) {</td></tr>
<tr><th id="2570">2570</th><td>    <i>// Change 'switch (X+4) case 1:' into 'switch (X) case -3'.</i></td></tr>
<tr><th id="2571">2571</th><td>    <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="475Case" title='Case' data-type='llvm::SwitchInst::CaseHandle' data-ref="475Case">Case</dfn> : <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst5casesEv" title='llvm::SwitchInst::cases' data-ref="_ZN4llvm10SwitchInst5casesEv">cases</a>()) {</td></tr>
<tr><th id="2572">2572</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="476NewCase" title='NewCase' data-type='llvm::Constant *' data-ref="476NewCase">NewCase</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getSubEPNS_8ConstantES2_bb" title='llvm::ConstantExpr::getSub' data-ref="_ZN4llvm12ConstantExpr6getSubEPNS_8ConstantES2_bb">getSub</a>(<a class="local col5 ref" href="#475Case" title='Case' data-ref="475Case">Case</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv" title='llvm::SwitchInst::CaseHandleImpl::getCaseValue' data-ref="_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv">getCaseValue</a>(), <a class="local col4 ref" href="#474AddRHS" title='AddRHS' data-ref="474AddRHS">AddRHS</a>);</td></tr>
<tr><th id="2573">2573</th><td>      <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (isa&lt;ConstantInt&gt;(NewCase) &amp;&amp; &quot;Result of expression should be constant&quot;) ? void (0) : __assert_fail (&quot;isa&lt;ConstantInt&gt;(NewCase) &amp;&amp; \&quot;Result of expression should be constant\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2574, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col6 ref" href="#476NewCase" title='NewCase' data-ref="476NewCase">NewCase</a>) &amp;&amp;</td></tr>
<tr><th id="2574">2574</th><td>             <q>"Result of expression should be constant"</q>);</td></tr>
<tr><th id="2575">2575</th><td>      <a class="local col5 ref" href="#475Case" title='Case' data-ref="475Case">Case</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst10CaseHandle8setValueEPNS_11ConstantIntE" title='llvm::SwitchInst::CaseHandle::setValue' data-ref="_ZN4llvm10SwitchInst10CaseHandle8setValueEPNS_11ConstantIntE">setValue</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col6 ref" href="#476NewCase" title='NewCase' data-ref="476NewCase">NewCase</a>));</td></tr>
<tr><th id="2576">2576</th><td>    }</td></tr>
<tr><th id="2577">2577</th><td>    <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst12setConditionEPNS_5ValueE" title='llvm::SwitchInst::setCondition' data-ref="_ZN4llvm10SwitchInst12setConditionEPNS_5ValueE">setCondition</a>(<a class="local col3 ref" href="#473Op0" title='Op0' data-ref="473Op0">Op0</a>);</td></tr>
<tr><th id="2578">2578</th><td>    <b>return</b> &amp;<a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>;</td></tr>
<tr><th id="2579">2579</th><td>  }</td></tr>
<tr><th id="2580">2580</th><td></td></tr>
<tr><th id="2581">2581</th><td>  <a class="type" href="../../../include/llvm/Support/KnownBits.h.html#llvm::KnownBits" title='llvm::KnownBits' data-ref="llvm::KnownBits">KnownBits</a> <dfn class="local col7 decl" id="477Known" title='Known' data-type='llvm::KnownBits' data-ref="477Known">Known</dfn> = <a class="member" href="InstCombineInternal.h.html#_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE" title='llvm::InstCombiner::computeKnownBits' data-ref="_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE">computeKnownBits</a>(<a class="local col2 ref" href="#472Cond" title='Cond' data-ref="472Cond">Cond</a>, <var>0</var>, &amp;<a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>);</td></tr>
<tr><th id="2582">2582</th><td>  <em>unsigned</em> <dfn class="local col8 decl" id="478LeadingKnownZeros" title='LeadingKnownZeros' data-type='unsigned int' data-ref="478LeadingKnownZeros">LeadingKnownZeros</dfn> = <a class="local col7 ref" href="#477Known" title='Known' data-ref="477Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits20countMinLeadingZerosEv" title='llvm::KnownBits::countMinLeadingZeros' data-ref="_ZNK4llvm9KnownBits20countMinLeadingZerosEv">countMinLeadingZeros</a>();</td></tr>
<tr><th id="2583">2583</th><td>  <em>unsigned</em> <dfn class="local col9 decl" id="479LeadingKnownOnes" title='LeadingKnownOnes' data-type='unsigned int' data-ref="479LeadingKnownOnes">LeadingKnownOnes</dfn> = <a class="local col7 ref" href="#477Known" title='Known' data-ref="477Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits19countMinLeadingOnesEv" title='llvm::KnownBits::countMinLeadingOnes' data-ref="_ZNK4llvm9KnownBits19countMinLeadingOnesEv">countMinLeadingOnes</a>();</td></tr>
<tr><th id="2584">2584</th><td></td></tr>
<tr><th id="2585">2585</th><td>  <i>// Compute the number of leading bits we can ignore.</i></td></tr>
<tr><th id="2586">2586</th><td><i>  // TODO: A better way to determine this would use ComputeNumSignBits().</i></td></tr>
<tr><th id="2587">2587</th><td>  <b>for</b> (<em>auto</em> &amp;<dfn class="local col0 decl" id="480C" title='C' data-type='llvm::SwitchInst::CaseHandle &amp;' data-ref="480C">C</dfn> : <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst5casesEv" title='llvm::SwitchInst::cases' data-ref="_ZN4llvm10SwitchInst5casesEv">cases</a>()) {</td></tr>
<tr><th id="2588">2588</th><td>    <a class="local col8 ref" href="#478LeadingKnownZeros" title='LeadingKnownZeros' data-ref="478LeadingKnownZeros">LeadingKnownZeros</a> = <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>(</td></tr>
<tr><th id="2589">2589</th><td>        <a class="local col8 ref" href="#478LeadingKnownZeros" title='LeadingKnownZeros' data-ref="478LeadingKnownZeros">LeadingKnownZeros</a>, <a class="local col0 ref" href="#480C" title='C' data-ref="480C">C</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv" title='llvm::SwitchInst::CaseHandleImpl::getCaseValue' data-ref="_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv">getCaseValue</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt8getValueEv" title='llvm::ConstantInt::getValue' data-ref="_ZNK4llvm11ConstantInt8getValueEv">getValue</a>().<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt17countLeadingZerosEv" title='llvm::APInt::countLeadingZeros' data-ref="_ZNK4llvm5APInt17countLeadingZerosEv">countLeadingZeros</a>());</td></tr>
<tr><th id="2590">2590</th><td>    <a class="local col9 ref" href="#479LeadingKnownOnes" title='LeadingKnownOnes' data-ref="479LeadingKnownOnes">LeadingKnownOnes</a> = <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/algorithmfwd.h.html#_ZSt3minRKT_S1_" title='std::min' data-ref="_ZSt3minRKT_S1_">min</a>(</td></tr>
<tr><th id="2591">2591</th><td>        <a class="local col9 ref" href="#479LeadingKnownOnes" title='LeadingKnownOnes' data-ref="479LeadingKnownOnes">LeadingKnownOnes</a>, <a class="local col0 ref" href="#480C" title='C' data-ref="480C">C</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv" title='llvm::SwitchInst::CaseHandleImpl::getCaseValue' data-ref="_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv">getCaseValue</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt8getValueEv" title='llvm::ConstantInt::getValue' data-ref="_ZNK4llvm11ConstantInt8getValueEv">getValue</a>().<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt16countLeadingOnesEv" title='llvm::APInt::countLeadingOnes' data-ref="_ZNK4llvm5APInt16countLeadingOnesEv">countLeadingOnes</a>());</td></tr>
<tr><th id="2592">2592</th><td>  }</td></tr>
<tr><th id="2593">2593</th><td></td></tr>
<tr><th id="2594">2594</th><td>  <em>unsigned</em> <dfn class="local col1 decl" id="481NewWidth" title='NewWidth' data-type='unsigned int' data-ref="481NewWidth">NewWidth</dfn> = <a class="local col7 ref" href="#477Known" title='Known' data-ref="477Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits11getBitWidthEv" title='llvm::KnownBits::getBitWidth' data-ref="_ZNK4llvm9KnownBits11getBitWidthEv">getBitWidth</a>() - <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/algorithmfwd.h.html#_ZSt3maxRKT_S1_" title='std::max' data-ref="_ZSt3maxRKT_S1_">max</a>(<a class="local col8 ref" href="#478LeadingKnownZeros" title='LeadingKnownZeros' data-ref="478LeadingKnownZeros">LeadingKnownZeros</a>, <a class="local col9 ref" href="#479LeadingKnownOnes" title='LeadingKnownOnes' data-ref="479LeadingKnownOnes">LeadingKnownOnes</a>);</td></tr>
<tr><th id="2595">2595</th><td></td></tr>
<tr><th id="2596">2596</th><td>  <i>// Shrink the condition operand if the new type is smaller than the old type.</i></td></tr>
<tr><th id="2597">2597</th><td><i>  // But do not shrink to a non-standard type, because backend can't generate </i></td></tr>
<tr><th id="2598">2598</th><td><i>  // good code for that yet.</i></td></tr>
<tr><th id="2599">2599</th><td><i>  // TODO: We can make it aggressive again after fixing PR39569.</i></td></tr>
<tr><th id="2600">2600</th><td>  <b>if</b> (<a class="local col1 ref" href="#481NewWidth" title='NewWidth' data-ref="481NewWidth">NewWidth</a> &gt; <var>0</var> &amp;&amp; <a class="local col1 ref" href="#481NewWidth" title='NewWidth' data-ref="481NewWidth">NewWidth</a> &lt; <a class="local col7 ref" href="#477Known" title='Known' data-ref="477Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits11getBitWidthEv" title='llvm::KnownBits::getBitWidth' data-ref="_ZNK4llvm9KnownBits11getBitWidthEv">getBitWidth</a>() &amp;&amp;</td></tr>
<tr><th id="2601">2601</th><td>      <a class="member" href="#_ZNK4llvm12InstCombiner16shouldChangeTypeEjj" title='llvm::InstCombiner::shouldChangeType' data-ref="_ZNK4llvm12InstCombiner16shouldChangeTypeEjj">shouldChangeType</a>(<a class="local col7 ref" href="#477Known" title='Known' data-ref="477Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits11getBitWidthEv" title='llvm::KnownBits::getBitWidth' data-ref="_ZNK4llvm9KnownBits11getBitWidthEv">getBitWidth</a>(), <a class="local col1 ref" href="#481NewWidth" title='NewWidth' data-ref="481NewWidth">NewWidth</a>)) {</td></tr>
<tr><th id="2602">2602</th><td>    <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a> *<dfn class="local col2 decl" id="482Ty" title='Ty' data-type='llvm::IntegerType *' data-ref="482Ty">Ty</dfn> = <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a>::<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11IntegerType3getERNS_11LLVMContextEj" title='llvm::IntegerType::get' data-ref="_ZN4llvm11IntegerType3getERNS_11LLVMContextEj">get</a>(<span class='refarg'><a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value10getContextEv" title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</a>()</span>, <a class="local col1 ref" href="#481NewWidth" title='NewWidth' data-ref="481NewWidth">NewWidth</a>);</td></tr>
<tr><th id="2603">2603</th><td>    <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(&amp;<a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>);</td></tr>
<tr><th id="2604">2604</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="483NewCond" title='NewCond' data-type='llvm::Value *' data-ref="483NewCond">NewCond</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(<a class="local col2 ref" href="#472Cond" title='Cond' data-ref="472Cond">Cond</a>, <a class="local col2 ref" href="#482Ty" title='Ty' data-ref="482Ty">Ty</a>, <a class="ref fake" href="../../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"trunc"</q>);</td></tr>
<tr><th id="2605">2605</th><td>    <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst12setConditionEPNS_5ValueE" title='llvm::SwitchInst::setCondition' data-ref="_ZN4llvm10SwitchInst12setConditionEPNS_5ValueE">setCondition</a>(<a class="local col3 ref" href="#483NewCond" title='NewCond' data-ref="483NewCond">NewCond</a>);</td></tr>
<tr><th id="2606">2606</th><td></td></tr>
<tr><th id="2607">2607</th><td>    <b>for</b> (<em>auto</em> <dfn class="local col4 decl" id="484Case" title='Case' data-type='llvm::SwitchInst::CaseHandle' data-ref="484Case">Case</dfn> : <a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst5casesEv" title='llvm::SwitchInst::cases' data-ref="_ZN4llvm10SwitchInst5casesEv">cases</a>()) {</td></tr>
<tr><th id="2608">2608</th><td>      <a class="type" href="../../../include/llvm/ADT/APInt.h.html#llvm::APInt" title='llvm::APInt' data-ref="llvm::APInt">APInt</a> <dfn class="local col5 decl" id="485TruncatedCase" title='TruncatedCase' data-type='llvm::APInt' data-ref="485TruncatedCase">TruncatedCase</dfn> = <a class="local col4 ref" href="#484Case" title='Case' data-ref="484Case">Case</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv" title='llvm::SwitchInst::CaseHandleImpl::getCaseValue' data-ref="_ZNK4llvm10SwitchInst14CaseHandleImpl12getCaseValueEv">getCaseValue</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt8getValueEv" title='llvm::ConstantInt::getValue' data-ref="_ZNK4llvm11ConstantInt8getValueEv">getValue</a>().<a class="ref" href="../../../include/llvm/ADT/APInt.h.html#_ZNK4llvm5APInt5truncEj" title='llvm::APInt::trunc' data-ref="_ZNK4llvm5APInt5truncEj">trunc</a>(<a class="local col1 ref" href="#481NewWidth" title='NewWidth' data-ref="481NewWidth">NewWidth</a>);</td></tr>
<tr><th id="2609">2609</th><td>      <a class="local col4 ref" href="#484Case" title='Case' data-ref="484Case">Case</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst10CaseHandle8setValueEPNS_11ConstantIntE" title='llvm::SwitchInst::CaseHandle::setValue' data-ref="_ZN4llvm10SwitchInst10CaseHandle8setValueEPNS_11ConstantIntE">setValue</a>(<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getERNS_11LLVMContextERKNS_5APIntE" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getERNS_11LLVMContextERKNS_5APIntE">get</a>(<span class='refarg'><a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value10getContextEv" title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</a>()</span>, <a class="local col5 ref" href="#485TruncatedCase" title='TruncatedCase' data-ref="485TruncatedCase">TruncatedCase</a>));</td></tr>
<tr><th id="2610">2610</th><td>    }</td></tr>
<tr><th id="2611">2611</th><td>    <b>return</b> &amp;<a class="local col1 ref" href="#471SI" title='SI' data-ref="471SI">SI</a>;</td></tr>
<tr><th id="2612">2612</th><td>  }</td></tr>
<tr><th id="2613">2613</th><td></td></tr>
<tr><th id="2614">2614</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2615">2615</th><td>}</td></tr>
<tr><th id="2616">2616</th><td></td></tr>
<tr><th id="2617">2617</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner21visitExtractValueInstERNS_16ExtractValueInstE" title='llvm::InstCombiner::visitExtractValueInst' data-ref="_ZN4llvm12InstCombiner21visitExtractValueInstERNS_16ExtractValueInstE">visitExtractValueInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a> &amp;<dfn class="local col6 decl" id="486EV" title='EV' data-type='llvm::ExtractValueInst &amp;' data-ref="486EV">EV</dfn>) {</td></tr>
<tr><th id="2618">2618</th><td>  <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="487Agg" title='Agg' data-type='llvm::Value *' data-ref="487Agg">Agg</dfn> = <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm16ExtractValueInst19getAggregateOperandEv" title='llvm::ExtractValueInst::getAggregateOperand' data-ref="_ZN4llvm16ExtractValueInst19getAggregateOperandEv">getAggregateOperand</a>();</td></tr>
<tr><th id="2619">2619</th><td></td></tr>
<tr><th id="2620">2620</th><td>  <b>if</b> (!<a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10hasIndicesEv" title='llvm::ExtractValueInst::hasIndices' data-ref="_ZNK4llvm16ExtractValueInst10hasIndicesEv">hasIndices</a>())</td></tr>
<tr><th id="2621">2621</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a></span>, <a class="local col7 ref" href="#487Agg" title='Agg' data-ref="487Agg">Agg</a>);</td></tr>
<tr><th id="2622">2622</th><td></td></tr>
<tr><th id="2623">2623</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="488V" title='V' data-type='llvm::Value *' data-ref="488V"><a class="local col8 ref" href="#488V" title='V' data-ref="488V">V</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZN4llvm24SimplifyExtractValueInstEPNS_5ValueENS_8ArrayRefIjEERKNS_13SimplifyQueryE" title='llvm::SimplifyExtractValueInst' data-ref="_ZN4llvm24SimplifyExtractValueInstEPNS_5ValueENS_8ArrayRefIjEERKNS_13SimplifyQueryE">SimplifyExtractValueInst</a>(<a class="local col7 ref" href="#487Agg" title='Agg' data-ref="487Agg">Agg</a>, <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10getIndicesEv" title='llvm::ExtractValueInst::getIndices' data-ref="_ZNK4llvm16ExtractValueInst10getIndicesEv">getIndices</a>(),</td></tr>
<tr><th id="2624">2624</th><td>                                          <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::SQ" title='llvm::InstCombiner::SQ' data-ref="llvm::InstCombiner::SQ">SQ</a>.<a class="ref" href="../../../include/llvm/Analysis/InstructionSimplify.h.html#_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE" title='llvm::SimplifyQuery::getWithInstruction' data-ref="_ZNK4llvm13SimplifyQuery18getWithInstructionEPNS_11InstructionE">getWithInstruction</a>(&amp;<a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>)))</td></tr>
<tr><th id="2625">2625</th><td>    <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a></span>, <a class="local col8 ref" href="#488V" title='V' data-ref="488V">V</a>);</td></tr>
<tr><th id="2626">2626</th><td></td></tr>
<tr><th id="2627">2627</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InsertValueInst" title='llvm::InsertValueInst' data-ref="llvm::InsertValueInst">InsertValueInst</a> *<dfn class="local col9 decl" id="489IV" title='IV' data-type='llvm::InsertValueInst *' data-ref="489IV"><a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InsertValueInst" title='llvm::InsertValueInst' data-ref="llvm::InsertValueInst">InsertValueInst</a>&gt;(<a class="local col7 ref" href="#487Agg" title='Agg' data-ref="487Agg">Agg</a>)) {</td></tr>
<tr><th id="2628">2628</th><td>    <i>// We're extracting from an insertvalue instruction, compare the indices</i></td></tr>
<tr><th id="2629">2629</th><td>    <em>const</em> <em>unsigned</em> *<dfn class="local col0 decl" id="490exti" title='exti' data-type='const unsigned int *' data-ref="490exti">exti</dfn>, *<dfn class="local col1 decl" id="491exte" title='exte' data-type='const unsigned int *' data-ref="491exte">exte</dfn>, *<dfn class="local col2 decl" id="492insi" title='insi' data-type='const unsigned int *' data-ref="492insi">insi</dfn>, *<dfn class="local col3 decl" id="493inse" title='inse' data-type='const unsigned int *' data-ref="493inse">inse</dfn>;</td></tr>
<tr><th id="2630">2630</th><td>    <b>for</b> (<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a> = <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst9idx_beginEv" title='llvm::ExtractValueInst::idx_begin' data-ref="_ZNK4llvm16ExtractValueInst9idx_beginEv">idx_begin</a>(), <a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a> = <a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm15InsertValueInst9idx_beginEv" title='llvm::InsertValueInst::idx_begin' data-ref="_ZNK4llvm15InsertValueInst9idx_beginEv">idx_begin</a>(),</td></tr>
<tr><th id="2631">2631</th><td>         <a class="local col1 ref" href="#491exte" title='exte' data-ref="491exte">exte</a> = <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst7idx_endEv" title='llvm::ExtractValueInst::idx_end' data-ref="_ZNK4llvm16ExtractValueInst7idx_endEv">idx_end</a>(), <a class="local col3 ref" href="#493inse" title='inse' data-ref="493inse">inse</a> = <a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm15InsertValueInst7idx_endEv" title='llvm::InsertValueInst::idx_end' data-ref="_ZNK4llvm15InsertValueInst7idx_endEv">idx_end</a>();</td></tr>
<tr><th id="2632">2632</th><td>         <a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a> != <a class="local col1 ref" href="#491exte" title='exte' data-ref="491exte">exte</a> &amp;&amp; <a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a> != <a class="local col3 ref" href="#493inse" title='inse' data-ref="493inse">inse</a>;</td></tr>
<tr><th id="2633">2633</th><td>         ++<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a>, ++<a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a>) {</td></tr>
<tr><th id="2634">2634</th><td>      <b>if</b> (*<a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a> != *<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a>)</td></tr>
<tr><th id="2635">2635</th><td>        <i>// The insert and extract both reference distinctly different elements.</i></td></tr>
<tr><th id="2636">2636</th><td><i>        // This means the extract is not influenced by the insert, and we can</i></td></tr>
<tr><th id="2637">2637</th><td><i>        // replace the aggregate operand of the extract with the aggregate</i></td></tr>
<tr><th id="2638">2638</th><td><i>        // operand of the insert. i.e., replace</i></td></tr>
<tr><th id="2639">2639</th><td><i>        // %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</i></td></tr>
<tr><th id="2640">2640</th><td><i>        // %E = extractvalue { i32, { i32 } } %I, 0</i></td></tr>
<tr><th id="2641">2641</th><td><i>        // with</i></td></tr>
<tr><th id="2642">2642</th><td><i>        // %E = extractvalue { i32, { i32 } } %A, 0</i></td></tr>
<tr><th id="2643">2643</th><td>        <b>return</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm16ExtractValueInst6CreateEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE" title='llvm::ExtractValueInst::Create' data-ref="_ZN4llvm16ExtractValueInst6CreateEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst19getAggregateOperandEv" title='llvm::InsertValueInst::getAggregateOperand' data-ref="_ZN4llvm15InsertValueInst19getAggregateOperandEv">getAggregateOperand</a>(),</td></tr>
<tr><th id="2644">2644</th><td>                                        <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10getIndicesEv" title='llvm::ExtractValueInst::getIndices' data-ref="_ZNK4llvm16ExtractValueInst10getIndicesEv">getIndices</a>());</td></tr>
<tr><th id="2645">2645</th><td>    }</td></tr>
<tr><th id="2646">2646</th><td>    <b>if</b> (<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a> == <a class="local col1 ref" href="#491exte" title='exte' data-ref="491exte">exte</a> &amp;&amp; <a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a> == <a class="local col3 ref" href="#493inse" title='inse' data-ref="493inse">inse</a>)</td></tr>
<tr><th id="2647">2647</th><td>      <i>// Both iterators are at the end: Index lists are identical. Replace</i></td></tr>
<tr><th id="2648">2648</th><td><i>      // %B = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</i></td></tr>
<tr><th id="2649">2649</th><td><i>      // %C = extractvalue { i32, { i32 } } %B, 1, 0</i></td></tr>
<tr><th id="2650">2650</th><td><i>      // with "i32 42"</i></td></tr>
<tr><th id="2651">2651</th><td>      <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a></span>, <a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst23getInsertedValueOperandEv" title='llvm::InsertValueInst::getInsertedValueOperand' data-ref="_ZN4llvm15InsertValueInst23getInsertedValueOperandEv">getInsertedValueOperand</a>());</td></tr>
<tr><th id="2652">2652</th><td>    <b>if</b> (<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a> == <a class="local col1 ref" href="#491exte" title='exte' data-ref="491exte">exte</a>) {</td></tr>
<tr><th id="2653">2653</th><td>      <i>// The extract list is a prefix of the insert list. i.e. replace</i></td></tr>
<tr><th id="2654">2654</th><td><i>      // %I = insertvalue { i32, { i32 } } %A, i32 42, 1, 0</i></td></tr>
<tr><th id="2655">2655</th><td><i>      // %E = extractvalue { i32, { i32 } } %I, 1</i></td></tr>
<tr><th id="2656">2656</th><td><i>      // with</i></td></tr>
<tr><th id="2657">2657</th><td><i>      // %X = extractvalue { i32, { i32 } } %A, 1</i></td></tr>
<tr><th id="2658">2658</th><td><i>      // %E = insertvalue { i32 } %X, i32 42, 0</i></td></tr>
<tr><th id="2659">2659</th><td><i>      // by switching the order of the insert and extract (though the</i></td></tr>
<tr><th id="2660">2660</th><td><i>      // insertvalue should be left in, since it may have other uses).</i></td></tr>
<tr><th id="2661">2661</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="494NewEV" title='NewEV' data-type='llvm::Value *' data-ref="494NewEV">NewEV</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst19getAggregateOperandEv" title='llvm::InsertValueInst::getAggregateOperand' data-ref="_ZN4llvm15InsertValueInst19getAggregateOperandEv">getAggregateOperand</a>(),</td></tr>
<tr><th id="2662">2662</th><td>                                                <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10getIndicesEv" title='llvm::ExtractValueInst::getIndices' data-ref="_ZNK4llvm16ExtractValueInst10getIndicesEv">getIndices</a>());</td></tr>
<tr><th id="2663">2663</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::InsertValueInst" title='llvm::InsertValueInst' data-ref="llvm::InsertValueInst">InsertValueInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst6CreateEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE" title='llvm::InsertValueInst::Create' data-ref="_ZN4llvm15InsertValueInst6CreateEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col4 ref" href="#494NewEV" title='NewEV' data-ref="494NewEV">NewEV</a>, <a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst23getInsertedValueOperandEv" title='llvm::InsertValueInst::getInsertedValueOperand' data-ref="_ZN4llvm15InsertValueInst23getInsertedValueOperandEv">getInsertedValueOperand</a>(),</td></tr>
<tr><th id="2664">2664</th><td>                                     <a class="ref" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefEPKT_S2_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefEPKT_S2_">makeArrayRef</a>(<a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a>, <a class="local col3 ref" href="#493inse" title='inse' data-ref="493inse">inse</a>));</td></tr>
<tr><th id="2665">2665</th><td>    }</td></tr>
<tr><th id="2666">2666</th><td>    <b>if</b> (<a class="local col2 ref" href="#492insi" title='insi' data-ref="492insi">insi</a> == <a class="local col3 ref" href="#493inse" title='inse' data-ref="493inse">inse</a>)</td></tr>
<tr><th id="2667">2667</th><td>      <i>// The insert list is a prefix of the extract list</i></td></tr>
<tr><th id="2668">2668</th><td><i>      // We can simply remove the common indices from the extract and make it</i></td></tr>
<tr><th id="2669">2669</th><td><i>      // operate on the inserted value instead of the insertvalue result.</i></td></tr>
<tr><th id="2670">2670</th><td><i>      // i.e., replace</i></td></tr>
<tr><th id="2671">2671</th><td><i>      // %I = insertvalue { i32, { i32 } } %A, { i32 } { i32 42 }, 1</i></td></tr>
<tr><th id="2672">2672</th><td><i>      // %E = extractvalue { i32, { i32 } } %I, 1, 0</i></td></tr>
<tr><th id="2673">2673</th><td><i>      // with</i></td></tr>
<tr><th id="2674">2674</th><td><i>      // %E extractvalue { i32 } { i32 42 }, 0</i></td></tr>
<tr><th id="2675">2675</th><td>      <b>return</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm16ExtractValueInst6CreateEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE" title='llvm::ExtractValueInst::Create' data-ref="_ZN4llvm16ExtractValueInst6CreateEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col9 ref" href="#489IV" title='IV' data-ref="489IV">IV</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm15InsertValueInst23getInsertedValueOperandEv" title='llvm::InsertValueInst::getInsertedValueOperand' data-ref="_ZN4llvm15InsertValueInst23getInsertedValueOperandEv">getInsertedValueOperand</a>(),</td></tr>
<tr><th id="2676">2676</th><td>                                      <a class="ref" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefEPKT_S2_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefEPKT_S2_">makeArrayRef</a>(<a class="local col0 ref" href="#490exti" title='exti' data-ref="490exti">exti</a>, <a class="local col1 ref" href="#491exte" title='exte' data-ref="491exte">exte</a>));</td></tr>
<tr><th id="2677">2677</th><td>  }</td></tr>
<tr><th id="2678">2678</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::WithOverflowInst" title='llvm::WithOverflowInst' data-ref="llvm::WithOverflowInst">WithOverflowInst</a> *<dfn class="local col5 decl" id="495WO" title='WO' data-type='llvm::WithOverflowInst *' data-ref="495WO"><a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::WithOverflowInst" title='llvm::WithOverflowInst' data-ref="llvm::WithOverflowInst">WithOverflowInst</a>&gt;(<a class="local col7 ref" href="#487Agg" title='Agg' data-ref="487Agg">Agg</a>)) {</td></tr>
<tr><th id="2679">2679</th><td>    <i>// We're extracting from an overflow intrinsic, see if we're the only user,</i></td></tr>
<tr><th id="2680">2680</th><td><i>    // which allows us to simplify multiple result intrinsics to simpler</i></td></tr>
<tr><th id="2681">2681</th><td><i>    // things that just get one value.</i></td></tr>
<tr><th id="2682">2682</th><td>    <b>if</b> (<a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="2683">2683</th><td>      <i>// Check if we're grabbing only the result of a 'with overflow' intrinsic</i></td></tr>
<tr><th id="2684">2684</th><td><i>      // and replace it with a traditional binary instruction.</i></td></tr>
<tr><th id="2685">2685</th><td>      <b>if</b> (*<a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst9idx_beginEv" title='llvm::ExtractValueInst::idx_begin' data-ref="_ZNK4llvm16ExtractValueInst9idx_beginEv">idx_begin</a>() == <var>0</var>) {</td></tr>
<tr><th id="2686">2686</th><td>        <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction::BinaryOps" title='llvm::Instruction::BinaryOps' data-ref="llvm::Instruction::BinaryOps">BinaryOps</a> <dfn class="local col6 decl" id="496BinOp" title='BinOp' data-type='Instruction::BinaryOps' data-ref="496BinOp">BinOp</dfn> = <a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/IntrinsicInst.h.html#_ZNK4llvm17BinaryOpIntrinsic11getBinaryOpEv" title='llvm::BinaryOpIntrinsic::getBinaryOp' data-ref="_ZNK4llvm17BinaryOpIntrinsic11getBinaryOpEv">getBinaryOp</a>();</td></tr>
<tr><th id="2687">2687</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="497LHS" title='LHS' data-type='llvm::Value *' data-ref="497LHS">LHS</dfn> = <a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/IntrinsicInst.h.html#_ZNK4llvm17BinaryOpIntrinsic6getLHSEv" title='llvm::BinaryOpIntrinsic::getLHS' data-ref="_ZNK4llvm17BinaryOpIntrinsic6getLHSEv">getLHS</a>(), *<dfn class="local col8 decl" id="498RHS" title='RHS' data-type='llvm::Value *' data-ref="498RHS">RHS</dfn> = <a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/IntrinsicInst.h.html#_ZNK4llvm17BinaryOpIntrinsic6getRHSEv" title='llvm::BinaryOpIntrinsic::getRHS' data-ref="_ZNK4llvm17BinaryOpIntrinsic6getRHSEv">getRHS</a>();</td></tr>
<tr><th id="2688">2688</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a></span>, <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()));</td></tr>
<tr><th id="2689">2689</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a></span>);</td></tr>
<tr><th id="2690">2690</th><td>        <b>return</b> <a class="type" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::BinaryOperator" title='llvm::BinaryOperator' data-ref="llvm::BinaryOperator">BinaryOperator</a>::<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_" title='llvm::BinaryOperator::Create' data-ref="_ZN4llvm14BinaryOperator6CreateENS_11Instruction9BinaryOpsEPNS_5ValueES4_RKNS_5TwineEPS1_">Create</a>(<a class="local col6 ref" href="#496BinOp" title='BinOp' data-ref="496BinOp">BinOp</a>, <a class="local col7 ref" href="#497LHS" title='LHS' data-ref="497LHS">LHS</a>, <a class="local col8 ref" href="#498RHS" title='RHS' data-ref="498RHS">RHS</a>);</td></tr>
<tr><th id="2691">2691</th><td>      }</td></tr>
<tr><th id="2692">2692</th><td></td></tr>
<tr><th id="2693">2693</th><td>      <i>// If the normal result of the add is dead, and the RHS is a constant,</i></td></tr>
<tr><th id="2694">2694</th><td><i>      // we can transform this into a range comparison.</i></td></tr>
<tr><th id="2695">2695</th><td><i>      // overflow = uadd a, -4  --&gt;  overflow = icmp ugt a, 3</i></td></tr>
<tr><th id="2696">2696</th><td>      <b>if</b> (WO-&gt;getIntrinsicID() == Intrinsic::<span class='error' title="no member named &apos;uadd_with_overflow&apos; in namespace &apos;llvm::Intrinsic&apos;">uadd_with_overflow</span>)</td></tr>
<tr><th id="2697">2697</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col9 decl" id="499CI" title='CI' data-type='llvm::ConstantInt *' data-ref="499CI"><a class="local col9 ref" href="#499CI" title='CI' data-ref="499CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/IntrinsicInst.h.html#_ZNK4llvm17BinaryOpIntrinsic6getRHSEv" title='llvm::BinaryOpIntrinsic::getRHS' data-ref="_ZNK4llvm17BinaryOpIntrinsic6getRHSEv">getRHS</a>()))</td></tr>
<tr><th id="2698">2698</th><td>          <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm8ICmpInstC1ENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE" title='llvm::ICmpInst::ICmpInst' data-ref="_ZN4llvm8ICmpInstC1ENS_7CmpInst9PredicateEPNS_5ValueES4_RKNS_5TwineE">(</a><a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ICmpInst" title='llvm::ICmpInst' data-ref="llvm::ICmpInst">ICmpInst</a>::<a class="enum" href="../../../include/llvm/IR/InstrTypes.h.html#llvm::CmpInst::Predicate::ICMP_UGT" title='llvm::CmpInst::Predicate::ICMP_UGT' data-ref="llvm::CmpInst::Predicate::ICMP_UGT">ICMP_UGT</a>, <a class="local col5 ref" href="#495WO" title='WO' data-ref="495WO">WO</a>-&gt;<a class="ref" href="../../../include/llvm/IR/IntrinsicInst.h.html#_ZNK4llvm17BinaryOpIntrinsic6getLHSEv" title='llvm::BinaryOpIntrinsic::getLHS' data-ref="_ZNK4llvm17BinaryOpIntrinsic6getLHSEv">getLHS</a>(),</td></tr>
<tr><th id="2699">2699</th><td>                              <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm12ConstantExpr6getNotEPNS_8ConstantE" title='llvm::ConstantExpr::getNot' data-ref="_ZN4llvm12ConstantExpr6getNotEPNS_8ConstantE">getNot</a>(<a class="local col9 ref" href="#499CI" title='CI' data-ref="499CI">CI</a>));</td></tr>
<tr><th id="2700">2700</th><td>    }</td></tr>
<tr><th id="2701">2701</th><td>  }</td></tr>
<tr><th id="2702">2702</th><td>  <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col0 decl" id="500L" title='L' data-type='llvm::LoadInst *' data-ref="500L"><a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a>&gt;(<a class="local col7 ref" href="#487Agg" title='Agg' data-ref="487Agg">Agg</a>))</td></tr>
<tr><th id="2703">2703</th><td>    <i>// If the (non-volatile) load only has one use, we can rewrite this to a</i></td></tr>
<tr><th id="2704">2704</th><td><i>    // load from a GEP. This reduces the size of the load. If a load is used</i></td></tr>
<tr><th id="2705">2705</th><td><i>    // only by extractvalue instructions then this either must have been</i></td></tr>
<tr><th id="2706">2706</th><td><i>    // optimized before, or it is a struct with padding, in which case we</i></td></tr>
<tr><th id="2707">2707</th><td><i>    // don't want to do the transformation as it loses padding knowledge.</i></td></tr>
<tr><th id="2708">2708</th><td>    <b>if</b> (<a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst8isSimpleEv" title='llvm::LoadInst::isSimple' data-ref="_ZNK4llvm8LoadInst8isSimpleEv">isSimple</a>() &amp;&amp; <a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="2709">2709</th><td>      <i>// extractvalue has integer indices, getelementptr has Value*s. Convert.</i></td></tr>
<tr><th id="2710">2710</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>*, <var>4</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col1 decl" id="501Indices" title='Indices' data-type='SmallVector&lt;llvm::Value *, 4&gt;' data-ref="501Indices">Indices</dfn>;</td></tr>
<tr><th id="2711">2711</th><td>      <i>// Prefix an i32 0 since we need the first element.</i></td></tr>
<tr><th id="2712">2712</th><td>      <a class="local col1 ref" href="#501Indices" title='Indices' data-ref="501Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase8getInt32Ej" title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</a>(<var>0</var>));</td></tr>
<tr><th id="2713">2713</th><td>      <b>for</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a>::<a class="typedef" href="../../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst::idx_iterator" title='llvm::ExtractValueInst::idx_iterator' data-type='const unsigned int *' data-ref="llvm::ExtractValueInst::idx_iterator">idx_iterator</a> <dfn class="local col2 decl" id="502I" title='I' data-type='ExtractValueInst::idx_iterator' data-ref="502I">I</dfn> = <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst9idx_beginEv" title='llvm::ExtractValueInst::idx_begin' data-ref="_ZNK4llvm16ExtractValueInst9idx_beginEv">idx_begin</a>(), <dfn class="local col3 decl" id="503E" title='E' data-type='ExtractValueInst::idx_iterator' data-ref="503E">E</dfn> = <a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst7idx_endEv" title='llvm::ExtractValueInst::idx_end' data-ref="_ZNK4llvm16ExtractValueInst7idx_endEv">idx_end</a>();</td></tr>
<tr><th id="2714">2714</th><td>            <a class="local col2 ref" href="#502I" title='I' data-ref="502I">I</a> != <a class="local col3 ref" href="#503E" title='E' data-ref="503E">E</a>; ++<a class="local col2 ref" href="#502I" title='I' data-ref="502I">I</a>)</td></tr>
<tr><th id="2715">2715</th><td>        <a class="local col1 ref" href="#501Indices" title='Indices' data-ref="501Indices">Indices</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase8getInt32Ej" title='llvm::IRBuilderBase::getInt32' data-ref="_ZN4llvm13IRBuilderBase8getInt32Ej">getInt32</a>(*<a class="local col2 ref" href="#502I" title='I' data-ref="502I">I</a>));</td></tr>
<tr><th id="2716">2716</th><td></td></tr>
<tr><th id="2717">2717</th><td>      <i>// We need to insert these at the location of the old load, not at that of</i></td></tr>
<tr><th id="2718">2718</th><td><i>      // the extractvalue.</i></td></tr>
<tr><th id="2719">2719</th><td>      <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>);</td></tr>
<tr><th id="2720">2720</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="504GEP" title='GEP' data-type='llvm::Value *' data-ref="504GEP">GEP</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE" title='llvm::IRBuilder::CreateInBoundsGEP' data-ref="_ZN4llvm9IRBuilder17CreateInBoundsGEPEPNS_4TypeEPNS_5ValueENS_8ArrayRefIS4_EERKNS_5TwineE">CreateInBoundsGEP</a>(<a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="2721">2721</th><td>                                             <a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>(), <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col1 ref" href="#501Indices" title='Indices' data-ref="501Indices">Indices</a>);</td></tr>
<tr><th id="2722">2722</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col5 decl" id="505NL" title='NL' data-type='llvm::Instruction *' data-ref="505NL">NL</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateLoad</a>(<a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col4 ref" href="#504GEP" title='GEP' data-ref="504GEP">GEP</a>);</td></tr>
<tr><th id="2723">2723</th><td>      <i>// Whatever aliasing information we had for the orignal load must also</i></td></tr>
<tr><th id="2724">2724</th><td><i>      // hold for the smaller load, so propagate the annotations.</i></td></tr>
<tr><th id="2725">2725</th><td>      <a class="type" href="../../../include/llvm/IR/Metadata.h.html#llvm::AAMDNodes" title='llvm::AAMDNodes' data-ref="llvm::AAMDNodes">AAMDNodes</a> <a class="ref fake" href="../../../include/llvm/IR/Metadata.h.html#_ZN4llvm9AAMDNodesC1EPNS_6MDNodeES2_S2_" title='llvm::AAMDNodes::AAMDNodes' data-ref="_ZN4llvm9AAMDNodesC1EPNS_6MDNodeES2_S2_"></a><dfn class="local col6 decl" id="506Nodes" title='Nodes' data-type='llvm::AAMDNodes' data-ref="506Nodes">Nodes</dfn>;</td></tr>
<tr><th id="2726">2726</th><td>      <a class="local col0 ref" href="#500L" title='L' data-ref="500L">L</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction13getAAMetadataERNS_9AAMDNodesEb" title='llvm::Instruction::getAAMetadata' data-ref="_ZNK4llvm11Instruction13getAAMetadataERNS_9AAMDNodesEb">getAAMetadata</a>(<span class='refarg'><a class="local col6 ref" href="#506Nodes" title='Nodes' data-ref="506Nodes">Nodes</a></span>);</td></tr>
<tr><th id="2727">2727</th><td>      <a class="local col5 ref" href="#505NL" title='NL' data-ref="505NL">NL</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction13setAAMetadataERKNS_9AAMDNodesE" title='llvm::Instruction::setAAMetadata' data-ref="_ZN4llvm11Instruction13setAAMetadataERKNS_9AAMDNodesE">setAAMetadata</a>(<a class="local col6 ref" href="#506Nodes" title='Nodes' data-ref="506Nodes">Nodes</a>);</td></tr>
<tr><th id="2728">2728</th><td>      <i>// Returning the load directly will cause the main loop to insert it in</i></td></tr>
<tr><th id="2729">2729</th><td><i>      // the wrong spot, so use replaceInstUsesWith().</i></td></tr>
<tr><th id="2730">2730</th><td>      <b>return</b> <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'><a class="local col6 ref" href="#486EV" title='EV' data-ref="486EV">EV</a></span>, <a class="local col5 ref" href="#505NL" title='NL' data-ref="505NL">NL</a>);</td></tr>
<tr><th id="2731">2731</th><td>    }</td></tr>
<tr><th id="2732">2732</th><td>  <i>// We could simplify extracts from other values. Note that nested extracts may</i></td></tr>
<tr><th id="2733">2733</th><td><i>  // already be simplified implicitly by the above: extract (extract (insert) )</i></td></tr>
<tr><th id="2734">2734</th><td><i>  // will be translated into extract ( insert ( extract ) ) first and then just</i></td></tr>
<tr><th id="2735">2735</th><td><i>  // the value inserted, if appropriate. Similarly for extracts from single-use</i></td></tr>
<tr><th id="2736">2736</th><td><i>  // loads: extract (extract (load)) will be translated to extract (load (gep))</i></td></tr>
<tr><th id="2737">2737</th><td><i>  // and if again single-use then via load (gep (gep)) to load (gep).</i></td></tr>
<tr><th id="2738">2738</th><td><i>  // However, double extracts from e.g. function arguments or return values</i></td></tr>
<tr><th id="2739">2739</th><td><i>  // aren't handled yet.</i></td></tr>
<tr><th id="2740">2740</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="2741">2741</th><td>}</td></tr>
<tr><th id="2742">2742</th><td></td></tr>
<tr><th id="2743">2743</th><td><i class="doc" data-doc="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE">/// Return 'true' if the given typeinfo will match anything.</i></td></tr>
<tr><th id="2744">2744</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE" title='isCatchAll' data-type='bool isCatchAll(llvm::EHPersonality Personality, llvm::Constant * TypeInfo)' data-ref="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE">isCatchAll</dfn>(<a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a> <dfn class="local col7 decl" id="507Personality" title='Personality' data-type='llvm::EHPersonality' data-ref="507Personality">Personality</dfn>, <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col8 decl" id="508TypeInfo" title='TypeInfo' data-type='llvm::Constant *' data-ref="508TypeInfo">TypeInfo</dfn>) {</td></tr>
<tr><th id="2745">2745</th><td>  <b>switch</b> (<a class="local col7 ref" href="#507Personality" title='Personality' data-ref="507Personality">Personality</a>) {</td></tr>
<tr><th id="2746">2746</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_C" title='llvm::EHPersonality::GNU_C' data-ref="llvm::EHPersonality::GNU_C">GNU_C</a>:</td></tr>
<tr><th id="2747">2747</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_C_SjLj" title='llvm::EHPersonality::GNU_C_SjLj' data-ref="llvm::EHPersonality::GNU_C_SjLj">GNU_C_SjLj</a>:</td></tr>
<tr><th id="2748">2748</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::Rust" title='llvm::EHPersonality::Rust' data-ref="llvm::EHPersonality::Rust">Rust</a>:</td></tr>
<tr><th id="2749">2749</th><td>    <i>// The GCC C EH and Rust personality only exists to support cleanups, so</i></td></tr>
<tr><th id="2750">2750</th><td><i>    // it's not clear what the semantics of catch clauses are.</i></td></tr>
<tr><th id="2751">2751</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2752">2752</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::Unknown" title='llvm::EHPersonality::Unknown' data-ref="llvm::EHPersonality::Unknown">Unknown</a>:</td></tr>
<tr><th id="2753">2753</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2754">2754</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_Ada" title='llvm::EHPersonality::GNU_Ada' data-ref="llvm::EHPersonality::GNU_Ada">GNU_Ada</a>:</td></tr>
<tr><th id="2755">2755</th><td>    <i>// While __gnat_all_others_value will match any Ada exception, it doesn't</i></td></tr>
<tr><th id="2756">2756</th><td><i>    // match foreign exceptions (or didn't, before gcc-4.7).</i></td></tr>
<tr><th id="2757">2757</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="2758">2758</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_CXX" title='llvm::EHPersonality::GNU_CXX' data-ref="llvm::EHPersonality::GNU_CXX">GNU_CXX</a>:</td></tr>
<tr><th id="2759">2759</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_CXX_SjLj" title='llvm::EHPersonality::GNU_CXX_SjLj' data-ref="llvm::EHPersonality::GNU_CXX_SjLj">GNU_CXX_SjLj</a>:</td></tr>
<tr><th id="2760">2760</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::GNU_ObjC" title='llvm::EHPersonality::GNU_ObjC' data-ref="llvm::EHPersonality::GNU_ObjC">GNU_ObjC</a>:</td></tr>
<tr><th id="2761">2761</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::MSVC_X86SEH" title='llvm::EHPersonality::MSVC_X86SEH' data-ref="llvm::EHPersonality::MSVC_X86SEH">MSVC_X86SEH</a>:</td></tr>
<tr><th id="2762">2762</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::MSVC_Win64SEH" title='llvm::EHPersonality::MSVC_Win64SEH' data-ref="llvm::EHPersonality::MSVC_Win64SEH">MSVC_Win64SEH</a>:</td></tr>
<tr><th id="2763">2763</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::MSVC_CXX" title='llvm::EHPersonality::MSVC_CXX' data-ref="llvm::EHPersonality::MSVC_CXX">MSVC_CXX</a>:</td></tr>
<tr><th id="2764">2764</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::CoreCLR" title='llvm::EHPersonality::CoreCLR' data-ref="llvm::EHPersonality::CoreCLR">CoreCLR</a>:</td></tr>
<tr><th id="2765">2765</th><td>  <b>case</b> <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a>::<a class="enum" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality::Wasm_CXX" title='llvm::EHPersonality::Wasm_CXX' data-ref="llvm::EHPersonality::Wasm_CXX">Wasm_CXX</a>:</td></tr>
<tr><th id="2766">2766</th><td>    <b>return</b> <a class="local col8 ref" href="#508TypeInfo" title='TypeInfo' data-ref="508TypeInfo">TypeInfo</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>();</td></tr>
<tr><th id="2767">2767</th><td>  }</td></tr>
<tr><th id="2768">2768</th><td>  <a class="macro" href="../../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;invalid enum&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2768)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"invalid enum"</q>);</td></tr>
<tr><th id="2769">2769</th><td>}</td></tr>
<tr><th id="2770">2770</th><td></td></tr>
<tr><th id="2771">2771</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL14shorter_filterPKN4llvm5ValueES2_" title='shorter_filter' data-type='bool shorter_filter(const llvm::Value * LHS, const llvm::Value * RHS)' data-ref="_ZL14shorter_filterPKN4llvm5ValueES2_">shorter_filter</dfn>(<em>const</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="509LHS" title='LHS' data-type='const llvm::Value *' data-ref="509LHS">LHS</dfn>, <em>const</em> <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="510RHS" title='RHS' data-type='const llvm::Value *' data-ref="510RHS">RHS</dfn>) {</td></tr>
<tr><th id="2772">2772</th><td>  <b>return</b></td></tr>
<tr><th id="2773">2773</th><td>    <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col9 ref" href="#509LHS" title='LHS' data-ref="509LHS">LHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>()</td></tr>
<tr><th id="2774">2774</th><td>  &lt;</td></tr>
<tr><th id="2775">2775</th><td>    <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col0 ref" href="#510RHS" title='RHS' data-ref="510RHS">RHS</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="2776">2776</th><td>}</td></tr>
<tr><th id="2777">2777</th><td></td></tr>
<tr><th id="2778">2778</th><td><a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner19visitLandingPadInstERNS_14LandingPadInstE" title='llvm::InstCombiner::visitLandingPadInst' data-ref="_ZN4llvm12InstCombiner19visitLandingPadInstERNS_14LandingPadInstE">visitLandingPadInst</dfn>(<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LandingPadInst" title='llvm::LandingPadInst' data-ref="llvm::LandingPadInst">LandingPadInst</a> &amp;<dfn class="local col1 decl" id="511LI" title='LI' data-type='llvm::LandingPadInst &amp;' data-ref="511LI">LI</dfn>) {</td></tr>
<tr><th id="2779">2779</th><td>  <i>// The logic here should be correct for any real-world personality function.</i></td></tr>
<tr><th id="2780">2780</th><td><i>  // However if that turns out not to be true, the offending logic can always</i></td></tr>
<tr><th id="2781">2781</th><td><i>  // be conditioned on the personality function, like the catch-all logic is.</i></td></tr>
<tr><th id="2782">2782</th><td>  <a class="type" href="../../../include/llvm/Analysis/EHPersonalities.h.html#llvm::EHPersonality" title='llvm::EHPersonality' data-ref="llvm::EHPersonality">EHPersonality</a> <dfn class="local col2 decl" id="512Personality" title='Personality' data-type='llvm::EHPersonality' data-ref="512Personality">Personality</dfn> =</td></tr>
<tr><th id="2783">2783</th><td>      <a class="ref" href="../../../include/llvm/Analysis/EHPersonalities.h.html#_ZN4llvm21classifyEHPersonalityEPKNS_5ValueE" title='llvm::classifyEHPersonality' data-ref="_ZN4llvm21classifyEHPersonalityEPKNS_5ValueE">classifyEHPersonality</a>(<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function16getPersonalityFnEv" title='llvm::Function::getPersonalityFn' data-ref="_ZNK4llvm8Function16getPersonalityFnEv">getPersonalityFn</a>());</td></tr>
<tr><th id="2784">2784</th><td></td></tr>
<tr><th id="2785">2785</th><td>  <i>// Simplify the list of clauses, eg by removing repeated catch clauses</i></td></tr>
<tr><th id="2786">2786</th><td><i>  // (these are often created by inlining).</i></td></tr>
<tr><th id="2787">2787</th><td>  <em>bool</em> <dfn class="local col3 decl" id="513MakeNewInstruction" title='MakeNewInstruction' data-type='bool' data-ref="513MakeNewInstruction">MakeNewInstruction</dfn> = <b>false</b>; <i>// If true, recreate using the following:</i></td></tr>
<tr><th id="2788">2788</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *, <var>16</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col4 decl" id="514NewClauses" title='NewClauses' data-type='SmallVector&lt;llvm::Constant *, 16&gt;' data-ref="514NewClauses">NewClauses</dfn>; <i>// - Clauses for the new instruction;</i></td></tr>
<tr><th id="2789">2789</th><td>  <em>bool</em> <dfn class="local col5 decl" id="515CleanupFlag" title='CleanupFlag' data-type='bool' data-ref="515CleanupFlag">CleanupFlag</dfn> = <a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst9isCleanupEv" title='llvm::LandingPadInst::isCleanup' data-ref="_ZNK4llvm14LandingPadInst9isCleanupEv">isCleanup</a>();   <i>// - The new instruction is a cleanup.</i></td></tr>
<tr><th id="2790">2790</th><td></td></tr>
<tr><th id="2791">2791</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallPtrSet.h.html#llvm::SmallPtrSet" title='llvm::SmallPtrSet' data-ref="llvm::SmallPtrSet">SmallPtrSet</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *, <var>16</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm11SmallPtrSetC1Ev" title='llvm::SmallPtrSet::SmallPtrSet&lt;PtrType, SmallSize&gt;' data-ref="_ZN4llvm11SmallPtrSetC1Ev"></a><dfn class="local col6 decl" id="516AlreadyCaught" title='AlreadyCaught' data-type='SmallPtrSet&lt;llvm::Value *, 16&gt;' data-ref="516AlreadyCaught">AlreadyCaught</dfn>; <i>// Typeinfos known caught already.</i></td></tr>
<tr><th id="2792">2792</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col7 decl" id="517i" title='i' data-type='unsigned int' data-ref="517i">i</dfn> = <var>0</var>, <dfn class="local col8 decl" id="518e" title='e' data-type='unsigned int' data-ref="518e">e</dfn> = <a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst13getNumClausesEv" title='llvm::LandingPadInst::getNumClauses' data-ref="_ZNK4llvm14LandingPadInst13getNumClausesEv">getNumClauses</a>(); <a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a> != <a class="local col8 ref" href="#518e" title='e' data-ref="518e">e</a>; ++<a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a>) {</td></tr>
<tr><th id="2793">2793</th><td>    <em>bool</em> <dfn class="local col9 decl" id="519isLastClause" title='isLastClause' data-type='bool' data-ref="519isLastClause">isLastClause</dfn> = <a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a> + <var>1</var> == <a class="local col8 ref" href="#518e" title='e' data-ref="518e">e</a>;</td></tr>
<tr><th id="2794">2794</th><td>    <b>if</b> (<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst7isCatchEj" title='llvm::LandingPadInst::isCatch' data-ref="_ZNK4llvm14LandingPadInst7isCatchEj">isCatch</a>(<a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a>)) {</td></tr>
<tr><th id="2795">2795</th><td>      <i>// A catch clause.</i></td></tr>
<tr><th id="2796">2796</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col0 decl" id="520CatchClause" title='CatchClause' data-type='llvm::Constant *' data-ref="520CatchClause">CatchClause</dfn> = <a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst9getClauseEj" title='llvm::LandingPadInst::getClause' data-ref="_ZNK4llvm14LandingPadInst9getClauseEj">getClause</a>(<a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a>);</td></tr>
<tr><th id="2797">2797</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col1 decl" id="521TypeInfo" title='TypeInfo' data-type='llvm::Constant *' data-ref="521TypeInfo">TypeInfo</dfn> = <a class="local col0 ref" href="#520CatchClause" title='CatchClause' data-ref="520CatchClause">CatchClause</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant17stripPointerCastsEv" title='llvm::Constant::stripPointerCasts' data-ref="_ZN4llvm8Constant17stripPointerCastsEv">stripPointerCasts</a>();</td></tr>
<tr><th id="2798">2798</th><td></td></tr>
<tr><th id="2799">2799</th><td>      <i>// If we already saw this clause, there is no point in having a second</i></td></tr>
<tr><th id="2800">2800</th><td><i>      // copy of it.</i></td></tr>
<tr><th id="2801">2801</th><td>      <b>if</b> (<a class="local col6 ref" href="#516AlreadyCaught" title='AlreadyCaught' data-ref="516AlreadyCaught">AlreadyCaught</a>.<a class="ref" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm15SmallPtrSetImpl6insertET_" title='llvm::SmallPtrSetImpl::insert' data-ref="_ZN4llvm15SmallPtrSetImpl6insertET_">insert</a>(<a class="local col1 ref" href="#521TypeInfo" title='TypeInfo' data-ref="521TypeInfo">TypeInfo</a>).<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::SmallPtrSetIterator&lt;llvm::Value *&gt;, bool&gt;::second' data-ref="std::pair::second">second</a>) {</td></tr>
<tr><th id="2802">2802</th><td>        <i>// This catch clause was not already seen.</i></td></tr>
<tr><th id="2803">2803</th><td>        <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col0 ref" href="#520CatchClause" title='CatchClause' data-ref="520CatchClause">CatchClause</a>);</td></tr>
<tr><th id="2804">2804</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2805">2805</th><td>        <i>// Repeated catch clause - drop the redundant copy.</i></td></tr>
<tr><th id="2806">2806</th><td>        <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2807">2807</th><td>      }</td></tr>
<tr><th id="2808">2808</th><td></td></tr>
<tr><th id="2809">2809</th><td>      <i>// If this is a catch-all then there is no point in keeping any following</i></td></tr>
<tr><th id="2810">2810</th><td><i>      // clauses or marking the landingpad as having a cleanup.</i></td></tr>
<tr><th id="2811">2811</th><td>      <b>if</b> (<a class="tu ref" href="#_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE" title='isCatchAll' data-use='c' data-ref="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE">isCatchAll</a>(<a class="local col2 ref" href="#512Personality" title='Personality' data-ref="512Personality">Personality</a>, <a class="local col1 ref" href="#521TypeInfo" title='TypeInfo' data-ref="521TypeInfo">TypeInfo</a>)) {</td></tr>
<tr><th id="2812">2812</th><td>        <b>if</b> (!<a class="local col9 ref" href="#519isLastClause" title='isLastClause' data-ref="519isLastClause">isLastClause</a>)</td></tr>
<tr><th id="2813">2813</th><td>          <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2814">2814</th><td>        <a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a> = <b>false</b>;</td></tr>
<tr><th id="2815">2815</th><td>        <b>break</b>;</td></tr>
<tr><th id="2816">2816</th><td>      }</td></tr>
<tr><th id="2817">2817</th><td>    } <b>else</b> {</td></tr>
<tr><th id="2818">2818</th><td>      <i>// A filter clause.  If any of the filter elements were already caught</i></td></tr>
<tr><th id="2819">2819</th><td><i>      // then they can be dropped from the filter.  It is tempting to try to</i></td></tr>
<tr><th id="2820">2820</th><td><i>      // exploit the filter further by saying that any typeinfo that does not</i></td></tr>
<tr><th id="2821">2821</th><td><i>      // occur in the filter can't be caught later (and thus can be dropped).</i></td></tr>
<tr><th id="2822">2822</th><td><i>      // However this would be wrong, since typeinfos can match without being</i></td></tr>
<tr><th id="2823">2823</th><td><i>      // equal (for example if one represents a C++ class, and the other some</i></td></tr>
<tr><th id="2824">2824</th><td><i>      // class derived from it).</i></td></tr>
<tr><th id="2825">2825</th><td>      <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (LI.isFilter(i) &amp;&amp; &quot;Unsupported landingpad clause!&quot;) ? void (0) : __assert_fail (&quot;LI.isFilter(i) &amp;&amp; \&quot;Unsupported landingpad clause!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2825, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst8isFilterEj" title='llvm::LandingPadInst::isFilter' data-ref="_ZNK4llvm14LandingPadInst8isFilterEj">isFilter</a>(<a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a>) &amp;&amp; <q>"Unsupported landingpad clause!"</q>);</td></tr>
<tr><th id="2826">2826</th><td>      <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col2 decl" id="522FilterClause" title='FilterClause' data-type='llvm::Constant *' data-ref="522FilterClause">FilterClause</dfn> = <a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst9getClauseEj" title='llvm::LandingPadInst::getClause' data-ref="_ZNK4llvm14LandingPadInst9getClauseEj">getClause</a>(<a class="local col7 ref" href="#517i" title='i' data-ref="517i">i</a>);</td></tr>
<tr><th id="2827">2827</th><td>      <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a> *<dfn class="local col3 decl" id="523FilterType" title='FilterType' data-type='llvm::ArrayType *' data-ref="523FilterType">FilterType</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="2828">2828</th><td>      <em>unsigned</em> <dfn class="local col4 decl" id="524NumTypeInfos" title='NumTypeInfos' data-type='unsigned int' data-ref="524NumTypeInfos">NumTypeInfos</dfn> = <a class="local col3 ref" href="#523FilterType" title='FilterType' data-ref="523FilterType">FilterType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="2829">2829</th><td></td></tr>
<tr><th id="2830">2830</th><td>      <i>// An empty filter catches everything, so there is no point in keeping any</i></td></tr>
<tr><th id="2831">2831</th><td><i>      // following clauses or marking the landingpad as having a cleanup.  By</i></td></tr>
<tr><th id="2832">2832</th><td><i>      // dealing with this case here the following code is made a bit simpler.</i></td></tr>
<tr><th id="2833">2833</th><td>      <b>if</b> (!<a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a>) {</td></tr>
<tr><th id="2834">2834</th><td>        <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a>);</td></tr>
<tr><th id="2835">2835</th><td>        <b>if</b> (!<a class="local col9 ref" href="#519isLastClause" title='isLastClause' data-ref="519isLastClause">isLastClause</a>)</td></tr>
<tr><th id="2836">2836</th><td>          <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2837">2837</th><td>        <a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a> = <b>false</b>;</td></tr>
<tr><th id="2838">2838</th><td>        <b>break</b>;</td></tr>
<tr><th id="2839">2839</th><td>      }</td></tr>
<tr><th id="2840">2840</th><td></td></tr>
<tr><th id="2841">2841</th><td>      <em>bool</em> <dfn class="local col5 decl" id="525MakeNewFilter" title='MakeNewFilter' data-type='bool' data-ref="525MakeNewFilter">MakeNewFilter</dfn> = <b>false</b>; <i>// If true, make a new filter.</i></td></tr>
<tr><th id="2842">2842</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *, <var>16</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col6 decl" id="526NewFilterElts" title='NewFilterElts' data-type='SmallVector&lt;llvm::Constant *, 16&gt;' data-ref="526NewFilterElts">NewFilterElts</dfn>; <i>// New elements.</i></td></tr>
<tr><th id="2843">2843</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantAggregateZero" title='llvm::ConstantAggregateZero' data-ref="llvm::ConstantAggregateZero">ConstantAggregateZero</a>&gt;(<a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a>)) {</td></tr>
<tr><th id="2844">2844</th><td>        <i>// Not an empty filter - it contains at least one null typeinfo.</i></td></tr>
<tr><th id="2845">2845</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (NumTypeInfos &gt; 0 &amp;&amp; &quot;Should have handled empty filter already!&quot;) ? void (0) : __assert_fail (&quot;NumTypeInfos &gt; 0 &amp;&amp; \&quot;Should have handled empty filter already!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2845, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a> &gt; <var>0</var> &amp;&amp; <q>"Should have handled empty filter already!"</q>);</td></tr>
<tr><th id="2846">2846</th><td>        <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col7 decl" id="527TypeInfo" title='TypeInfo' data-type='llvm::Constant *' data-ref="527TypeInfo">TypeInfo</dfn> =</td></tr>
<tr><th id="2847">2847</th><td>          <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col3 ref" href="#523FilterType" title='FilterType' data-ref="523FilterType">FilterType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>());</td></tr>
<tr><th id="2848">2848</th><td>        <i>// If this typeinfo is a catch-all then the filter can never match.</i></td></tr>
<tr><th id="2849">2849</th><td>        <b>if</b> (<a class="tu ref" href="#_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE" title='isCatchAll' data-use='c' data-ref="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE">isCatchAll</a>(<a class="local col2 ref" href="#512Personality" title='Personality' data-ref="512Personality">Personality</a>, <a class="local col7 ref" href="#527TypeInfo" title='TypeInfo' data-ref="527TypeInfo">TypeInfo</a>)) {</td></tr>
<tr><th id="2850">2850</th><td>          <i>// Throw the filter away.</i></td></tr>
<tr><th id="2851">2851</th><td>          <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2852">2852</th><td>          <b>continue</b>;</td></tr>
<tr><th id="2853">2853</th><td>        }</td></tr>
<tr><th id="2854">2854</th><td></td></tr>
<tr><th id="2855">2855</th><td>        <i>// There is no point in having multiple copies of this typeinfo, so</i></td></tr>
<tr><th id="2856">2856</th><td><i>        // discard all but the first copy if there is more than one.</i></td></tr>
<tr><th id="2857">2857</th><td>        <a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col7 ref" href="#527TypeInfo" title='TypeInfo' data-ref="527TypeInfo">TypeInfo</a>);</td></tr>
<tr><th id="2858">2858</th><td>        <b>if</b> (<a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a> &gt; <var>1</var>)</td></tr>
<tr><th id="2859">2859</th><td>          <a class="local col5 ref" href="#525MakeNewFilter" title='MakeNewFilter' data-ref="525MakeNewFilter">MakeNewFilter</a> = <b>true</b>;</td></tr>
<tr><th id="2860">2860</th><td>      } <b>else</b> {</td></tr>
<tr><th id="2861">2861</th><td>        <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a> *<dfn class="local col8 decl" id="528Filter" title='Filter' data-type='llvm::ConstantArray *' data-ref="528Filter">Filter</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a>&gt;(<a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a>);</td></tr>
<tr><th id="2862">2862</th><td>        <a class="type" href="../../../include/llvm/ADT/SmallPtrSet.h.html#llvm::SmallPtrSet" title='llvm::SmallPtrSet' data-ref="llvm::SmallPtrSet">SmallPtrSet</a>&lt;<a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *, <var>16</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm11SmallPtrSetC1Ev" title='llvm::SmallPtrSet::SmallPtrSet&lt;PtrType, SmallSize&gt;' data-ref="_ZN4llvm11SmallPtrSetC1Ev"></a><dfn class="local col9 decl" id="529SeenInFilter" title='SeenInFilter' data-type='SmallPtrSet&lt;llvm::Value *, 16&gt;' data-ref="529SeenInFilter">SeenInFilter</dfn>; <i>// For uniquing the elements.</i></td></tr>
<tr><th id="2863">2863</th><td>        <a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl7reserveENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE9size_typeE" title='llvm::SmallVectorImpl::reserve' data-ref="_ZN4llvm15SmallVectorImpl7reserveENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE9size_typeE">reserve</a>(<a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a>);</td></tr>
<tr><th id="2864">2864</th><td></td></tr>
<tr><th id="2865">2865</th><td>        <i>// Remove any filter elements that were already caught or that already</i></td></tr>
<tr><th id="2866">2866</th><td><i>        // occurred in the filter.  While there, see if any of the elements are</i></td></tr>
<tr><th id="2867">2867</th><td><i>        // catch-alls.  If so, the filter can be discarded.</i></td></tr>
<tr><th id="2868">2868</th><td>        <em>bool</em> <dfn class="local col0 decl" id="530SawCatchAll" title='SawCatchAll' data-type='bool' data-ref="530SawCatchAll">SawCatchAll</dfn> = <b>false</b>;</td></tr>
<tr><th id="2869">2869</th><td>        <b>for</b> (<em>unsigned</em> <dfn class="local col1 decl" id="531j" title='j' data-type='unsigned int' data-ref="531j">j</dfn> = <var>0</var>; <a class="local col1 ref" href="#531j" title='j' data-ref="531j">j</a> != <a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a>; ++<a class="local col1 ref" href="#531j" title='j' data-ref="531j">j</a>) {</td></tr>
<tr><th id="2870">2870</th><td>          <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col2 decl" id="532Elt" title='Elt' data-type='llvm::Constant *' data-ref="532Elt">Elt</dfn> = <a class="local col8 ref" href="#528Filter" title='Filter' data-ref="528Filter">Filter</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#395" title='llvm::ConstantAggregate::getOperand' data-ref="_ZNK4llvm17ConstantAggregate10getOperandEj">getOperand</a>(<a class="local col1 ref" href="#531j" title='j' data-ref="531j">j</a>);</td></tr>
<tr><th id="2871">2871</th><td>          <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="533TypeInfo" title='TypeInfo' data-type='llvm::Constant *' data-ref="533TypeInfo">TypeInfo</dfn> = <a class="local col2 ref" href="#532Elt" title='Elt' data-ref="532Elt">Elt</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant17stripPointerCastsEv" title='llvm::Constant::stripPointerCasts' data-ref="_ZN4llvm8Constant17stripPointerCastsEv">stripPointerCasts</a>();</td></tr>
<tr><th id="2872">2872</th><td>          <b>if</b> (<a class="tu ref" href="#_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE" title='isCatchAll' data-use='c' data-ref="_ZL10isCatchAllN4llvm13EHPersonalityEPNS_8ConstantE">isCatchAll</a>(<a class="local col2 ref" href="#512Personality" title='Personality' data-ref="512Personality">Personality</a>, <a class="local col3 ref" href="#533TypeInfo" title='TypeInfo' data-ref="533TypeInfo">TypeInfo</a>)) {</td></tr>
<tr><th id="2873">2873</th><td>            <i>// This element is a catch-all.  Bail out, noting this fact.</i></td></tr>
<tr><th id="2874">2874</th><td>            <a class="local col0 ref" href="#530SawCatchAll" title='SawCatchAll' data-ref="530SawCatchAll">SawCatchAll</a> = <b>true</b>;</td></tr>
<tr><th id="2875">2875</th><td>            <b>break</b>;</td></tr>
<tr><th id="2876">2876</th><td>          }</td></tr>
<tr><th id="2877">2877</th><td></td></tr>
<tr><th id="2878">2878</th><td>          <i>// Even if we've seen a type in a catch clause, we don't want to</i></td></tr>
<tr><th id="2879">2879</th><td><i>          // remove it from the filter.  An unexpected type handler may be</i></td></tr>
<tr><th id="2880">2880</th><td><i>          // set up for a call site which throws an exception of the same</i></td></tr>
<tr><th id="2881">2881</th><td><i>          // type caught.  In order for the exception thrown by the unexpected</i></td></tr>
<tr><th id="2882">2882</th><td><i>          // handler to propagate correctly, the filter must be correctly</i></td></tr>
<tr><th id="2883">2883</th><td><i>          // described for the call site.</i></td></tr>
<tr><th id="2884">2884</th><td><i>          //</i></td></tr>
<tr><th id="2885">2885</th><td><i>          // Example:</i></td></tr>
<tr><th id="2886">2886</th><td><i>          //</i></td></tr>
<tr><th id="2887">2887</th><td><i>          // void unexpected() { throw 1;}</i></td></tr>
<tr><th id="2888">2888</th><td><i>          // void foo() throw (int) {</i></td></tr>
<tr><th id="2889">2889</th><td><i>          //   std::set_unexpected(unexpected);</i></td></tr>
<tr><th id="2890">2890</th><td><i>          //   try {</i></td></tr>
<tr><th id="2891">2891</th><td><i>          //     throw 2.0;</i></td></tr>
<tr><th id="2892">2892</th><td><i>          //   } catch (int i) {}</i></td></tr>
<tr><th id="2893">2893</th><td><i>          // }</i></td></tr>
<tr><th id="2894">2894</th><td><i></i></td></tr>
<tr><th id="2895">2895</th><td><i>          // There is no point in having multiple copies of the same typeinfo in</i></td></tr>
<tr><th id="2896">2896</th><td><i>          // a filter, so only add it if we didn't already.</i></td></tr>
<tr><th id="2897">2897</th><td>          <b>if</b> (<a class="local col9 ref" href="#529SeenInFilter" title='SeenInFilter' data-ref="529SeenInFilter">SeenInFilter</a>.<a class="ref" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm15SmallPtrSetImpl6insertET_" title='llvm::SmallPtrSetImpl::insert' data-ref="_ZN4llvm15SmallPtrSetImpl6insertET_">insert</a>(<a class="local col3 ref" href="#533TypeInfo" title='TypeInfo' data-ref="533TypeInfo">TypeInfo</a>).<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::SmallPtrSetIterator&lt;llvm::Value *&gt;, bool&gt;::second' data-ref="std::pair::second">second</a>)</td></tr>
<tr><th id="2898">2898</th><td>            <a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col2 ref" href="#532Elt" title='Elt' data-ref="532Elt">Elt</a>));</td></tr>
<tr><th id="2899">2899</th><td>        }</td></tr>
<tr><th id="2900">2900</th><td>        <i>// A filter containing a catch-all cannot match anything by definition.</i></td></tr>
<tr><th id="2901">2901</th><td>        <b>if</b> (<a class="local col0 ref" href="#530SawCatchAll" title='SawCatchAll' data-ref="530SawCatchAll">SawCatchAll</a>) {</td></tr>
<tr><th id="2902">2902</th><td>          <i>// Throw the filter away.</i></td></tr>
<tr><th id="2903">2903</th><td>          <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2904">2904</th><td>          <b>continue</b>;</td></tr>
<tr><th id="2905">2905</th><td>        }</td></tr>
<tr><th id="2906">2906</th><td></td></tr>
<tr><th id="2907">2907</th><td>        <i>// If we dropped something from the filter, make a new one.</i></td></tr>
<tr><th id="2908">2908</th><td>        <b>if</b> (<a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>() &lt; <a class="local col4 ref" href="#524NumTypeInfos" title='NumTypeInfos' data-ref="524NumTypeInfos">NumTypeInfos</a>)</td></tr>
<tr><th id="2909">2909</th><td>          <a class="local col5 ref" href="#525MakeNewFilter" title='MakeNewFilter' data-ref="525MakeNewFilter">MakeNewFilter</a> = <b>true</b>;</td></tr>
<tr><th id="2910">2910</th><td>      }</td></tr>
<tr><th id="2911">2911</th><td>      <b>if</b> (<a class="local col5 ref" href="#525MakeNewFilter" title='MakeNewFilter' data-ref="525MakeNewFilter">MakeNewFilter</a>) {</td></tr>
<tr><th id="2912">2912</th><td>        <a class="local col3 ref" href="#523FilterType" title='FilterType' data-ref="523FilterType">FilterType</a> = <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>::<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm9ArrayType3getEPNS_4TypeEm" title='llvm::ArrayType::get' data-ref="_ZN4llvm9ArrayType3getEPNS_4TypeEm">get</a>(<a class="local col3 ref" href="#523FilterType" title='FilterType' data-ref="523FilterType">FilterType</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getElementTypeEv" title='llvm::SequentialType::getElementType' data-ref="_ZNK4llvm14SequentialType14getElementTypeEv">getElementType</a>(),</td></tr>
<tr><th id="2913">2913</th><td>                                    <a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>());</td></tr>
<tr><th id="2914">2914</th><td>        <a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm13ConstantArray3getEPNS_9ArrayTypeENS_8ArrayRefIPNS_8ConstantEEE" title='llvm::ConstantArray::get' data-ref="_ZN4llvm13ConstantArray3getEPNS_9ArrayTypeENS_8ArrayRefIPNS_8ConstantEEE">get</a>(<a class="local col3 ref" href="#523FilterType" title='FilterType' data-ref="523FilterType">FilterType</a>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>);</td></tr>
<tr><th id="2915">2915</th><td>        <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2916">2916</th><td>      }</td></tr>
<tr><th id="2917">2917</th><td></td></tr>
<tr><th id="2918">2918</th><td>      <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col2 ref" href="#522FilterClause" title='FilterClause' data-ref="522FilterClause">FilterClause</a>);</td></tr>
<tr><th id="2919">2919</th><td></td></tr>
<tr><th id="2920">2920</th><td>      <i>// If the new filter is empty then it will catch everything so there is</i></td></tr>
<tr><th id="2921">2921</th><td><i>      // no point in keeping any following clauses or marking the landingpad</i></td></tr>
<tr><th id="2922">2922</th><td><i>      // as having a cleanup.  The case of the original filter being empty was</i></td></tr>
<tr><th id="2923">2923</th><td><i>      // already handled above.</i></td></tr>
<tr><th id="2924">2924</th><td>      <b>if</b> (<a class="local col5 ref" href="#525MakeNewFilter" title='MakeNewFilter' data-ref="525MakeNewFilter">MakeNewFilter</a> &amp;&amp; !<a class="local col6 ref" href="#526NewFilterElts" title='NewFilterElts' data-ref="526NewFilterElts">NewFilterElts</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>()) {</td></tr>
<tr><th id="2925">2925</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (MakeNewInstruction &amp;&amp; &quot;New filter but not a new instruction!&quot;) ? void (0) : __assert_fail (&quot;MakeNewInstruction &amp;&amp; \&quot;New filter but not a new instruction!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 2925, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> &amp;&amp; <q>"New filter but not a new instruction!"</q>);</td></tr>
<tr><th id="2926">2926</th><td>        <a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a> = <b>false</b>;</td></tr>
<tr><th id="2927">2927</th><td>        <b>break</b>;</td></tr>
<tr><th id="2928">2928</th><td>      }</td></tr>
<tr><th id="2929">2929</th><td>    }</td></tr>
<tr><th id="2930">2930</th><td>  }</td></tr>
<tr><th id="2931">2931</th><td></td></tr>
<tr><th id="2932">2932</th><td>  <i>// If several filters occur in a row then reorder them so that the shortest</i></td></tr>
<tr><th id="2933">2933</th><td><i>  // filters come first (those with the smallest number of elements).  This is</i></td></tr>
<tr><th id="2934">2934</th><td><i>  // advantageous because shorter filters are more likely to match, speeding up</i></td></tr>
<tr><th id="2935">2935</th><td><i>  // unwinding, but mostly because it increases the effectiveness of the other</i></td></tr>
<tr><th id="2936">2936</th><td><i>  // filter optimizations below.</i></td></tr>
<tr><th id="2937">2937</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col4 decl" id="534i" title='i' data-type='unsigned int' data-ref="534i">i</dfn> = <var>0</var>, <dfn class="local col5 decl" id="535e" title='e' data-type='unsigned int' data-ref="535e">e</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); <a class="local col4 ref" href="#534i" title='i' data-ref="534i">i</a> + <var>1</var> &lt; <a class="local col5 ref" href="#535e" title='e' data-ref="535e">e</a>; ) {</td></tr>
<tr><th id="2938">2938</th><td>    <em>unsigned</em> <dfn class="local col6 decl" id="536j" title='j' data-type='unsigned int' data-ref="536j">j</dfn>;</td></tr>
<tr><th id="2939">2939</th><td>    <i>// Find the maximal 'j' s.t. the range [i, j) consists entirely of filters.</i></td></tr>
<tr><th id="2940">2940</th><td>    <b>for</b> (<a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a> = <a class="local col4 ref" href="#534i" title='i' data-ref="534i">i</a>; <a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a> != <a class="local col5 ref" href="#535e" title='e' data-ref="535e">e</a>; ++<a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a>)</td></tr>
<tr><th id="2941">2941</th><td>      <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a>]</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()))</td></tr>
<tr><th id="2942">2942</th><td>        <b>break</b>;</td></tr>
<tr><th id="2943">2943</th><td></td></tr>
<tr><th id="2944">2944</th><td>    <i>// Check whether the filters are already sorted by length.  We need to know</i></td></tr>
<tr><th id="2945">2945</th><td><i>    // if sorting them is actually going to do anything so that we only make a</i></td></tr>
<tr><th id="2946">2946</th><td><i>    // new landingpad instruction if it does.</i></td></tr>
<tr><th id="2947">2947</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col7 decl" id="537k" title='k' data-type='unsigned int' data-ref="537k">k</dfn> = <a class="local col4 ref" href="#534i" title='i' data-ref="534i">i</a>; <a class="local col7 ref" href="#537k" title='k' data-ref="537k">k</a> + <var>1</var> &lt; <a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a>; ++<a class="local col7 ref" href="#537k" title='k' data-ref="537k">k</a>)</td></tr>
<tr><th id="2948">2948</th><td>      <b>if</b> (<a class="tu ref" href="#_ZL14shorter_filterPKN4llvm5ValueES2_" title='shorter_filter' data-use='c' data-ref="_ZL14shorter_filterPKN4llvm5ValueES2_">shorter_filter</a>(<a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#537k" title='k' data-ref="537k">k</a>+<var>1</var>]</a>, <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col7 ref" href="#537k" title='k' data-ref="537k">k</a>]</a>)) {</td></tr>
<tr><th id="2949">2949</th><td>        <i>// Not sorted, so sort the filters now.  Doing an unstable sort would be</i></td></tr>
<tr><th id="2950">2950</th><td><i>        // correct too but reordering filters pointlessly might confuse users.</i></td></tr>
<tr><th id="2951">2951</th><td>        <span class="namespace">std::</span><a class="ref" href="../../../../../include/c++/7/bits/stl_algo.h.html#_ZSt11stable_sortT_S_T0_" title='std::stable_sort' data-ref="_ZSt11stable_sortT_S_T0_">stable_sort</a>(<a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>() + <a class="local col4 ref" href="#534i" title='i' data-ref="534i">i</a>, <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>() + <a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a>,</td></tr>
<tr><th id="2952">2952</th><td>                         <a class="tu ref" href="#_ZL14shorter_filterPKN4llvm5ValueES2_" title='shorter_filter' data-use='r' data-ref="_ZL14shorter_filterPKN4llvm5ValueES2_">shorter_filter</a>);</td></tr>
<tr><th id="2953">2953</th><td>        <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2954">2954</th><td>        <b>break</b>;</td></tr>
<tr><th id="2955">2955</th><td>      }</td></tr>
<tr><th id="2956">2956</th><td></td></tr>
<tr><th id="2957">2957</th><td>    <i>// Look for the next batch of filters.</i></td></tr>
<tr><th id="2958">2958</th><td>    <a class="local col4 ref" href="#534i" title='i' data-ref="534i">i</a> = <a class="local col6 ref" href="#536j" title='j' data-ref="536j">j</a> + <var>1</var>;</td></tr>
<tr><th id="2959">2959</th><td>  }</td></tr>
<tr><th id="2960">2960</th><td></td></tr>
<tr><th id="2961">2961</th><td>  <i>// If typeinfos matched if and only if equal, then the elements of a filter L</i></td></tr>
<tr><th id="2962">2962</th><td><i>  // that occurs later than a filter F could be replaced by the intersection of</i></td></tr>
<tr><th id="2963">2963</th><td><i>  // the elements of F and L.  In reality two typeinfos can match without being</i></td></tr>
<tr><th id="2964">2964</th><td><i>  // equal (for example if one represents a C++ class, and the other some class</i></td></tr>
<tr><th id="2965">2965</th><td><i>  // derived from it) so it would be wrong to perform this transform in general.</i></td></tr>
<tr><th id="2966">2966</th><td><i>  // However the transform is correct and useful if F is a subset of L.  In that</i></td></tr>
<tr><th id="2967">2967</th><td><i>  // case L can be replaced by F, and thus removed altogether since repeating a</i></td></tr>
<tr><th id="2968">2968</th><td><i>  // filter is pointless.  So here we look at all pairs of filters F and L where</i></td></tr>
<tr><th id="2969">2969</th><td><i>  // L follows F in the list of clauses, and remove L if every element of F is</i></td></tr>
<tr><th id="2970">2970</th><td><i>  // an element of L.  This can occur when inlining C++ functions with exception</i></td></tr>
<tr><th id="2971">2971</th><td><i>  // specifications.</i></td></tr>
<tr><th id="2972">2972</th><td>  <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="538i" title='i' data-type='unsigned int' data-ref="538i">i</dfn> = <var>0</var>; <a class="local col8 ref" href="#538i" title='i' data-ref="538i">i</a> + <var>1</var> &lt; <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); ++<a class="local col8 ref" href="#538i" title='i' data-ref="538i">i</a>) {</td></tr>
<tr><th id="2973">2973</th><td>    <i>// Examine each filter in turn.</i></td></tr>
<tr><th id="2974">2974</th><td>    <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="539Filter" title='Filter' data-type='llvm::Value *' data-ref="539Filter">Filter</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col8 ref" href="#538i" title='i' data-ref="538i">i</a>]</a>;</td></tr>
<tr><th id="2975">2975</th><td>    <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a> *<dfn class="local col0 decl" id="540FTy" title='FTy' data-type='llvm::ArrayType *' data-ref="540FTy">FTy</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col9 ref" href="#539Filter" title='Filter' data-ref="539Filter">Filter</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="2976">2976</th><td>    <b>if</b> (!<a class="local col0 ref" href="#540FTy" title='FTy' data-ref="540FTy">FTy</a>)</td></tr>
<tr><th id="2977">2977</th><td>      <i>// Not a filter - skip it.</i></td></tr>
<tr><th id="2978">2978</th><td>      <b>continue</b>;</td></tr>
<tr><th id="2979">2979</th><td>    <em>unsigned</em> <dfn class="local col1 decl" id="541FElts" title='FElts' data-type='unsigned int' data-ref="541FElts">FElts</dfn> = <a class="local col0 ref" href="#540FTy" title='FTy' data-ref="540FTy">FTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="2980">2980</th><td>    <i>// Examine each filter following this one.  Doing this backwards means that</i></td></tr>
<tr><th id="2981">2981</th><td><i>    // we don't have to worry about filters disappearing under us when removed.</i></td></tr>
<tr><th id="2982">2982</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col2 decl" id="542j" title='j' data-type='unsigned int' data-ref="542j">j</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>() - <var>1</var>; <a class="local col2 ref" href="#542j" title='j' data-ref="542j">j</a> != <a class="local col8 ref" href="#538i" title='i' data-ref="538i">i</a>; --<a class="local col2 ref" href="#542j" title='j' data-ref="542j">j</a>) {</td></tr>
<tr><th id="2983">2983</th><td>      <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="543LFilter" title='LFilter' data-type='llvm::Value *' data-ref="543LFilter">LFilter</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col2 ref" href="#542j" title='j' data-ref="542j">j</a>]</a>;</td></tr>
<tr><th id="2984">2984</th><td>      <a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a> *<dfn class="local col4 decl" id="544LTy" title='LTy' data-type='llvm::ArrayType *' data-ref="544LTy">LTy</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/DerivedTypes.h.html#llvm::ArrayType" title='llvm::ArrayType' data-ref="llvm::ArrayType">ArrayType</a>&gt;(<a class="local col3 ref" href="#543LFilter" title='LFilter' data-ref="543LFilter">LFilter</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="2985">2985</th><td>      <b>if</b> (!<a class="local col4 ref" href="#544LTy" title='LTy' data-ref="544LTy">LTy</a>)</td></tr>
<tr><th id="2986">2986</th><td>        <i>// Not a filter - skip it.</i></td></tr>
<tr><th id="2987">2987</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2988">2988</th><td>      <i>// If Filter is a subset of LFilter, i.e. every element of Filter is also</i></td></tr>
<tr><th id="2989">2989</th><td><i>      // an element of LFilter, then discard LFilter.</i></td></tr>
<tr><th id="2990">2990</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl" title='llvm::SmallVectorImpl' data-ref="llvm::SmallVectorImpl">SmallVectorImpl</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *&gt;::<a class="typedef" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVectorImpl{llvm::Constant*}::iterator" title='llvm::SmallVectorImpl&lt;llvm::Constant *&gt;::iterator' data-type='typename SuperClass::iterator' data-ref="llvm::SmallVectorImpl{llvm::Constant*}::iterator">iterator</a> <dfn class="local col5 decl" id="545J" title='J' data-type='SmallVectorImpl&lt;Constant *&gt;::iterator' data-ref="545J">J</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommon5beginEv" title='llvm::SmallVectorTemplateCommon::begin' data-ref="_ZN4llvm25SmallVectorTemplateCommon5beginEv">begin</a>() + <a class="local col2 ref" href="#542j" title='j' data-ref="542j">j</a>;</td></tr>
<tr><th id="2991">2991</th><td>      <i>// If Filter is empty then it is a subset of LFilter.</i></td></tr>
<tr><th id="2992">2992</th><td>      <b>if</b> (!<a class="local col1 ref" href="#541FElts" title='FElts' data-ref="541FElts">FElts</a>) {</td></tr>
<tr><th id="2993">2993</th><td>        <i>// Discard LFilter.</i></td></tr>
<tr><th id="2994">2994</th><td>        <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE" title='llvm::SmallVectorImpl::erase' data-ref="_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE">erase</a>(<a class="local col5 ref" href="#545J" title='J' data-ref="545J">J</a>);</td></tr>
<tr><th id="2995">2995</th><td>        <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="2996">2996</th><td>        <i>// Move on to the next filter.</i></td></tr>
<tr><th id="2997">2997</th><td>        <b>continue</b>;</td></tr>
<tr><th id="2998">2998</th><td>      }</td></tr>
<tr><th id="2999">2999</th><td>      <em>unsigned</em> <dfn class="local col6 decl" id="546LElts" title='LElts' data-type='unsigned int' data-ref="546LElts">LElts</dfn> = <a class="local col4 ref" href="#544LTy" title='LTy' data-ref="544LTy">LTy</a>-&gt;<a class="ref" href="../../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm14SequentialType14getNumElementsEv" title='llvm::SequentialType::getNumElements' data-ref="_ZNK4llvm14SequentialType14getNumElementsEv">getNumElements</a>();</td></tr>
<tr><th id="3000">3000</th><td>      <i>// If Filter is longer than LFilter then it cannot be a subset of it.</i></td></tr>
<tr><th id="3001">3001</th><td>      <b>if</b> (<a class="local col1 ref" href="#541FElts" title='FElts' data-ref="541FElts">FElts</a> &gt; <a class="local col6 ref" href="#546LElts" title='LElts' data-ref="546LElts">LElts</a>)</td></tr>
<tr><th id="3002">3002</th><td>        <i>// Move on to the next filter.</i></td></tr>
<tr><th id="3003">3003</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3004">3004</th><td>      <i>// At this point we know that LFilter has at least one element.</i></td></tr>
<tr><th id="3005">3005</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantAggregateZero" title='llvm::ConstantAggregateZero' data-ref="llvm::ConstantAggregateZero">ConstantAggregateZero</a>&gt;(<a class="local col3 ref" href="#543LFilter" title='LFilter' data-ref="543LFilter">LFilter</a>)) { <i>// LFilter only contains zeros.</i></td></tr>
<tr><th id="3006">3006</th><td>        <i>// Filter is a subset of LFilter iff Filter contains only zeros (as we</i></td></tr>
<tr><th id="3007">3007</th><td><i>        // already know that Filter is not longer than LFilter).</i></td></tr>
<tr><th id="3008">3008</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantAggregateZero" title='llvm::ConstantAggregateZero' data-ref="llvm::ConstantAggregateZero">ConstantAggregateZero</a>&gt;(<a class="local col9 ref" href="#539Filter" title='Filter' data-ref="539Filter">Filter</a>)) {</td></tr>
<tr><th id="3009">3009</th><td>          <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (FElts &lt;= LElts &amp;&amp; &quot;Should have handled this case earlier!&quot;) ? void (0) : __assert_fail (&quot;FElts &lt;= LElts &amp;&amp; \&quot;Should have handled this case earlier!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 3009, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col1 ref" href="#541FElts" title='FElts' data-ref="541FElts">FElts</a> &lt;= <a class="local col6 ref" href="#546LElts" title='LElts' data-ref="546LElts">LElts</a> &amp;&amp; <q>"Should have handled this case earlier!"</q>);</td></tr>
<tr><th id="3010">3010</th><td>          <i>// Discard LFilter.</i></td></tr>
<tr><th id="3011">3011</th><td>          <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE" title='llvm::SmallVectorImpl::erase' data-ref="_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE">erase</a>(<a class="local col5 ref" href="#545J" title='J' data-ref="545J">J</a>);</td></tr>
<tr><th id="3012">3012</th><td>          <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="3013">3013</th><td>        }</td></tr>
<tr><th id="3014">3014</th><td>        <i>// Move on to the next filter.</i></td></tr>
<tr><th id="3015">3015</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3016">3016</th><td>      }</td></tr>
<tr><th id="3017">3017</th><td>      <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a> *<dfn class="local col7 decl" id="547LArray" title='LArray' data-type='llvm::ConstantArray *' data-ref="547LArray">LArray</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a>&gt;(<a class="local col3 ref" href="#543LFilter" title='LFilter' data-ref="543LFilter">LFilter</a>);</td></tr>
<tr><th id="3018">3018</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantAggregateZero" title='llvm::ConstantAggregateZero' data-ref="llvm::ConstantAggregateZero">ConstantAggregateZero</a>&gt;(<a class="local col9 ref" href="#539Filter" title='Filter' data-ref="539Filter">Filter</a>)) { <i>// Filter only contains zeros.</i></td></tr>
<tr><th id="3019">3019</th><td>        <i>// Since Filter is non-empty and contains only zeros, it is a subset of</i></td></tr>
<tr><th id="3020">3020</th><td><i>        // LFilter iff LFilter contains a zero.</i></td></tr>
<tr><th id="3021">3021</th><td>        <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (FElts &gt; 0 &amp;&amp; &quot;Should have eliminated the empty filter earlier!&quot;) ? void (0) : __assert_fail (&quot;FElts &gt; 0 &amp;&amp; \&quot;Should have eliminated the empty filter earlier!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 3021, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col1 ref" href="#541FElts" title='FElts' data-ref="541FElts">FElts</a> &gt; <var>0</var> &amp;&amp; <q>"Should have eliminated the empty filter earlier!"</q>);</td></tr>
<tr><th id="3022">3022</th><td>        <b>for</b> (<em>unsigned</em> <dfn class="local col8 decl" id="548l" title='l' data-type='unsigned int' data-ref="548l">l</dfn> = <var>0</var>; <a class="local col8 ref" href="#548l" title='l' data-ref="548l">l</a> != <a class="local col6 ref" href="#546LElts" title='LElts' data-ref="546LElts">LElts</a>; ++<a class="local col8 ref" href="#548l" title='l' data-ref="548l">l</a>)</td></tr>
<tr><th id="3023">3023</th><td>          <b>if</b> (<a class="local col7 ref" href="#547LArray" title='LArray' data-ref="547LArray">LArray</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#395" title='llvm::ConstantAggregate::getOperand' data-ref="_ZNK4llvm17ConstantAggregate10getOperandEj">getOperand</a>(<a class="local col8 ref" href="#548l" title='l' data-ref="548l">l</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZNK4llvm8Constant11isNullValueEv" title='llvm::Constant::isNullValue' data-ref="_ZNK4llvm8Constant11isNullValueEv">isNullValue</a>()) {</td></tr>
<tr><th id="3024">3024</th><td>            <i>// LFilter contains a zero - discard it.</i></td></tr>
<tr><th id="3025">3025</th><td>            <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE" title='llvm::SmallVectorImpl::erase' data-ref="_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE">erase</a>(<a class="local col5 ref" href="#545J" title='J' data-ref="545J">J</a>);</td></tr>
<tr><th id="3026">3026</th><td>            <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="3027">3027</th><td>            <b>break</b>;</td></tr>
<tr><th id="3028">3028</th><td>          }</td></tr>
<tr><th id="3029">3029</th><td>        <i>// Move on to the next filter.</i></td></tr>
<tr><th id="3030">3030</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3031">3031</th><td>      }</td></tr>
<tr><th id="3032">3032</th><td>      <i>// At this point we know that both filters are ConstantArrays.  Loop over</i></td></tr>
<tr><th id="3033">3033</th><td><i>      // operands to see whether every element of Filter is also an element of</i></td></tr>
<tr><th id="3034">3034</th><td><i>      // LFilter.  Since filters tend to be short this is probably faster than</i></td></tr>
<tr><th id="3035">3035</th><td><i>      // using a method that scales nicely.</i></td></tr>
<tr><th id="3036">3036</th><td>      <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a> *<dfn class="local col9 decl" id="549FArray" title='FArray' data-type='llvm::ConstantArray *' data-ref="549FArray">FArray</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantArray" title='llvm::ConstantArray' data-ref="llvm::ConstantArray">ConstantArray</a>&gt;(<a class="local col9 ref" href="#539Filter" title='Filter' data-ref="539Filter">Filter</a>);</td></tr>
<tr><th id="3037">3037</th><td>      <em>bool</em> <dfn class="local col0 decl" id="550AllFound" title='AllFound' data-type='bool' data-ref="550AllFound">AllFound</dfn> = <b>true</b>;</td></tr>
<tr><th id="3038">3038</th><td>      <b>for</b> (<em>unsigned</em> <dfn class="local col1 decl" id="551f" title='f' data-type='unsigned int' data-ref="551f">f</dfn> = <var>0</var>; <a class="local col1 ref" href="#551f" title='f' data-ref="551f">f</a> != <a class="local col1 ref" href="#541FElts" title='FElts' data-ref="541FElts">FElts</a>; ++<a class="local col1 ref" href="#551f" title='f' data-ref="551f">f</a>) {</td></tr>
<tr><th id="3039">3039</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="552FTypeInfo" title='FTypeInfo' data-type='llvm::Value *' data-ref="552FTypeInfo">FTypeInfo</dfn> = <a class="local col9 ref" href="#549FArray" title='FArray' data-ref="549FArray">FArray</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#395" title='llvm::ConstantAggregate::getOperand' data-ref="_ZNK4llvm17ConstantAggregate10getOperandEj">getOperand</a>(<a class="local col1 ref" href="#551f" title='f' data-ref="551f">f</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant17stripPointerCastsEv" title='llvm::Constant::stripPointerCasts' data-ref="_ZN4llvm8Constant17stripPointerCastsEv">stripPointerCasts</a>();</td></tr>
<tr><th id="3040">3040</th><td>        <a class="local col0 ref" href="#550AllFound" title='AllFound' data-ref="550AllFound">AllFound</a> = <b>false</b>;</td></tr>
<tr><th id="3041">3041</th><td>        <b>for</b> (<em>unsigned</em> <dfn class="local col3 decl" id="553l" title='l' data-type='unsigned int' data-ref="553l">l</dfn> = <var>0</var>; <a class="local col3 ref" href="#553l" title='l' data-ref="553l">l</a> != <a class="local col6 ref" href="#546LElts" title='LElts' data-ref="546LElts">LElts</a>; ++<a class="local col3 ref" href="#553l" title='l' data-ref="553l">l</a>) {</td></tr>
<tr><th id="3042">3042</th><td>          <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="554LTypeInfo" title='LTypeInfo' data-type='llvm::Value *' data-ref="554LTypeInfo">LTypeInfo</dfn> = <a class="local col7 ref" href="#547LArray" title='LArray' data-ref="547LArray">LArray</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#395" title='llvm::ConstantAggregate::getOperand' data-ref="_ZNK4llvm17ConstantAggregate10getOperandEj">getOperand</a>(<a class="local col3 ref" href="#553l" title='l' data-ref="553l">l</a>)-&gt;<a class="ref" href="../../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant17stripPointerCastsEv" title='llvm::Constant::stripPointerCasts' data-ref="_ZN4llvm8Constant17stripPointerCastsEv">stripPointerCasts</a>();</td></tr>
<tr><th id="3043">3043</th><td>          <b>if</b> (<a class="local col4 ref" href="#554LTypeInfo" title='LTypeInfo' data-ref="554LTypeInfo">LTypeInfo</a> == <a class="local col2 ref" href="#552FTypeInfo" title='FTypeInfo' data-ref="552FTypeInfo">FTypeInfo</a>) {</td></tr>
<tr><th id="3044">3044</th><td>            <a class="local col0 ref" href="#550AllFound" title='AllFound' data-ref="550AllFound">AllFound</a> = <b>true</b>;</td></tr>
<tr><th id="3045">3045</th><td>            <b>break</b>;</td></tr>
<tr><th id="3046">3046</th><td>          }</td></tr>
<tr><th id="3047">3047</th><td>        }</td></tr>
<tr><th id="3048">3048</th><td>        <b>if</b> (!<a class="local col0 ref" href="#550AllFound" title='AllFound' data-ref="550AllFound">AllFound</a>)</td></tr>
<tr><th id="3049">3049</th><td>          <b>break</b>;</td></tr>
<tr><th id="3050">3050</th><td>      }</td></tr>
<tr><th id="3051">3051</th><td>      <b>if</b> (<a class="local col0 ref" href="#550AllFound" title='AllFound' data-ref="550AllFound">AllFound</a>) {</td></tr>
<tr><th id="3052">3052</th><td>        <i>// Discard LFilter.</i></td></tr>
<tr><th id="3053">3053</th><td>        <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE" title='llvm::SmallVectorImpl::erase' data-ref="_ZN4llvm15SmallVectorImpl5eraseENS_23SmallVectorTemplateBaseIT_Xsr21is_trivially_copyableIS2_EE5valueEE14const_iteratorE">erase</a>(<a class="local col5 ref" href="#545J" title='J' data-ref="545J">J</a>);</td></tr>
<tr><th id="3054">3054</th><td>        <a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a> = <b>true</b>;</td></tr>
<tr><th id="3055">3055</th><td>      }</td></tr>
<tr><th id="3056">3056</th><td>      <i>// Move on to the next filter.</i></td></tr>
<tr><th id="3057">3057</th><td>    }</td></tr>
<tr><th id="3058">3058</th><td>  }</td></tr>
<tr><th id="3059">3059</th><td></td></tr>
<tr><th id="3060">3060</th><td>  <i>// If we changed any of the clauses, replace the old landingpad instruction</i></td></tr>
<tr><th id="3061">3061</th><td><i>  // with a new one.</i></td></tr>
<tr><th id="3062">3062</th><td>  <b>if</b> (<a class="local col3 ref" href="#513MakeNewInstruction" title='MakeNewInstruction' data-ref="513MakeNewInstruction">MakeNewInstruction</a>) {</td></tr>
<tr><th id="3063">3063</th><td>    <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LandingPadInst" title='llvm::LandingPadInst' data-ref="llvm::LandingPadInst">LandingPadInst</a> *<dfn class="local col5 decl" id="555NLI" title='NLI' data-type='llvm::LandingPadInst *' data-ref="555NLI">NLI</dfn> = <a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::LandingPadInst" title='llvm::LandingPadInst' data-ref="llvm::LandingPadInst">LandingPadInst</a>::<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm14LandingPadInst6CreateEPNS_4TypeEjRKNS_5TwineEPNS_11InstructionE" title='llvm::LandingPadInst::Create' data-ref="_ZN4llvm14LandingPadInst6CreateEPNS_4TypeEjRKNS_5TwineEPNS_11InstructionE">Create</a>(<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="3064">3064</th><td>                                                 <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>());</td></tr>
<tr><th id="3065">3065</th><td>    <b>for</b> (<em>unsigned</em> <dfn class="local col6 decl" id="556i" title='i' data-type='unsigned int' data-ref="556i">i</dfn> = <var>0</var>, <dfn class="local col7 decl" id="557e" title='e' data-type='unsigned int' data-ref="557e">e</dfn> = <a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase4sizeEv" title='llvm::SmallVectorBase::size' data-ref="_ZNK4llvm15SmallVectorBase4sizeEv">size</a>(); <a class="local col6 ref" href="#556i" title='i' data-ref="556i">i</a> != <a class="local col7 ref" href="#557e" title='e' data-ref="557e">e</a>; ++<a class="local col6 ref" href="#556i" title='i' data-ref="556i">i</a>)</td></tr>
<tr><th id="3066">3066</th><td>      <a class="local col5 ref" href="#555NLI" title='NLI' data-ref="555NLI">NLI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm14LandingPadInst9addClauseEPNS_8ConstantE" title='llvm::LandingPadInst::addClause' data-ref="_ZN4llvm14LandingPadInst9addClauseEPNS_8ConstantE">addClause</a>(<a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<a class="local col6 ref" href="#556i" title='i' data-ref="556i">i</a>]</a>);</td></tr>
<tr><th id="3067">3067</th><td>    <i>// A landing pad with no clauses must have the cleanup flag set.  It is</i></td></tr>
<tr><th id="3068">3068</th><td><i>    // theoretically possible, though highly unlikely, that we eliminated all</i></td></tr>
<tr><th id="3069">3069</th><td><i>    // clauses.  If so, force the cleanup flag to true.</i></td></tr>
<tr><th id="3070">3070</th><td>    <b>if</b> (<a class="local col4 ref" href="#514NewClauses" title='NewClauses' data-ref="514NewClauses">NewClauses</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase5emptyEv" title='llvm::SmallVectorBase::empty' data-ref="_ZNK4llvm15SmallVectorBase5emptyEv">empty</a>())</td></tr>
<tr><th id="3071">3071</th><td>      <a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a> = <b>true</b>;</td></tr>
<tr><th id="3072">3072</th><td>    <a class="local col5 ref" href="#555NLI" title='NLI' data-ref="555NLI">NLI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm14LandingPadInst10setCleanupEb" title='llvm::LandingPadInst::setCleanup' data-ref="_ZN4llvm14LandingPadInst10setCleanupEb">setCleanup</a>(<a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a>);</td></tr>
<tr><th id="3073">3073</th><td>    <b>return</b> <a class="local col5 ref" href="#555NLI" title='NLI' data-ref="555NLI">NLI</a>;</td></tr>
<tr><th id="3074">3074</th><td>  }</td></tr>
<tr><th id="3075">3075</th><td></td></tr>
<tr><th id="3076">3076</th><td>  <i>// Even if none of the clauses changed, we may nonetheless have understood</i></td></tr>
<tr><th id="3077">3077</th><td><i>  // that the cleanup flag is pointless.  Clear it if so.</i></td></tr>
<tr><th id="3078">3078</th><td>  <b>if</b> (<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm14LandingPadInst9isCleanupEv" title='llvm::LandingPadInst::isCleanup' data-ref="_ZNK4llvm14LandingPadInst9isCleanupEv">isCleanup</a>() != <a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a>) {</td></tr>
<tr><th id="3079">3079</th><td>    <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (!CleanupFlag &amp;&amp; &quot;Adding a cleanup, not removing one?!&quot;) ? void (0) : __assert_fail (&quot;!CleanupFlag &amp;&amp; \&quot;Adding a cleanup, not removing one?!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 3079, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(!<a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a> &amp;&amp; <q>"Adding a cleanup, not removing one?!"</q>);</td></tr>
<tr><th id="3080">3080</th><td>    <a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>.<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm14LandingPadInst10setCleanupEb" title='llvm::LandingPadInst::setCleanup' data-ref="_ZN4llvm14LandingPadInst10setCleanupEb">setCleanup</a>(<a class="local col5 ref" href="#515CleanupFlag" title='CleanupFlag' data-ref="515CleanupFlag">CleanupFlag</a>);</td></tr>
<tr><th id="3081">3081</th><td>    <b>return</b> &amp;<a class="local col1 ref" href="#511LI" title='LI' data-ref="511LI">LI</a>;</td></tr>
<tr><th id="3082">3082</th><td>  }</td></tr>
<tr><th id="3083">3083</th><td></td></tr>
<tr><th id="3084">3084</th><td>  <b>return</b> <b>nullptr</b>;</td></tr>
<tr><th id="3085">3085</th><td>}</td></tr>
<tr><th id="3086">3086</th><td></td></tr>
<tr><th id="3087">3087</th><td><i class="doc" data-doc="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">/// Try to move the specified instruction from its current block into the</i></td></tr>
<tr><th id="3088">3088</th><td><i class="doc" data-doc="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">/// beginning of DestBlock, which can only happen if it's safe to move the</i></td></tr>
<tr><th id="3089">3089</th><td><i class="doc" data-doc="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">/// instruction past all of the instructions between it and the end of its</i></td></tr>
<tr><th id="3090">3090</th><td><i class="doc" data-doc="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">/// block.</i></td></tr>
<tr><th id="3091">3091</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE" title='TryToSinkInstruction' data-type='bool TryToSinkInstruction(llvm::Instruction * I, llvm::BasicBlock * DestBlock)' data-ref="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">TryToSinkInstruction</dfn>(<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col8 decl" id="558I" title='I' data-type='llvm::Instruction *' data-ref="558I">I</dfn>, <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col9 decl" id="559DestBlock" title='DestBlock' data-type='llvm::BasicBlock *' data-ref="559DestBlock">DestBlock</dfn>) {</td></tr>
<tr><th id="3092">3092</th><td>  <a class="macro" href="../../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (I-&gt;hasOneUse() &amp;&amp; &quot;Invariants didn&apos;t hold!&quot;) ? void (0) : __assert_fail (&quot;I-&gt;hasOneUse() &amp;&amp; \&quot;Invariants didn&apos;t hold!\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/Transforms/InstCombine/InstructionCombining.cpp&quot;, 3092, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>() &amp;&amp; <q>"Invariants didn't hold!"</q>);</td></tr>
<tr><th id="3093">3093</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col0 decl" id="560SrcBlock" title='SrcBlock' data-type='llvm::BasicBlock *' data-ref="560SrcBlock">SrcBlock</dfn> = <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="3094">3094</th><td></td></tr>
<tr><th id="3095">3095</th><td>  <i>// Cannot move control-flow-involving, volatile loads, vaarg, etc.</i></td></tr>
<tr><th id="3096">3096</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>) || <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction7isEHPadEv" title='llvm::Instruction::isEHPad' data-ref="_ZNK4llvm11Instruction7isEHPadEv">isEHPad</a>() || <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction18mayHaveSideEffectsEv" title='llvm::Instruction::mayHaveSideEffects' data-ref="_ZNK4llvm11Instruction18mayHaveSideEffectsEv">mayHaveSideEffects</a>() ||</td></tr>
<tr><th id="3097">3097</th><td>      <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction12isTerminatorEv" title='llvm::Instruction::isTerminator' data-ref="_ZNK4llvm11Instruction12isTerminatorEv">isTerminator</a>())</td></tr>
<tr><th id="3098">3098</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3099">3099</th><td></td></tr>
<tr><th id="3100">3100</th><td>  <i>// Do not sink static or dynamic alloca instructions. Static allocas must</i></td></tr>
<tr><th id="3101">3101</th><td><i>  // remain in the entry block, and dynamic allocas must not be sunk in between</i></td></tr>
<tr><th id="3102">3102</th><td><i>  // a stacksave / stackrestore pair, which would incorrectly shorten its</i></td></tr>
<tr><th id="3103">3103</th><td><i>  // lifetime.</i></td></tr>
<tr><th id="3104">3104</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a>&gt;(<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>))</td></tr>
<tr><th id="3105">3105</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3106">3106</th><td></td></tr>
<tr><th id="3107">3107</th><td>  <i>// Do not sink into catchswitch blocks.</i></td></tr>
<tr><th id="3108">3108</th><td>  <b>if</b> (<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::CatchSwitchInst" title='llvm::CatchSwitchInst' data-ref="llvm::CatchSwitchInst">CatchSwitchInst</a>&gt;(<a class="local col9 ref" href="#559DestBlock" title='DestBlock' data-ref="559DestBlock">DestBlock</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>()))</td></tr>
<tr><th id="3109">3109</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3110">3110</th><td></td></tr>
<tr><th id="3111">3111</th><td>  <i>// Do not sink convergent call instructions.</i></td></tr>
<tr><th id="3112">3112</th><td>  <b>if</b> (<em>auto</em> *<dfn class="local col1 decl" id="561CI" title='CI' data-type='llvm::CallInst *' data-ref="561CI"><a class="local col1 ref" href="#561CI" title='CI' data-ref="561CI">CI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::CallInst" title='llvm::CallInst' data-ref="llvm::CallInst">CallInst</a>&gt;(<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>)) {</td></tr>
<tr><th id="3113">3113</th><td>    <b>if</b> (<a class="local col1 ref" href="#561CI" title='CI' data-ref="561CI">CI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#_ZNK4llvm8CallBase12isConvergentEv" title='llvm::CallBase::isConvergent' data-ref="_ZNK4llvm8CallBase12isConvergentEv">isConvergent</a>())</td></tr>
<tr><th id="3114">3114</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3115">3115</th><td>  }</td></tr>
<tr><th id="3116">3116</th><td>  <i>// We can only sink load instructions if there is nothing between the load and</i></td></tr>
<tr><th id="3117">3117</th><td><i>  // the end of block that could change the value.</i></td></tr>
<tr><th id="3118">3118</th><td>  <b>if</b> (<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction17mayReadFromMemoryEv" title='llvm::Instruction::mayReadFromMemory' data-ref="_ZNK4llvm11Instruction17mayReadFromMemoryEv">mayReadFromMemory</a>()) {</td></tr>
<tr><th id="3119">3119</th><td>    <b>for</b> (<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="typedef" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock::iterator" title='llvm::BasicBlock::iterator' data-type='InstListType::iterator' data-ref="llvm::BasicBlock::iterator">iterator</a> <dfn class="local col2 decl" id="562Scan" title='Scan' data-type='BasicBlock::iterator' data-ref="562Scan">Scan</dfn> = <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/ilist_node.h.html#_ZN4llvm15ilist_node_impl11getIteratorEv" title='llvm::ilist_node_impl::getIterator' data-ref="_ZN4llvm15ilist_node_impl11getIteratorEv">getIterator</a>(),</td></tr>
<tr><th id="3120">3120</th><td>                              <dfn class="local col3 decl" id="563E" title='E' data-type='BasicBlock::iterator' data-ref="563E">E</dfn> = <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>();</td></tr>
<tr><th id="3121">3121</th><td>         <a class="local col2 ref" href="#562Scan" title='Scan' data-ref="562Scan">Scan</a> <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_" title='llvm::operator!=' data-ref="_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_">!=</a> <a class="local col3 ref" href="#563E" title='E' data-ref="563E">E</a>; <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvm14ilist_iteratorppEv" title='llvm::ilist_iterator::operator++' data-ref="_ZN4llvm14ilist_iteratorppEv">++</a><a class="local col2 ref" href="#562Scan" title='Scan' data-ref="562Scan">Scan</a>)</td></tr>
<tr><th id="3122">3122</th><td>      <b>if</b> (<a class="local col2 ref" href="#562Scan" title='Scan' data-ref="562Scan">Scan</a><a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratorptEv" title='llvm::ilist_iterator::operator-&gt;' data-ref="_ZNK4llvm14ilist_iteratorptEv">-&gt;</a><a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction16mayWriteToMemoryEv" title='llvm::Instruction::mayWriteToMemory' data-ref="_ZNK4llvm11Instruction16mayWriteToMemoryEv">mayWriteToMemory</a>())</td></tr>
<tr><th id="3123">3123</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3124">3124</th><td>  }</td></tr>
<tr><th id="3125">3125</th><td>  <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="typedef" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock::iterator" title='llvm::BasicBlock::iterator' data-type='InstListType::iterator' data-ref="llvm::BasicBlock::iterator">iterator</a> <dfn class="local col4 decl" id="564InsertPos" title='InsertPos' data-type='BasicBlock::iterator' data-ref="564InsertPos">InsertPos</dfn> = <a class="local col9 ref" href="#559DestBlock" title='DestBlock' data-ref="559DestBlock">DestBlock</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock19getFirstInsertionPtEv" title='llvm::BasicBlock::getFirstInsertionPt' data-ref="_ZN4llvm10BasicBlock19getFirstInsertionPtEv">getFirstInsertionPt</a>();</td></tr>
<tr><th id="3126">3126</th><td>  <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction10moveBeforeEPS0_" title='llvm::Instruction::moveBefore' data-ref="_ZN4llvm11Instruction10moveBeforeEPS0_">moveBefore</a>(&amp;<a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratordeEv" title='llvm::ilist_iterator::operator*' data-ref="_ZNK4llvm14ilist_iteratordeEv">*</a><a class="local col4 ref" href="#564InsertPos" title='InsertPos' data-ref="564InsertPos">InsertPos</a>);</td></tr>
<tr><th id="3127">3127</th><td>  <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#117" title='NumSunkInst' data-ref="NumSunkInst">NumSunkInst</a>;</td></tr>
<tr><th id="3128">3128</th><td></td></tr>
<tr><th id="3129">3129</th><td>  <i>// Also sink all related debug uses from the source basic block. Otherwise we</i></td></tr>
<tr><th id="3130">3130</th><td><i>  // get debug use before the def. Attempt to salvage debug uses first, to</i></td></tr>
<tr><th id="3131">3131</th><td><i>  // maximise the range variables have location for. If we cannot salvage, then</i></td></tr>
<tr><th id="3132">3132</th><td><i>  // mark the location undef: we know it was supposed to receive a new location</i></td></tr>
<tr><th id="3133">3133</th><td><i>  // here, but that computation has been sunk.</i></td></tr>
<tr><th id="3134">3134</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::DbgVariableIntrinsic" title='llvm::DbgVariableIntrinsic' data-ref="llvm::DbgVariableIntrinsic">DbgVariableIntrinsic</a> *, <var>2</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col5 decl" id="565DbgUsers" title='DbgUsers' data-type='SmallVector&lt;llvm::DbgVariableIntrinsic *, 2&gt;' data-ref="565DbgUsers">DbgUsers</dfn>;</td></tr>
<tr><th id="3135">3135</th><td>  <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm12findDbgUsersERNS_15SmallVectorImplIPNS_20DbgVariableIntrinsicEEEPNS_5ValueE" title='llvm::findDbgUsers' data-ref="_ZN4llvm12findDbgUsersERNS_15SmallVectorImplIPNS_20DbgVariableIntrinsicEEEPNS_5ValueE">findDbgUsers</a>(<span class='refarg'><a class="local col5 ref" href="#565DbgUsers" title='DbgUsers' data-ref="565DbgUsers">DbgUsers</a></span>, <a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>);</td></tr>
<tr><th id="3136">3136</th><td>  <b>for</b> (<em>auto</em> *<dfn class="local col6 decl" id="566DII" title='DII' data-type='llvm::DbgVariableIntrinsic *' data-ref="566DII">DII</dfn> : <a class="ref" href="../../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm7reverseEOT_PNSt9enable_ifIXsr10has_rbeginIS0_EE5valueEvE4typeE" title='llvm::reverse' data-ref="_ZN4llvm7reverseEOT_PNSt9enable_ifIXsr10has_rbeginIS0_EE5valueEvE4typeE">reverse</a>(<span class='refarg'><a class="local col5 ref" href="#565DbgUsers" title='DbgUsers' data-ref="565DbgUsers">DbgUsers</a></span>)) {</td></tr>
<tr><th id="3137">3137</th><td>    <b>if</b> (<a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>() == <a class="local col0 ref" href="#560SrcBlock" title='SrcBlock' data-ref="560SrcBlock">SrcBlock</a>) {</td></tr>
<tr><th id="3138">3138</th><td>      <i>// dbg.value is in the same basic block as the sunk inst, see if we can</i></td></tr>
<tr><th id="3139">3139</th><td><i>      // salvage it. Clone a new copy of the instruction: on success we need</i></td></tr>
<tr><th id="3140">3140</th><td><i>      // both salvaged and unsalvaged copies.</i></td></tr>
<tr><th id="3141">3141</th><td>      <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::DbgVariableIntrinsic" title='llvm::DbgVariableIntrinsic' data-ref="llvm::DbgVariableIntrinsic">DbgVariableIntrinsic</a> *, <var>1</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1ESt16initializer_listIT_E" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1ESt16initializer_listIT_E"></a><dfn class="local col7 decl" id="567TmpUser" title='TmpUser' data-type='SmallVector&lt;llvm::DbgVariableIntrinsic *, 1&gt;' data-ref="567TmpUser">TmpUser</dfn>{</td></tr>
<tr><th id="3142">3142</th><td>          <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::DbgVariableIntrinsic" title='llvm::DbgVariableIntrinsic' data-ref="llvm::DbgVariableIntrinsic">DbgVariableIntrinsic</a>&gt;(<a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction5cloneEv" title='llvm::Instruction::clone' data-ref="_ZNK4llvm11Instruction5cloneEv">clone</a>())};</td></tr>
<tr><th id="3143">3143</th><td></td></tr>
<tr><th id="3144">3144</th><td>      <b>if</b> (!<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm28salvageDebugInfoForDbgValuesERNS_11InstructionENS_8ArrayRefIPNS_20DbgVariableIntrinsicEEE" title='llvm::salvageDebugInfoForDbgValues' data-ref="_ZN4llvm28salvageDebugInfoForDbgValuesERNS_11InstructionENS_8ArrayRefIPNS_20DbgVariableIntrinsicEEE">salvageDebugInfoForDbgValues</a>(<span class='refarg'>*<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a></span>, <a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col7 ref" href="#567TmpUser" title='TmpUser' data-ref="567TmpUser">TmpUser</a>)) {</td></tr>
<tr><th id="3145">3145</th><td>        <i>// We are unable to salvage: sink the cloned dbg.value, and mark the</i></td></tr>
<tr><th id="3146">3146</th><td><i>        // original as undef, terminating any earlier variable location.</i></td></tr>
<tr><th id="3147">3147</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;SINK: &quot; &lt;&lt; *DII &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"SINK: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3148">3148</th><td>        <a class="local col7 ref" href="#567TmpUser" title='TmpUser' data-ref="567TmpUser">TmpUser</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction12insertBeforeEPS0_" title='llvm::Instruction::insertBefore' data-ref="_ZN4llvm11Instruction12insertBeforeEPS0_">insertBefore</a>(&amp;<a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratordeEv" title='llvm::ilist_iterator::operator*' data-ref="_ZNK4llvm14ilist_iteratordeEv">*</a><a class="local col4 ref" href="#564InsertPos" title='InsertPos' data-ref="564InsertPos">InsertPos</a>);</td></tr>
<tr><th id="3149">3149</th><td>        <a class="type" href="../../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="568Undef" title='Undef' data-type='llvm::Value *' data-ref="568Undef">Undef</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col8 ref" href="#558I" title='I' data-ref="558I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="3150">3150</th><td>        <a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>-&gt;<a class="ref" href="../../../include/llvm/IR/InstrTypes.h.html#1151" title='llvm::CallBase::setOperand' data-ref="_ZN4llvm8CallBase10setOperandEjPNS_5ValueE">setOperand</a>(<var>0</var>, <a class="type" href="../../../include/llvm/IR/Metadata.h.html#llvm::MetadataAsValue" title='llvm::MetadataAsValue' data-ref="llvm::MetadataAsValue">MetadataAsValue</a>::<a class="ref" href="../../../include/llvm/IR/Metadata.h.html#_ZN4llvm15MetadataAsValue3getERNS_11LLVMContextEPNS_8MetadataE" title='llvm::MetadataAsValue::get' data-ref="_ZN4llvm15MetadataAsValue3getERNS_11LLVMContextEPNS_8MetadataE">get</a>(<span class='refarg'><a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value10getContextEv" title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</a>()</span>,</td></tr>
<tr><th id="3151">3151</th><td>                                                <a class="type" href="../../../include/llvm/IR/Metadata.h.html#llvm::ValueAsMetadata" title='llvm::ValueAsMetadata' data-ref="llvm::ValueAsMetadata">ValueAsMetadata</a>::<a class="ref" href="../../../include/llvm/IR/Metadata.h.html#_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE" title='llvm::ValueAsMetadata::get' data-ref="_ZN4llvm15ValueAsMetadata3getEPNS_5ValueE">get</a>(<a class="local col8 ref" href="#568Undef" title='Undef' data-ref="568Undef">Undef</a>)));</td></tr>
<tr><th id="3152">3152</th><td>      } <b>else</b> {</td></tr>
<tr><th id="3153">3153</th><td>        <i>// We successfully salvaged: place the salvaged dbg.value in the</i></td></tr>
<tr><th id="3154">3154</th><td><i>        // original location, and move the unmodified dbg.value to sink with</i></td></tr>
<tr><th id="3155">3155</th><td><i>        // the sunk inst.</i></td></tr>
<tr><th id="3156">3156</th><td>        <a class="local col7 ref" href="#567TmpUser" title='TmpUser' data-ref="567TmpUser">TmpUser</a><a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm25SmallVectorTemplateCommonixEm" title='llvm::SmallVectorTemplateCommon::operator[]' data-ref="_ZN4llvm25SmallVectorTemplateCommonixEm">[<var>0</var>]</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction12insertBeforeEPS0_" title='llvm::Instruction::insertBefore' data-ref="_ZN4llvm11Instruction12insertBeforeEPS0_">insertBefore</a>(<a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>);</td></tr>
<tr><th id="3157">3157</th><td>        <a class="local col6 ref" href="#566DII" title='DII' data-ref="566DII">DII</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction10moveBeforeEPS0_" title='llvm::Instruction::moveBefore' data-ref="_ZN4llvm11Instruction10moveBeforeEPS0_">moveBefore</a>(&amp;<a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratordeEv" title='llvm::ilist_iterator::operator*' data-ref="_ZNK4llvm14ilist_iteratordeEv">*</a><a class="local col4 ref" href="#564InsertPos" title='InsertPos' data-ref="564InsertPos">InsertPos</a>);</td></tr>
<tr><th id="3158">3158</th><td>      }</td></tr>
<tr><th id="3159">3159</th><td>    }</td></tr>
<tr><th id="3160">3160</th><td>  }</td></tr>
<tr><th id="3161">3161</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="3162">3162</th><td>}</td></tr>
<tr><th id="3163">3163</th><td></td></tr>
<tr><th id="3164">3164</th><td><em>bool</em> <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a>::<dfn class="decl def" id="_ZN4llvm12InstCombiner3runEv" title='llvm::InstCombiner::run' data-ref="_ZN4llvm12InstCombiner3runEv">run</dfn>() {</td></tr>
<tr><th id="3165">3165</th><td>  <b>while</b> (!<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZNK4llvm19InstCombineWorklist7isEmptyEv" title='llvm::InstCombineWorklist::isEmpty' data-ref="_ZNK4llvm19InstCombineWorklist7isEmptyEv">isEmpty</a>()) {</td></tr>
<tr><th id="3166">3166</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col9 decl" id="569I" title='I' data-type='llvm::Instruction *' data-ref="569I">I</dfn> = <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist9RemoveOneEv" title='llvm::InstCombineWorklist::RemoveOne' data-ref="_ZN4llvm19InstCombineWorklist9RemoveOneEv">RemoveOne</a>();</td></tr>
<tr><th id="3167">3167</th><td>    <b>if</b> (<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> == <b>nullptr</b>) <b>continue</b>;  <i>// skip null values.</i></td></tr>
<tr><th id="3168">3168</th><td></td></tr>
<tr><th id="3169">3169</th><td>    <i>// Check to see if we can DCE the instruction.</i></td></tr>
<tr><th id="3170">3170</th><td>    <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>)) {</td></tr>
<tr><th id="3171">3171</th><td>      <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: DCE: &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: DCE: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3172">3172</th><td>      <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3173">3173</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#116" title='NumDeadInst' data-ref="NumDeadInst">NumDeadInst</a>;</td></tr>
<tr><th id="3174">3174</th><td>      <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3175">3175</th><td>      <b>continue</b>;</td></tr>
<tr><th id="3176">3176</th><td>    }</td></tr>
<tr><th id="3177">3177</th><td></td></tr>
<tr><th id="3178">3178</th><td>    <b>if</b> (!<a class="type" href="../../../include/llvm/Support/DebugCounter.h.html#llvm::DebugCounter" title='llvm::DebugCounter' data-ref="llvm::DebugCounter">DebugCounter</a>::<a class="ref" href="../../../include/llvm/Support/DebugCounter.h.html#_ZN4llvm12DebugCounter13shouldExecuteEj" title='llvm::DebugCounter::shouldExecute' data-ref="_ZN4llvm12DebugCounter13shouldExecuteEj">shouldExecute</a>(<a class="ref" href="#121" title='VisitCounter' data-ref="VisitCounter">VisitCounter</a>))</td></tr>
<tr><th id="3179">3179</th><td>      <b>continue</b>;</td></tr>
<tr><th id="3180">3180</th><td></td></tr>
<tr><th id="3181">3181</th><td>    <i>// Instruction isn't dead, see if we can constant propagate it.</i></td></tr>
<tr><th id="3182">3182</th><td>    <b>if</b> (!<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9use_emptyEv" title='llvm::Value::use_empty' data-ref="_ZNK4llvm5Value9use_emptyEv">use_empty</a>() &amp;&amp;</td></tr>
<tr><th id="3183">3183</th><td>        (<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() == <var>0</var> || <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>)))) {</td></tr>
<tr><th id="3184">3184</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col0 decl" id="570C" title='C' data-type='llvm::Constant *' data-ref="570C"><a class="local col0 ref" href="#570C" title='C' data-ref="570C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/ConstantFolding.h.html#_ZN4llvm23ConstantFoldInstructionEPNS_11InstructionERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE" title='llvm::ConstantFoldInstruction' data-ref="_ZN4llvm23ConstantFoldInstructionEPNS_11InstructionERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE">ConstantFoldInstruction</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::DL" title='llvm::InstCombiner::DL' data-ref="llvm::InstCombiner::DL">DL</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>)) {</td></tr>
<tr><th id="3185">3185</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: ConstFold to: &quot; &lt;&lt; *C &lt;&lt; &quot; from: &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: ConstFold to: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col0 ref" href="#570C" title='C' data-ref="570C">C</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" from: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></td></tr>
<tr><th id="3186">3186</th><td>                          <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3187">3187</th><td></td></tr>
<tr><th id="3188">3188</th><td>        <i>// Add operands to the worklist.</i></td></tr>
<tr><th id="3189">3189</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>, <a class="local col0 ref" href="#570C" title='C' data-ref="570C">C</a>);</td></tr>
<tr><th id="3190">3190</th><td>        <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#115" title='NumConstProp' data-ref="NumConstProp">NumConstProp</a>;</td></tr>
<tr><th id="3191">3191</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>))</td></tr>
<tr><th id="3192">3192</th><td>          <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3193">3193</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3194">3194</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3195">3195</th><td>      }</td></tr>
<tr><th id="3196">3196</th><td>    }</td></tr>
<tr><th id="3197">3197</th><td></td></tr>
<tr><th id="3198">3198</th><td>    <i>// In general, it is possible for computeKnownBits to determine all bits in</i></td></tr>
<tr><th id="3199">3199</th><td><i>    // a value even when the operands are not all constants.</i></td></tr>
<tr><th id="3200">3200</th><td>    <a class="type" href="../../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col1 decl" id="571Ty" title='Ty' data-type='llvm::Type *' data-ref="571Ty">Ty</dfn> = <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="3201">3201</th><td>    <b>if</b> (<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::ExpensiveCombines" title='llvm::InstCombiner::ExpensiveCombines' data-ref="llvm::InstCombiner::ExpensiveCombines">ExpensiveCombines</a> &amp;&amp; !<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9use_emptyEv" title='llvm::Value::use_empty' data-ref="_ZNK4llvm5Value9use_emptyEv">use_empty</a>() &amp;&amp; <a class="local col1 ref" href="#571Ty" title='Ty' data-ref="571Ty">Ty</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type18isIntOrIntVectorTyEv" title='llvm::Type::isIntOrIntVectorTy' data-ref="_ZNK4llvm4Type18isIntOrIntVectorTyEv">isIntOrIntVectorTy</a>()) {</td></tr>
<tr><th id="3202">3202</th><td>      <a class="type" href="../../../include/llvm/Support/KnownBits.h.html#llvm::KnownBits" title='llvm::KnownBits' data-ref="llvm::KnownBits">KnownBits</a> <dfn class="local col2 decl" id="572Known" title='Known' data-type='llvm::KnownBits' data-ref="572Known">Known</dfn> = <a class="member" href="InstCombineInternal.h.html#_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE" title='llvm::InstCombiner::computeKnownBits' data-ref="_ZNK4llvm12InstCombiner16computeKnownBitsEPKNS_5ValueEjPKNS_11InstructionE">computeKnownBits</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, <i>/*Depth*/</i><var>0</var>, <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>);</td></tr>
<tr><th id="3203">3203</th><td>      <b>if</b> (<a class="local col2 ref" href="#572Known" title='Known' data-ref="572Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits10isConstantEv" title='llvm::KnownBits::isConstant' data-ref="_ZNK4llvm9KnownBits10isConstantEv">isConstant</a>()) {</td></tr>
<tr><th id="3204">3204</th><td>        <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="573C" title='C' data-type='llvm::Constant *' data-ref="573C">C</dfn> = <a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeERKNS_5APIntE" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeERKNS_5APIntE">get</a>(<a class="local col1 ref" href="#571Ty" title='Ty' data-ref="571Ty">Ty</a>, <a class="local col2 ref" href="#572Known" title='Known' data-ref="572Known">Known</a>.<a class="ref" href="../../../include/llvm/Support/KnownBits.h.html#_ZNK4llvm9KnownBits11getConstantEv" title='llvm::KnownBits::getConstant' data-ref="_ZNK4llvm9KnownBits11getConstantEv">getConstant</a>());</td></tr>
<tr><th id="3205">3205</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: ConstFold (all bits known) to: &quot; &lt;&lt; *C &lt;&lt; &quot; from: &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: ConstFold (all bits known) to: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col3 ref" href="#573C" title='C' data-ref="573C">C</a></td></tr>
<tr><th id="3206">3206</th><td>                          <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" from: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3207">3207</th><td></td></tr>
<tr><th id="3208">3208</th><td>        <i>// Add operands to the worklist.</i></td></tr>
<tr><th id="3209">3209</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE" title='llvm::InstCombiner::replaceInstUsesWith' data-ref="_ZN4llvm12InstCombiner19replaceInstUsesWithERNS_11InstructionEPNS_5ValueE">replaceInstUsesWith</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>, <a class="local col3 ref" href="#573C" title='C' data-ref="573C">C</a>);</td></tr>
<tr><th id="3210">3210</th><td>        <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#115" title='NumConstProp' data-ref="NumConstProp">NumConstProp</a>;</td></tr>
<tr><th id="3211">3211</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>))</td></tr>
<tr><th id="3212">3212</th><td>          <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3213">3213</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3214">3214</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3215">3215</th><td>      }</td></tr>
<tr><th id="3216">3216</th><td>    }</td></tr>
<tr><th id="3217">3217</th><td></td></tr>
<tr><th id="3218">3218</th><td>    <i>// See if we can trivially sink this instruction to a successor basic block.</i></td></tr>
<tr><th id="3219">3219</th><td>    <b>if</b> (<a class="ref fake" href="../../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#EnableCodeSinking" title='EnableCodeSinking' data-use='m' data-ref="EnableCodeSinking">EnableCodeSinking</a> &amp;&amp; <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9hasOneUseEv" title='llvm::Value::hasOneUse' data-ref="_ZNK4llvm5Value9hasOneUseEv">hasOneUse</a>()) {</td></tr>
<tr><th id="3220">3220</th><td>      <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col4 decl" id="574BB" title='BB' data-type='llvm::BasicBlock *' data-ref="574BB">BB</dfn> = <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="3221">3221</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col5 decl" id="575UserInst" title='UserInst' data-type='llvm::Instruction *' data-ref="575UserInst">UserInst</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value18user_iterator_impldeEv" title='llvm::Value::user_iterator_impl::operator*' data-ref="_ZNK4llvm5Value18user_iterator_impldeEv">*</a><a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value10user_beginEv" title='llvm::Value::user_begin' data-ref="_ZN4llvm5Value10user_beginEv">user_begin</a>());</td></tr>
<tr><th id="3222">3222</th><td>      <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col6 decl" id="576UserParent" title='UserParent' data-type='llvm::BasicBlock *' data-ref="576UserParent">UserParent</dfn>;</td></tr>
<tr><th id="3223">3223</th><td></td></tr>
<tr><th id="3224">3224</th><td>      <i>// Get the block the use occurs in.</i></td></tr>
<tr><th id="3225">3225</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col7 decl" id="577PN" title='PN' data-type='llvm::PHINode *' data-ref="577PN"><a class="local col7 ref" href="#577PN" title='PN' data-ref="577PN">PN</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col5 ref" href="#575UserInst" title='UserInst' data-ref="575UserInst">UserInst</a>))</td></tr>
<tr><th id="3226">3226</th><td>        <a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a> = <a class="local col7 ref" href="#577PN" title='PN' data-ref="577PN">PN</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm7PHINode16getIncomingBlockERKNS_3UseE" title='llvm::PHINode::getIncomingBlock' data-ref="_ZNK4llvm7PHINode16getIncomingBlockERKNS_3UseE">getIncomingBlock</a>(<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value17use_iterator_impldeEv" title='llvm::Value::use_iterator_impl::operator*' data-ref="_ZNK4llvm5Value17use_iterator_impldeEv">*</a><a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value9use_beginEv" title='llvm::Value::use_begin' data-ref="_ZN4llvm5Value9use_beginEv">use_begin</a>());</td></tr>
<tr><th id="3227">3227</th><td>      <b>else</b></td></tr>
<tr><th id="3228">3228</th><td>        <a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a> = <a class="local col5 ref" href="#575UserInst" title='UserInst' data-ref="575UserInst">UserInst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="3229">3229</th><td></td></tr>
<tr><th id="3230">3230</th><td>      <b>if</b> (<a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a> != <a class="local col4 ref" href="#574BB" title='BB' data-ref="574BB">BB</a>) {</td></tr>
<tr><th id="3231">3231</th><td>        <em>bool</em> <dfn class="local col8 decl" id="578UserIsSuccessor" title='UserIsSuccessor' data-type='bool' data-ref="578UserIsSuccessor">UserIsSuccessor</dfn> = <b>false</b>;</td></tr>
<tr><th id="3232">3232</th><td>        <i>// See if the user is one of our successors.</i></td></tr>
<tr><th id="3233">3233</th><td>        <b>for</b> (<a class="typedef" href="../../../include/llvm/IR/CFG.h.html#llvm::succ_iterator" title='llvm::succ_iterator' data-type='SuccIterator&lt;llvm::Instruction, llvm::BasicBlock&gt;' data-ref="llvm::succ_iterator">succ_iterator</a> <dfn class="local col9 decl" id="579SI" title='SI' data-type='succ_iterator' data-ref="579SI">SI</dfn> = <a class="ref" href="../../../include/llvm/IR/CFG.h.html#_ZN4llvm10succ_beginEPNS_10BasicBlockE" title='llvm::succ_begin' data-ref="_ZN4llvm10succ_beginEPNS_10BasicBlockE">succ_begin</a>(<a class="local col4 ref" href="#574BB" title='BB' data-ref="574BB">BB</a>), <dfn class="local col0 decl" id="580E" title='E' data-type='succ_iterator' data-ref="580E">E</dfn> = <a class="ref" href="../../../include/llvm/IR/CFG.h.html#_ZN4llvm8succ_endEPNS_10BasicBlockE" title='llvm::succ_end' data-ref="_ZN4llvm8succ_endEPNS_10BasicBlockE">succ_end</a>(<a class="local col4 ref" href="#574BB" title='BB' data-ref="574BB">BB</a>); <a class="local col9 ref" href="#579SI" title='SI' data-ref="579SI">SI</a> <a class="ref" href="../../../include/llvm/ADT/iterator.h.html#_ZNK4llvm20iterator_facade_baseneERKT_" title='llvm::iterator_facade_base::operator!=' data-ref="_ZNK4llvm20iterator_facade_baseneERKT_">!=</a> <a class="local col0 ref" href="#580E" title='E' data-ref="580E">E</a>; <a class="ref" href="../../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseppEv" title='llvm::iterator_facade_base::operator++' data-ref="_ZN4llvm20iterator_facade_baseppEv">++</a><a class="local col9 ref" href="#579SI" title='SI' data-ref="579SI">SI</a>)</td></tr>
<tr><th id="3234">3234</th><td>          <b>if</b> (<a class="ref" href="../../../include/llvm/IR/CFG.h.html#_ZNK4llvm12SuccIteratordeEv" title='llvm::SuccIterator::operator*' data-ref="_ZNK4llvm12SuccIteratordeEv">*</a><a class="local col9 ref" href="#579SI" title='SI' data-ref="579SI">SI</a> == <a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a>) {</td></tr>
<tr><th id="3235">3235</th><td>            <a class="local col8 ref" href="#578UserIsSuccessor" title='UserIsSuccessor' data-ref="578UserIsSuccessor">UserIsSuccessor</a> = <b>true</b>;</td></tr>
<tr><th id="3236">3236</th><td>            <b>break</b>;</td></tr>
<tr><th id="3237">3237</th><td>          }</td></tr>
<tr><th id="3238">3238</th><td></td></tr>
<tr><th id="3239">3239</th><td>        <i>// If the user is one of our immediate successors, and if that successor</i></td></tr>
<tr><th id="3240">3240</th><td><i>        // only has us as a predecessors (we'd have to split the critical edge</i></td></tr>
<tr><th id="3241">3241</th><td><i>        // otherwise), we can keep going.</i></td></tr>
<tr><th id="3242">3242</th><td>        <b>if</b> (<a class="local col8 ref" href="#578UserIsSuccessor" title='UserIsSuccessor' data-ref="578UserIsSuccessor">UserIsSuccessor</a> &amp;&amp; <a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock20getUniquePredecessorEv" title='llvm::BasicBlock::getUniquePredecessor' data-ref="_ZN4llvm10BasicBlock20getUniquePredecessorEv">getUniquePredecessor</a>()) {</td></tr>
<tr><th id="3243">3243</th><td>          <i>// Okay, the CFG is simple enough, try to sink this instruction.</i></td></tr>
<tr><th id="3244">3244</th><td>          <b>if</b> (<a class="tu ref" href="#_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE" title='TryToSinkInstruction' data-use='c' data-ref="_ZL20TryToSinkInstructionPN4llvm11InstructionEPNS_10BasicBlockE">TryToSinkInstruction</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, <a class="local col6 ref" href="#576UserParent" title='UserParent' data-ref="576UserParent">UserParent</a>)) {</td></tr>
<tr><th id="3245">3245</th><td>            <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: Sink: &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: Sink: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3246">3246</th><td>            <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3247">3247</th><td>            <i>// We'll add uses of the sunk instruction below, but since sinking</i></td></tr>
<tr><th id="3248">3248</th><td><i>            // can expose opportunities for it's *operands* add them to the</i></td></tr>
<tr><th id="3249">3249</th><td><i>            // worklist</i></td></tr>
<tr><th id="3250">3250</th><td>            <b>for</b> (<a class="type" href="../../../include/llvm/IR/Use.h.html#llvm::Use" title='llvm::Use' data-ref="llvm::Use">Use</a> &amp;<dfn class="local col1 decl" id="581U" title='U' data-type='llvm::Use &amp;' data-ref="581U">U</dfn> : <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8operandsEv" title='llvm::User::operands' data-ref="_ZN4llvm4User8operandsEv">operands</a>())</td></tr>
<tr><th id="3251">3251</th><td>              <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col2 decl" id="582OpI" title='OpI' data-type='llvm::Instruction *' data-ref="582OpI"><a class="local col2 ref" href="#582OpI" title='OpI' data-ref="582OpI">OpI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>&gt;(<a class="local col1 ref" href="#581U" title='U' data-ref="581U">U</a>.<a class="ref" href="../../../include/llvm/IR/Use.h.html#_ZNK4llvm3Use3getEv" title='llvm::Use::get' data-ref="_ZNK4llvm3Use3getEv">get</a>()))</td></tr>
<tr><th id="3252">3252</th><td>                <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col2 ref" href="#582OpI" title='OpI' data-ref="582OpI">OpI</a>);</td></tr>
<tr><th id="3253">3253</th><td>          }</td></tr>
<tr><th id="3254">3254</th><td>        }</td></tr>
<tr><th id="3255">3255</th><td>      }</td></tr>
<tr><th id="3256">3256</th><td>    }</td></tr>
<tr><th id="3257">3257</th><td></td></tr>
<tr><th id="3258">3258</th><td>    <i>// Now that we have an instruction, try combining it to simplify it.</i></td></tr>
<tr><th id="3259">3259</th><td>    <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>);</td></tr>
<tr><th id="3260">3260</th><td>    <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Builder" title='llvm::InstCombiner::Builder' data-ref="llvm::InstCombiner::Builder">Builder</a>.<a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase23SetCurrentDebugLocationENS_8DebugLocE" title='llvm::IRBuilderBase::SetCurrentDebugLocation' data-ref="_ZN4llvm13IRBuilderBase23SetCurrentDebugLocationENS_8DebugLocE">SetCurrentDebugLocation</a>(<a class="ref fake" href="../../../include/llvm/IR/DebugLoc.h.html#33" title='llvm::DebugLoc::DebugLoc' data-ref="_ZN4llvm8DebugLocC1ERKS0_"></a><a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction11getDebugLocEv" title='llvm::Instruction::getDebugLoc' data-ref="_ZNK4llvm11Instruction11getDebugLocEv">getDebugLoc</a>());</td></tr>
<tr><th id="3261">3261</th><td></td></tr>
<tr><th id="3262">3262</th><td><u>#<span data-ppcond="3262">ifndef</span> <span class="macro" data-ref="_M/NDEBUG">NDEBUG</span></u></td></tr>
<tr><th id="3263">3263</th><td>    <span class="namespace">std::</span><a class="typedef" href="../../../../../include/c++/7/bits/stringfwd.h.html#std::__cxx11::string" title='std::__cxx11::string' data-type='basic_string&lt;char&gt;' data-ref="std::__cxx11::string">string</a> <a class="ref fake" href="../../../../../include/c++/7/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringC1Ev" title='std::__cxx11::basic_string::basic_string&lt;_CharT, _Traits, _Alloc&gt;' data-ref="_ZNSt7__cxx1112basic_stringC1Ev"></a><dfn class="local col3 decl" id="583OrigI" title='OrigI' data-type='std::string' data-ref="583OrigI">OrigI</dfn>;</td></tr>
<tr><th id="3264">3264</th><td><u>#<span data-ppcond="3262">endif</span></u></td></tr>
<tr><th id="3265">3265</th><td>    <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { raw_string_ostream SS(OrigI); I-&gt;print(SS); OrigI = SS.str();; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="type" href="../../../include/llvm/Support/raw_ostream.h.html#llvm::raw_string_ostream" title='llvm::raw_string_ostream' data-ref="llvm::raw_string_ostream">raw_string_ostream</a> <dfn class="local col4 decl" id="584SS" title='SS' data-type='llvm::raw_string_ostream' data-ref="584SS">SS</dfn><a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm18raw_string_ostreamC1ERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::raw_string_ostream::raw_string_ostream' data-ref="_ZN4llvm18raw_string_ostreamC1ERNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">(</a><a class="local col3 ref" href="#583OrigI" title='OrigI' data-ref="583OrigI">OrigI</a>); <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value5printERNS_11raw_ostreamEb" title='llvm::Value::print' data-ref="_ZNK4llvm5Value5printERNS_11raw_ostreamEb">print</a>(<span class='refarg'><a class="local col4 ref" href="#3265" title='SS' data-ref="584SS">SS</a></span>); <a class="local col3 ref" href="#583OrigI" title='OrigI' data-ref="583OrigI">OrigI</a> <a class="ref" href="../../../../../include/c++/7/bits/basic_string.h.html#_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE" title='std::__cxx11::basic_string::operator=' data-ref="_ZNSt7__cxx1112basic_stringaSERKNS_12basic_stringIT_T0_T1_EE">=</a> <a class="local col4 ref" href="#3265" title='SS' data-ref="584SS">SS</a>.<a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm18raw_string_ostream3strEv" title='llvm::raw_string_ostream::str' data-ref="_ZN4llvm18raw_string_ostream3strEv">str</a>(););</td></tr>
<tr><th id="3266">3266</th><td>    <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: Visiting: &quot; &lt;&lt; OrigI &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: Visiting: "</q> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">&lt;&lt;</a> <a class="local col3 ref" href="#583OrigI" title='OrigI' data-ref="583OrigI">OrigI</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3267">3267</th><td></td></tr>
<tr><th id="3268">3268</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col5 decl" id="585Result" title='Result' data-type='llvm::Instruction *' data-ref="585Result"><a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a></dfn> = <a class="member" href="../../../include/llvm/IR/InstVisitor.h.html#_ZN4llvm11InstVisitor5visitERNS_11InstructionE" title='llvm::InstVisitor::visit' data-ref="_ZN4llvm11InstVisitor5visitERNS_11InstructionE">visit</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>)) {</td></tr>
<tr><th id="3269">3269</th><td>      <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#114" title='NumCombined' data-ref="NumCombined">NumCombined</a>;</td></tr>
<tr><th id="3270">3270</th><td>      <i>// Should we replace the old instruction with a new one?</i></td></tr>
<tr><th id="3271">3271</th><td>      <b>if</b> (<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a> != <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>) {</td></tr>
<tr><th id="3272">3272</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: Old = &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos; &lt;&lt; &quot;    New = &quot; &lt;&lt; *Result &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: Old = "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd></td></tr>
<tr><th id="3273">3273</th><td>                          <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"    New = "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3274">3274</th><td></td></tr>
<tr><th id="3275">3275</th><td>        <b>if</b> (<a class="ref fake" href="../../../include/llvm/IR/DebugLoc.h.html#_ZNK4llvm8DebugLoccvbEv" title='llvm::DebugLoc::operator bool' data-ref="_ZNK4llvm8DebugLoccvbEv"></a><a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction11getDebugLocEv" title='llvm::Instruction::getDebugLoc' data-ref="_ZNK4llvm11Instruction11getDebugLocEv">getDebugLoc</a>())</td></tr>
<tr><th id="3276">3276</th><td>          <a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11setDebugLocENS_8DebugLocE" title='llvm::Instruction::setDebugLoc' data-ref="_ZN4llvm11Instruction11setDebugLocENS_8DebugLocE">setDebugLoc</a>(<a class="ref fake" href="../../../include/llvm/IR/DebugLoc.h.html#33" title='llvm::DebugLoc::DebugLoc' data-ref="_ZN4llvm8DebugLocC1ERKS0_"></a><a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction11getDebugLocEv" title='llvm::Instruction::getDebugLoc' data-ref="_ZNK4llvm11Instruction11getDebugLocEv">getDebugLoc</a>());</td></tr>
<tr><th id="3277">3277</th><td>        <i>// Everything uses the new instruction now.</i></td></tr>
<tr><th id="3278">3278</th><td>        <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>);</td></tr>
<tr><th id="3279">3279</th><td></td></tr>
<tr><th id="3280">3280</th><td>        <i>// Move the name to the new instruction first.</i></td></tr>
<tr><th id="3281">3281</th><td>        <a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value8takeNameEPS0_" title='llvm::Value::takeName' data-ref="_ZN4llvm5Value8takeNameEPS0_">takeName</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>);</td></tr>
<tr><th id="3282">3282</th><td></td></tr>
<tr><th id="3283">3283</th><td>        <i>// Push the new instruction and any users onto the worklist.</i></td></tr>
<tr><th id="3284">3284</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist18AddUsersToWorkListERNS_11InstructionE" title='llvm::InstCombineWorklist::AddUsersToWorkList' data-ref="_ZN4llvm19InstCombineWorklist18AddUsersToWorkListERNS_11InstructionE">AddUsersToWorkList</a>(<span class='refarg'>*<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a></span>);</td></tr>
<tr><th id="3285">3285</th><td>        <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>);</td></tr>
<tr><th id="3286">3286</th><td></td></tr>
<tr><th id="3287">3287</th><td>        <i>// Insert the new instruction into the basic block...</i></td></tr>
<tr><th id="3288">3288</th><td>        <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col6 decl" id="586InstParent" title='InstParent' data-type='llvm::BasicBlock *' data-ref="586InstParent">InstParent</dfn> = <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="3289">3289</th><td>        <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="typedef" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock::iterator" title='llvm::BasicBlock::iterator' data-type='InstListType::iterator' data-ref="llvm::BasicBlock::iterator">iterator</a> <dfn class="local col7 decl" id="587InsertPos" title='InsertPos' data-type='BasicBlock::iterator' data-ref="587InsertPos">InsertPos</dfn> = <a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>-&gt;<a class="ref" href="../../../include/llvm/ADT/ilist_node.h.html#_ZN4llvm15ilist_node_impl11getIteratorEv" title='llvm::ilist_node_impl::getIterator' data-ref="_ZN4llvm15ilist_node_impl11getIteratorEv">getIterator</a>();</td></tr>
<tr><th id="3290">3290</th><td></td></tr>
<tr><th id="3291">3291</th><td>        <i>// If we replace a PHI with something that isn't a PHI, fix up the</i></td></tr>
<tr><th id="3292">3292</th><td><i>        // insertion point.</i></td></tr>
<tr><th id="3293">3293</th><td>        <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>) &amp;&amp; <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a>&gt;(<a class="local col7 ref" href="#587InsertPos" title='InsertPos' data-ref="587InsertPos">InsertPos</a>))</td></tr>
<tr><th id="3294">3294</th><td>          <a class="local col7 ref" href="#587InsertPos" title='InsertPos' data-ref="587InsertPos">InsertPos</a> <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#57" title='llvm::ilist_iterator&lt;llvm::ilist_detail::node_options&lt;llvm::Instruction, true, false, void&gt;, false, false&gt;::operator=' data-ref="_ZN4llvm14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEaSEOS5_">=</a> <a class="local col6 ref" href="#586InstParent" title='InstParent' data-ref="586InstParent">InstParent</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock19getFirstInsertionPtEv" title='llvm::BasicBlock::getFirstInsertionPt' data-ref="_ZN4llvm10BasicBlock19getFirstInsertionPtEv">getFirstInsertionPt</a>();</td></tr>
<tr><th id="3295">3295</th><td></td></tr>
<tr><th id="3296">3296</th><td>        <a class="local col6 ref" href="#586InstParent" title='InstParent' data-ref="586InstParent">InstParent</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock11getInstListEv" title='llvm::BasicBlock::getInstList' data-ref="_ZN4llvm10BasicBlock11getInstListEv">getInstList</a>().<a class="ref" href="../../../include/llvm/ADT/ilist.h.html#_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE" title='llvm::iplist_impl::insert' data-ref="_ZN4llvm11iplist_impl6insertENT_8iteratorENS1_7pointerE">insert</a>(<a class="ref fake" href="../../../include/llvm/ADT/ilist_iterator.h.html#57" title='llvm::ilist_iterator&lt;llvm::ilist_detail::node_options&lt;llvm::Instruction, true, false, void&gt;, false, false&gt;::ilist_iterator' data-ref="_ZN4llvm14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEC1ERKS5_"></a><a class="local col7 ref" href="#587InsertPos" title='InsertPos' data-ref="587InsertPos">InsertPos</a>, <a class="local col5 ref" href="#585Result" title='Result' data-ref="585Result">Result</a>);</td></tr>
<tr><th id="3297">3297</th><td></td></tr>
<tr><th id="3298">3298</th><td>        <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3299">3299</th><td>      } <b>else</b> {</td></tr>
<tr><th id="3300">3300</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: Mod = &quot; &lt;&lt; OrigI &lt;&lt; &apos;\n&apos; &lt;&lt; &quot;    New = &quot; &lt;&lt; *I &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: Mod = "</q> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE">&lt;&lt;</a> <a class="local col3 ref" href="#583OrigI" title='OrigI' data-ref="583OrigI">OrigI</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd></td></tr>
<tr><th id="3301">3301</th><td>                          <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"    New = "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3302">3302</th><td></td></tr>
<tr><th id="3303">3303</th><td>        <i>// If the instruction was modified, it's possible that it is now dead.</i></td></tr>
<tr><th id="3304">3304</th><td><i>        // if so, remove it.</i></td></tr>
<tr><th id="3305">3305</th><td>        <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>, &amp;<a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::TLI" title='llvm::InstCombiner::TLI' data-ref="llvm::InstCombiner::TLI">TLI</a>)) {</td></tr>
<tr><th id="3306">3306</th><td>          <a class="member" href="InstCombineInternal.h.html#_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE" title='llvm::InstCombiner::eraseInstFromFunction' data-ref="_ZN4llvm12InstCombiner21eraseInstFromFunctionERNS_11InstructionE">eraseInstFromFunction</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3307">3307</th><td>        } <b>else</b> {</td></tr>
<tr><th id="3308">3308</th><td>          <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist18AddUsersToWorkListERNS_11InstructionE" title='llvm::InstCombineWorklist::AddUsersToWorkList' data-ref="_ZN4llvm19InstCombineWorklist18AddUsersToWorkListERNS_11InstructionE">AddUsersToWorkList</a>(<span class='refarg'>*<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a></span>);</td></tr>
<tr><th id="3309">3309</th><td>          <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col9 ref" href="#569I" title='I' data-ref="569I">I</a>);</td></tr>
<tr><th id="3310">3310</th><td>        }</td></tr>
<tr><th id="3311">3311</th><td>      }</td></tr>
<tr><th id="3312">3312</th><td>      <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3313">3313</th><td>    }</td></tr>
<tr><th id="3314">3314</th><td>  }</td></tr>
<tr><th id="3315">3315</th><td></td></tr>
<tr><th id="3316">3316</th><td>  <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::Worklist" title='llvm::InstCombiner::Worklist' data-ref="llvm::InstCombiner::Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3ZapEv" title='llvm::InstCombineWorklist::Zap' data-ref="_ZN4llvm19InstCombineWorklist3ZapEv">Zap</a>();</td></tr>
<tr><th id="3317">3317</th><td>  <b>return</b> <a class="member" href="InstCombineInternal.h.html#llvm::InstCombiner::MadeIRChange" title='llvm::InstCombiner::MadeIRChange' data-ref="llvm::InstCombiner::MadeIRChange">MadeIRChange</a>;</td></tr>
<tr><th id="3318">3318</th><td>}</td></tr>
<tr><th id="3319">3319</th><td></td></tr>
<tr><th id="3320">3320</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// Walk the function in depth-first order, adding all reachable code to the</i></td></tr>
<tr><th id="3321">3321</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// worklist.</i></td></tr>
<tr><th id="3322">3322</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">///</i></td></tr>
<tr><th id="3323">3323</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// This has a couple of tricks to make the code faster and more powerful.  In</i></td></tr>
<tr><th id="3324">3324</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// particular, we constant fold and DCE instructions as we go, to avoid adding</i></td></tr>
<tr><th id="3325">3325</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// them to the worklist (this significantly speeds up instcombine on code where</i></td></tr>
<tr><th id="3326">3326</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// many instructions are dead or constant).  Additionally, if we find a branch</i></td></tr>
<tr><th id="3327">3327</th><td><i class="doc" data-doc="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">/// whose condition is a known constant, we only visit the reachable successors.</i></td></tr>
<tr><th id="3328">3328</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE" title='AddReachableCodeToWorklist' data-type='bool AddReachableCodeToWorklist(llvm::BasicBlock * BB, const llvm::DataLayout &amp; DL, SmallPtrSetImpl&lt;llvm::BasicBlock *&gt; &amp; Visited, llvm::InstCombineWorklist &amp; ICWorklist, const llvm::TargetLibraryInfo * TLI)' data-ref="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">AddReachableCodeToWorklist</dfn>(<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col8 decl" id="588BB" title='BB' data-type='llvm::BasicBlock *' data-ref="588BB">BB</dfn>, <em>const</em> <a class="type" href="../../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col9 decl" id="589DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="589DL">DL</dfn>,</td></tr>
<tr><th id="3329">3329</th><td>                                       <a class="type" href="../../../include/llvm/ADT/SmallPtrSet.h.html#llvm::SmallPtrSetImpl" title='llvm::SmallPtrSetImpl' data-ref="llvm::SmallPtrSetImpl">SmallPtrSetImpl</a>&lt;<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *&gt; &amp;<dfn class="local col0 decl" id="590Visited" title='Visited' data-type='SmallPtrSetImpl&lt;llvm::BasicBlock *&gt; &amp;' data-ref="590Visited">Visited</dfn>,</td></tr>
<tr><th id="3330">3330</th><td>                                       <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#llvm::InstCombineWorklist" title='llvm::InstCombineWorklist' data-ref="llvm::InstCombineWorklist">InstCombineWorklist</a> &amp;<dfn class="local col1 decl" id="591ICWorklist" title='ICWorklist' data-type='llvm::InstCombineWorklist &amp;' data-ref="591ICWorklist">ICWorklist</dfn>,</td></tr>
<tr><th id="3331">3331</th><td>                                       <em>const</em> <a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfo" title='llvm::TargetLibraryInfo' data-ref="llvm::TargetLibraryInfo">TargetLibraryInfo</a> *<dfn class="local col2 decl" id="592TLI" title='TLI' data-type='const llvm::TargetLibraryInfo *' data-ref="592TLI">TLI</dfn>) {</td></tr>
<tr><th id="3332">3332</th><td>  <em>bool</em> <dfn class="local col3 decl" id="593MadeIRChange" title='MadeIRChange' data-type='bool' data-ref="593MadeIRChange">MadeIRChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="3333">3333</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>*, <var>256</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col4 decl" id="594Worklist" title='Worklist' data-type='SmallVector&lt;llvm::BasicBlock *, 256&gt;' data-ref="594Worklist">Worklist</dfn>;</td></tr>
<tr><th id="3334">3334</th><td>  <a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a>);</td></tr>
<tr><th id="3335">3335</th><td></td></tr>
<tr><th id="3336">3336</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>*, <var>128</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col5 decl" id="595InstrsForInstCombineWorklist" title='InstrsForInstCombineWorklist' data-type='SmallVector&lt;llvm::Instruction *, 128&gt;' data-ref="595InstrsForInstCombineWorklist">InstrsForInstCombineWorklist</dfn>;</td></tr>
<tr><th id="3337">3337</th><td>  <a class="type" href="../../../include/llvm/ADT/DenseMap.h.html#llvm::DenseMap" title='llvm::DenseMap' data-ref="llvm::DenseMap">DenseMap</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *, <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *&gt; <a class="ref fake" href="../../../include/llvm/ADT/DenseMap.h.html#_ZN4llvm8DenseMapC1Ej" title='llvm::DenseMap::DenseMap&lt;KeyT, ValueT, KeyInfoT, BucketT&gt;' data-ref="_ZN4llvm8DenseMapC1Ej"></a><dfn class="local col6 decl" id="596FoldedConstants" title='FoldedConstants' data-type='DenseMap&lt;llvm::Constant *, llvm::Constant *&gt;' data-ref="596FoldedConstants">FoldedConstants</dfn>;</td></tr>
<tr><th id="3338">3338</th><td></td></tr>
<tr><th id="3339">3339</th><td>  <b>do</b> {</td></tr>
<tr><th id="3340">3340</th><td>    <a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a> = <a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm15SmallVectorImpl12pop_back_valEv" title='llvm::SmallVectorImpl::pop_back_val' data-ref="_ZN4llvm15SmallVectorImpl12pop_back_valEv">pop_back_val</a>();</td></tr>
<tr><th id="3341">3341</th><td></td></tr>
<tr><th id="3342">3342</th><td>    <i>// We have now visited this block!  If we've already been here, ignore it.</i></td></tr>
<tr><th id="3343">3343</th><td>    <b>if</b> (!<a class="local col0 ref" href="#590Visited" title='Visited' data-ref="590Visited">Visited</a>.<a class="ref" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm15SmallPtrSetImpl6insertET_" title='llvm::SmallPtrSetImpl::insert' data-ref="_ZN4llvm15SmallPtrSetImpl6insertET_">insert</a>(<a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a>).<a class="ref" href="../../../../../include/c++/7/bits/stl_pair.h.html#std::pair::second" title='std::pair&lt;llvm::SmallPtrSetIterator&lt;llvm::BasicBlock *&gt;, bool&gt;::second' data-ref="std::pair::second">second</a>)</td></tr>
<tr><th id="3344">3344</th><td>      <b>continue</b>;</td></tr>
<tr><th id="3345">3345</th><td></td></tr>
<tr><th id="3346">3346</th><td>    <b>for</b> (<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="typedef" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock::iterator" title='llvm::BasicBlock::iterator' data-type='InstListType::iterator' data-ref="llvm::BasicBlock::iterator">iterator</a> <dfn class="local col7 decl" id="597BBI" title='BBI' data-type='BasicBlock::iterator' data-ref="597BBI">BBI</dfn> = <a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>(), <dfn class="local col8 decl" id="598E" title='E' data-type='BasicBlock::iterator' data-ref="598E">E</dfn> = <a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>(); <a class="local col7 ref" href="#597BBI" title='BBI' data-ref="597BBI">BBI</a> <a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_" title='llvm::operator!=' data-ref="_ZN4llvmneERKNS_14ilist_iteratorIT_XT0_EXT1_EEES5_">!=</a> <a class="local col8 ref" href="#598E" title='E' data-ref="598E">E</a>; ) {</td></tr>
<tr><th id="3347">3347</th><td>      <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col9 decl" id="599Inst" title='Inst' data-type='llvm::Instruction *' data-ref="599Inst">Inst</dfn> = &amp;<a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratordeEv" title='llvm::ilist_iterator::operator*' data-ref="_ZNK4llvm14ilist_iteratordeEv">*</a><a class="local col7 ref" href="#597BBI" title='BBI' data-ref="597BBI">BBI</a><a class="ref" href="../../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvm14ilist_iteratorppEi" title='llvm::ilist_iterator::operator++' data-ref="_ZN4llvm14ilist_iteratorppEi">++</a>;</td></tr>
<tr><th id="3348">3348</th><td></td></tr>
<tr><th id="3349">3349</th><td>      <i>// DCE instruction if trivially dead.</i></td></tr>
<tr><th id="3350">3350</th><td>      <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>, <a class="local col2 ref" href="#592TLI" title='TLI' data-ref="592TLI">TLI</a>)) {</td></tr>
<tr><th id="3351">3351</th><td>        <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#116" title='NumDeadInst' data-ref="NumDeadInst">NumDeadInst</a>;</td></tr>
<tr><th id="3352">3352</th><td>        <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: DCE: &quot; &lt;&lt; *Inst &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: DCE: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3353">3353</th><td>        <b>if</b> (!<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm16salvageDebugInfoERNS_11InstructionE" title='llvm::salvageDebugInfo' data-ref="_ZN4llvm16salvageDebugInfoERNS_11InstructionE">salvageDebugInfo</a>(<span class='refarg'>*<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a></span>))</td></tr>
<tr><th id="3354">3354</th><td>          <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm23replaceDbgUsesWithUndefEPNS_11InstructionE" title='llvm::replaceDbgUsesWithUndef' data-ref="_ZN4llvm23replaceDbgUsesWithUndefEPNS_11InstructionE">replaceDbgUsesWithUndef</a>(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>);</td></tr>
<tr><th id="3355">3355</th><td>        <a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="3356">3356</th><td>        <a class="local col3 ref" href="#593MadeIRChange" title='MadeIRChange' data-ref="593MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3357">3357</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3358">3358</th><td>      }</td></tr>
<tr><th id="3359">3359</th><td></td></tr>
<tr><th id="3360">3360</th><td>      <i>// ConstantProp instruction if trivially constant.</i></td></tr>
<tr><th id="3361">3361</th><td>      <b>if</b> (!<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9use_emptyEv" title='llvm::Value::use_empty' data-ref="_ZNK4llvm5Value9use_emptyEv">use_empty</a>() &amp;&amp;</td></tr>
<tr><th id="3362">3362</th><td>          (<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User14getNumOperandsEv" title='llvm::User::getNumOperands' data-ref="_ZNK4llvm4User14getNumOperandsEv">getNumOperands</a>() == <var>0</var> || <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZNK4llvm4User10getOperandEj" title='llvm::User::getOperand' data-ref="_ZNK4llvm4User10getOperandEj">getOperand</a>(<var>0</var>))))</td></tr>
<tr><th id="3363">3363</th><td>        <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col0 decl" id="600C" title='C' data-type='llvm::Constant *' data-ref="600C"><a class="local col0 ref" href="#600C" title='C' data-ref="600C">C</a></dfn> = <a class="ref" href="../../../include/llvm/Analysis/ConstantFolding.h.html#_ZN4llvm23ConstantFoldInstructionEPNS_11InstructionERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE" title='llvm::ConstantFoldInstruction' data-ref="_ZN4llvm23ConstantFoldInstructionEPNS_11InstructionERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE">ConstantFoldInstruction</a>(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>, <a class="local col9 ref" href="#589DL" title='DL' data-ref="589DL">DL</a>, <a class="local col2 ref" href="#592TLI" title='TLI' data-ref="592TLI">TLI</a>)) {</td></tr>
<tr><th id="3364">3364</th><td>          <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: ConstFold to: &quot; &lt;&lt; *C &lt;&lt; &quot; from: &quot; &lt;&lt; *Inst &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: ConstFold to: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col0 ref" href="#600C" title='C' data-ref="600C">C</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" from: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a></td></tr>
<tr><th id="3365">3365</th><td>                            <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3366">3366</th><td>          <a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col0 ref" href="#600C" title='C' data-ref="600C">C</a>);</td></tr>
<tr><th id="3367">3367</th><td>          <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticppEv" title='llvm::Statistic::operator++' data-ref="_ZN4llvm9StatisticppEv">++</a><a class="ref" href="#115" title='NumConstProp' data-ref="NumConstProp">NumConstProp</a>;</td></tr>
<tr><th id="3368">3368</th><td>          <b>if</b> (<a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE" title='llvm::isInstructionTriviallyDead' data-ref="_ZN4llvm26isInstructionTriviallyDeadEPNS_11InstructionEPKNS_17TargetLibraryInfoE">isInstructionTriviallyDead</a>(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>, <a class="local col2 ref" href="#592TLI" title='TLI' data-ref="592TLI">TLI</a>))</td></tr>
<tr><th id="3369">3369</th><td>            <a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="3370">3370</th><td>          <a class="local col3 ref" href="#593MadeIRChange" title='MadeIRChange' data-ref="593MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3371">3371</th><td>          <b>continue</b>;</td></tr>
<tr><th id="3372">3372</th><td>        }</td></tr>
<tr><th id="3373">3373</th><td></td></tr>
<tr><th id="3374">3374</th><td>      <i>// See if we can constant fold its operands.</i></td></tr>
<tr><th id="3375">3375</th><td>      <b>for</b> (<a class="type" href="../../../include/llvm/IR/Use.h.html#llvm::Use" title='llvm::Use' data-ref="llvm::Use">Use</a> &amp;<dfn class="local col1 decl" id="601U" title='U' data-type='llvm::Use &amp;' data-ref="601U">U</dfn> : <a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>-&gt;<a class="ref" href="../../../include/llvm/IR/User.h.html#_ZN4llvm4User8operandsEv" title='llvm::User::operands' data-ref="_ZN4llvm4User8operandsEv">operands</a>()) {</td></tr>
<tr><th id="3376">3376</th><td>        <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantVector" title='llvm::ConstantVector' data-ref="llvm::ConstantVector">ConstantVector</a>&gt;(<a class="local col1 ref" href="#601U" title='U' data-ref="601U">U</a>) &amp;&amp; !<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantExpr" title='llvm::ConstantExpr' data-ref="llvm::ConstantExpr">ConstantExpr</a>&gt;(<a class="local col1 ref" href="#601U" title='U' data-ref="601U">U</a>))</td></tr>
<tr><th id="3377">3377</th><td>          <b>continue</b>;</td></tr>
<tr><th id="3378">3378</th><td></td></tr>
<tr><th id="3379">3379</th><td>        <em>auto</em> *<dfn class="local col2 decl" id="602C" title='C' data-type='llvm::Constant *' data-ref="602C">C</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castERT0_" title='llvm::cast' data-ref="_ZN4llvm4castERT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>&gt;(<span class='refarg'><a class="local col1 ref" href="#601U" title='U' data-ref="601U">U</a></span>);</td></tr>
<tr><th id="3380">3380</th><td>        <a class="type" href="../../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *&amp;<dfn class="local col3 decl" id="603FoldRes" title='FoldRes' data-type='llvm::Constant *&amp;' data-ref="603FoldRes">FoldRes</dfn> = <a class="local col6 ref" href="#596FoldedConstants" title='FoldedConstants' data-ref="596FoldedConstants">FoldedConstants</a><a class="ref" href="../../../include/llvm/ADT/DenseMap.h.html#_ZN4llvm12DenseMapBaseixERKT0_" title='llvm::DenseMapBase::operator[]' data-ref="_ZN4llvm12DenseMapBaseixERKT0_">[<a class="local col2 ref" href="#602C" title='C' data-ref="602C">C</a>]</a>;</td></tr>
<tr><th id="3381">3381</th><td>        <b>if</b> (!<a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a>)</td></tr>
<tr><th id="3382">3382</th><td>          <a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a> = <a class="ref" href="../../../include/llvm/Analysis/ConstantFolding.h.html#_ZN4llvm20ConstantFoldConstantEPKNS_8ConstantERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE" title='llvm::ConstantFoldConstant' data-ref="_ZN4llvm20ConstantFoldConstantEPKNS_8ConstantERKNS_10DataLayoutEPKNS_17TargetLibraryInfoE">ConstantFoldConstant</a>(<a class="local col2 ref" href="#602C" title='C' data-ref="602C">C</a>, <a class="local col9 ref" href="#589DL" title='DL' data-ref="589DL">DL</a>, <a class="local col2 ref" href="#592TLI" title='TLI' data-ref="592TLI">TLI</a>);</td></tr>
<tr><th id="3383">3383</th><td>        <b>if</b> (!<a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a>)</td></tr>
<tr><th id="3384">3384</th><td>          <a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a> = <a class="local col2 ref" href="#602C" title='C' data-ref="602C">C</a>;</td></tr>
<tr><th id="3385">3385</th><td></td></tr>
<tr><th id="3386">3386</th><td>        <b>if</b> (<a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a> != <a class="local col2 ref" href="#602C" title='C' data-ref="602C">C</a>) {</td></tr>
<tr><th id="3387">3387</th><td>          <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;IC: ConstFold operand of: &quot; &lt;&lt; *Inst &lt;&lt; &quot;\n    Old = &quot; &lt;&lt; *C &lt;&lt; &quot;\n    New = &quot; &lt;&lt; *FoldRes &lt;&lt; &apos;\n&apos;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"IC: ConstFold operand of: "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a></td></tr>
<tr><th id="3388">3388</th><td>                            <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n    Old = "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col2 ref" href="#602C" title='C' data-ref="602C">C</a></td></tr>
<tr><th id="3389">3389</th><td>                            <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n    New = "</q> <a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEc">&lt;&lt;</a> <kbd>'\n'</kbd>);</td></tr>
<tr><th id="3390">3390</th><td>          <a class="local col1 ref" href="#601U" title='U' data-ref="601U">U</a> <a class="ref" href="../../../include/llvm/IR/Use.h.html#_ZN4llvm3UseaSEPNS_5ValueE" title='llvm::Use::operator=' data-ref="_ZN4llvm3UseaSEPNS_5ValueE">=</a> <a class="local col3 ref" href="#603FoldRes" title='FoldRes' data-ref="603FoldRes">FoldRes</a>;</td></tr>
<tr><th id="3391">3391</th><td>          <a class="local col3 ref" href="#593MadeIRChange" title='MadeIRChange' data-ref="593MadeIRChange">MadeIRChange</a> = <b>true</b>;</td></tr>
<tr><th id="3392">3392</th><td>        }</td></tr>
<tr><th id="3393">3393</th><td>      }</td></tr>
<tr><th id="3394">3394</th><td></td></tr>
<tr><th id="3395">3395</th><td>      <i>// Skip processing debug intrinsics in InstCombine. Processing these call instructions</i></td></tr>
<tr><th id="3396">3396</th><td><i>      // consumes non-trivial amount of time and provides no value for the optimization.</i></td></tr>
<tr><th id="3397">3397</th><td>      <b>if</b> (!<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/IntrinsicInst.h.html#llvm::DbgInfoIntrinsic" title='llvm::DbgInfoIntrinsic' data-ref="llvm::DbgInfoIntrinsic">DbgInfoIntrinsic</a>&gt;(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>))</td></tr>
<tr><th id="3398">3398</th><td>        <a class="local col5 ref" href="#595InstrsForInstCombineWorklist" title='InstrsForInstCombineWorklist' data-ref="595InstrsForInstCombineWorklist">InstrsForInstCombineWorklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col9 ref" href="#599Inst" title='Inst' data-ref="599Inst">Inst</a>);</td></tr>
<tr><th id="3399">3399</th><td>    }</td></tr>
<tr><th id="3400">3400</th><td></td></tr>
<tr><th id="3401">3401</th><td>    <i>// Recursively visit successors.  If this is a branch or switch on a</i></td></tr>
<tr><th id="3402">3402</th><td><i>    // constant, only visit the reachable successor.</i></td></tr>
<tr><th id="3403">3403</th><td>    <a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="604TI" title='TI' data-type='llvm::Instruction *' data-ref="604TI">TI</dfn> = <a class="local col8 ref" href="#588BB" title='BB' data-ref="588BB">BB</a>-&gt;<a class="ref" href="../../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock13getTerminatorEv" title='llvm::BasicBlock::getTerminator' data-ref="_ZN4llvm10BasicBlock13getTerminatorEv">getTerminator</a>();</td></tr>
<tr><th id="3404">3404</th><td>    <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BranchInst" title='llvm::BranchInst' data-ref="llvm::BranchInst">BranchInst</a> *<dfn class="local col5 decl" id="605BI" title='BI' data-type='llvm::BranchInst *' data-ref="605BI"><a class="local col5 ref" href="#605BI" title='BI' data-ref="605BI">BI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::BranchInst" title='llvm::BranchInst' data-ref="llvm::BranchInst">BranchInst</a>&gt;(<a class="local col4 ref" href="#604TI" title='TI' data-ref="604TI">TI</a>)) {</td></tr>
<tr><th id="3405">3405</th><td>      <b>if</b> (<a class="local col5 ref" href="#605BI" title='BI' data-ref="605BI">BI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst13isConditionalEv" title='llvm::BranchInst::isConditional' data-ref="_ZNK4llvm10BranchInst13isConditionalEv">isConditional</a>() &amp;&amp; <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col5 ref" href="#605BI" title='BI' data-ref="605BI">BI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getConditionEv" title='llvm::BranchInst::getCondition' data-ref="_ZNK4llvm10BranchInst12getConditionEv">getCondition</a>())) {</td></tr>
<tr><th id="3406">3406</th><td>        <em>bool</em> <dfn class="local col6 decl" id="606CondVal" title='CondVal' data-type='bool' data-ref="606CondVal">CondVal</dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col5 ref" href="#605BI" title='BI' data-ref="605BI">BI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getConditionEv" title='llvm::BranchInst::getCondition' data-ref="_ZNK4llvm10BranchInst12getConditionEv">getCondition</a>())-&gt;<a class="ref" href="../../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt12getZExtValueEv" title='llvm::ConstantInt::getZExtValue' data-ref="_ZNK4llvm11ConstantInt12getZExtValueEv">getZExtValue</a>();</td></tr>
<tr><th id="3407">3407</th><td>        <a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col7 decl" id="607ReachableBB" title='ReachableBB' data-type='llvm::BasicBlock *' data-ref="607ReachableBB">ReachableBB</dfn> = <a class="local col5 ref" href="#605BI" title='BI' data-ref="605BI">BI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10BranchInst12getSuccessorEj" title='llvm::BranchInst::getSuccessor' data-ref="_ZNK4llvm10BranchInst12getSuccessorEj">getSuccessor</a>(!<a class="local col6 ref" href="#606CondVal" title='CondVal' data-ref="606CondVal">CondVal</a>);</td></tr>
<tr><th id="3408">3408</th><td>        <a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col7 ref" href="#607ReachableBB" title='ReachableBB' data-ref="607ReachableBB">ReachableBB</a>);</td></tr>
<tr><th id="3409">3409</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3410">3410</th><td>      }</td></tr>
<tr><th id="3411">3411</th><td>    } <b>else</b> <b>if</b> (<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SwitchInst" title='llvm::SwitchInst' data-ref="llvm::SwitchInst">SwitchInst</a> *<dfn class="local col8 decl" id="608SI" title='SI' data-type='llvm::SwitchInst *' data-ref="608SI"><a class="local col8 ref" href="#608SI" title='SI' data-ref="608SI">SI</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::SwitchInst" title='llvm::SwitchInst' data-ref="llvm::SwitchInst">SwitchInst</a>&gt;(<a class="local col4 ref" href="#604TI" title='TI' data-ref="604TI">TI</a>)) {</td></tr>
<tr><th id="3412">3412</th><td>      <b>if</b> (<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col9 decl" id="609Cond" title='Cond' data-type='llvm::ConstantInt *' data-ref="609Cond"><a class="local col9 ref" href="#609Cond" title='Cond' data-ref="609Cond">Cond</a></dfn> = <a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col8 ref" href="#608SI" title='SI' data-ref="608SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst12getConditionEv" title='llvm::SwitchInst::getCondition' data-ref="_ZNK4llvm10SwitchInst12getConditionEv">getCondition</a>())) {</td></tr>
<tr><th id="3413">3413</th><td>        <a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col8 ref" href="#608SI" title='SI' data-ref="608SI">SI</a>-&gt;<a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZN4llvm10SwitchInst13findCaseValueEPKNS_11ConstantIntE" title='llvm::SwitchInst::findCaseValue' data-ref="_ZN4llvm10SwitchInst13findCaseValueEPKNS_11ConstantIntE">findCaseValue</a>(<a class="local col9 ref" href="#609Cond" title='Cond' data-ref="609Cond">Cond</a>)<a class="ref" href="../../../include/llvm/ADT/iterator.h.html#_ZN4llvm20iterator_facade_baseptEv" title='llvm::iterator_facade_base::operator-&gt;' data-ref="_ZN4llvm20iterator_facade_baseptEv">-&gt;</a><a class="ref" href="../../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10SwitchInst14CaseHandleImpl16getCaseSuccessorEv" title='llvm::SwitchInst::CaseHandleImpl::getCaseSuccessor' data-ref="_ZNK4llvm10SwitchInst14CaseHandleImpl16getCaseSuccessorEv">getCaseSuccessor</a>());</td></tr>
<tr><th id="3414">3414</th><td>        <b>continue</b>;</td></tr>
<tr><th id="3415">3415</th><td>      }</td></tr>
<tr><th id="3416">3416</th><td>    }</td></tr>
<tr><th id="3417">3417</th><td></td></tr>
<tr><th id="3418">3418</th><td>    <b>for</b> (<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col0 decl" id="610SuccBB" title='SuccBB' data-type='llvm::BasicBlock *' data-ref="610SuccBB">SuccBB</dfn> : <a class="ref" href="../../../include/llvm/IR/CFG.h.html#_ZN4llvm10successorsEPNS_11InstructionE" title='llvm::successors' data-ref="_ZN4llvm10successorsEPNS_11InstructionE">successors</a>(<a class="local col4 ref" href="#604TI" title='TI' data-ref="604TI">TI</a>))</td></tr>
<tr><th id="3419">3419</th><td>      <a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col0 ref" href="#610SuccBB" title='SuccBB' data-ref="610SuccBB">SuccBB</a>);</td></tr>
<tr><th id="3420">3420</th><td>  } <b>while</b> (!<a class="local col4 ref" href="#594Worklist" title='Worklist' data-ref="594Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/ADT/SmallVector.h.html#_ZNK4llvm15SmallVectorBase5emptyEv" title='llvm::SmallVectorBase::empty' data-ref="_ZNK4llvm15SmallVectorBase5emptyEv">empty</a>());</td></tr>
<tr><th id="3421">3421</th><td></td></tr>
<tr><th id="3422">3422</th><td>  <i>// Once we've found all of the instructions to add to instcombine's worklist,</i></td></tr>
<tr><th id="3423">3423</th><td><i>  // add them in reverse order.  This way instcombine will visit from the top</i></td></tr>
<tr><th id="3424">3424</th><td><i>  // of the function down.  This jives well with the way that it adds all uses</i></td></tr>
<tr><th id="3425">3425</th><td><i>  // of instructions to the worklist after doing a transformation, thus avoiding</i></td></tr>
<tr><th id="3426">3426</th><td><i>  // some N^2 behavior in pathological cases.</i></td></tr>
<tr><th id="3427">3427</th><td>  <a class="local col1 ref" href="#591ICWorklist" title='ICWorklist' data-ref="591ICWorklist">ICWorklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist15AddInitialGroupENS_8ArrayRefIPNS_11InstructionEEE" title='llvm::InstCombineWorklist::AddInitialGroup' data-ref="_ZN4llvm19InstCombineWorklist15AddInitialGroupENS_8ArrayRefIPNS_11InstructionEEE">AddInitialGroup</a>(<a class="ref fake" href="../../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col5 ref" href="#595InstrsForInstCombineWorklist" title='InstrsForInstCombineWorklist' data-ref="595InstrsForInstCombineWorklist">InstrsForInstCombineWorklist</a>);</td></tr>
<tr><th id="3428">3428</th><td></td></tr>
<tr><th id="3429">3429</th><td>  <b>return</b> <a class="local col3 ref" href="#593MadeIRChange" title='MadeIRChange' data-ref="593MadeIRChange">MadeIRChange</a>;</td></tr>
<tr><th id="3430">3430</th><td>}</td></tr>
<tr><th id="3431">3431</th><td></td></tr>
<tr><th id="3432">3432</th><td><i class="doc" data-doc="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">/// Populate the IC worklist from a function, and prune any dead basic</i></td></tr>
<tr><th id="3433">3433</th><td><i class="doc" data-doc="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">/// blocks discovered in the process.</i></td></tr>
<tr><th id="3434">3434</th><td><i class="doc" data-doc="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">///</i></td></tr>
<tr><th id="3435">3435</th><td><i class="doc" data-doc="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">/// This also does basic constant propagation and other forward fixing to make</i></td></tr>
<tr><th id="3436">3436</th><td><i class="doc" data-doc="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">/// the combiner itself run much faster.</i></td></tr>
<tr><th id="3437">3437</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE" title='prepareICWorklistFromFunction' data-type='bool prepareICWorklistFromFunction(llvm::Function &amp; F, const llvm::DataLayout &amp; DL, llvm::TargetLibraryInfo * TLI, llvm::InstCombineWorklist &amp; ICWorklist)' data-ref="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">prepareICWorklistFromFunction</dfn>(<a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col1 decl" id="611F" title='F' data-type='llvm::Function &amp;' data-ref="611F">F</dfn>, <em>const</em> <a class="type" href="../../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col2 decl" id="612DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="612DL">DL</dfn>,</td></tr>
<tr><th id="3438">3438</th><td>                                          <a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfo" title='llvm::TargetLibraryInfo' data-ref="llvm::TargetLibraryInfo">TargetLibraryInfo</a> *<dfn class="local col3 decl" id="613TLI" title='TLI' data-type='llvm::TargetLibraryInfo *' data-ref="613TLI">TLI</dfn>,</td></tr>
<tr><th id="3439">3439</th><td>                                          <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#llvm::InstCombineWorklist" title='llvm::InstCombineWorklist' data-ref="llvm::InstCombineWorklist">InstCombineWorklist</a> &amp;<dfn class="local col4 decl" id="614ICWorklist" title='ICWorklist' data-type='llvm::InstCombineWorklist &amp;' data-ref="614ICWorklist">ICWorklist</dfn>) {</td></tr>
<tr><th id="3440">3440</th><td>  <em>bool</em> <dfn class="local col5 decl" id="615MadeIRChange" title='MadeIRChange' data-type='bool' data-ref="615MadeIRChange">MadeIRChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="3441">3441</th><td></td></tr>
<tr><th id="3442">3442</th><td>  <i>// Do a depth-first traversal of the function, populate the worklist with</i></td></tr>
<tr><th id="3443">3443</th><td><i>  // the reachable instructions.  Ignore blocks that are not reachable.  Keep</i></td></tr>
<tr><th id="3444">3444</th><td><i>  // track of which blocks we visit.</i></td></tr>
<tr><th id="3445">3445</th><td>  <a class="type" href="../../../include/llvm/ADT/SmallPtrSet.h.html#llvm::SmallPtrSet" title='llvm::SmallPtrSet' data-ref="llvm::SmallPtrSet">SmallPtrSet</a>&lt;<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *, <var>32</var>&gt; <a class="ref fake" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZN4llvm11SmallPtrSetC1Ev" title='llvm::SmallPtrSet::SmallPtrSet&lt;PtrType, SmallSize&gt;' data-ref="_ZN4llvm11SmallPtrSetC1Ev"></a><dfn class="local col6 decl" id="616Visited" title='Visited' data-type='SmallPtrSet&lt;llvm::BasicBlock *, 32&gt;' data-ref="616Visited">Visited</dfn>;</td></tr>
<tr><th id="3446">3446</th><td>  <a class="local col5 ref" href="#615MadeIRChange" title='MadeIRChange' data-ref="615MadeIRChange">MadeIRChange</a> |=</td></tr>
<tr><th id="3447">3447</th><td>      <a class="tu ref" href="#_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE" title='AddReachableCodeToWorklist' data-use='c' data-ref="_ZL26AddReachableCodeToWorklistPN4llvm10BasicBlockERKNS_10DataLayoutERNS_15SmallPtrSetImplIS1_EERNS_19InstCombineWorklistEPKNS_17TargetLibraryInfoE">AddReachableCodeToWorklist</a>(&amp;<a class="local col1 ref" href="#611F" title='F' data-ref="611F">F</a>.<a class="ref" href="../../../include/llvm/IR/Function.h.html#_ZN4llvm8Function5frontEv" title='llvm::Function::front' data-ref="_ZN4llvm8Function5frontEv">front</a>(), <a class="local col2 ref" href="#612DL" title='DL' data-ref="612DL">DL</a>, <span class='refarg'><a class="local col6 ref" href="#616Visited" title='Visited' data-ref="616Visited">Visited</a></span>, <span class='refarg'><a class="local col4 ref" href="#614ICWorklist" title='ICWorklist' data-ref="614ICWorklist">ICWorklist</a></span>, <a class="local col3 ref" href="#613TLI" title='TLI' data-ref="613TLI">TLI</a>);</td></tr>
<tr><th id="3448">3448</th><td></td></tr>
<tr><th id="3449">3449</th><td>  <i>// Do a quick scan over the function.  If we find any blocks that are</i></td></tr>
<tr><th id="3450">3450</th><td><i>  // unreachable, remove any instructions inside of them.  This prevents</i></td></tr>
<tr><th id="3451">3451</th><td><i>  // the instcombine code from having to deal with some bad special cases.</i></td></tr>
<tr><th id="3452">3452</th><td>  <b>for</b> (<a class="type" href="../../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> &amp;<dfn class="local col7 decl" id="617BB" title='BB' data-type='llvm::BasicBlock &amp;' data-ref="617BB">BB</dfn> : <a class="local col1 ref" href="#611F" title='F' data-ref="611F">F</a>) {</td></tr>
<tr><th id="3453">3453</th><td>    <b>if</b> (<a class="local col6 ref" href="#616Visited" title='Visited' data-ref="616Visited">Visited</a>.<a class="ref" href="../../../include/llvm/ADT/SmallPtrSet.h.html#_ZNK4llvm15SmallPtrSetImpl5countENS_22add_const_past_pointerIT_vE4typeE" title='llvm::SmallPtrSetImpl::count' data-ref="_ZNK4llvm15SmallPtrSetImpl5countENS_22add_const_past_pointerIT_vE4typeE">count</a>(&amp;<a class="local col7 ref" href="#617BB" title='BB' data-ref="617BB">BB</a>))</td></tr>
<tr><th id="3454">3454</th><td>      <b>continue</b>;</td></tr>
<tr><th id="3455">3455</th><td></td></tr>
<tr><th id="3456">3456</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="618NumDeadInstInBB" title='NumDeadInstInBB' data-type='unsigned int' data-ref="618NumDeadInstInBB">NumDeadInstInBB</dfn> = <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm42removeAllNonTerminatorAndEHPadInstructionsEPNS_10BasicBlockE" title='llvm::removeAllNonTerminatorAndEHPadInstructions' data-ref="_ZN4llvm42removeAllNonTerminatorAndEHPadInstructionsEPNS_10BasicBlockE">removeAllNonTerminatorAndEHPadInstructions</a>(&amp;<a class="local col7 ref" href="#617BB" title='BB' data-ref="617BB">BB</a>);</td></tr>
<tr><th id="3457">3457</th><td>    <a class="local col5 ref" href="#615MadeIRChange" title='MadeIRChange' data-ref="615MadeIRChange">MadeIRChange</a> |= <a class="local col8 ref" href="#618NumDeadInstInBB" title='NumDeadInstInBB' data-ref="618NumDeadInstInBB">NumDeadInstInBB</a> &gt; <var>0</var>;</td></tr>
<tr><th id="3458">3458</th><td>    <a class="ref" href="#116" title='NumDeadInst' data-ref="NumDeadInst">NumDeadInst</a> <a class="ref" href="../../../include/llvm/ADT/Statistic.h.html#_ZN4llvm9StatisticpLEj" title='llvm::Statistic::operator+=' data-ref="_ZN4llvm9StatisticpLEj">+=</a> <a class="local col8 ref" href="#618NumDeadInstInBB" title='NumDeadInstInBB' data-ref="618NumDeadInstInBB">NumDeadInstInBB</a>;</td></tr>
<tr><th id="3459">3459</th><td>  }</td></tr>
<tr><th id="3460">3460</th><td></td></tr>
<tr><th id="3461">3461</th><td>  <b>return</b> <a class="local col5 ref" href="#615MadeIRChange" title='MadeIRChange' data-ref="615MadeIRChange">MadeIRChange</a>;</td></tr>
<tr><th id="3462">3462</th><td>}</td></tr>
<tr><th id="3463">3463</th><td></td></tr>
<tr><th id="3464">3464</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880" title='combineInstructionsOverFunction' data-type='bool combineInstructionsOverFunction(llvm::Function &amp; F, llvm::InstCombineWorklist &amp; Worklist, AliasAnalysis * AA, llvm::AssumptionCache &amp; AC, llvm::TargetLibraryInfo &amp; TLI, llvm::DominatorTree &amp; DT, llvm::OptimizationRemarkEmitter &amp; ORE, llvm::BlockFrequencyInfo * BFI, llvm::ProfileSummaryInfo * PSI, bool ExpensiveCombines = true, llvm::LoopInfo * LI = nullptr)' data-ref="_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880">combineInstructionsOverFunction</dfn>(</td></tr>
<tr><th id="3465">3465</th><td>    <a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col9 decl" id="619F" title='F' data-type='llvm::Function &amp;' data-ref="619F">F</dfn>, <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#llvm::InstCombineWorklist" title='llvm::InstCombineWorklist' data-ref="llvm::InstCombineWorklist">InstCombineWorklist</a> &amp;<dfn class="local col0 decl" id="620Worklist" title='Worklist' data-type='llvm::InstCombineWorklist &amp;' data-ref="620Worklist">Worklist</dfn>, <a class="typedef" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AliasAnalysis" title='llvm::AliasAnalysis' data-type='llvm::AAResults' data-ref="llvm::AliasAnalysis">AliasAnalysis</a> *<dfn class="local col1 decl" id="621AA" title='AA' data-type='AliasAnalysis *' data-ref="621AA">AA</dfn>,</td></tr>
<tr><th id="3466">3466</th><td>    <a class="type" href="../../../include/llvm/Analysis/AssumptionCache.h.html#llvm::AssumptionCache" title='llvm::AssumptionCache' data-ref="llvm::AssumptionCache">AssumptionCache</a> &amp;<dfn class="local col2 decl" id="622AC" title='AC' data-type='llvm::AssumptionCache &amp;' data-ref="622AC">AC</dfn>, <a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfo" title='llvm::TargetLibraryInfo' data-ref="llvm::TargetLibraryInfo">TargetLibraryInfo</a> &amp;<dfn class="local col3 decl" id="623TLI" title='TLI' data-type='llvm::TargetLibraryInfo &amp;' data-ref="623TLI">TLI</dfn>, <a class="type" href="../../../include/llvm/IR/Dominators.h.html#llvm::DominatorTree" title='llvm::DominatorTree' data-ref="llvm::DominatorTree">DominatorTree</a> &amp;<dfn class="local col4 decl" id="624DT" title='DT' data-type='llvm::DominatorTree &amp;' data-ref="624DT">DT</dfn>,</td></tr>
<tr><th id="3467">3467</th><td>    <a class="type" href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html#llvm::OptimizationRemarkEmitter" title='llvm::OptimizationRemarkEmitter' data-ref="llvm::OptimizationRemarkEmitter">OptimizationRemarkEmitter</a> &amp;<dfn class="local col5 decl" id="625ORE" title='ORE' data-type='llvm::OptimizationRemarkEmitter &amp;' data-ref="625ORE">ORE</dfn>, <a class="type" href="../../../include/llvm/Analysis/BlockFrequencyInfo.h.html#llvm::BlockFrequencyInfo" title='llvm::BlockFrequencyInfo' data-ref="llvm::BlockFrequencyInfo">BlockFrequencyInfo</a> *<dfn class="local col6 decl" id="626BFI" title='BFI' data-type='llvm::BlockFrequencyInfo *' data-ref="626BFI">BFI</dfn>,</td></tr>
<tr><th id="3468">3468</th><td>    <a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryInfo" title='llvm::ProfileSummaryInfo' data-ref="llvm::ProfileSummaryInfo">ProfileSummaryInfo</a> *<dfn class="local col7 decl" id="627PSI" title='PSI' data-type='llvm::ProfileSummaryInfo *' data-ref="627PSI">PSI</dfn>, <em>bool</em> <dfn class="local col8 decl" id="628ExpensiveCombines" title='ExpensiveCombines' data-type='bool' data-ref="628ExpensiveCombines">ExpensiveCombines</dfn> = <b>true</b>,</td></tr>
<tr><th id="3469">3469</th><td>    <a class="type" href="../../../include/llvm/Analysis/LoopInfo.h.html#llvm::LoopInfo" title='llvm::LoopInfo' data-ref="llvm::LoopInfo">LoopInfo</a> *<dfn class="local col9 decl" id="629LI" title='LI' data-type='llvm::LoopInfo *' data-ref="629LI">LI</dfn> = <b>nullptr</b>) {</td></tr>
<tr><th id="3470">3470</th><td>  <em>auto</em> &amp;<dfn class="local col0 decl" id="630DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="630DL">DL</dfn> = <a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a>.<a class="ref" href="../../../include/llvm/IR/GlobalValue.h.html#_ZN4llvm11GlobalValue9getParentEv" title='llvm::GlobalValue::getParent' data-ref="_ZN4llvm11GlobalValue9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="3471">3471</th><td>  <a class="local col8 ref" href="#628ExpensiveCombines" title='ExpensiveCombines' data-ref="628ExpensiveCombines">ExpensiveCombines</a> |= <a class="ref fake" href="../../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#EnableExpensiveCombines" title='EnableExpensiveCombines' data-use='m' data-ref="EnableExpensiveCombines">EnableExpensiveCombines</a>;</td></tr>
<tr><th id="3472">3472</th><td></td></tr>
<tr><th id="3473">3473</th><td>  <i class="doc">/// Builder - This is an IRBuilder that automatically inserts new</i></td></tr>
<tr><th id="3474">3474</th><td><i class="doc">  /// instructions into the worklist when they are created.</i></td></tr>
<tr><th id="3475">3475</th><td>  <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;<a class="type" href="../../../include/llvm/Analysis/TargetFolder.h.html#llvm::TargetFolder" title='llvm::TargetFolder' data-ref="llvm::TargetFolder">TargetFolder</a>, <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilderCallbackInserter" title='llvm::IRBuilderCallbackInserter' data-ref="llvm::IRBuilderCallbackInserter">IRBuilderCallbackInserter</a>&gt; <dfn class="local col1 decl" id="631Builder" title='Builder' data-type='IRBuilder&lt;llvm::TargetFolder, llvm::IRBuilderCallbackInserter&gt;' data-ref="631Builder">Builder</dfn><a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1ERNS_11LLVMContextERKT_T0_PNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1ERNS_11LLVMContextERKT_T0_PNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a></td></tr>
<tr><th id="3476">3476</th><td>      <a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a>.<a class="ref" href="../../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10getContextEv" title='llvm::Function::getContext' data-ref="_ZNK4llvm8Function10getContextEv">getContext</a>(), <a class="type" href="../../../include/llvm/Analysis/TargetFolder.h.html#llvm::TargetFolder" title='llvm::TargetFolder' data-ref="llvm::TargetFolder">TargetFolder</a><a class="ref" href="../../../include/llvm/Analysis/TargetFolder.h.html#_ZN4llvm12TargetFolderC1ERKNS_10DataLayoutE" title='llvm::TargetFolder::TargetFolder' data-ref="_ZN4llvm12TargetFolderC1ERKNS_10DataLayoutE">(</a><a class="local col0 ref" href="#630DL" title='DL' data-ref="630DL">DL</a>),</td></tr>
<tr><th id="3477">3477</th><td>      <a class="type" href="../../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilderCallbackInserter" title='llvm::IRBuilderCallbackInserter' data-ref="llvm::IRBuilderCallbackInserter">IRBuilderCallbackInserter</a><a class="ref" href="../../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm25IRBuilderCallbackInserterC1ESt8functionIFvPNS_11InstructionEEE" title='llvm::IRBuilderCallbackInserter::IRBuilderCallbackInserter' data-ref="_ZN4llvm25IRBuilderCallbackInserterC1ESt8functionIFvPNS_11InstructionEEE">(</a><a class="ref fake" href="../../../../../include/c++/7/bits/std_function.h.html#_ZNSt8functionIFT_DpT0_EEC1ET_" title='std::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZNSt8functionIFT_DpT0_EEC1ET_"></a>[&amp;Worklist, &amp;AC](<a class="type" href="../../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col2 decl" id="632I" title='I' data-type='llvm::Instruction *' data-ref="632I">I</dfn>) {</td></tr>
<tr><th id="3478">3478</th><td>        <a class="local col0 ref" href="#620Worklist" title='Worklist' data-ref="620Worklist">Worklist</a>.<a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombineWorklist.h.html#_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE" title='llvm::InstCombineWorklist::Add' data-ref="_ZN4llvm19InstCombineWorklist3AddEPNS_11InstructionE">Add</a>(<a class="local col2 ref" href="#632I" title='I' data-ref="632I">I</a>);</td></tr>
<tr><th id="3479">3479</th><td>        <b>if</b> (match(I, m_Intrinsic&lt;Intrinsic::<span class='error' title="no member named &apos;assume&apos; in namespace &apos;llvm::Intrinsic&apos;">assume</span>&gt;()))</td></tr>
<tr><th id="3480">3480</th><td>          <a class="local col2 ref" href="#622AC" title='AC' data-ref="622AC">AC</a>.<a class="ref" href="../../../include/llvm/Analysis/AssumptionCache.h.html#_ZN4llvm15AssumptionCache18registerAssumptionEPNS_8CallInstE" title='llvm::AssumptionCache::registerAssumption' data-ref="_ZN4llvm15AssumptionCache18registerAssumptionEPNS_8CallInstE">registerAssumption</a>(<a class="ref" href="../../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../../include/llvm/IR/Instructions.h.html#llvm::CallInst" title='llvm::CallInst' data-ref="llvm::CallInst">CallInst</a>&gt;(<a class="local col2 ref" href="#632I" title='I' data-ref="632I">I</a>));</td></tr>
<tr><th id="3481">3481</th><td>      }));</td></tr>
<tr><th id="3482">3482</th><td></td></tr>
<tr><th id="3483">3483</th><td>  <i>// Lower dbg.declare intrinsics otherwise their value may be clobbered</i></td></tr>
<tr><th id="3484">3484</th><td><i>  // by instcombiner.</i></td></tr>
<tr><th id="3485">3485</th><td>  <em>bool</em> <dfn class="local col3 decl" id="633MadeIRChange" title='MadeIRChange' data-type='bool' data-ref="633MadeIRChange">MadeIRChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="3486">3486</th><td>  <b>if</b> (<a class="ref fake" href="../../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#ShouldLowerDbgDeclare" title='ShouldLowerDbgDeclare' data-use='m' data-ref="ShouldLowerDbgDeclare">ShouldLowerDbgDeclare</a>)</td></tr>
<tr><th id="3487">3487</th><td>    <a class="local col3 ref" href="#633MadeIRChange" title='MadeIRChange' data-ref="633MadeIRChange">MadeIRChange</a> = <a class="ref" href="../../../include/llvm/Transforms/Utils/Local.h.html#_ZN4llvm15LowerDbgDeclareERNS_8FunctionE" title='llvm::LowerDbgDeclare' data-ref="_ZN4llvm15LowerDbgDeclareERNS_8FunctionE">LowerDbgDeclare</a>(<span class='refarg'><a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a></span>);</td></tr>
<tr><th id="3488">3488</th><td></td></tr>
<tr><th id="3489">3489</th><td>  <i>// Iterate while there is work to do.</i></td></tr>
<tr><th id="3490">3490</th><td>  <em>int</em> <dfn class="local col4 decl" id="634Iteration" title='Iteration' data-type='int' data-ref="634Iteration">Iteration</dfn> = <var>0</var>;</td></tr>
<tr><th id="3491">3491</th><td>  <b>while</b> (<b>true</b>) {</td></tr>
<tr><th id="3492">3492</th><td>    ++<a class="local col4 ref" href="#634Iteration" title='Iteration' data-ref="634Iteration">Iteration</a>;</td></tr>
<tr><th id="3493">3493</th><td>    <a class="macro" href="../../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;instcombine&quot;)) { dbgs() &lt;&lt; &quot;\n\nINSTCOMBINE ITERATION #&quot; &lt;&lt; Iteration &lt;&lt; &quot; on &quot; &lt;&lt; F.getName() &lt;&lt; &quot;\n&quot;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n\nINSTCOMBINE ITERATION #"</q> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEi" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEi">&lt;&lt;</a> <a class="local col4 ref" href="#634Iteration" title='Iteration' data-ref="634Iteration">Iteration</a> <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" on "</q></td></tr>
<tr><th id="3494">3494</th><td>                      <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsENS_9StringRefE" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsENS_9StringRefE">&lt;&lt;</a> <a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a>.<a class="ref" href="../../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getNameEv" title='llvm::Value::getName' data-ref="_ZNK4llvm5Value7getNameEv">getName</a>() <a class="ref" href="../../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n"</q>);</td></tr>
<tr><th id="3495">3495</th><td></td></tr>
<tr><th id="3496">3496</th><td>    <a class="local col3 ref" href="#633MadeIRChange" title='MadeIRChange' data-ref="633MadeIRChange">MadeIRChange</a> |= <a class="tu ref" href="#_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE" title='prepareICWorklistFromFunction' data-use='c' data-ref="_ZL29prepareICWorklistFromFunctionRN4llvm8FunctionERKNS_10DataLayoutEPNS_17TargetLibraryInfoERNS_19InstCombineWorklistE">prepareICWorklistFromFunction</a>(<span class='refarg'><a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a></span>, <a class="local col0 ref" href="#630DL" title='DL' data-ref="630DL">DL</a>, &amp;<a class="local col3 ref" href="#623TLI" title='TLI' data-ref="623TLI">TLI</a>, <span class='refarg'><a class="local col0 ref" href="#620Worklist" title='Worklist' data-ref="620Worklist">Worklist</a></span>);</td></tr>
<tr><th id="3497">3497</th><td></td></tr>
<tr><th id="3498">3498</th><td>    <a class="type" href="InstCombineInternal.h.html#llvm::InstCombiner" title='llvm::InstCombiner' data-ref="llvm::InstCombiner">InstCombiner</a> <dfn class="local col5 decl" id="635IC" title='IC' data-type='llvm::InstCombiner' data-ref="635IC">IC</dfn><a class="ref" href="InstCombineInternal.h.html#_ZN4llvm12InstCombinerC1ERNS_19InstCombineWorklistERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEEbbPNS_9AAResultsERNS_15Assumption6993317" title='llvm::InstCombiner::InstCombiner' data-ref="_ZN4llvm12InstCombinerC1ERNS_19InstCombineWorklistERNS_9IRBuilderINS_12TargetFolderENS_25IRBuilderCallbackInserterEEEbbPNS_9AAResultsERNS_15Assumption6993317">(</a><a class="local col0 ref" href="#620Worklist" title='Worklist' data-ref="620Worklist">Worklist</a>, <a class="local col1 ref" href="#631Builder" title='Builder' data-ref="631Builder">Builder</a>, <a class="local col9 ref" href="#619F" title='F' data-ref="619F">F</a>.<a class="ref" href="../../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10hasMinSizeEv" title='llvm::Function::hasMinSize' data-ref="_ZNK4llvm8Function10hasMinSizeEv">hasMinSize</a>(), <a class="local col8 ref" href="#628ExpensiveCombines" title='ExpensiveCombines' data-ref="628ExpensiveCombines">ExpensiveCombines</a>, <a class="local col1 ref" href="#621AA" title='AA' data-ref="621AA">AA</a>,</td></tr>
<tr><th id="3499">3499</th><td>                    <a class="local col2 ref" href="#622AC" title='AC' data-ref="622AC">AC</a>, <a class="local col3 ref" href="#623TLI" title='TLI' data-ref="623TLI">TLI</a>, <a class="local col4 ref" href="#624DT" title='DT' data-ref="624DT">DT</a>, <a class="local col5 ref" href="#625ORE" title='ORE' data-ref="625ORE">ORE</a>, <a class="local col6 ref" href="#626BFI" title='BFI' data-ref="626BFI">BFI</a>, <a class="local col7 ref" href="#627PSI" title='PSI' data-ref="627PSI">PSI</a>, <a class="local col0 ref" href="#630DL" title='DL' data-ref="630DL">DL</a>, <a class="local col9 ref" href="#629LI" title='LI' data-ref="629LI">LI</a>);</td></tr>
<tr><th id="3500">3500</th><td>    <a class="local col5 ref" href="#635IC" title='IC' data-ref="635IC">IC</a>.<a class="ref" href="InstCombineInternal.h.html#llvm::InstCombiner::MaxArraySizeForCombine" title='llvm::InstCombiner::MaxArraySizeForCombine' data-ref="llvm::InstCombiner::MaxArraySizeForCombine">MaxArraySizeForCombine</a> = <a class="ref fake" href="../../../include/llvm/Support/CommandLine.h.html#_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev" title='llvm::cl::opt_storage&lt;type-parameter-0-0, false, false&gt;::operator type-parameter-0-0' data-ref="_ZNK4llvm2cl11opt_storageIT_Lb0ELb0EEcvS2_Ev"></a><a class="tu ref" href="#MaxArraySize" title='MaxArraySize' data-use='m' data-ref="MaxArraySize">MaxArraySize</a>;</td></tr>
<tr><th id="3501">3501</th><td></td></tr>
<tr><th id="3502">3502</th><td>    <b>if</b> (!<a class="local col5 ref" href="#635IC" title='IC' data-ref="635IC">IC</a>.<a class="ref" href="#_ZN4llvm12InstCombiner3runEv" title='llvm::InstCombiner::run' data-ref="_ZN4llvm12InstCombiner3runEv">run</a>())</td></tr>
<tr><th id="3503">3503</th><td>      <b>break</b>;</td></tr>
<tr><th id="3504">3504</th><td>  }</td></tr>
<tr><th id="3505">3505</th><td></td></tr>
<tr><th id="3506">3506</th><td>  <b>return</b> <a class="local col3 ref" href="#633MadeIRChange" title='MadeIRChange' data-ref="633MadeIRChange">MadeIRChange</a> || <a class="local col4 ref" href="#634Iteration" title='Iteration' data-ref="634Iteration">Iteration</a> &gt; <var>1</var>;</td></tr>
<tr><th id="3507">3507</th><td>}</td></tr>
<tr><th id="3508">3508</th><td></td></tr>
<tr><th id="3509">3509</th><td><a class="type" href="../../../include/llvm/IR/PassManager.h.html#llvm::PreservedAnalyses" title='llvm::PreservedAnalyses' data-ref="llvm::PreservedAnalyses">PreservedAnalyses</a> <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstCombinePass" title='llvm::InstCombinePass' data-ref="llvm::InstCombinePass">InstCombinePass</a>::<dfn class="decl def" id="_ZN4llvm15InstCombinePass3runERNS_8FunctionERNS_15AnalysisManagerIS1_JEEE" title='llvm::InstCombinePass::run' data-ref="_ZN4llvm15InstCombinePass3runERNS_8FunctionERNS_15AnalysisManagerIS1_JEEE">run</dfn>(<a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col6 decl" id="636F" title='F' data-type='llvm::Function &amp;' data-ref="636F">F</dfn>,</td></tr>
<tr><th id="3510">3510</th><td>                                       <a class="typedef" href="../../../include/llvm/IR/PassManager.h.html#llvm::FunctionAnalysisManager" title='llvm::FunctionAnalysisManager' data-type='AnalysisManager&lt;llvm::Function&gt;' data-ref="llvm::FunctionAnalysisManager">FunctionAnalysisManager</a> &amp;<dfn class="local col7 decl" id="637AM" title='AM' data-type='FunctionAnalysisManager &amp;' data-ref="637AM">AM</dfn>) {</td></tr>
<tr><th id="3511">3511</th><td>  <em>auto</em> &amp;<dfn class="local col8 decl" id="638AC" title='AC' data-type='llvm::AssumptionCache &amp;' data-ref="638AC">AC</dfn> = <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AssumptionCache.h.html#llvm::AssumptionAnalysis" title='llvm::AssumptionAnalysis' data-ref="llvm::AssumptionAnalysis">AssumptionAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3512">3512</th><td>  <em>auto</em> &amp;<dfn class="local col9 decl" id="639DT" title='DT' data-type='llvm::DominatorTree &amp;' data-ref="639DT">DT</dfn> = <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/IR/Dominators.h.html#llvm::DominatorTreeAnalysis" title='llvm::DominatorTreeAnalysis' data-ref="llvm::DominatorTreeAnalysis">DominatorTreeAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3513">3513</th><td>  <em>auto</em> &amp;<dfn class="local col0 decl" id="640TLI" title='TLI' data-type='llvm::TargetLibraryInfo &amp;' data-ref="640TLI">TLI</dfn> = <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryAnalysis" title='llvm::TargetLibraryAnalysis' data-ref="llvm::TargetLibraryAnalysis">TargetLibraryAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3514">3514</th><td>  <em>auto</em> &amp;<dfn class="local col1 decl" id="641ORE" title='ORE' data-type='llvm::OptimizationRemarkEmitter &amp;' data-ref="641ORE">ORE</dfn> = <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html#llvm::OptimizationRemarkEmitterAnalysis" title='llvm::OptimizationRemarkEmitterAnalysis' data-ref="llvm::OptimizationRemarkEmitterAnalysis">OptimizationRemarkEmitterAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3515">3515</th><td></td></tr>
<tr><th id="3516">3516</th><td>  <em>auto</em> *<dfn class="local col2 decl" id="642LI" title='LI' data-type='llvm::LoopInfo *' data-ref="642LI">LI</dfn> = <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZNK4llvm15AnalysisManager15getCachedResultERT_" title='llvm::AnalysisManager::getCachedResult' data-ref="_ZNK4llvm15AnalysisManager15getCachedResultERT_">getCachedResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/LoopInfo.h.html#llvm::LoopAnalysis" title='llvm::LoopAnalysis' data-ref="llvm::LoopAnalysis">LoopAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3517">3517</th><td></td></tr>
<tr><th id="3518">3518</th><td>  <em>auto</em> *<dfn class="local col3 decl" id="643AA" title='AA' data-type='llvm::AAResults *' data-ref="643AA">AA</dfn> = &amp;<a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AAManager" title='llvm::AAManager' data-ref="llvm::AAManager">AAManager</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>);</td></tr>
<tr><th id="3519">3519</th><td>  <em>const</em> <a class="typedef" href="../../../include/llvm/IR/PassManager.h.html#llvm::ModuleAnalysisManager" title='llvm::ModuleAnalysisManager' data-type='AnalysisManager&lt;llvm::Module&gt;' data-ref="llvm::ModuleAnalysisManager">ModuleAnalysisManager</a> &amp;<dfn class="local col4 decl" id="644MAM" title='MAM' data-type='const ModuleAnalysisManager &amp;' data-ref="644MAM">MAM</dfn> =</td></tr>
<tr><th id="3520">3520</th><td>      <a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="typedef" href="../../../include/llvm/IR/PassManager.h.html#llvm::ModuleAnalysisManagerFunctionProxy" title='llvm::ModuleAnalysisManagerFunctionProxy' data-type='OuterAnalysisManagerProxy&lt;ModuleAnalysisManager, llvm::Function&gt;' data-ref="llvm::ModuleAnalysisManagerFunctionProxy">ModuleAnalysisManagerFunctionProxy</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>).<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZNK4llvm25OuterAnalysisManagerProxy6Result10getManagerEv" title='llvm::OuterAnalysisManagerProxy::Result::getManager' data-ref="_ZNK4llvm25OuterAnalysisManagerProxy6Result10getManagerEv">getManager</a>();</td></tr>
<tr><th id="3521">3521</th><td>  <a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryInfo" title='llvm::ProfileSummaryInfo' data-ref="llvm::ProfileSummaryInfo">ProfileSummaryInfo</a> *<dfn class="local col5 decl" id="645PSI" title='PSI' data-type='llvm::ProfileSummaryInfo *' data-ref="645PSI">PSI</dfn> =</td></tr>
<tr><th id="3522">3522</th><td>      <a class="local col4 ref" href="#644MAM" title='MAM' data-ref="644MAM">MAM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZNK4llvm15AnalysisManager15getCachedResultERT_" title='llvm::AnalysisManager::getCachedResult' data-ref="_ZNK4llvm15AnalysisManager15getCachedResultERT_">getCachedResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryAnalysis" title='llvm::ProfileSummaryAnalysis' data-ref="llvm::ProfileSummaryAnalysis">ProfileSummaryAnalysis</a>&gt;(<span class='refarg'>*<a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a>.<a class="ref" href="../../../include/llvm/IR/GlobalValue.h.html#_ZN4llvm11GlobalValue9getParentEv" title='llvm::GlobalValue::getParent' data-ref="_ZN4llvm11GlobalValue9getParentEv">getParent</a>()</span>);</td></tr>
<tr><th id="3523">3523</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="646BFI" title='BFI' data-type='llvm::BlockFrequencyInfo *' data-ref="646BFI">BFI</dfn> = (<a class="local col5 ref" href="#645PSI" title='PSI' data-ref="645PSI">PSI</a> &amp;&amp; <a class="local col5 ref" href="#645PSI" title='PSI' data-ref="645PSI">PSI</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#_ZN4llvm18ProfileSummaryInfo17hasProfileSummaryEv" title='llvm::ProfileSummaryInfo::hasProfileSummary' data-ref="_ZN4llvm18ProfileSummaryInfo17hasProfileSummaryEv">hasProfileSummary</a>()) ?</td></tr>
<tr><th id="3524">3524</th><td>      &amp;<a class="local col7 ref" href="#637AM" title='AM' data-ref="637AM">AM</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm15AnalysisManager9getResultERT_DpT0_" title='llvm::AnalysisManager::getResult' data-ref="_ZN4llvm15AnalysisManager9getResultERT_DpT0_">getResult</a>&lt;<a class="type" href="../../../include/llvm/Analysis/BlockFrequencyInfo.h.html#llvm::BlockFrequencyAnalysis" title='llvm::BlockFrequencyAnalysis' data-ref="llvm::BlockFrequencyAnalysis">BlockFrequencyAnalysis</a>&gt;(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>) : <b>nullptr</b>;</td></tr>
<tr><th id="3525">3525</th><td></td></tr>
<tr><th id="3526">3526</th><td>  <b>if</b> (!<a class="tu ref" href="#_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880" title='combineInstructionsOverFunction' data-use='c' data-ref="_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880">combineInstructionsOverFunction</a>(<span class='refarg'><a class="local col6 ref" href="#636F" title='F' data-ref="636F">F</a></span>, <span class='refarg'><a class="member" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstCombinePass::Worklist" title='llvm::InstCombinePass::Worklist' data-ref="llvm::InstCombinePass::Worklist">Worklist</a></span>, <a class="local col3 ref" href="#643AA" title='AA' data-ref="643AA">AA</a>, <span class='refarg'><a class="local col8 ref" href="#638AC" title='AC' data-ref="638AC">AC</a></span>, <span class='refarg'><a class="local col0 ref" href="#640TLI" title='TLI' data-ref="640TLI">TLI</a></span>, <span class='refarg'><a class="local col9 ref" href="#639DT" title='DT' data-ref="639DT">DT</a></span>, <span class='refarg'><a class="local col1 ref" href="#641ORE" title='ORE' data-ref="641ORE">ORE</a></span>,</td></tr>
<tr><th id="3527">3527</th><td>                                       <a class="local col6 ref" href="#646BFI" title='BFI' data-ref="646BFI">BFI</a>, <a class="local col5 ref" href="#645PSI" title='PSI' data-ref="645PSI">PSI</a>, <a class="member" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstCombinePass::ExpensiveCombines" title='llvm::InstCombinePass::ExpensiveCombines' data-ref="llvm::InstCombinePass::ExpensiveCombines">ExpensiveCombines</a>, <a class="local col2 ref" href="#642LI" title='LI' data-ref="642LI">LI</a>))</td></tr>
<tr><th id="3528">3528</th><td>    <i>// No changes, all analyses are preserved.</i></td></tr>
<tr><th id="3529">3529</th><td>    <b>return</b> <a class="type" href="../../../include/llvm/IR/PassManager.h.html#llvm::PreservedAnalyses" title='llvm::PreservedAnalyses' data-ref="llvm::PreservedAnalyses">PreservedAnalyses</a>::<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm17PreservedAnalyses3allEv" title='llvm::PreservedAnalyses::all' data-ref="_ZN4llvm17PreservedAnalyses3allEv">all</a>();</td></tr>
<tr><th id="3530">3530</th><td></td></tr>
<tr><th id="3531">3531</th><td>  <i>// Mark all the analyses that instcombine updates as preserved.</i></td></tr>
<tr><th id="3532">3532</th><td>  <a class="type" href="../../../include/llvm/IR/PassManager.h.html#llvm::PreservedAnalyses" title='llvm::PreservedAnalyses' data-ref="llvm::PreservedAnalyses">PreservedAnalyses</a> <a class="ref fake" href="../../../include/llvm/IR/PassManager.h.html#153" title='llvm::PreservedAnalyses::PreservedAnalyses' data-ref="_ZN4llvm17PreservedAnalysesC1Ev"></a><dfn class="local col7 decl" id="647PA" title='PA' data-type='llvm::PreservedAnalyses' data-ref="647PA">PA</dfn>;</td></tr>
<tr><th id="3533">3533</th><td>  <a class="local col7 ref" href="#647PA" title='PA' data-ref="647PA">PA</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm17PreservedAnalyses11preserveSetEv" title='llvm::PreservedAnalyses::preserveSet' data-ref="_ZN4llvm17PreservedAnalyses11preserveSetEv">preserveSet</a>&lt;<a class="type" href="../../../include/llvm/IR/PassManager.h.html#llvm::CFGAnalyses" title='llvm::CFGAnalyses' data-ref="llvm::CFGAnalyses">CFGAnalyses</a>&gt;();</td></tr>
<tr><th id="3534">3534</th><td>  <a class="local col7 ref" href="#647PA" title='PA' data-ref="647PA">PA</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm17PreservedAnalyses8preserveEv" title='llvm::PreservedAnalyses::preserve' data-ref="_ZN4llvm17PreservedAnalyses8preserveEv">preserve</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AAManager" title='llvm::AAManager' data-ref="llvm::AAManager">AAManager</a>&gt;();</td></tr>
<tr><th id="3535">3535</th><td>  <a class="local col7 ref" href="#647PA" title='PA' data-ref="647PA">PA</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm17PreservedAnalyses8preserveEv" title='llvm::PreservedAnalyses::preserve' data-ref="_ZN4llvm17PreservedAnalyses8preserveEv">preserve</a>&lt;<a class="type" href="../../../include/llvm/Analysis/BasicAliasAnalysis.h.html#llvm::BasicAA" title='llvm::BasicAA' data-ref="llvm::BasicAA">BasicAA</a>&gt;();</td></tr>
<tr><th id="3536">3536</th><td>  <a class="local col7 ref" href="#647PA" title='PA' data-ref="647PA">PA</a>.<a class="ref" href="../../../include/llvm/IR/PassManager.h.html#_ZN4llvm17PreservedAnalyses8preserveEv" title='llvm::PreservedAnalyses::preserve' data-ref="_ZN4llvm17PreservedAnalyses8preserveEv">preserve</a>&lt;<a class="type" href="../../../include/llvm/Analysis/GlobalsModRef.h.html#llvm::GlobalsAA" title='llvm::GlobalsAA' data-ref="llvm::GlobalsAA">GlobalsAA</a>&gt;();</td></tr>
<tr><th id="3537">3537</th><td>  <b>return</b> <a class="local col7 ref" href="#647PA" title='PA' data-ref="647PA">PA</a>;</td></tr>
<tr><th id="3538">3538</th><td>}</td></tr>
<tr><th id="3539">3539</th><td></td></tr>
<tr><th id="3540">3540</th><td><em>void</em> <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass" title='llvm::InstructionCombiningPass' data-ref="llvm::InstructionCombiningPass">InstructionCombiningPass</a>::<dfn class="virtual decl def" id="_ZNK4llvm24InstructionCombiningPass16getAnalysisUsageERNS_13AnalysisUsageE" title='llvm::InstructionCombiningPass::getAnalysisUsage' data-ref="_ZNK4llvm24InstructionCombiningPass16getAnalysisUsageERNS_13AnalysisUsageE">getAnalysisUsage</dfn>(<a class="type" href="../../../include/llvm/PassAnalysisSupport.h.html#llvm::AnalysisUsage" title='llvm::AnalysisUsage' data-ref="llvm::AnalysisUsage">AnalysisUsage</a> &amp;<dfn class="local col8 decl" id="648AU" title='AU' data-type='llvm::AnalysisUsage &amp;' data-ref="648AU">AU</dfn>) <em>const</em> {</td></tr>
<tr><th id="3541">3541</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage15setPreservesCFGEv" title='llvm::AnalysisUsage::setPreservesCFG' data-ref="_ZN4llvm13AnalysisUsage15setPreservesCFGEv">setPreservesCFG</a>();</td></tr>
<tr><th id="3542">3542</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AAResultsWrapperPass" title='llvm::AAResultsWrapperPass' data-ref="llvm::AAResultsWrapperPass">AAResultsWrapperPass</a>&gt;();</td></tr>
<tr><th id="3543">3543</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AssumptionCache.h.html#llvm::AssumptionCacheTracker" title='llvm::AssumptionCacheTracker' data-ref="llvm::AssumptionCacheTracker">AssumptionCacheTracker</a>&gt;();</td></tr>
<tr><th id="3544">3544</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfoWrapperPass" title='llvm::TargetLibraryInfoWrapperPass' data-ref="llvm::TargetLibraryInfoWrapperPass">TargetLibraryInfoWrapperPass</a>&gt;();</td></tr>
<tr><th id="3545">3545</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/IR/Dominators.h.html#llvm::DominatorTreeWrapperPass" title='llvm::DominatorTreeWrapperPass' data-ref="llvm::DominatorTreeWrapperPass">DominatorTreeWrapperPass</a>&gt;();</td></tr>
<tr><th id="3546">3546</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html#llvm::OptimizationRemarkEmitterWrapperPass" title='llvm::OptimizationRemarkEmitterWrapperPass' data-ref="llvm::OptimizationRemarkEmitterWrapperPass">OptimizationRemarkEmitterWrapperPass</a>&gt;();</td></tr>
<tr><th id="3547">3547</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage12addPreservedEv" title='llvm::AnalysisUsage::addPreserved' data-ref="_ZN4llvm13AnalysisUsage12addPreservedEv">addPreserved</a>&lt;<a class="type" href="../../../include/llvm/IR/Dominators.h.html#llvm::DominatorTreeWrapperPass" title='llvm::DominatorTreeWrapperPass' data-ref="llvm::DominatorTreeWrapperPass">DominatorTreeWrapperPass</a>&gt;();</td></tr>
<tr><th id="3548">3548</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage12addPreservedEv" title='llvm::AnalysisUsage::addPreserved' data-ref="_ZN4llvm13AnalysisUsage12addPreservedEv">addPreserved</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AAResultsWrapperPass" title='llvm::AAResultsWrapperPass' data-ref="llvm::AAResultsWrapperPass">AAResultsWrapperPass</a>&gt;();</td></tr>
<tr><th id="3549">3549</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage12addPreservedEv" title='llvm::AnalysisUsage::addPreserved' data-ref="_ZN4llvm13AnalysisUsage12addPreservedEv">addPreserved</a>&lt;<a class="type" href="../../../include/llvm/Analysis/BasicAliasAnalysis.h.html#llvm::BasicAAWrapperPass" title='llvm::BasicAAWrapperPass' data-ref="llvm::BasicAAWrapperPass">BasicAAWrapperPass</a>&gt;();</td></tr>
<tr><th id="3550">3550</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage12addPreservedEv" title='llvm::AnalysisUsage::addPreserved' data-ref="_ZN4llvm13AnalysisUsage12addPreservedEv">addPreserved</a>&lt;<a class="type" href="../../../include/llvm/Analysis/GlobalsModRef.h.html#llvm::GlobalsAAWrapperPass" title='llvm::GlobalsAAWrapperPass' data-ref="llvm::GlobalsAAWrapperPass">GlobalsAAWrapperPass</a>&gt;();</td></tr>
<tr><th id="3551">3551</th><td>  <a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a>.<a class="ref" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZN4llvm13AnalysisUsage11addRequiredEv" title='llvm::AnalysisUsage::addRequired' data-ref="_ZN4llvm13AnalysisUsage11addRequiredEv">addRequired</a>&lt;<a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryInfoWrapperPass" title='llvm::ProfileSummaryInfoWrapperPass' data-ref="llvm::ProfileSummaryInfoWrapperPass">ProfileSummaryInfoWrapperPass</a>&gt;();</td></tr>
<tr><th id="3552">3552</th><td>  <a class="type" href="../../../include/llvm/Analysis/LazyBlockFrequencyInfo.h.html#llvm::LazyBlockFrequencyInfoPass" title='llvm::LazyBlockFrequencyInfoPass' data-ref="llvm::LazyBlockFrequencyInfoPass">LazyBlockFrequencyInfoPass</a>::<a class="ref" href="../../../include/llvm/Analysis/LazyBlockFrequencyInfo.h.html#_ZN4llvm26LazyBlockFrequencyInfoPass23getLazyBFIAnalysisUsageERNS_13AnalysisUsageE" title='llvm::LazyBlockFrequencyInfoPass::getLazyBFIAnalysisUsage' data-ref="_ZN4llvm26LazyBlockFrequencyInfoPass23getLazyBFIAnalysisUsageERNS_13AnalysisUsageE">getLazyBFIAnalysisUsage</a>(<span class='refarg'><a class="local col8 ref" href="#648AU" title='AU' data-ref="648AU">AU</a></span>);</td></tr>
<tr><th id="3553">3553</th><td>}</td></tr>
<tr><th id="3554">3554</th><td></td></tr>
<tr><th id="3555">3555</th><td><em>bool</em> <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass" title='llvm::InstructionCombiningPass' data-ref="llvm::InstructionCombiningPass">InstructionCombiningPass</a>::<dfn class="virtual decl def" id="_ZN4llvm24InstructionCombiningPass13runOnFunctionERNS_8FunctionE" title='llvm::InstructionCombiningPass::runOnFunction' data-ref="_ZN4llvm24InstructionCombiningPass13runOnFunctionERNS_8FunctionE">runOnFunction</dfn>(<a class="type" href="../../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col9 decl" id="649F" title='F' data-type='llvm::Function &amp;' data-ref="649F">F</dfn>) {</td></tr>
<tr><th id="3556">3556</th><td>  <b>if</b> (<a class="member" href="../../../include/llvm/Pass.h.html#_ZNK4llvm12FunctionPass12skipFunctionERKNS_8FunctionE" title='llvm::FunctionPass::skipFunction' data-ref="_ZNK4llvm12FunctionPass12skipFunctionERKNS_8FunctionE">skipFunction</a>(<a class="local col9 ref" href="#649F" title='F' data-ref="649F">F</a>))</td></tr>
<tr><th id="3557">3557</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="3558">3558</th><td></td></tr>
<tr><th id="3559">3559</th><td>  <i>// Required analyses.</i></td></tr>
<tr><th id="3560">3560</th><td>  <em>auto</em> <dfn class="local col0 decl" id="650AA" title='AA' data-type='llvm::AAResults *' data-ref="650AA">AA</dfn> = &amp;<a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#llvm::AAResultsWrapperPass" title='llvm::AAResultsWrapperPass' data-ref="llvm::AAResultsWrapperPass">AAResultsWrapperPass</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/AliasAnalysis.h.html#_ZN4llvm20AAResultsWrapperPass12getAAResultsEv" title='llvm::AAResultsWrapperPass::getAAResults' data-ref="_ZN4llvm20AAResultsWrapperPass12getAAResultsEv">getAAResults</a>();</td></tr>
<tr><th id="3561">3561</th><td>  <em>auto</em> &amp;<dfn class="local col1 decl" id="651AC" title='AC' data-type='llvm::AssumptionCache &amp;' data-ref="651AC">AC</dfn> = <a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/AssumptionCache.h.html#llvm::AssumptionCacheTracker" title='llvm::AssumptionCacheTracker' data-ref="llvm::AssumptionCacheTracker">AssumptionCacheTracker</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/AssumptionCache.h.html#_ZN4llvm22AssumptionCacheTracker18getAssumptionCacheERNS_8FunctionE" title='llvm::AssumptionCacheTracker::getAssumptionCache' data-ref="_ZN4llvm22AssumptionCacheTracker18getAssumptionCacheERNS_8FunctionE">getAssumptionCache</a>(<span class='refarg'><a class="local col9 ref" href="#649F" title='F' data-ref="649F">F</a></span>);</td></tr>
<tr><th id="3562">3562</th><td>  <em>auto</em> &amp;<dfn class="local col2 decl" id="652TLI" title='TLI' data-type='llvm::TargetLibraryInfo &amp;' data-ref="652TLI">TLI</dfn> = <a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#llvm::TargetLibraryInfoWrapperPass" title='llvm::TargetLibraryInfoWrapperPass' data-ref="llvm::TargetLibraryInfoWrapperPass">TargetLibraryInfoWrapperPass</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/TargetLibraryInfo.h.html#_ZN4llvm28TargetLibraryInfoWrapperPass6getTLIEv" title='llvm::TargetLibraryInfoWrapperPass::getTLI' data-ref="_ZN4llvm28TargetLibraryInfoWrapperPass6getTLIEv">getTLI</a>();</td></tr>
<tr><th id="3563">3563</th><td>  <em>auto</em> &amp;<dfn class="local col3 decl" id="653DT" title='DT' data-type='llvm::DominatorTree &amp;' data-ref="653DT">DT</dfn> = <a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/IR/Dominators.h.html#llvm::DominatorTreeWrapperPass" title='llvm::DominatorTreeWrapperPass' data-ref="llvm::DominatorTreeWrapperPass">DominatorTreeWrapperPass</a>&gt;().<a class="ref" href="../../../include/llvm/IR/Dominators.h.html#_ZN4llvm24DominatorTreeWrapperPass10getDomTreeEv" title='llvm::DominatorTreeWrapperPass::getDomTree' data-ref="_ZN4llvm24DominatorTreeWrapperPass10getDomTreeEv">getDomTree</a>();</td></tr>
<tr><th id="3564">3564</th><td>  <em>auto</em> &amp;<dfn class="local col4 decl" id="654ORE" title='ORE' data-type='llvm::OptimizationRemarkEmitter &amp;' data-ref="654ORE">ORE</dfn> = <a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html#llvm::OptimizationRemarkEmitterWrapperPass" title='llvm::OptimizationRemarkEmitterWrapperPass' data-ref="llvm::OptimizationRemarkEmitterWrapperPass">OptimizationRemarkEmitterWrapperPass</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/OptimizationRemarkEmitter.h.html#_ZN4llvm36OptimizationRemarkEmitterWrapperPass6getOREEv" title='llvm::OptimizationRemarkEmitterWrapperPass::getORE' data-ref="_ZN4llvm36OptimizationRemarkEmitterWrapperPass6getOREEv">getORE</a>();</td></tr>
<tr><th id="3565">3565</th><td></td></tr>
<tr><th id="3566">3566</th><td>  <i>// Optional analyses.</i></td></tr>
<tr><th id="3567">3567</th><td>  <em>auto</em> *<dfn class="local col5 decl" id="655LIWP" title='LIWP' data-type='llvm::LoopInfoWrapperPass *' data-ref="655LIWP">LIWP</dfn> = <a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass22getAnalysisIfAvailableEv" title='llvm::Pass::getAnalysisIfAvailable' data-ref="_ZNK4llvm4Pass22getAnalysisIfAvailableEv">getAnalysisIfAvailable</a>&lt;<a class="type" href="../../../include/llvm/Analysis/LoopInfo.h.html#llvm::LoopInfoWrapperPass" title='llvm::LoopInfoWrapperPass' data-ref="llvm::LoopInfoWrapperPass">LoopInfoWrapperPass</a>&gt;();</td></tr>
<tr><th id="3568">3568</th><td>  <em>auto</em> *<dfn class="local col6 decl" id="656LI" title='LI' data-type='llvm::LoopInfo *' data-ref="656LI">LI</dfn> = <a class="local col5 ref" href="#655LIWP" title='LIWP' data-ref="655LIWP">LIWP</a> ? &amp;<a class="local col5 ref" href="#655LIWP" title='LIWP' data-ref="655LIWP">LIWP</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/LoopInfo.h.html#_ZN4llvm19LoopInfoWrapperPass11getLoopInfoEv" title='llvm::LoopInfoWrapperPass::getLoopInfo' data-ref="_ZN4llvm19LoopInfoWrapperPass11getLoopInfoEv">getLoopInfo</a>() : <b>nullptr</b>;</td></tr>
<tr><th id="3569">3569</th><td>  <a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryInfo" title='llvm::ProfileSummaryInfo' data-ref="llvm::ProfileSummaryInfo">ProfileSummaryInfo</a> *<dfn class="local col7 decl" id="657PSI" title='PSI' data-type='llvm::ProfileSummaryInfo *' data-ref="657PSI">PSI</dfn> =</td></tr>
<tr><th id="3570">3570</th><td>      &amp;<a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#llvm::ProfileSummaryInfoWrapperPass" title='llvm::ProfileSummaryInfoWrapperPass' data-ref="llvm::ProfileSummaryInfoWrapperPass">ProfileSummaryInfoWrapperPass</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#_ZN4llvm29ProfileSummaryInfoWrapperPass6getPSIEv" title='llvm::ProfileSummaryInfoWrapperPass::getPSI' data-ref="_ZN4llvm29ProfileSummaryInfoWrapperPass6getPSIEv">getPSI</a>();</td></tr>
<tr><th id="3571">3571</th><td>  <a class="type" href="../../../include/llvm/Analysis/BlockFrequencyInfo.h.html#llvm::BlockFrequencyInfo" title='llvm::BlockFrequencyInfo' data-ref="llvm::BlockFrequencyInfo">BlockFrequencyInfo</a> *<dfn class="local col8 decl" id="658BFI" title='BFI' data-type='llvm::BlockFrequencyInfo *' data-ref="658BFI">BFI</dfn> =</td></tr>
<tr><th id="3572">3572</th><td>      (<a class="local col7 ref" href="#657PSI" title='PSI' data-ref="657PSI">PSI</a> &amp;&amp; <a class="local col7 ref" href="#657PSI" title='PSI' data-ref="657PSI">PSI</a>-&gt;<a class="ref" href="../../../include/llvm/Analysis/ProfileSummaryInfo.h.html#_ZN4llvm18ProfileSummaryInfo17hasProfileSummaryEv" title='llvm::ProfileSummaryInfo::hasProfileSummary' data-ref="_ZN4llvm18ProfileSummaryInfo17hasProfileSummaryEv">hasProfileSummary</a>()) ?</td></tr>
<tr><th id="3573">3573</th><td>      &amp;<a class="member" href="../../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass11getAnalysisEv" title='llvm::Pass::getAnalysis' data-ref="_ZNK4llvm4Pass11getAnalysisEv">getAnalysis</a>&lt;<a class="type" href="../../../include/llvm/Analysis/LazyBlockFrequencyInfo.h.html#llvm::LazyBlockFrequencyInfoPass" title='llvm::LazyBlockFrequencyInfoPass' data-ref="llvm::LazyBlockFrequencyInfoPass">LazyBlockFrequencyInfoPass</a>&gt;().<a class="ref" href="../../../include/llvm/Analysis/LazyBlockFrequencyInfo.h.html#_ZN4llvm26LazyBlockFrequencyInfoPass6getBFIEv" title='llvm::LazyBlockFrequencyInfoPass::getBFI' data-ref="_ZN4llvm26LazyBlockFrequencyInfoPass6getBFIEv">getBFI</a>() :</td></tr>
<tr><th id="3574">3574</th><td>      <b>nullptr</b>;</td></tr>
<tr><th id="3575">3575</th><td></td></tr>
<tr><th id="3576">3576</th><td>  <b>return</b> <a class="tu ref" href="#_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880" title='combineInstructionsOverFunction' data-use='c' data-ref="_ZL31combineInstructionsOverFunctionRN4llvm8FunctionERNS_19InstCombineWorklistEPNS_9AAResultsERNS_15AssumptionCacheERNS_17TargetLibraryInfoERNS_13Domi11325880">combineInstructionsOverFunction</a>(<span class='refarg'><a class="local col9 ref" href="#649F" title='F' data-ref="649F">F</a></span>, <span class='refarg'><a class="member" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass::Worklist" title='llvm::InstructionCombiningPass::Worklist' data-ref="llvm::InstructionCombiningPass::Worklist">Worklist</a></span>, <a class="local col0 ref" href="#650AA" title='AA' data-ref="650AA">AA</a>, <span class='refarg'><a class="local col1 ref" href="#651AC" title='AC' data-ref="651AC">AC</a></span>, <span class='refarg'><a class="local col2 ref" href="#652TLI" title='TLI' data-ref="652TLI">TLI</a></span>, <span class='refarg'><a class="local col3 ref" href="#653DT" title='DT' data-ref="653DT">DT</a></span>, <span class='refarg'><a class="local col4 ref" href="#654ORE" title='ORE' data-ref="654ORE">ORE</a></span>,</td></tr>
<tr><th id="3577">3577</th><td>                                         <a class="local col8 ref" href="#658BFI" title='BFI' data-ref="658BFI">BFI</a>, <a class="local col7 ref" href="#657PSI" title='PSI' data-ref="657PSI">PSI</a>, <a class="member" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass::ExpensiveCombines" title='llvm::InstructionCombiningPass::ExpensiveCombines' data-ref="llvm::InstructionCombiningPass::ExpensiveCombines">ExpensiveCombines</a>, <a class="local col6 ref" href="#656LI" title='LI' data-ref="656LI">LI</a>);</td></tr>
<tr><th id="3578">3578</th><td>}</td></tr>
<tr><th id="3579">3579</th><td></td></tr>
<tr><th id="3580">3580</th><td><em>char</em> <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass" title='llvm::InstructionCombiningPass' data-ref="llvm::InstructionCombiningPass">InstructionCombiningPass</a>::<dfn class="decl def" id="llvm::InstructionCombiningPass::ID" title='llvm::InstructionCombiningPass::ID' data-ref="llvm::InstructionCombiningPass::ID">ID</dfn> = <var>0</var>;</td></tr>
<tr><th id="3581">3581</th><td></td></tr>
<tr><th id="3582">3582</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#47" title="static void *initializeInstructionCombiningPassPassOnce(PassRegistry &amp;Registry) {" data-ref="_M/INITIALIZE_PASS_BEGIN">INITIALIZE_PASS_BEGIN</a>(InstructionCombiningPass, <q>"instcombine"</q>,</td></tr>
<tr><th id="3583">3583</th><td>                      <q>"Combine redundant instructions"</q>, <b>false</b>, <b>false</b>)</td></tr>
<tr><th id="3584">3584</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeAssumptionCacheTrackerPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(AssumptionCacheTracker)</td></tr>
<tr><th id="3585">3585</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeTargetLibraryInfoWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(TargetLibraryInfoWrapperPass)</td></tr>
<tr><th id="3586">3586</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeDominatorTreeWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(DominatorTreeWrapperPass)</td></tr>
<tr><th id="3587">3587</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeAAResultsWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(AAResultsWrapperPass)</td></tr>
<tr><th id="3588">3588</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeGlobalsAAWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(GlobalsAAWrapperPass)</td></tr>
<tr><th id="3589">3589</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeOptimizationRemarkEmitterWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(OptimizationRemarkEmitterWrapperPass)</td></tr>
<tr><th id="3590">3590</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeLazyBlockFrequencyInfoPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(LazyBlockFrequencyInfoPass)</td></tr>
<tr><th id="3591">3591</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#50" title="initializeProfileSummaryInfoWrapperPassPass(Registry);" data-ref="_M/INITIALIZE_PASS_DEPENDENCY">INITIALIZE_PASS_DEPENDENCY</a>(ProfileSummaryInfoWrapperPass)</td></tr>
<tr><th id="3592">3592</th><td><a class="macro" href="../../../include/llvm/PassSupport.h.html#54" title="PassInfo *PI = new PassInfo( &quot;Combine redundant instructions&quot;, &quot;instcombine&quot;, &amp;InstructionCombiningPass::ID, PassInfo::NormalCtor_t(callDefaultCtor&lt;InstructionCombiningPass&gt;), false, false); Registry.registerPass(*PI, true); return PI; } static llvm::once_flag InitializeInstructionCombiningPassPassFlag; void llvm::initializeInstructionCombiningPassPass(PassRegistry &amp;Registry) { llvm::call_once(InitializeInstructionCombiningPassPassFlag, initializeInstructionCombiningPassPassOnce, std::ref(Registry)); }" data-ref="_M/INITIALIZE_PASS_END">INITIALIZE_PASS_END</a>(<a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass" title='llvm::InstructionCombiningPass' data-ref="llvm::InstructionCombiningPass">InstructionCombiningPass</a>, <a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"instcombine"</q>,</td></tr>
<tr><th id="3593">3593</th><td>                    <a class="ref fake" href="../../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Combine redundant instructions"</q>, <b>false</b>, <b>false</b>)</td></tr>
<tr><th id="3594">3594</th><td></td></tr>
<tr><th id="3595">3595</th><td><i>// Initialization Routines</i></td></tr>
<tr><th id="3596">3596</th><td><em>void</em> <span class="namespace">llvm::</span><dfn class="decl def" id="_ZN4llvm21initializeInstCombineERNS_12PassRegistryE" title='llvm::initializeInstCombine' data-ref="_ZN4llvm21initializeInstCombineERNS_12PassRegistryE">initializeInstCombine</dfn>(<a class="type" href="../../../include/llvm/PassRegistry.h.html#llvm::PassRegistry" title='llvm::PassRegistry' data-ref="llvm::PassRegistry">PassRegistry</a> &amp;<dfn class="local col9 decl" id="659Registry" title='Registry' data-type='llvm::PassRegistry &amp;' data-ref="659Registry">Registry</dfn>) {</td></tr>
<tr><th id="3597">3597</th><td>  <a class="ref" href="#3592" title='llvm::initializeInstructionCombiningPassPass' data-ref="_ZN4llvm38initializeInstructionCombiningPassPassERNS_12PassRegistryE">initializeInstructionCombiningPassPass</a>(<span class='refarg'><a class="local col9 ref" href="#659Registry" title='Registry' data-ref="659Registry">Registry</a></span>);</td></tr>
<tr><th id="3598">3598</th><td>}</td></tr>
<tr><th id="3599">3599</th><td></td></tr>
<tr><th id="3600">3600</th><td><em>void</em> <dfn class="decl def" id="LLVMInitializeInstCombine" title='LLVMInitializeInstCombine' data-ref="LLVMInitializeInstCombine">LLVMInitializeInstCombine</dfn>(<a class="typedef" href="../../../include/llvm-c/Types.h.html#LLVMPassRegistryRef" title='LLVMPassRegistryRef' data-type='struct LLVMOpaquePassRegistry *' data-ref="LLVMPassRegistryRef">LLVMPassRegistryRef</a> <dfn class="local col0 decl" id="660R" title='R' data-type='LLVMPassRegistryRef' data-ref="660R">R</dfn>) {</td></tr>
<tr><th id="3601">3601</th><td>  <a class="ref" href="#3592" title='llvm::initializeInstructionCombiningPassPass' data-ref="_ZN4llvm38initializeInstructionCombiningPassPassERNS_12PassRegistryE">initializeInstructionCombiningPassPass</a>(<span class='refarg'>*<a class="ref" href="../../../include/llvm/PassRegistry.h.html#93" title='llvm::unwrap' data-ref="_ZN4llvm6unwrapEP22LLVMOpaquePassRegistry">unwrap</a>(<a class="local col0 ref" href="#660R" title='R' data-ref="660R">R</a>)</span>);</td></tr>
<tr><th id="3602">3602</th><td>}</td></tr>
<tr><th id="3603">3603</th><td></td></tr>
<tr><th id="3604">3604</th><td><a class="type" href="../../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass">FunctionPass</a> *<span class="namespace">llvm::</span><dfn class="decl def" id="_ZN4llvm30createInstructionCombiningPassEb" title='llvm::createInstructionCombiningPass' data-ref="_ZN4llvm30createInstructionCombiningPassEb">createInstructionCombiningPass</dfn>(<em>bool</em> <dfn class="local col1 decl" id="661ExpensiveCombines" title='ExpensiveCombines' data-type='bool' data-ref="661ExpensiveCombines">ExpensiveCombines</dfn>) {</td></tr>
<tr><th id="3605">3605</th><td>  <b>return</b> <b>new</b> <a class="type" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#llvm::InstructionCombiningPass" title='llvm::InstructionCombiningPass' data-ref="llvm::InstructionCombiningPass">InstructionCombiningPass</a><a class="ref" href="../../../include/llvm/Transforms/InstCombine/InstCombine.h.html#_ZN4llvm24InstructionCombiningPassC1Eb" title='llvm::InstructionCombiningPass::InstructionCombiningPass' data-ref="_ZN4llvm24InstructionCombiningPassC1Eb">(</a><a class="local col1 ref" href="#661ExpensiveCombines" title='ExpensiveCombines' data-ref="661ExpensiveCombines">ExpensiveCombines</a>);</td></tr>
<tr><th id="3606">3606</th><td>}</td></tr>
<tr><th id="3607">3607</th><td></td></tr>
<tr><th id="3608">3608</th><td><em>void</em> <dfn class="decl def" id="LLVMAddInstructionCombiningPass" title='LLVMAddInstructionCombiningPass' data-ref="LLVMAddInstructionCombiningPass">LLVMAddInstructionCombiningPass</dfn>(<a class="typedef" href="../../../include/llvm-c/Types.h.html#LLVMPassManagerRef" title='LLVMPassManagerRef' data-type='struct LLVMOpaquePassManager *' data-ref="LLVMPassManagerRef">LLVMPassManagerRef</a> <dfn class="local col2 decl" id="662PM" title='PM' data-type='LLVMPassManagerRef' data-ref="662PM">PM</dfn>) {</td></tr>
<tr><th id="3609">3609</th><td>  <a class="ref" href="../../../include/llvm/IR/LegacyPassManager.h.html#98" title='llvm::unwrap' data-ref="_ZN4llvm6unwrapEP21LLVMOpaquePassManager">unwrap</a>(<a class="local col2 ref" href="#662PM" title='PM' data-ref="662PM">PM</a>)-&gt;<a class="virtual ref" href="../../../include/llvm/IR/LegacyPassManager.h.html#_ZN4llvm6legacy15PassManagerBase3addEPNS_4PassE" title='llvm::legacy::PassManagerBase::add' data-ref="_ZN4llvm6legacy15PassManagerBase3addEPNS_4PassE">add</a>(<a class="ref" href="#_ZN4llvm30createInstructionCombiningPassEb" title='llvm::createInstructionCombiningPass' data-ref="_ZN4llvm30createInstructionCombiningPassEb">createInstructionCombiningPass</a>());</td></tr>
<tr><th id="3610">3610</th><td>}</td></tr>
<tr><th id="3611">3611</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-08</em> from project llvm revision <em>2cdaed95cde</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
