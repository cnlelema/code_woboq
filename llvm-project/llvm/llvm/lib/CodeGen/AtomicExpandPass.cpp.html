<!doctype html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0"><title>AtomicExpandPass.cpp source code [llvm/llvm/lib/CodeGen/AtomicExpandPass.cpp] - Woboq Code Browser</title>
<link rel="stylesheet" href="../../../../../data/qtcreator.css" title="QtCreator"/>
<link rel="alternate stylesheet" href="../../../../../data/kdevelop.css" title="KDevelop"/>
<script type="text/javascript" src="../../../../../data/jquery/jquery.min.js"></script>
<script type="text/javascript" src="../../../../../data/jquery/jquery-ui.min.js"></script>
<script>var file = 'llvm/llvm/lib/CodeGen/AtomicExpandPass.cpp'; var root_path = '../../../..'; var data_path = '../../../../../data';</script>
<script src='../../../../../data/codebrowser.js'></script>
</head>
<body><div id='header'><h1 id='breadcrumb'><span>Browse the source code of </span><a href='../../..'>llvm</a>/<a href='../..'>llvm</a>/<a href='..'>lib</a>/<a href='./'>CodeGen</a>/<a href='AtomicExpandPass.cpp.html'>AtomicExpandPass.cpp</a></h1></div>
<hr/><div id='content'><table class="code">
<tr><th id="1">1</th><td><i>//===- AtomicExpandPass.cpp - Expand atomic instructions ------------------===//</i></td></tr>
<tr><th id="2">2</th><td><i>//</i></td></tr>
<tr><th id="3">3</th><td><i>// Part of the LLVM Project, under the Apache License v2.0 with LLVM Exceptions.</i></td></tr>
<tr><th id="4">4</th><td><i>// See <a href="https://llvm.org/LICENSE.txt">https://llvm.org/LICENSE.txt</a> for license information.</i></td></tr>
<tr><th id="5">5</th><td><i>// SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception</i></td></tr>
<tr><th id="6">6</th><td><i>//</i></td></tr>
<tr><th id="7">7</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="8">8</th><td><i>//</i></td></tr>
<tr><th id="9">9</th><td><i>// This file contains a pass (at IR level) to replace atomic instructions with</i></td></tr>
<tr><th id="10">10</th><td><i>// __atomic_* library calls, or target specific instruction which implement the</i></td></tr>
<tr><th id="11">11</th><td><i>// same semantics in a way which better fits the target backend.  This can</i></td></tr>
<tr><th id="12">12</th><td><i>// include the use of (intrinsic-based) load-linked/store-conditional loops,</i></td></tr>
<tr><th id="13">13</th><td><i>// AtomicCmpXchg, or type coercions.</i></td></tr>
<tr><th id="14">14</th><td><i>//</i></td></tr>
<tr><th id="15">15</th><td><i>//===----------------------------------------------------------------------===//</i></td></tr>
<tr><th id="16">16</th><td></td></tr>
<tr><th id="17">17</th><td><u>#include <a href="../../include/llvm/ADT/ArrayRef.h.html">"llvm/ADT/ArrayRef.h"</a></u></td></tr>
<tr><th id="18">18</th><td><u>#include <a href="../../include/llvm/ADT/STLExtras.h.html">"llvm/ADT/STLExtras.h"</a></u></td></tr>
<tr><th id="19">19</th><td><u>#include <a href="../../include/llvm/ADT/SmallVector.h.html">"llvm/ADT/SmallVector.h"</a></u></td></tr>
<tr><th id="20">20</th><td><u>#include <a href="../../include/llvm/CodeGen/AtomicExpandUtils.h.html">"llvm/CodeGen/AtomicExpandUtils.h"</a></u></td></tr>
<tr><th id="21">21</th><td><u>#include <a href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html">"llvm/CodeGen/RuntimeLibcalls.h"</a></u></td></tr>
<tr><th id="22">22</th><td><u>#include <a href="../../include/llvm/CodeGen/TargetLowering.h.html">"llvm/CodeGen/TargetLowering.h"</a></u></td></tr>
<tr><th id="23">23</th><td><u>#include <a href="../../include/llvm/CodeGen/TargetPassConfig.h.html">"llvm/CodeGen/TargetPassConfig.h"</a></u></td></tr>
<tr><th id="24">24</th><td><u>#include <a href="../../include/llvm/CodeGen/TargetSubtargetInfo.h.html">"llvm/CodeGen/TargetSubtargetInfo.h"</a></u></td></tr>
<tr><th id="25">25</th><td><u>#include <a href="../../include/llvm/CodeGen/ValueTypes.h.html">"llvm/CodeGen/ValueTypes.h"</a></u></td></tr>
<tr><th id="26">26</th><td><u>#include <a href="../../include/llvm/IR/Attributes.h.html">"llvm/IR/Attributes.h"</a></u></td></tr>
<tr><th id="27">27</th><td><u>#include <a href="../../include/llvm/IR/BasicBlock.h.html">"llvm/IR/BasicBlock.h"</a></u></td></tr>
<tr><th id="28">28</th><td><u>#include <a href="../../include/llvm/IR/Constant.h.html">"llvm/IR/Constant.h"</a></u></td></tr>
<tr><th id="29">29</th><td><u>#include <a href="../../include/llvm/IR/Constants.h.html">"llvm/IR/Constants.h"</a></u></td></tr>
<tr><th id="30">30</th><td><u>#include <a href="../../include/llvm/IR/DataLayout.h.html">"llvm/IR/DataLayout.h"</a></u></td></tr>
<tr><th id="31">31</th><td><u>#include <a href="../../include/llvm/IR/DerivedTypes.h.html">"llvm/IR/DerivedTypes.h"</a></u></td></tr>
<tr><th id="32">32</th><td><u>#include <a href="../../include/llvm/IR/Function.h.html">"llvm/IR/Function.h"</a></u></td></tr>
<tr><th id="33">33</th><td><u>#include <a href="../../include/llvm/IR/IRBuilder.h.html">"llvm/IR/IRBuilder.h"</a></u></td></tr>
<tr><th id="34">34</th><td><u>#include <a href="../../include/llvm/IR/InstIterator.h.html">"llvm/IR/InstIterator.h"</a></u></td></tr>
<tr><th id="35">35</th><td><u>#include <a href="../../include/llvm/IR/Instruction.h.html">"llvm/IR/Instruction.h"</a></u></td></tr>
<tr><th id="36">36</th><td><u>#include <a href="../../include/llvm/IR/Instructions.h.html">"llvm/IR/Instructions.h"</a></u></td></tr>
<tr><th id="37">37</th><td><u>#include <a href="../../include/llvm/IR/Module.h.html">"llvm/IR/Module.h"</a></u></td></tr>
<tr><th id="38">38</th><td><u>#include <a href="../../include/llvm/IR/Type.h.html">"llvm/IR/Type.h"</a></u></td></tr>
<tr><th id="39">39</th><td><u>#include <a href="../../include/llvm/IR/User.h.html">"llvm/IR/User.h"</a></u></td></tr>
<tr><th id="40">40</th><td><u>#include <a href="../../include/llvm/IR/Value.h.html">"llvm/IR/Value.h"</a></u></td></tr>
<tr><th id="41">41</th><td><u>#include <a href="../../include/llvm/Pass.h.html">"llvm/Pass.h"</a></u></td></tr>
<tr><th id="42">42</th><td><u>#include <a href="../../include/llvm/Support/AtomicOrdering.h.html">"llvm/Support/AtomicOrdering.h"</a></u></td></tr>
<tr><th id="43">43</th><td><u>#include <a href="../../include/llvm/Support/Casting.h.html">"llvm/Support/Casting.h"</a></u></td></tr>
<tr><th id="44">44</th><td><u>#include <a href="../../include/llvm/Support/Debug.h.html">"llvm/Support/Debug.h"</a></u></td></tr>
<tr><th id="45">45</th><td><u>#include <a href="../../include/llvm/Support/ErrorHandling.h.html">"llvm/Support/ErrorHandling.h"</a></u></td></tr>
<tr><th id="46">46</th><td><u>#include <a href="../../include/llvm/Support/raw_ostream.h.html">"llvm/Support/raw_ostream.h"</a></u></td></tr>
<tr><th id="47">47</th><td><u>#include <a href="../../include/llvm/Target/TargetMachine.h.html">"llvm/Target/TargetMachine.h"</a></u></td></tr>
<tr><th id="48">48</th><td><u>#include <a href="../../../../include/c++/7/cassert.html">&lt;cassert&gt;</a></u></td></tr>
<tr><th id="49">49</th><td><u>#include <a href="../../../../include/c++/7/cstdint.html">&lt;cstdint&gt;</a></u></td></tr>
<tr><th id="50">50</th><td><u>#include <a href="../../../../include/c++/7/iterator.html">&lt;iterator&gt;</a></u></td></tr>
<tr><th id="51">51</th><td></td></tr>
<tr><th id="52">52</th><td><b>using</b> <b>namespace</b> <span class="namespace">llvm</span>;</td></tr>
<tr><th id="53">53</th><td></td></tr>
<tr><th id="54">54</th><td><u>#define <dfn class="macro" id="_M/DEBUG_TYPE" data-ref="_M/DEBUG_TYPE">DEBUG_TYPE</dfn> <a class="ref fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a>"atomic-expand"</u></td></tr>
<tr><th id="55">55</th><td></td></tr>
<tr><th id="56">56</th><td><b>namespace</b> {</td></tr>
<tr><th id="57">57</th><td></td></tr>
<tr><th id="58">58</th><td>  <b>class</b> <dfn class="tu type def" id="(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</dfn>: <b>public</b> <a class="type" href="../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass">FunctionPass</a> {</td></tr>
<tr><th id="59">59</th><td>    <em>const</em> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLowering" title='llvm::TargetLowering' data-ref="llvm::TargetLowering">TargetLowering</a> *<dfn class="tu decl" id="(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-type='const llvm::TargetLowering *' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="60">60</th><td></td></tr>
<tr><th id="61">61</th><td>  <b>public</b>:</td></tr>
<tr><th id="62">62</th><td>    <em>static</em> <em>char</em> <dfn class="tu decl" id="(anonymousnamespace)::AtomicExpand::ID" title='(anonymous namespace)::AtomicExpand::ID' data-type='char' data-ref="(anonymousnamespace)::AtomicExpand::ID">ID</dfn>; <i  data-doc="(anonymousnamespace)::AtomicExpand::ID">// Pass identification, replacement for typeid</i></td></tr>
<tr><th id="63">63</th><td></td></tr>
<tr><th id="64">64</th><td>    <dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpandC1Ev" title='(anonymous namespace)::AtomicExpand::AtomicExpand' data-type='void (anonymous namespace)::AtomicExpand::AtomicExpand()' data-ref="_ZN12_GLOBAL__N_112AtomicExpandC1Ev">AtomicExpand</dfn>() : <a class="type" href="../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass">FunctionPass</a><a class="ref" href="../../include/llvm/Pass.h.html#_ZN4llvm12FunctionPassC1ERc" title='llvm::FunctionPass::FunctionPass' data-ref="_ZN4llvm12FunctionPassC1ERc">(</a><a class="tu member" href="#(anonymousnamespace)::AtomicExpand::ID" title='(anonymous namespace)::AtomicExpand::ID' data-use='a' data-ref="(anonymousnamespace)::AtomicExpand::ID">ID</a>) {</td></tr>
<tr><th id="65">65</th><td>      <a class="ref" href="#128" title='llvm::initializeAtomicExpandPass' data-ref="_ZN4llvm26initializeAtomicExpandPassERNS_12PassRegistryE">initializeAtomicExpandPass</a>(<span class='refarg'>*<a class="type" href="../../include/llvm/PassRegistry.h.html#llvm::PassRegistry" title='llvm::PassRegistry' data-ref="llvm::PassRegistry">PassRegistry</a>::<a class="ref" href="../../include/llvm/PassRegistry.h.html#_ZN4llvm12PassRegistry15getPassRegistryEv" title='llvm::PassRegistry::getPassRegistry' data-ref="_ZN4llvm12PassRegistry15getPassRegistryEv">getPassRegistry</a>()</span>);</td></tr>
<tr><th id="66">66</th><td>    }</td></tr>
<tr><th id="67">67</th><td></td></tr>
<tr><th id="68">68</th><td>    <em>bool</em> <a class="virtual tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand13runOnFunctionERN4llvm8FunctionE" title='(anonymous namespace)::AtomicExpand::runOnFunction' data-type='bool (anonymous namespace)::AtomicExpand::runOnFunction(llvm::Function &amp; F)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand13runOnFunctionERN4llvm8FunctionE">runOnFunction</a>(<a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col3 decl" id="3F" title='F' data-type='llvm::Function &amp;' data-ref="3F">F</dfn>) override;</td></tr>
<tr><th id="69">69</th><td></td></tr>
<tr><th id="70">70</th><td>  <b>private</b>:</td></tr>
<tr><th id="71">71</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE" title='(anonymous namespace)::AtomicExpand::bracketInstWithFences' data-type='bool (anonymous namespace)::AtomicExpand::bracketInstWithFences(llvm::Instruction * I, llvm::AtomicOrdering Order)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE">bracketInstWithFences</a>(<a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="4I" title='I' data-type='llvm::Instruction *' data-ref="4I">I</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col5 decl" id="5Order" title='Order' data-type='llvm::AtomicOrdering' data-ref="5Order">Order</dfn>);</td></tr>
<tr><th id="72">72</th><td>    <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE" title='(anonymous namespace)::AtomicExpand::getCorrespondingIntegerType' data-type='llvm::IntegerType * (anonymous namespace)::AtomicExpand::getCorrespondingIntegerType(llvm::Type * T, const llvm::DataLayout &amp; DL)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">getCorrespondingIntegerType</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="6T" title='T' data-type='llvm::Type *' data-ref="6T">T</dfn>, <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col7 decl" id="7DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="7DL">DL</dfn>);</td></tr>
<tr><th id="73">73</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicLoadToIntegerType' data-type='llvm::LoadInst * (anonymous namespace)::AtomicExpand::convertAtomicLoadToIntegerType(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">convertAtomicLoadToIntegerType</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col8 decl" id="8LI" title='LI' data-type='llvm::LoadInst *' data-ref="8LI">LI</dfn>);</td></tr>
<tr><th id="74">74</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicLoad' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicLoad(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE">tryExpandAtomicLoad</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col9 decl" id="9LI" title='LI' data-type='llvm::LoadInst *' data-ref="9LI">LI</dfn>);</td></tr>
<tr><th id="75">75</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLL' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicLoadToLL(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE">expandAtomicLoadToLL</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col0 decl" id="10LI" title='LI' data-type='llvm::LoadInst *' data-ref="10LI">LI</dfn>);</td></tr>
<tr><th id="76">76</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicLoadToCmpXchg(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE">expandAtomicLoadToCmpXchg</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col1 decl" id="11LI" title='LI' data-type='llvm::LoadInst *' data-ref="11LI">LI</dfn>);</td></tr>
<tr><th id="77">77</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicStoreToIntegerType' data-type='llvm::StoreInst * (anonymous namespace)::AtomicExpand::convertAtomicStoreToIntegerType(llvm::StoreInst * SI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">convertAtomicStoreToIntegerType</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col2 decl" id="12SI" title='SI' data-type='llvm::StoreInst *' data-ref="12SI">SI</dfn>);</td></tr>
<tr><th id="78">78</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStore' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicStore(llvm::StoreInst * SI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE">expandAtomicStore</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col3 decl" id="13SI" title='SI' data-type='llvm::StoreInst *' data-ref="13SI">SI</dfn>);</td></tr>
<tr><th id="79">79</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicRMW' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicRMW(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE">tryExpandAtomicRMW</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col4 decl" id="14AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="14AI">AI</dfn>);</td></tr>
<tr><th id="80">80</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *</td></tr>
<tr><th id="81">81</th><td>    <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536" title='(anonymous namespace)::AtomicExpand::insertRMWLLSCLoop' data-type='llvm::Value * (anonymous namespace)::AtomicExpand::insertRMWLLSCLoop(IRBuilder&lt;&gt; &amp; Builder, llvm::Type * ResultTy, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536">insertRMWLLSCLoop</a>(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col5 decl" id="15Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="15Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="16ResultTy" title='ResultTy' data-type='llvm::Type *' data-ref="16ResultTy">ResultTy</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="17Addr" title='Addr' data-type='llvm::Value *' data-ref="17Addr">Addr</dfn>,</td></tr>
<tr><th id="82">82</th><td>                      <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col8 decl" id="18MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="18MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="83">83</th><td>                      <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col9 decl" id="19PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="19PerformOp">PerformOp</dfn>);</td></tr>
<tr><th id="84">84</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC(llvm::Instruction * I, llvm::Type * ResultTy, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581">expandAtomicOpToLLSC</a>(</td></tr>
<tr><th id="85">85</th><td>        <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col0 decl" id="20I" title='I' data-type='llvm::Instruction *' data-ref="20I">I</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col1 decl" id="21ResultTy" title='ResultTy' data-type='llvm::Type *' data-ref="21ResultTy">ResultTy</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="22Addr" title='Addr' data-type='llvm::Value *' data-ref="22Addr">Addr</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col3 decl" id="23MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="23MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="86">86</th><td>        <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col4 decl" id="24PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="24PerformOp">PerformOp</dfn>);</td></tr>
<tr><th id="87">87</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE" title='(anonymous namespace)::AtomicExpand::expandPartwordAtomicRMW' data-type='void (anonymous namespace)::AtomicExpand::expandPartwordAtomicRMW(llvm::AtomicRMWInst * I, TargetLoweringBase::AtomicExpansionKind ExpansionKind)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">expandPartwordAtomicRMW</a>(</td></tr>
<tr><th id="88">88</th><td>        <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col5 decl" id="25I" title='I' data-type='llvm::AtomicRMWInst *' data-ref="25I">I</dfn>,</td></tr>
<tr><th id="89">89</th><td>        <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a> <dfn class="local col6 decl" id="26ExpansionKind" title='ExpansionKind' data-type='TargetLoweringBase::AtomicExpansionKind' data-ref="26ExpansionKind">ExpansionKind</dfn>);</td></tr>
<tr><th id="90">90</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::widenPartwordAtomicRMW' data-type='llvm::AtomicRMWInst * (anonymous namespace)::AtomicExpand::widenPartwordAtomicRMW(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE">widenPartwordAtomicRMW</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col7 decl" id="27AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="27AI">AI</dfn>);</td></tr>
<tr><th id="91">91</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandPartwordCmpXchg' data-type='void (anonymous namespace)::AtomicExpand::expandPartwordCmpXchg(llvm::AtomicCmpXchgInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandPartwordCmpXchg</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col8 decl" id="28I" title='I' data-type='llvm::AtomicCmpXchgInst *' data-ref="28I">I</dfn>);</td></tr>
<tr><th id="92">92</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToMaskedIntrinsic' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicRMWToMaskedIntrinsic(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE">expandAtomicRMWToMaskedIntrinsic</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col9 decl" id="29AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="29AI">AI</dfn>);</td></tr>
<tr><th id="93">93</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchgToMaskedIntrinsic' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicCmpXchgToMaskedIntrinsic(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchgToMaskedIntrinsic</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col0 decl" id="30CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="30CI">CI</dfn>);</td></tr>
<tr><th id="94">94</th><td></td></tr>
<tr><th id="95">95</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::convertCmpXchgToIntegerType' data-type='llvm::AtomicCmpXchgInst * (anonymous namespace)::AtomicExpand::convertCmpXchgToIntegerType(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">convertCmpXchgToIntegerType</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col1 decl" id="31CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="31CI">CI</dfn>);</td></tr>
<tr><th id="96">96</th><td>    <em>static</em> <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739" title='(anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop' data-type='static llvm::Value * (anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop(IRBuilder&lt;&gt; &amp; Builder, llvm::Type * ResultType, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp, CreateCmpXchgInstFun CreateCmpXchg)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739">insertRMWCmpXchgLoop</a>(</td></tr>
<tr><th id="97">97</th><td>        <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col2 decl" id="32Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="32Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col3 decl" id="33ResultType" title='ResultType' data-type='llvm::Type *' data-ref="33ResultType">ResultType</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="34Addr" title='Addr' data-type='llvm::Value *' data-ref="34Addr">Addr</dfn>,</td></tr>
<tr><th id="98">98</th><td>        <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col5 decl" id="35MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="35MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="99">99</th><td>        <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col6 decl" id="36PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="36PerformOp">PerformOp</dfn>,</td></tr>
<tr><th id="100">100</th><td>        <a class="typedef" href="../../include/llvm/CodeGen/AtomicExpandUtils.h.html#llvm::CreateCmpXchgInstFun" title='llvm::CreateCmpXchgInstFun' data-type='function_ref&lt;void (IRBuilder&lt;&gt; &amp;, llvm::Value *, llvm::Value *, llvm::Value *, llvm::AtomicOrdering, llvm::Value *&amp;, llvm::Value *&amp;)&gt;' data-ref="llvm::CreateCmpXchgInstFun">CreateCmpXchgInstFun</a> <dfn class="local col7 decl" id="37CreateCmpXchg" title='CreateCmpXchg' data-type='CreateCmpXchgInstFun' data-ref="37CreateCmpXchg">CreateCmpXchg</dfn>);</td></tr>
<tr><th id="101">101</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicCmpXchg(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">tryExpandAtomicCmpXchg</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col8 decl" id="38CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="38CI">CI</dfn>);</td></tr>
<tr><th id="102">102</th><td></td></tr>
<tr><th id="103">103</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicCmpXchg(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchg</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col9 decl" id="39CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="39CI">CI</dfn>);</td></tr>
<tr><th id="104">104</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::isIdempotentRMW' data-type='bool (anonymous namespace)::AtomicExpand::isIdempotentRMW(llvm::AtomicRMWInst * RMWI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE">isIdempotentRMW</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col0 decl" id="40RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="40RMWI">RMWI</dfn>);</td></tr>
<tr><th id="105">105</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::simplifyIdempotentRMW' data-type='bool (anonymous namespace)::AtomicExpand::simplifyIdempotentRMW(llvm::AtomicRMWInst * RMWI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE">simplifyIdempotentRMW</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col1 decl" id="41RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="41RMWI">RMWI</dfn>);</td></tr>
<tr><th id="106">106</th><td></td></tr>
<tr><th id="107">107</th><td>    <em>bool</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall(llvm::Instruction * I, unsigned int Size, unsigned int Align, llvm::Value * PointerOperand, llvm::Value * ValueOperand, llvm::Value * CASExpected, llvm::AtomicOrdering Ordering, llvm::AtomicOrdering Ordering2, ArrayRef&lt;RTLIB::Libcall&gt; Libcalls)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</a>(<a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col2 decl" id="42I" title='I' data-type='llvm::Instruction *' data-ref="42I">I</dfn>, <em>unsigned</em> <dfn class="local col3 decl" id="43Size" title='Size' data-type='unsigned int' data-ref="43Size">Size</dfn>, <em>unsigned</em> <dfn class="local col4 decl" id="44Align" title='Align' data-type='unsigned int' data-ref="44Align">Align</dfn>,</td></tr>
<tr><th id="108">108</th><td>                                 <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="45PointerOperand" title='PointerOperand' data-type='llvm::Value *' data-ref="45PointerOperand">PointerOperand</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="46ValueOperand" title='ValueOperand' data-type='llvm::Value *' data-ref="46ValueOperand">ValueOperand</dfn>,</td></tr>
<tr><th id="109">109</th><td>                                 <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="47CASExpected" title='CASExpected' data-type='llvm::Value *' data-ref="47CASExpected">CASExpected</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col8 decl" id="48Ordering" title='Ordering' data-type='llvm::AtomicOrdering' data-ref="48Ordering">Ordering</dfn>,</td></tr>
<tr><th id="110">110</th><td>                                 <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col9 decl" id="49Ordering2" title='Ordering2' data-type='llvm::AtomicOrdering' data-ref="49Ordering2">Ordering2</dfn>,</td></tr>
<tr><th id="111">111</th><td>                                 <a class="type" href="../../include/llvm/ADT/ArrayRef.h.html#llvm::ArrayRef" title='llvm::ArrayRef' data-ref="llvm::ArrayRef">ArrayRef</a>&lt;<span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a>&gt; <dfn class="local col0 decl" id="50Libcalls" title='Libcalls' data-type='ArrayRef&lt;RTLIB::Libcall&gt;' data-ref="50Libcalls">Libcalls</dfn>);</td></tr>
<tr><th id="112">112</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicLoadToLibcall(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE">expandAtomicLoadToLibcall</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col1 decl" id="51LI" title='LI' data-type='llvm::LoadInst *' data-ref="51LI">LI</dfn>);</td></tr>
<tr><th id="113">113</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStoreToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicStoreToLibcall(llvm::StoreInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE">expandAtomicStoreToLibcall</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col2 decl" id="52LI" title='LI' data-type='llvm::StoreInst *' data-ref="52LI">LI</dfn>);</td></tr>
<tr><th id="114">114</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicRMWToLibcall(llvm::AtomicRMWInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE">expandAtomicRMWToLibcall</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col3 decl" id="53I" title='I' data-type='llvm::AtomicRMWInst *' data-ref="53I">I</dfn>);</td></tr>
<tr><th id="115">115</th><td>    <em>void</em> <a class="tu decl" href="#_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall(llvm::AtomicCmpXchgInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE">expandAtomicCASToLibcall</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col4 decl" id="54I" title='I' data-type='llvm::AtomicCmpXchgInst *' data-ref="54I">I</dfn>);</td></tr>
<tr><th id="116">116</th><td></td></tr>
<tr><th id="117">117</th><td>    <b>friend</b> <em>bool</em></td></tr>
<tr><th id="118">118</th><td>    <span class="namespace">llvm::</span><a class="decl" href="#_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004" title='llvm::expandAtomicRMWToCmpXchg' data-ref="_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004">expandAtomicRMWToCmpXchg</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col5 decl" id="55AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="55AI">AI</dfn>,</td></tr>
<tr><th id="119">119</th><td>                                   <a class="typedef" href="../../include/llvm/CodeGen/AtomicExpandUtils.h.html#llvm::CreateCmpXchgInstFun" title='llvm::CreateCmpXchgInstFun' data-type='function_ref&lt;void (IRBuilder&lt;&gt; &amp;, llvm::Value *, llvm::Value *, llvm::Value *, llvm::AtomicOrdering, llvm::Value *&amp;, llvm::Value *&amp;)&gt;' data-ref="llvm::CreateCmpXchgInstFun">CreateCmpXchgInstFun</a> <dfn class="local col6 decl" id="56CreateCmpXchg" title='CreateCmpXchg' data-type='CreateCmpXchgInstFun' data-ref="56CreateCmpXchg">CreateCmpXchg</dfn>);</td></tr>
<tr><th id="120">120</th><td>  };</td></tr>
<tr><th id="121">121</th><td></td></tr>
<tr><th id="122">122</th><td>} <i>// end anonymous namespace</i></td></tr>
<tr><th id="123">123</th><td></td></tr>
<tr><th id="124">124</th><td><em>char</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="(anonymousnamespace)::AtomicExpand::ID" title='(anonymous namespace)::AtomicExpand::ID' data-type='char' data-ref="(anonymousnamespace)::AtomicExpand::ID">ID</dfn> = <var>0</var>;</td></tr>
<tr><th id="125">125</th><td></td></tr>
<tr><th id="126">126</th><td><em>char</em> &amp;<span class="namespace">llvm::</span><dfn class="decl def" id="llvm::AtomicExpandID" title='llvm::AtomicExpandID' data-ref="llvm::AtomicExpandID">AtomicExpandID</dfn> = <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<a class="tu ref" href="#(anonymousnamespace)::AtomicExpand::ID" title='(anonymous namespace)::AtomicExpand::ID' data-ref="(anonymousnamespace)::AtomicExpand::ID">ID</a>;</td></tr>
<tr><th id="127">127</th><td></td></tr>
<tr><th id="128">128</th><td><a class="macro" href="../../include/llvm/PassSupport.h.html#33" title="static void *initializeAtomicExpandPassOnce(PassRegistry &amp;Registry) { PassInfo *PI = new PassInfo( &quot;Expand Atomic instructions&quot;, &quot;atomic-expand&quot;, &amp;AtomicExpand::ID, PassInfo::NormalCtor_t(callDefaultCtor&lt;AtomicExpand&gt;), false, false); Registry.registerPass(*PI, true); return PI; } static llvm::once_flag InitializeAtomicExpandPassFlag; void llvm::initializeAtomicExpandPass(PassRegistry &amp;Registry) { llvm::call_once(InitializeAtomicExpandPassFlag, initializeAtomicExpandPassOnce, std::ref(Registry)); }" data-ref="_M/INITIALIZE_PASS">INITIALIZE_PASS</a>(<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>, <a class="macro" href="#54" title="&quot;atomic-expand&quot;" data-ref="_M/DEBUG_TYPE">DEBUG_TYPE</a>, <a class="ref fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><q>"Expand Atomic instructions"</q>,</td></tr>
<tr><th id="129">129</th><td>                <b>false</b>, <b>false</b>)</td></tr>
<tr><th id="130">130</th><td></td></tr>
<tr><th id="131">131</th><td><a class="type" href="../../include/llvm/Pass.h.html#llvm::FunctionPass" title='llvm::FunctionPass' data-ref="llvm::FunctionPass">FunctionPass</a> *<span class="namespace">llvm::</span><dfn class="decl def" id="_ZN4llvm22createAtomicExpandPassEv" title='llvm::createAtomicExpandPass' data-ref="_ZN4llvm22createAtomicExpandPassEv">createAtomicExpandPass</dfn>() { <b>return</b> <b>new</b> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a><a class="tu ref" href="#_ZN12_GLOBAL__N_112AtomicExpandC1Ev" title='(anonymous namespace)::AtomicExpand::AtomicExpand' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpandC1Ev">(</a>); }</td></tr>
<tr><th id="132">132</th><td></td></tr>
<tr><th id="133">133</th><td><i  data-doc="_ZL15getAtomicOpSizePN4llvm8LoadInstE">// Helper functions to retrieve the size of atomic instructions.</i></td></tr>
<tr><th id="134">134</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL15getAtomicOpSizePN4llvm8LoadInstE" title='getAtomicOpSize' data-type='unsigned int getAtomicOpSize(llvm::LoadInst * LI)' data-ref="_ZL15getAtomicOpSizePN4llvm8LoadInstE">getAtomicOpSize</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col7 decl" id="57LI" title='LI' data-type='llvm::LoadInst *' data-ref="57LI">LI</dfn>) {</td></tr>
<tr><th id="135">135</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col8 decl" id="58DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="58DL">DL</dfn> = <a class="local col7 ref" href="#57LI" title='LI' data-ref="57LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="136">136</th><td>  <b>return</b> <a class="local col8 ref" href="#58DL" title='DL' data-ref="58DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col7 ref" href="#57LI" title='LI' data-ref="57LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="137">137</th><td>}</td></tr>
<tr><th id="138">138</th><td></td></tr>
<tr><th id="139">139</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL15getAtomicOpSizePN4llvm9StoreInstE" title='getAtomicOpSize' data-type='unsigned int getAtomicOpSize(llvm::StoreInst * SI)' data-ref="_ZL15getAtomicOpSizePN4llvm9StoreInstE">getAtomicOpSize</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col9 decl" id="59SI" title='SI' data-type='llvm::StoreInst *' data-ref="59SI">SI</dfn>) {</td></tr>
<tr><th id="140">140</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col0 decl" id="60DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="60DL">DL</dfn> = <a class="local col9 ref" href="#59SI" title='SI' data-ref="59SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="141">141</th><td>  <b>return</b> <a class="local col0 ref" href="#60DL" title='DL' data-ref="60DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col9 ref" href="#59SI" title='SI' data-ref="59SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="142">142</th><td>}</td></tr>
<tr><th id="143">143</th><td></td></tr>
<tr><th id="144">144</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE" title='getAtomicOpSize' data-type='unsigned int getAtomicOpSize(llvm::AtomicRMWInst * RMWI)' data-ref="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE">getAtomicOpSize</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col1 decl" id="61RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="61RMWI">RMWI</dfn>) {</td></tr>
<tr><th id="145">145</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col2 decl" id="62DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="62DL">DL</dfn> = <a class="local col1 ref" href="#61RMWI" title='RMWI' data-ref="61RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="146">146</th><td>  <b>return</b> <a class="local col2 ref" href="#62DL" title='DL' data-ref="62DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col1 ref" href="#61RMWI" title='RMWI' data-ref="61RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="147">147</th><td>}</td></tr>
<tr><th id="148">148</th><td></td></tr>
<tr><th id="149">149</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE" title='getAtomicOpSize' data-type='unsigned int getAtomicOpSize(llvm::AtomicCmpXchgInst * CASI)' data-ref="_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE">getAtomicOpSize</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col3 decl" id="63CASI" title='CASI' data-type='llvm::AtomicCmpXchgInst *' data-ref="63CASI">CASI</dfn>) {</td></tr>
<tr><th id="150">150</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col4 decl" id="64DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="64DL">DL</dfn> = <a class="local col3 ref" href="#63CASI" title='CASI' data-ref="63CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="151">151</th><td>  <b>return</b> <a class="local col4 ref" href="#64DL" title='DL' data-ref="64DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col3 ref" href="#63CASI" title='CASI' data-ref="63CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="152">152</th><td>}</td></tr>
<tr><th id="153">153</th><td></td></tr>
<tr><th id="154">154</th><td><i  data-doc="_ZL16getAtomicOpAlignPN4llvm8LoadInstE">// Helper functions to retrieve the alignment of atomic instructions.</i></td></tr>
<tr><th id="155">155</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL16getAtomicOpAlignPN4llvm8LoadInstE" title='getAtomicOpAlign' data-type='unsigned int getAtomicOpAlign(llvm::LoadInst * LI)' data-ref="_ZL16getAtomicOpAlignPN4llvm8LoadInstE">getAtomicOpAlign</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col5 decl" id="65LI" title='LI' data-type='llvm::LoadInst *' data-ref="65LI">LI</dfn>) {</td></tr>
<tr><th id="156">156</th><td>  <em>unsigned</em> <dfn class="local col6 decl" id="66Align" title='Align' data-type='unsigned int' data-ref="66Align">Align</dfn> = <a class="local col5 ref" href="#65LI" title='LI' data-ref="65LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst12getAlignmentEv" title='llvm::LoadInst::getAlignment' data-ref="_ZNK4llvm8LoadInst12getAlignmentEv">getAlignment</a>();</td></tr>
<tr><th id="157">157</th><td>  <i>// In the future, if this IR restriction is relaxed, we should</i></td></tr>
<tr><th id="158">158</th><td><i>  // return DataLayout::getABITypeAlignment when there's no align</i></td></tr>
<tr><th id="159">159</th><td><i>  // value.</i></td></tr>
<tr><th id="160">160</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Align != 0 &amp;&amp; &quot;An atomic LoadInst always has an explicit alignment&quot;) ? void (0) : __assert_fail (&quot;Align != 0 &amp;&amp; \&quot;An atomic LoadInst always has an explicit alignment\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 160, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col6 ref" href="#66Align" title='Align' data-ref="66Align">Align</a> != <var>0</var> &amp;&amp; <q>"An atomic LoadInst always has an explicit alignment"</q>);</td></tr>
<tr><th id="161">161</th><td>  <b>return</b> <a class="local col6 ref" href="#66Align" title='Align' data-ref="66Align">Align</a>;</td></tr>
<tr><th id="162">162</th><td>}</td></tr>
<tr><th id="163">163</th><td></td></tr>
<tr><th id="164">164</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL16getAtomicOpAlignPN4llvm9StoreInstE" title='getAtomicOpAlign' data-type='unsigned int getAtomicOpAlign(llvm::StoreInst * SI)' data-ref="_ZL16getAtomicOpAlignPN4llvm9StoreInstE">getAtomicOpAlign</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col7 decl" id="67SI" title='SI' data-type='llvm::StoreInst *' data-ref="67SI">SI</dfn>) {</td></tr>
<tr><th id="165">165</th><td>  <em>unsigned</em> <dfn class="local col8 decl" id="68Align" title='Align' data-type='unsigned int' data-ref="68Align">Align</dfn> = <a class="local col7 ref" href="#67SI" title='SI' data-ref="67SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst12getAlignmentEv" title='llvm::StoreInst::getAlignment' data-ref="_ZNK4llvm9StoreInst12getAlignmentEv">getAlignment</a>();</td></tr>
<tr><th id="166">166</th><td>  <i>// In the future, if this IR restriction is relaxed, we should</i></td></tr>
<tr><th id="167">167</th><td><i>  // return DataLayout::getABITypeAlignment when there's no align</i></td></tr>
<tr><th id="168">168</th><td><i>  // value.</i></td></tr>
<tr><th id="169">169</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Align != 0 &amp;&amp; &quot;An atomic StoreInst always has an explicit alignment&quot;) ? void (0) : __assert_fail (&quot;Align != 0 &amp;&amp; \&quot;An atomic StoreInst always has an explicit alignment\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 169, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col8 ref" href="#68Align" title='Align' data-ref="68Align">Align</a> != <var>0</var> &amp;&amp; <q>"An atomic StoreInst always has an explicit alignment"</q>);</td></tr>
<tr><th id="170">170</th><td>  <b>return</b> <a class="local col8 ref" href="#68Align" title='Align' data-ref="68Align">Align</a>;</td></tr>
<tr><th id="171">171</th><td>}</td></tr>
<tr><th id="172">172</th><td></td></tr>
<tr><th id="173">173</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL16getAtomicOpAlignPN4llvm13AtomicRMWInstE" title='getAtomicOpAlign' data-type='unsigned int getAtomicOpAlign(llvm::AtomicRMWInst * RMWI)' data-ref="_ZL16getAtomicOpAlignPN4llvm13AtomicRMWInstE">getAtomicOpAlign</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col9 decl" id="69RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="69RMWI">RMWI</dfn>) {</td></tr>
<tr><th id="174">174</th><td>  <i>// TODO(PR27168): This instruction has no alignment attribute, but unlike the</i></td></tr>
<tr><th id="175">175</th><td><i>  // default alignment for load/store, the default here is to assume</i></td></tr>
<tr><th id="176">176</th><td><i>  // it has NATURAL alignment, not DataLayout-specified alignment.</i></td></tr>
<tr><th id="177">177</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col0 decl" id="70DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="70DL">DL</dfn> = <a class="local col9 ref" href="#69RMWI" title='RMWI' data-ref="69RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="178">178</th><td>  <b>return</b> <a class="local col0 ref" href="#70DL" title='DL' data-ref="70DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col9 ref" href="#69RMWI" title='RMWI' data-ref="69RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="179">179</th><td>}</td></tr>
<tr><th id="180">180</th><td></td></tr>
<tr><th id="181">181</th><td><em>static</em> <em>unsigned</em> <dfn class="tu decl def" id="_ZL16getAtomicOpAlignPN4llvm17AtomicCmpXchgInstE" title='getAtomicOpAlign' data-type='unsigned int getAtomicOpAlign(llvm::AtomicCmpXchgInst * CASI)' data-ref="_ZL16getAtomicOpAlignPN4llvm17AtomicCmpXchgInstE">getAtomicOpAlign</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col1 decl" id="71CASI" title='CASI' data-type='llvm::AtomicCmpXchgInst *' data-ref="71CASI">CASI</dfn>) {</td></tr>
<tr><th id="182">182</th><td>  <i>// TODO(PR27168): same comment as above.</i></td></tr>
<tr><th id="183">183</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col2 decl" id="72DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="72DL">DL</dfn> = <a class="local col1 ref" href="#71CASI" title='CASI' data-ref="71CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="184">184</th><td>  <b>return</b> <a class="local col2 ref" href="#72DL" title='DL' data-ref="72DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col1 ref" href="#71CASI" title='CASI' data-ref="71CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="185">185</th><td>}</td></tr>
<tr><th id="186">186</th><td></td></tr>
<tr><th id="187">187</th><td><i>// Determine if a particular atomic operation has a supported size,</i></td></tr>
<tr><th id="188">188</th><td><i>// and is of appropriate alignment, to be passed through for target</i></td></tr>
<tr><th id="189">189</th><td><i>// lowering. (Versus turning into a __atomic libcall)</i></td></tr>
<tr><th id="190">190</th><td><b>template</b> &lt;<b>typename</b> Inst&gt;</td></tr>
<tr><th id="191">191</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_" title='atomicSizeSupported' data-type='bool atomicSizeSupported(const llvm::TargetLowering * TLI, Inst * I)' data-ref="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_">atomicSizeSupported</dfn>(<em>const</em> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLowering" title='llvm::TargetLowering' data-ref="llvm::TargetLowering">TargetLowering</a> *<dfn class="local col3 decl" id="73TLI" title='TLI' data-type='const llvm::TargetLowering *' data-ref="73TLI">TLI</dfn>, Inst *<dfn class="local col4 decl" id="74I" title='I' data-type='Inst *' data-ref="74I">I</dfn>) {</td></tr>
<tr><th id="192">192</th><td>  <em>unsigned</em> <dfn class="local col5 decl" id="75Size" title='Size' data-type='unsigned int' data-ref="75Size">Size</dfn> = getAtomicOpSize(<a class="local col4 ref" href="#74I" title='I' data-ref="74I">I</a>);</td></tr>
<tr><th id="193">193</th><td>  <em>unsigned</em> <dfn class="local col6 decl" id="76Align" title='Align' data-type='unsigned int' data-ref="76Align">Align</dfn> = getAtomicOpAlign(<a class="local col4 ref" href="#74I" title='I' data-ref="74I">I</a>);</td></tr>
<tr><th id="194">194</th><td>  <b>return</b> <a class="local col6 ref" href="#76Align" title='Align' data-ref="76Align">Align</a> &gt;= <a class="local col5 ref" href="#75Size" title='Size' data-ref="75Size">Size</a> &amp;&amp; <a class="local col5 ref" href="#75Size" title='Size' data-ref="75Size">Size</a> &lt;= <a class="local col3 ref" href="#73TLI" title='TLI' data-ref="73TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase31getMaxAtomicSizeInBitsSupportedEv" title='llvm::TargetLoweringBase::getMaxAtomicSizeInBitsSupported' data-ref="_ZNK4llvm18TargetLoweringBase31getMaxAtomicSizeInBitsSupportedEv">getMaxAtomicSizeInBitsSupported</a>() / <var>8</var>;</td></tr>
<tr><th id="195">195</th><td>}</td></tr>
<tr><th id="196">196</th><td></td></tr>
<tr><th id="197">197</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="virtual tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand13runOnFunctionERN4llvm8FunctionE" title='(anonymous namespace)::AtomicExpand::runOnFunction' data-type='bool (anonymous namespace)::AtomicExpand::runOnFunction(llvm::Function &amp; F)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand13runOnFunctionERN4llvm8FunctionE">runOnFunction</dfn>(<a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> &amp;<dfn class="local col7 decl" id="77F" title='F' data-type='llvm::Function &amp;' data-ref="77F">F</dfn>) {</td></tr>
<tr><th id="198">198</th><td>  <em>auto</em> *<dfn class="local col8 decl" id="78TPC" title='TPC' data-type='llvm::TargetPassConfig *' data-ref="78TPC">TPC</dfn> = <a class="member" href="../../include/llvm/PassAnalysisSupport.h.html#_ZNK4llvm4Pass22getAnalysisIfAvailableEv" title='llvm::Pass::getAnalysisIfAvailable' data-ref="_ZNK4llvm4Pass22getAnalysisIfAvailableEv">getAnalysisIfAvailable</a>&lt;<a class="type" href="../../include/llvm/CodeGen/TargetPassConfig.h.html#llvm::TargetPassConfig" title='llvm::TargetPassConfig' data-ref="llvm::TargetPassConfig">TargetPassConfig</a>&gt;();</td></tr>
<tr><th id="199">199</th><td>  <b>if</b> (!<a class="local col8 ref" href="#78TPC" title='TPC' data-ref="78TPC">TPC</a>)</td></tr>
<tr><th id="200">200</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="201">201</th><td></td></tr>
<tr><th id="202">202</th><td>  <em>auto</em> &amp;<dfn class="local col9 decl" id="79TM" title='TM' data-type='llvm::TargetMachine &amp;' data-ref="79TM">TM</dfn> = <a class="local col8 ref" href="#78TPC" title='TPC' data-ref="78TPC">TPC</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetPassConfig.h.html#_ZNK4llvm16TargetPassConfig5getTMEv" title='llvm::TargetPassConfig::getTM' data-ref="_ZNK4llvm16TargetPassConfig5getTMEv">getTM</a>&lt;<a class="type" href="../../include/llvm/Target/TargetMachine.h.html#llvm::TargetMachine" title='llvm::TargetMachine' data-ref="llvm::TargetMachine">TargetMachine</a>&gt;();</td></tr>
<tr><th id="203">203</th><td>  <b>if</b> (!<a class="local col9 ref" href="#79TM" title='TM' data-ref="79TM">TM</a>.<a class="virtual ref" href="../../include/llvm/Target/TargetMachine.h.html#_ZNK4llvm13TargetMachine16getSubtargetImplERKNS_8FunctionE" title='llvm::TargetMachine::getSubtargetImpl' data-ref="_ZNK4llvm13TargetMachine16getSubtargetImplERKNS_8FunctionE">getSubtargetImpl</a>(<a class="local col7 ref" href="#77F" title='F' data-ref="77F">F</a>)-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetSubtargetInfo.h.html#_ZNK4llvm19TargetSubtargetInfo18enableAtomicExpandEv" title='llvm::TargetSubtargetInfo::enableAtomicExpand' data-ref="_ZNK4llvm19TargetSubtargetInfo18enableAtomicExpandEv">enableAtomicExpand</a>())</td></tr>
<tr><th id="204">204</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="205">205</th><td>  <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='w' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a> = <a class="local col9 ref" href="#79TM" title='TM' data-ref="79TM">TM</a>.<a class="virtual ref" href="../../include/llvm/Target/TargetMachine.h.html#_ZNK4llvm13TargetMachine16getSubtargetImplERKNS_8FunctionE" title='llvm::TargetMachine::getSubtargetImpl' data-ref="_ZNK4llvm13TargetMachine16getSubtargetImplERKNS_8FunctionE">getSubtargetImpl</a>(<a class="local col7 ref" href="#77F" title='F' data-ref="77F">F</a>)-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetSubtargetInfo.h.html#_ZNK4llvm19TargetSubtargetInfo17getTargetLoweringEv" title='llvm::TargetSubtargetInfo::getTargetLowering' data-ref="_ZNK4llvm19TargetSubtargetInfo17getTargetLoweringEv">getTargetLowering</a>();</td></tr>
<tr><th id="206">206</th><td></td></tr>
<tr><th id="207">207</th><td>  <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *, <var>1</var>&gt; <a class="ref fake" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col0 decl" id="80AtomicInsts" title='AtomicInsts' data-type='SmallVector&lt;llvm::Instruction *, 1&gt;' data-ref="80AtomicInsts">AtomicInsts</dfn>;</td></tr>
<tr><th id="208">208</th><td></td></tr>
<tr><th id="209">209</th><td>  <i>// Changing control-flow while iterating through it is a bad idea, so gather a</i></td></tr>
<tr><th id="210">210</th><td><i>  // list of all atomic instructions before we start.</i></td></tr>
<tr><th id="211">211</th><td>  <b>for</b> (<a class="typedef" href="../../include/llvm/IR/InstIterator.h.html#llvm::inst_iterator" title='llvm::inst_iterator' data-type='InstIterator&lt;SymbolTableList&lt;llvm::BasicBlock&gt;, Function::iterator, BasicBlock::iterator, llvm::Instruction&gt;' data-ref="llvm::inst_iterator">inst_iterator</a> <dfn class="local col1 decl" id="81II" title='II' data-type='inst_iterator' data-ref="81II">II</dfn> = <a class="ref" href="../../include/llvm/IR/InstIterator.h.html#_ZN4llvm10inst_beginERNS_8FunctionE" title='llvm::inst_begin' data-ref="_ZN4llvm10inst_beginERNS_8FunctionE">inst_begin</a>(<span class='refarg'><a class="local col7 ref" href="#77F" title='F' data-ref="77F">F</a></span>), <dfn class="local col2 decl" id="82E" title='E' data-type='inst_iterator' data-ref="82E">E</dfn> = <a class="ref" href="../../include/llvm/IR/InstIterator.h.html#_ZN4llvm8inst_endERNS_8FunctionE" title='llvm::inst_end' data-ref="_ZN4llvm8inst_endERNS_8FunctionE">inst_end</a>(<span class='refarg'><a class="local col7 ref" href="#77F" title='F' data-ref="77F">F</a></span>); <a class="local col1 ref" href="#81II" title='II' data-ref="81II">II</a> <a class="ref" href="../../include/llvm/IR/InstIterator.h.html#_ZNK4llvm12InstIteratorneERKNS_12InstIteratorIT_T0_T1_T2_EE" title='llvm::InstIterator::operator!=' data-ref="_ZNK4llvm12InstIteratorneERKNS_12InstIteratorIT_T0_T1_T2_EE">!=</a> <a class="local col2 ref" href="#82E" title='E' data-ref="82E">E</a>; <a class="ref" href="../../include/llvm/IR/InstIterator.h.html#_ZN4llvm12InstIteratorppEv" title='llvm::InstIterator::operator++' data-ref="_ZN4llvm12InstIteratorppEv">++</a><a class="local col1 ref" href="#81II" title='II' data-ref="81II">II</a>) {</td></tr>
<tr><th id="212">212</th><td>    <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col3 decl" id="83I" title='I' data-type='llvm::Instruction *' data-ref="83I">I</dfn> = &amp;<a class="ref" href="../../include/llvm/IR/InstIterator.h.html#_ZNK4llvm12InstIteratordeEv" title='llvm::InstIterator::operator*' data-ref="_ZNK4llvm12InstIteratordeEv">*</a><a class="local col1 ref" href="#81II" title='II' data-ref="81II">II</a>;</td></tr>
<tr><th id="213">213</th><td>    <b>if</b> (<a class="local col3 ref" href="#83I" title='I' data-ref="83I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZNK4llvm11Instruction8isAtomicEv" title='llvm::Instruction::isAtomic' data-ref="_ZNK4llvm11Instruction8isAtomicEv">isAtomic</a>() &amp;&amp; !<a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm3isaERKT0_" title='llvm::isa' data-ref="_ZN4llvm3isaERKT0_">isa</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::FenceInst" title='llvm::FenceInst' data-ref="llvm::FenceInst">FenceInst</a>&gt;(<a class="local col3 ref" href="#83I" title='I' data-ref="83I">I</a>))</td></tr>
<tr><th id="214">214</th><td>      <a class="local col0 ref" href="#80AtomicInsts" title='AtomicInsts' data-ref="80AtomicInsts">AtomicInsts</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col3 ref" href="#83I" title='I' data-ref="83I">I</a>);</td></tr>
<tr><th id="215">215</th><td>  }</td></tr>
<tr><th id="216">216</th><td></td></tr>
<tr><th id="217">217</th><td>  <em>bool</em> <dfn class="local col4 decl" id="84MadeChange" title='MadeChange' data-type='bool' data-ref="84MadeChange">MadeChange</dfn> = <b>false</b>;</td></tr>
<tr><th id="218">218</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="85I" title='I' data-type='llvm::Instruction *' data-ref="85I">I</dfn> : <a class="local col0 ref" href="#80AtomicInsts" title='AtomicInsts' data-ref="80AtomicInsts">AtomicInsts</a>) {</td></tr>
<tr><th id="219">219</th><td>    <em>auto</em> <dfn class="local col6 decl" id="86LI" title='LI' data-type='llvm::LoadInst *' data-ref="86LI">LI</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a>&gt;(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>);</td></tr>
<tr><th id="220">220</th><td>    <em>auto</em> <dfn class="local col7 decl" id="87SI" title='SI' data-type='llvm::StoreInst *' data-ref="87SI">SI</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a>&gt;(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>);</td></tr>
<tr><th id="221">221</th><td>    <em>auto</em> <dfn class="local col8 decl" id="88RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="88RMWI">RMWI</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>&gt;(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>);</td></tr>
<tr><th id="222">222</th><td>    <em>auto</em> <dfn class="local col9 decl" id="89CASI" title='CASI' data-type='llvm::AtomicCmpXchgInst *' data-ref="89CASI">CASI</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a>&gt;(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>);</td></tr>
<tr><th id="223">223</th><td>    <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; ((LI || SI || RMWI || CASI) &amp;&amp; &quot;Unknown atomic instruction&quot;) ? void (0) : __assert_fail (&quot;(LI || SI || RMWI || CASI) &amp;&amp; \&quot;Unknown atomic instruction\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 223, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>((<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a> || <a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a> || <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a> || <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>) &amp;&amp; <q>"Unknown atomic instruction"</q>);</td></tr>
<tr><th id="224">224</th><td></td></tr>
<tr><th id="225">225</th><td>    <i>// If the Size/Alignment is not supported, replace with a libcall.</i></td></tr>
<tr><th id="226">226</th><td>    <b>if</b> (<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>) {</td></tr>
<tr><th id="227">227</th><td>      <b>if</b> (!<a class="tu ref" href="#_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_" title='atomicSizeSupported' data-use='c' data-ref="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_">atomicSizeSupported</a>(<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>, <a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>)) {</td></tr>
<tr><th id="228">228</th><td>        <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE">expandAtomicLoadToLibcall</a>(<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>);</td></tr>
<tr><th id="229">229</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="230">230</th><td>        <b>continue</b>;</td></tr>
<tr><th id="231">231</th><td>      }</td></tr>
<tr><th id="232">232</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>) {</td></tr>
<tr><th id="233">233</th><td>      <b>if</b> (!<a class="tu ref" href="#_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_" title='atomicSizeSupported' data-use='c' data-ref="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_">atomicSizeSupported</a>(<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>, <a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>)) {</td></tr>
<tr><th id="234">234</th><td>        <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStoreToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE">expandAtomicStoreToLibcall</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>);</td></tr>
<tr><th id="235">235</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="236">236</th><td>        <b>continue</b>;</td></tr>
<tr><th id="237">237</th><td>      }</td></tr>
<tr><th id="238">238</th><td>    } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>) {</td></tr>
<tr><th id="239">239</th><td>      <b>if</b> (!<a class="tu ref" href="#_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_" title='atomicSizeSupported' data-use='c' data-ref="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_">atomicSizeSupported</a>(<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>, <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>)) {</td></tr>
<tr><th id="240">240</th><td>        <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE">expandAtomicRMWToLibcall</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>);</td></tr>
<tr><th id="241">241</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="242">242</th><td>        <b>continue</b>;</td></tr>
<tr><th id="243">243</th><td>      }</td></tr>
<tr><th id="244">244</th><td>    } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>) {</td></tr>
<tr><th id="245">245</th><td>      <b>if</b> (!<a class="tu ref" href="#_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_" title='atomicSizeSupported' data-use='c' data-ref="_ZL19atomicSizeSupportedPKN4llvm14TargetLoweringEPT_">atomicSizeSupported</a>(<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>, <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>)) {</td></tr>
<tr><th id="246">246</th><td>        <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE">expandAtomicCASToLibcall</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>);</td></tr>
<tr><th id="247">247</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="248">248</th><td>        <b>continue</b>;</td></tr>
<tr><th id="249">249</th><td>      }</td></tr>
<tr><th id="250">250</th><td>    }</td></tr>
<tr><th id="251">251</th><td></td></tr>
<tr><th id="252">252</th><td>    <b>if</b> (<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase27shouldInsertFencesForAtomicEPKNS_11InstructionE" title='llvm::TargetLoweringBase::shouldInsertFencesForAtomic' data-ref="_ZNK4llvm18TargetLoweringBase27shouldInsertFencesForAtomicEPKNS_11InstructionE">shouldInsertFencesForAtomic</a>(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>)) {</td></tr>
<tr><th id="253">253</th><td>      <em>auto</em> <dfn class="local col0 decl" id="90FenceOrdering" title='FenceOrdering' data-type='llvm::AtomicOrdering' data-ref="90FenceOrdering">FenceOrdering</dfn> = <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>;</td></tr>
<tr><th id="254">254</th><td>      <b>if</b> (<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a> &amp;&amp; <a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE" title='llvm::isAcquireOrStronger' data-ref="_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE">isAcquireOrStronger</a>(<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>())) {</td></tr>
<tr><th id="255">255</th><td>        <a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a> = <a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>();</td></tr>
<tr><th id="256">256</th><td>        <a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst11setOrderingENS_14AtomicOrderingE" title='llvm::LoadInst::setOrdering' data-ref="_ZN4llvm8LoadInst11setOrderingENS_14AtomicOrderingE">setOrdering</a>(<a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>);</td></tr>
<tr><th id="257">257</th><td>      } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a> &amp;&amp; <a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE" title='llvm::isReleaseOrStronger' data-ref="_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE">isReleaseOrStronger</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst11getOrderingEv" title='llvm::StoreInst::getOrdering' data-ref="_ZNK4llvm9StoreInst11getOrderingEv">getOrdering</a>())) {</td></tr>
<tr><th id="258">258</th><td>        <a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a> = <a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst11getOrderingEv" title='llvm::StoreInst::getOrdering' data-ref="_ZNK4llvm9StoreInst11getOrderingEv">getOrdering</a>();</td></tr>
<tr><th id="259">259</th><td>        <a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst11setOrderingENS_14AtomicOrderingE" title='llvm::StoreInst::setOrdering' data-ref="_ZN4llvm9StoreInst11setOrderingENS_14AtomicOrderingE">setOrdering</a>(<a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>);</td></tr>
<tr><th id="260">260</th><td>      } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a> &amp;&amp; (<a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE" title='llvm::isReleaseOrStronger' data-ref="_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE">isReleaseOrStronger</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>()) ||</td></tr>
<tr><th id="261">261</th><td>                          <a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE" title='llvm::isAcquireOrStronger' data-ref="_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE">isAcquireOrStronger</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>()))) {</td></tr>
<tr><th id="262">262</th><td>        <a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a> = <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>();</td></tr>
<tr><th id="263">263</th><td>        <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst11setOrderingENS_14AtomicOrderingE" title='llvm::AtomicRMWInst::setOrdering' data-ref="_ZN4llvm13AtomicRMWInst11setOrderingENS_14AtomicOrderingE">setOrdering</a>(<a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>);</td></tr>
<tr><th id="264">264</th><td>      } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a> &amp;&amp;</td></tr>
<tr><th id="265">265</th><td>                 <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase29shouldExpandAtomicCmpXchgInIREPNS_17AtomicCmpXchgInstE" title='llvm::TargetLoweringBase::shouldExpandAtomicCmpXchgInIR' data-ref="_ZNK4llvm18TargetLoweringBase29shouldExpandAtomicCmpXchgInIREPNS_17AtomicCmpXchgInstE">shouldExpandAtomicCmpXchgInIR</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>) ==</td></tr>
<tr><th id="266">266</th><td>                     <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::None" title='llvm::TargetLoweringBase::AtomicExpansionKind::None' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::None">None</a> &amp;&amp;</td></tr>
<tr><th id="267">267</th><td>                 (<a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE" title='llvm::isReleaseOrStronger' data-ref="_ZN4llvm19isReleaseOrStrongerENS_14AtomicOrderingE">isReleaseOrStronger</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>()) ||</td></tr>
<tr><th id="268">268</th><td>                  <a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE" title='llvm::isAcquireOrStronger' data-ref="_ZN4llvm19isAcquireOrStrongerENS_14AtomicOrderingE">isAcquireOrStronger</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>()))) {</td></tr>
<tr><th id="269">269</th><td>        <i>// If a compare and swap is lowered to LL/SC, we can do smarter fence</i></td></tr>
<tr><th id="270">270</th><td><i>        // insertion, with a stronger one on the success path than on the</i></td></tr>
<tr><th id="271">271</th><td><i>        // failure path. As a result, fence insertion is directly done by</i></td></tr>
<tr><th id="272">272</th><td><i>        // expandAtomicCmpXchg in that case.</i></td></tr>
<tr><th id="273">273</th><td>        <a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a> = <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>();</td></tr>
<tr><th id="274">274</th><td>        <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst18setSuccessOrderingENS_14AtomicOrderingE" title='llvm::AtomicCmpXchgInst::setSuccessOrdering' data-ref="_ZN4llvm17AtomicCmpXchgInst18setSuccessOrderingENS_14AtomicOrderingE">setSuccessOrdering</a>(<a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>);</td></tr>
<tr><th id="275">275</th><td>        <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst18setFailureOrderingENS_14AtomicOrderingE" title='llvm::AtomicCmpXchgInst::setFailureOrdering' data-ref="_ZN4llvm17AtomicCmpXchgInst18setFailureOrderingENS_14AtomicOrderingE">setFailureOrdering</a>(<a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>);</td></tr>
<tr><th id="276">276</th><td>      }</td></tr>
<tr><th id="277">277</th><td></td></tr>
<tr><th id="278">278</th><td>      <b>if</b> (<a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a> != <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>) {</td></tr>
<tr><th id="279">279</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> |= <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE" title='(anonymous namespace)::AtomicExpand::bracketInstWithFences' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE">bracketInstWithFences</a>(<a class="local col5 ref" href="#85I" title='I' data-ref="85I">I</a>, <a class="local col0 ref" href="#90FenceOrdering" title='FenceOrdering' data-ref="90FenceOrdering">FenceOrdering</a>);</td></tr>
<tr><th id="280">280</th><td>      }</td></tr>
<tr><th id="281">281</th><td>    }</td></tr>
<tr><th id="282">282</th><td></td></tr>
<tr><th id="283">283</th><td>    <b>if</b> (<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>) {</td></tr>
<tr><th id="284">284</th><td>      <b>if</b> (<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type17isFloatingPointTyEv" title='llvm::Type::isFloatingPointTy' data-ref="_ZNK4llvm4Type17isFloatingPointTyEv">isFloatingPointTy</a>()) {</td></tr>
<tr><th id="285">285</th><td>        <i>// TODO: add a TLI hook to control this so that each target can</i></td></tr>
<tr><th id="286">286</th><td><i>        // convert to lowering the original type one at a time.</i></td></tr>
<tr><th id="287">287</th><td>        <a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicLoadToIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">convertAtomicLoadToIntegerType</a>(<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>);</td></tr>
<tr><th id="288">288</th><td>        <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (LI-&gt;getType()-&gt;isIntegerTy() &amp;&amp; &quot;invariant broken&quot;) ? void (0) : __assert_fail (&quot;LI-&gt;getType()-&gt;isIntegerTy() &amp;&amp; \&quot;invariant broken\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 288, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>() &amp;&amp; <q>"invariant broken"</q>);</td></tr>
<tr><th id="289">289</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="290">290</th><td>      }</td></tr>
<tr><th id="291">291</th><td></td></tr>
<tr><th id="292">292</th><td>      <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> |= <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicLoad' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE">tryExpandAtomicLoad</a>(<a class="local col6 ref" href="#86LI" title='LI' data-ref="86LI">LI</a>);</td></tr>
<tr><th id="293">293</th><td>    } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>) {</td></tr>
<tr><th id="294">294</th><td>      <b>if</b> (<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type17isFloatingPointTyEv" title='llvm::Type::isFloatingPointTy' data-ref="_ZNK4llvm4Type17isFloatingPointTyEv">isFloatingPointTy</a>()) {</td></tr>
<tr><th id="295">295</th><td>        <i>// TODO: add a TLI hook to control this so that each target can</i></td></tr>
<tr><th id="296">296</th><td><i>        // convert to lowering the original type one at a time.</i></td></tr>
<tr><th id="297">297</th><td>        <a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicStoreToIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">convertAtomicStoreToIntegerType</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>);</td></tr>
<tr><th id="298">298</th><td>        <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (SI-&gt;getValueOperand()-&gt;getType()-&gt;isIntegerTy() &amp;&amp; &quot;invariant broken&quot;) ? void (0) : __assert_fail (&quot;SI-&gt;getValueOperand()-&gt;getType()-&gt;isIntegerTy() &amp;&amp; \&quot;invariant broken\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 299, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>() &amp;&amp;</td></tr>
<tr><th id="299">299</th><td>               <q>"invariant broken"</q>);</td></tr>
<tr><th id="300">300</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="301">301</th><td>      }</td></tr>
<tr><th id="302">302</th><td></td></tr>
<tr><th id="303">303</th><td>      <b>if</b> (<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase27shouldExpandAtomicStoreInIREPNS_9StoreInstE" title='llvm::TargetLoweringBase::shouldExpandAtomicStoreInIR' data-ref="_ZNK4llvm18TargetLoweringBase27shouldExpandAtomicStoreInIREPNS_9StoreInstE">shouldExpandAtomicStoreInIR</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>))</td></tr>
<tr><th id="304">304</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> |= <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStore' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE">expandAtomicStore</a>(<a class="local col7 ref" href="#87SI" title='SI' data-ref="87SI">SI</a>);</td></tr>
<tr><th id="305">305</th><td>    } <b>else</b> <b>if</b> (<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>) {</td></tr>
<tr><th id="306">306</th><td>      <i>// There are two different ways of expanding RMW instructions:</i></td></tr>
<tr><th id="307">307</th><td><i>      // - into a load if it is idempotent</i></td></tr>
<tr><th id="308">308</th><td><i>      // - into a Cmpxchg/LL-SC loop otherwise</i></td></tr>
<tr><th id="309">309</th><td><i>      // we try them in that order.</i></td></tr>
<tr><th id="310">310</th><td></td></tr>
<tr><th id="311">311</th><td>      <b>if</b> (<a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::isIdempotentRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE">isIdempotentRMW</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>) &amp;&amp; <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::simplifyIdempotentRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE">simplifyIdempotentRMW</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>)) {</td></tr>
<tr><th id="312">312</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="313">313</th><td>      } <b>else</b> {</td></tr>
<tr><th id="314">314</th><td>        <em>unsigned</em> <dfn class="local col1 decl" id="91MinCASSize" title='MinCASSize' data-type='unsigned int' data-ref="91MinCASSize">MinCASSize</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>;</td></tr>
<tr><th id="315">315</th><td>        <em>unsigned</em> <dfn class="local col2 decl" id="92ValueSize" title='ValueSize' data-type='unsigned int' data-ref="92ValueSize">ValueSize</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE">getAtomicOpSize</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>);</td></tr>
<tr><th id="316">316</th><td>        <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col3 decl" id="93Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="93Op">Op</dfn> = <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>();</td></tr>
<tr><th id="317">317</th><td>        <b>if</b> (<a class="local col2 ref" href="#92ValueSize" title='ValueSize' data-ref="92ValueSize">ValueSize</a> &lt; <a class="local col1 ref" href="#91MinCASSize" title='MinCASSize' data-ref="91MinCASSize">MinCASSize</a> &amp;&amp;</td></tr>
<tr><th id="318">318</th><td>            (<a class="local col3 ref" href="#93Op" title='Op' data-ref="93Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a> || <a class="local col3 ref" href="#93Op" title='Op' data-ref="93Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a> ||</td></tr>
<tr><th id="319">319</th><td>             <a class="local col3 ref" href="#93Op" title='Op' data-ref="93Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>)) {</td></tr>
<tr><th id="320">320</th><td>          <a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::widenPartwordAtomicRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE">widenPartwordAtomicRMW</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>);</td></tr>
<tr><th id="321">321</th><td>          <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="322">322</th><td>        }</td></tr>
<tr><th id="323">323</th><td></td></tr>
<tr><th id="324">324</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> |= <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE">tryExpandAtomicRMW</a>(<a class="local col8 ref" href="#88RMWI" title='RMWI' data-ref="88RMWI">RMWI</a>);</td></tr>
<tr><th id="325">325</th><td>      }</td></tr>
<tr><th id="326">326</th><td>    } <b>else</b> <b>if</b> (<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>) {</td></tr>
<tr><th id="327">327</th><td>      <i>// TODO: when we're ready to make the change at the IR level, we can</i></td></tr>
<tr><th id="328">328</th><td><i>      // extend convertCmpXchgToInteger for floating point too.</i></td></tr>
<tr><th id="329">329</th><td>      <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (!CASI-&gt;getCompareOperand()-&gt;getType()-&gt;isFloatingPointTy() &amp;&amp; &quot;unimplemented - floating point not legal at IR level&quot;) ? void (0) : __assert_fail (&quot;!CASI-&gt;getCompareOperand()-&gt;getType()-&gt;isFloatingPointTy() &amp;&amp; \&quot;unimplemented - floating point not legal at IR level\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 330, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(!<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type17isFloatingPointTyEv" title='llvm::Type::isFloatingPointTy' data-ref="_ZNK4llvm4Type17isFloatingPointTyEv">isFloatingPointTy</a>() &amp;&amp;</td></tr>
<tr><th id="330">330</th><td>             <q>"unimplemented - floating point not legal at IR level"</q>);</td></tr>
<tr><th id="331">331</th><td>      <b>if</b> (<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isPointerTyEv" title='llvm::Type::isPointerTy' data-ref="_ZNK4llvm4Type11isPointerTyEv">isPointerTy</a>() &amp;&amp;</td></tr>
<tr><th id="332">332</th><td>          !<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase26canLowerPointerTypeCmpXchgERKNS_10DataLayoutEPNS_17AtomicCmpXchgInstE" title='llvm::TargetLoweringBase::canLowerPointerTypeCmpXchg' data-ref="_ZNK4llvm18TargetLoweringBase26canLowerPointerTypeCmpXchgERKNS_10DataLayoutEPNS_17AtomicCmpXchgInstE">canLowerPointerTypeCmpXchg</a>(<a class="local col7 ref" href="#77F" title='F' data-ref="77F">F</a>.<a class="ref" href="../../include/llvm/IR/GlobalValue.h.html#_ZN4llvm11GlobalValue9getParentEv" title='llvm::GlobalValue::getParent' data-ref="_ZN4llvm11GlobalValue9getParentEv">getParent</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>(),</td></tr>
<tr><th id="333">333</th><td>                                           <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>)) {</td></tr>
<tr><th id="334">334</th><td>        <a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::convertCmpXchgToIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">convertCmpXchgToIntegerType</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>);</td></tr>
<tr><th id="335">335</th><td>        <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (CASI-&gt;getCompareOperand()-&gt;getType()-&gt;isIntegerTy() &amp;&amp; &quot;invariant broken&quot;) ? void (0) : __assert_fail (&quot;CASI-&gt;getCompareOperand()-&gt;getType()-&gt;isIntegerTy() &amp;&amp; \&quot;invariant broken\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 336, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type11isIntegerTyEv" title='llvm::Type::isIntegerTy' data-ref="_ZNK4llvm4Type11isIntegerTyEv">isIntegerTy</a>() &amp;&amp;</td></tr>
<tr><th id="336">336</th><td>               <q>"invariant broken"</q>);</td></tr>
<tr><th id="337">337</th><td>        <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> = <b>true</b>;</td></tr>
<tr><th id="338">338</th><td>      }</td></tr>
<tr><th id="339">339</th><td></td></tr>
<tr><th id="340">340</th><td>      <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a> |= <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicCmpXchg' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">tryExpandAtomicCmpXchg</a>(<a class="local col9 ref" href="#89CASI" title='CASI' data-ref="89CASI">CASI</a>);</td></tr>
<tr><th id="341">341</th><td>    }</td></tr>
<tr><th id="342">342</th><td>  }</td></tr>
<tr><th id="343">343</th><td>  <b>return</b> <a class="local col4 ref" href="#84MadeChange" title='MadeChange' data-ref="84MadeChange">MadeChange</a>;</td></tr>
<tr><th id="344">344</th><td>}</td></tr>
<tr><th id="345">345</th><td></td></tr>
<tr><th id="346">346</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE" title='(anonymous namespace)::AtomicExpand::bracketInstWithFences' data-type='bool (anonymous namespace)::AtomicExpand::bracketInstWithFences(llvm::Instruction * I, llvm::AtomicOrdering Order)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21bracketInstWithFencesEPN4llvm11InstructionENS1_14AtomicOrderingE">bracketInstWithFences</dfn>(<a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="94I" title='I' data-type='llvm::Instruction *' data-ref="94I">I</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col5 decl" id="95Order" title='Order' data-type='llvm::AtomicOrdering' data-ref="95Order">Order</dfn>) {</td></tr>
<tr><th id="347">347</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col6 decl" id="96Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="96Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col4 ref" href="#94I" title='I' data-ref="94I">I</a>);</td></tr>
<tr><th id="348">348</th><td></td></tr>
<tr><th id="349">349</th><td>  <em>auto</em> <dfn class="local col7 decl" id="97LeadingFence" title='LeadingFence' data-type='llvm::Instruction *' data-ref="97LeadingFence">LeadingFence</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLeadingFence' data-ref="_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitLeadingFence</a>(<span class='refarg'><a class="local col6 ref" href="#96Builder" title='Builder' data-ref="96Builder">Builder</a></span>, <a class="local col4 ref" href="#94I" title='I' data-ref="94I">I</a>, <a class="local col5 ref" href="#95Order" title='Order' data-ref="95Order">Order</a>);</td></tr>
<tr><th id="350">350</th><td></td></tr>
<tr><th id="351">351</th><td>  <em>auto</em> <dfn class="local col8 decl" id="98TrailingFence" title='TrailingFence' data-type='llvm::Instruction *' data-ref="98TrailingFence">TrailingFence</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitTrailingFence' data-ref="_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitTrailingFence</a>(<span class='refarg'><a class="local col6 ref" href="#96Builder" title='Builder' data-ref="96Builder">Builder</a></span>, <a class="local col4 ref" href="#94I" title='I' data-ref="94I">I</a>, <a class="local col5 ref" href="#95Order" title='Order' data-ref="95Order">Order</a>);</td></tr>
<tr><th id="352">352</th><td>  <i>// We have a guard here because not every atomic operation generates a</i></td></tr>
<tr><th id="353">353</th><td><i>  // trailing fence.</i></td></tr>
<tr><th id="354">354</th><td>  <b>if</b> (<a class="local col8 ref" href="#98TrailingFence" title='TrailingFence' data-ref="98TrailingFence">TrailingFence</a>)</td></tr>
<tr><th id="355">355</th><td>    <a class="local col8 ref" href="#98TrailingFence" title='TrailingFence' data-ref="98TrailingFence">TrailingFence</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9moveAfterEPS0_" title='llvm::Instruction::moveAfter' data-ref="_ZN4llvm11Instruction9moveAfterEPS0_">moveAfter</a>(<a class="local col4 ref" href="#94I" title='I' data-ref="94I">I</a>);</td></tr>
<tr><th id="356">356</th><td></td></tr>
<tr><th id="357">357</th><td>  <b>return</b> (<a class="local col7 ref" href="#97LeadingFence" title='LeadingFence' data-ref="97LeadingFence">LeadingFence</a> || <a class="local col8 ref" href="#98TrailingFence" title='TrailingFence' data-ref="98TrailingFence">TrailingFence</a>);</td></tr>
<tr><th id="358">358</th><td>}</td></tr>
<tr><th id="359">359</th><td></td></tr>
<tr><th id="360">360</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">/// Get the iX type with the same bitwidth as T.</i></td></tr>
<tr><th id="361">361</th><td><a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE" title='(anonymous namespace)::AtomicExpand::getCorrespondingIntegerType' data-type='llvm::IntegerType * (anonymous namespace)::AtomicExpand::getCorrespondingIntegerType(llvm::Type * T, const llvm::DataLayout &amp; DL)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">getCorrespondingIntegerType</dfn>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col9 decl" id="99T" title='T' data-type='llvm::Type *' data-ref="99T">T</dfn>,</td></tr>
<tr><th id="362">362</th><td>                                                       <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col0 decl" id="100DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="100DL">DL</dfn>) {</td></tr>
<tr><th id="363">363</th><td>  <a class="type" href="../../include/llvm/CodeGen/ValueTypes.h.html#llvm::EVT" title='llvm::EVT' data-ref="llvm::EVT">EVT</a> <dfn class="local col1 decl" id="101VT" title='VT' data-type='llvm::EVT' data-ref="101VT">VT</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase15getMemValueTypeERKNS_10DataLayoutEPNS_4TypeEb" title='llvm::TargetLoweringBase::getMemValueType' data-ref="_ZNK4llvm18TargetLoweringBase15getMemValueTypeERKNS_10DataLayoutEPNS_4TypeEb">getMemValueType</a>(<a class="local col0 ref" href="#100DL" title='DL' data-ref="100DL">DL</a>, <a class="local col9 ref" href="#99T" title='T' data-ref="99T">T</a>);</td></tr>
<tr><th id="364">364</th><td>  <em>unsigned</em> <dfn class="local col2 decl" id="102BitWidth" title='BitWidth' data-type='unsigned int' data-ref="102BitWidth">BitWidth</dfn> = <a class="local col1 ref" href="#101VT" title='VT' data-ref="101VT">VT</a>.<a class="ref" href="../../include/llvm/CodeGen/ValueTypes.h.html#_ZNK4llvm3EVT18getStoreSizeInBitsEv" title='llvm::EVT::getStoreSizeInBits' data-ref="_ZNK4llvm3EVT18getStoreSizeInBitsEv">getStoreSizeInBits</a>();</td></tr>
<tr><th id="365">365</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (BitWidth == VT.getSizeInBits() &amp;&amp; &quot;must be a power of two&quot;) ? void (0) : __assert_fail (&quot;BitWidth == VT.getSizeInBits() &amp;&amp; \&quot;must be a power of two\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 365, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col2 ref" href="#102BitWidth" title='BitWidth' data-ref="102BitWidth">BitWidth</a> == <a class="local col1 ref" href="#101VT" title='VT' data-ref="101VT">VT</a>.<a class="ref" href="../../include/llvm/CodeGen/ValueTypes.h.html#_ZNK4llvm3EVT13getSizeInBitsEv" title='llvm::EVT::getSizeInBits' data-ref="_ZNK4llvm3EVT13getSizeInBitsEv">getSizeInBits</a>() &amp;&amp; <q>"must be a power of two"</q>);</td></tr>
<tr><th id="366">366</th><td>  <b>return</b> <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11IntegerType3getERNS_11LLVMContextEj" title='llvm::IntegerType::get' data-ref="_ZN4llvm11IntegerType3getERNS_11LLVMContextEj">get</a>(<span class='refarg'><a class="local col9 ref" href="#99T" title='T' data-ref="99T">T</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type10getContextEv" title='llvm::Type::getContext' data-ref="_ZNK4llvm4Type10getContextEv">getContext</a>()</span>, <a class="local col2 ref" href="#102BitWidth" title='BitWidth' data-ref="102BitWidth">BitWidth</a>);</td></tr>
<tr><th id="367">367</th><td>}</td></tr>
<tr><th id="368">368</th><td></td></tr>
<tr><th id="369">369</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">/// Convert an atomic load of a non-integral type to an integer load of the</i></td></tr>
<tr><th id="370">370</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">/// equivalent bitwidth.  See the function comment on</i></td></tr>
<tr><th id="371">371</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">/// convertAtomicStoreToIntegerType for background.</i></td></tr>
<tr><th id="372">372</th><td><a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicLoadToIntegerType' data-type='llvm::LoadInst * (anonymous namespace)::AtomicExpand::convertAtomicLoadToIntegerType(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand30convertAtomicLoadToIntegerTypeEPN4llvm8LoadInstE">convertAtomicLoadToIntegerType</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col3 decl" id="103LI" title='LI' data-type='llvm::LoadInst *' data-ref="103LI">LI</dfn>) {</td></tr>
<tr><th id="373">373</th><td>  <em>auto</em> *<dfn class="local col4 decl" id="104M" title='M' data-type='llvm::Module *' data-ref="104M">M</dfn> = <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="374">374</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="105NewTy" title='NewTy' data-type='llvm::Type *' data-ref="105NewTy">NewTy</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE" title='(anonymous namespace)::AtomicExpand::getCorrespondingIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">getCorrespondingIntegerType</a>(<a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="375">375</th><td>                                            <a class="local col4 ref" href="#104M" title='M' data-ref="104M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>());</td></tr>
<tr><th id="376">376</th><td></td></tr>
<tr><th id="377">377</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col6 decl" id="106Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="106Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>);</td></tr>
<tr><th id="378">378</th><td></td></tr>
<tr><th id="379">379</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="107Addr" title='Addr' data-type='llvm::Value *' data-ref="107Addr">Addr</dfn> = <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="380">380</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col8 decl" id="108PT" title='PT' data-type='llvm::Type *' data-ref="108PT">PT</dfn> = <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11PointerType3getEPNS_4TypeEj" title='llvm::PointerType::get' data-ref="_ZN4llvm11PointerType3getEPNS_4TypeEj">get</a>(<a class="local col5 ref" href="#105NewTy" title='NewTy' data-ref="105NewTy">NewTy</a>,</td></tr>
<tr><th id="381">381</th><td>                              <a class="local col7 ref" href="#107Addr" title='Addr' data-ref="107Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>());</td></tr>
<tr><th id="382">382</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="109NewAddr" title='NewAddr' data-type='llvm::Value *' data-ref="109NewAddr">NewAddr</dfn> = <a class="local col6 ref" href="#106Builder" title='Builder' data-ref="106Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col7 ref" href="#107Addr" title='Addr' data-ref="107Addr">Addr</a>, <a class="local col8 ref" href="#108PT" title='PT' data-ref="108PT">PT</a>);</td></tr>
<tr><th id="383">383</th><td></td></tr>
<tr><th id="384">384</th><td>  <em>auto</em> *<dfn class="local col0 decl" id="110NewLI" title='NewLI' data-type='llvm::LoadInst *' data-ref="110NewLI">NewLI</dfn> = <a class="local col6 ref" href="#106Builder" title='Builder' data-ref="106Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateLoad</a>(<a class="local col5 ref" href="#105NewTy" title='NewTy' data-ref="105NewTy">NewTy</a>, <a class="local col9 ref" href="#109NewAddr" title='NewAddr' data-ref="109NewAddr">NewAddr</a>);</td></tr>
<tr><th id="385">385</th><td>  <a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst12setAlignmentEj" title='llvm::LoadInst::setAlignment' data-ref="_ZN4llvm8LoadInst12setAlignmentEj">setAlignment</a>(<a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst12getAlignmentEv" title='llvm::LoadInst::getAlignment' data-ref="_ZNK4llvm8LoadInst12getAlignmentEv">getAlignment</a>());</td></tr>
<tr><th id="386">386</th><td>  <a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst11setVolatileEb" title='llvm::LoadInst::setVolatile' data-ref="_ZN4llvm8LoadInst11setVolatileEb">setVolatile</a>(<a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst10isVolatileEv" title='llvm::LoadInst::isVolatile' data-ref="_ZNK4llvm8LoadInst10isVolatileEv">isVolatile</a>());</td></tr>
<tr><th id="387">387</th><td>  <a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst9setAtomicENS_14AtomicOrderingEh" title='llvm::LoadInst::setAtomic' data-ref="_ZN4llvm8LoadInst9setAtomicENS_14AtomicOrderingEh">setAtomic</a>(<a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>(), <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst14getSyncScopeIDEv" title='llvm::LoadInst::getSyncScopeID' data-ref="_ZNK4llvm8LoadInst14getSyncScopeIDEv">getSyncScopeID</a>());</td></tr>
<tr><th id="388">388</th><td>  <a class="macro" href="../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;atomic-expand&quot;)) { dbgs() &lt;&lt; &quot;Replaced &quot; &lt;&lt; *LI &lt;&lt; &quot; with &quot; &lt;&lt; *NewLI &lt;&lt; &quot;\n&quot;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"Replaced "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" with "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n"</q>);</td></tr>
<tr><th id="389">389</th><td></td></tr>
<tr><th id="390">390</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="111NewVal" title='NewVal' data-type='llvm::Value *' data-ref="111NewVal">NewVal</dfn> = <a class="local col6 ref" href="#106Builder" title='Builder' data-ref="106Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a>, <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="391">391</th><td>  <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col1 ref" href="#111NewVal" title='NewVal' data-ref="111NewVal">NewVal</a>);</td></tr>
<tr><th id="392">392</th><td>  <a class="local col3 ref" href="#103LI" title='LI' data-ref="103LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="393">393</th><td>  <b>return</b> <a class="local col0 ref" href="#110NewLI" title='NewLI' data-ref="110NewLI">NewLI</a>;</td></tr>
<tr><th id="394">394</th><td>}</td></tr>
<tr><th id="395">395</th><td></td></tr>
<tr><th id="396">396</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicLoad' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicLoad(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE">tryExpandAtomicLoad</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col2 decl" id="112LI" title='LI' data-type='llvm::LoadInst *' data-ref="112LI">LI</dfn>) {</td></tr>
<tr><th id="397">397</th><td>  <b>switch</b> (<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase26shouldExpandAtomicLoadInIREPNS_8LoadInstE" title='llvm::TargetLoweringBase::shouldExpandAtomicLoadInIR' data-ref="_ZNK4llvm18TargetLoweringBase26shouldExpandAtomicLoadInIREPNS_8LoadInstE">shouldExpandAtomicLoadInIR</a>(<a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>)) {</td></tr>
<tr><th id="398">398</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::None" title='llvm::TargetLoweringBase::AtomicExpansionKind::None' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::None">None</a>:</td></tr>
<tr><th id="399">399</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="400">400</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::LLSC" title='llvm::TargetLoweringBase::AtomicExpansionKind::LLSC' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::LLSC">LLSC</a>:</td></tr>
<tr><th id="401">401</th><td>    <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581">expandAtomicOpToLLSC</a>(</td></tr>
<tr><th id="402">402</th><td>        <a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>, <a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>(),</td></tr>
<tr><th id="403">403</th><td>        <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a>[](<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col3 decl" id="113Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="113Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="114Loaded" title='Loaded' data-type='llvm::Value *' data-ref="114Loaded">Loaded</dfn>) { <b>return</b> <a class="local col4 ref" href="#114Loaded" title='Loaded' data-ref="114Loaded">Loaded</a>; });</td></tr>
<tr><th id="404">404</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="405">405</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::LLOnly" title='llvm::TargetLoweringBase::AtomicExpansionKind::LLOnly' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::LLOnly">LLOnly</a>:</td></tr>
<tr><th id="406">406</th><td>    <b>return</b> <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLL' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE">expandAtomicLoadToLL</a>(<a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>);</td></tr>
<tr><th id="407">407</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg" title='llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg">CmpXChg</a>:</td></tr>
<tr><th id="408">408</th><td>    <b>return</b> <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToCmpXchg' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE">expandAtomicLoadToCmpXchg</a>(<a class="local col2 ref" href="#112LI" title='LI' data-ref="112LI">LI</a>);</td></tr>
<tr><th id="409">409</th><td>  <b>default</b>:</td></tr>
<tr><th id="410">410</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unhandled case in tryExpandAtomicLoad&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 410)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unhandled case in tryExpandAtomicLoad"</q>);</td></tr>
<tr><th id="411">411</th><td>  }</td></tr>
<tr><th id="412">412</th><td>}</td></tr>
<tr><th id="413">413</th><td></td></tr>
<tr><th id="414">414</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLL' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicLoadToLL(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicLoadToLLEPN4llvm8LoadInstE">expandAtomicLoadToLL</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col5 decl" id="115LI" title='LI' data-type='llvm::LoadInst *' data-ref="115LI">LI</dfn>) {</td></tr>
<tr><th id="415">415</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col6 decl" id="116Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="116Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col5 ref" href="#115LI" title='LI' data-ref="115LI">LI</a>);</td></tr>
<tr><th id="416">416</th><td></td></tr>
<tr><th id="417">417</th><td>  <i>// On some architectures, load-linked instructions are atomic for larger</i></td></tr>
<tr><th id="418">418</th><td><i>  // sizes than normal loads. For example, the only 64-bit load guaranteed</i></td></tr>
<tr><th id="419">419</th><td><i>  // to be single-copy atomic by ARM is an ldrexd (A3.5.3).</i></td></tr>
<tr><th id="420">420</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="117Val" title='Val' data-type='llvm::Value *' data-ref="117Val">Val</dfn> =</td></tr>
<tr><th id="421">421</th><td>      <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLoadLinked' data-ref="_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE">emitLoadLinked</a>(<span class='refarg'><a class="local col6 ref" href="#116Builder" title='Builder' data-ref="116Builder">Builder</a></span>, <a class="local col5 ref" href="#115LI" title='LI' data-ref="115LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col5 ref" href="#115LI" title='LI' data-ref="115LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>());</td></tr>
<tr><th id="422">422</th><td>  <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase33emitAtomicCmpXchgNoStoreLLBalanceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEE" title='llvm::TargetLoweringBase::emitAtomicCmpXchgNoStoreLLBalance' data-ref="_ZNK4llvm18TargetLoweringBase33emitAtomicCmpXchgNoStoreLLBalanceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEE">emitAtomicCmpXchgNoStoreLLBalance</a>(<span class='refarg'><a class="local col6 ref" href="#116Builder" title='Builder' data-ref="116Builder">Builder</a></span>);</td></tr>
<tr><th id="423">423</th><td></td></tr>
<tr><th id="424">424</th><td>  <a class="local col5 ref" href="#115LI" title='LI' data-ref="115LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col7 ref" href="#117Val" title='Val' data-ref="117Val">Val</a>);</td></tr>
<tr><th id="425">425</th><td>  <a class="local col5 ref" href="#115LI" title='LI' data-ref="115LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="426">426</th><td></td></tr>
<tr><th id="427">427</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="428">428</th><td>}</td></tr>
<tr><th id="429">429</th><td></td></tr>
<tr><th id="430">430</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicLoadToCmpXchg(llvm::LoadInst * LI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToCmpXchgEPN4llvm8LoadInstE">expandAtomicLoadToCmpXchg</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col8 decl" id="118LI" title='LI' data-type='llvm::LoadInst *' data-ref="118LI">LI</dfn>) {</td></tr>
<tr><th id="431">431</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col9 decl" id="119Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="119Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col8 ref" href="#118LI" title='LI' data-ref="118LI">LI</a>);</td></tr>
<tr><th id="432">432</th><td>  <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col0 decl" id="120Order" title='Order' data-type='llvm::AtomicOrdering' data-ref="120Order">Order</dfn> = <a class="local col8 ref" href="#118LI" title='LI' data-ref="118LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>();</td></tr>
<tr><th id="433">433</th><td>  <b>if</b> (<a class="local col0 ref" href="#120Order" title='Order' data-ref="120Order">Order</a> == <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Unordered" title='llvm::AtomicOrdering::Unordered' data-ref="llvm::AtomicOrdering::Unordered">Unordered</a>)</td></tr>
<tr><th id="434">434</th><td>    <a class="local col0 ref" href="#120Order" title='Order' data-ref="120Order">Order</a> = <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a>;</td></tr>
<tr><th id="435">435</th><td></td></tr>
<tr><th id="436">436</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="121Addr" title='Addr' data-type='llvm::Value *' data-ref="121Addr">Addr</dfn> = <a class="local col8 ref" href="#118LI" title='LI' data-ref="118LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="437">437</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col2 decl" id="122Ty" title='Ty' data-type='llvm::Type *' data-ref="122Ty">Ty</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm4castEPT0_" title='llvm::cast' data-ref="_ZN4llvm4castEPT0_">cast</a>&lt;<a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>&gt;(<a class="local col1 ref" href="#121Addr" title='Addr' data-ref="121Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>())-&gt;<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZNK4llvm11PointerType14getElementTypeEv" title='llvm::PointerType::getElementType' data-ref="_ZNK4llvm11PointerType14getElementTypeEv">getElementType</a>();</td></tr>
<tr><th id="438">438</th><td>  <a class="type" href="../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col3 decl" id="123DummyVal" title='DummyVal' data-type='llvm::Constant *' data-ref="123DummyVal">DummyVal</dfn> = <a class="type" href="../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a>::<a class="ref" href="../../include/llvm/IR/Constant.h.html#_ZN4llvm8Constant12getNullValueEPNS_4TypeE" title='llvm::Constant::getNullValue' data-ref="_ZN4llvm8Constant12getNullValueEPNS_4TypeE">getNullValue</a>(<a class="local col2 ref" href="#122Ty" title='Ty' data-ref="122Ty">Ty</a>);</td></tr>
<tr><th id="439">439</th><td></td></tr>
<tr><th id="440">440</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="124Pair" title='Pair' data-type='llvm::Value *' data-ref="124Pair">Pair</dfn> = <a class="local col9 ref" href="#119Builder" title='Builder' data-ref="119Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h" title='llvm::IRBuilder::CreateAtomicCmpXchg' data-ref="_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h">CreateAtomicCmpXchg</a>(</td></tr>
<tr><th id="441">441</th><td>      <a class="local col1 ref" href="#121Addr" title='Addr' data-ref="121Addr">Addr</a>, <a class="local col3 ref" href="#123DummyVal" title='DummyVal' data-ref="123DummyVal">DummyVal</a>, <a class="local col3 ref" href="#123DummyVal" title='DummyVal' data-ref="123DummyVal">DummyVal</a>, <a class="local col0 ref" href="#120Order" title='Order' data-ref="120Order">Order</a>,</td></tr>
<tr><th id="442">442</th><td>      <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a>::<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE" title='llvm::AtomicCmpXchgInst::getStrongestFailureOrdering' data-ref="_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE">getStrongestFailureOrdering</a>(<a class="local col0 ref" href="#120Order" title='Order' data-ref="120Order">Order</a>));</td></tr>
<tr><th id="443">443</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="125Loaded" title='Loaded' data-type='llvm::Value *' data-ref="125Loaded">Loaded</dfn> = <a class="local col9 ref" href="#119Builder" title='Builder' data-ref="119Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col4 ref" href="#124Pair" title='Pair' data-ref="124Pair">Pair</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"loaded"</q>);</td></tr>
<tr><th id="444">444</th><td></td></tr>
<tr><th id="445">445</th><td>  <a class="local col8 ref" href="#118LI" title='LI' data-ref="118LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col5 ref" href="#125Loaded" title='Loaded' data-ref="125Loaded">Loaded</a>);</td></tr>
<tr><th id="446">446</th><td>  <a class="local col8 ref" href="#118LI" title='LI' data-ref="118LI">LI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="447">447</th><td></td></tr>
<tr><th id="448">448</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="449">449</th><td>}</td></tr>
<tr><th id="450">450</th><td></td></tr>
<tr><th id="451">451</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// Convert an atomic store of a non-integral type to an integer store of the</i></td></tr>
<tr><th id="452">452</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// equivalent bitwidth.  We used to not support floating point or vector</i></td></tr>
<tr><th id="453">453</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// atomics in the IR at all.  The backends learned to deal with the bitcast</i></td></tr>
<tr><th id="454">454</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// idiom because that was the only way of expressing the notion of a atomic</i></td></tr>
<tr><th id="455">455</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// float or vector store.  The long term plan is to teach each backend to</i></td></tr>
<tr><th id="456">456</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// instruction select from the original atomic store, but as a migration</i></td></tr>
<tr><th id="457">457</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// mechanism, we convert back to the old format which the backends understand.</i></td></tr>
<tr><th id="458">458</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">/// Each backend will need individual work to recognize the new format.</i></td></tr>
<tr><th id="459">459</th><td><a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::convertAtomicStoreToIntegerType' data-type='llvm::StoreInst * (anonymous namespace)::AtomicExpand::convertAtomicStoreToIntegerType(llvm::StoreInst * SI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand31convertAtomicStoreToIntegerTypeEPN4llvm9StoreInstE">convertAtomicStoreToIntegerType</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col6 decl" id="126SI" title='SI' data-type='llvm::StoreInst *' data-ref="126SI">SI</dfn>) {</td></tr>
<tr><th id="460">460</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col7 decl" id="127Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="127Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>);</td></tr>
<tr><th id="461">461</th><td>  <em>auto</em> *<dfn class="local col8 decl" id="128M" title='M' data-type='llvm::Module *' data-ref="128M">M</dfn> = <a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="462">462</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col9 decl" id="129NewTy" title='NewTy' data-type='llvm::Type *' data-ref="129NewTy">NewTy</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE" title='(anonymous namespace)::AtomicExpand::getCorrespondingIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">getCorrespondingIntegerType</a>(<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="463">463</th><td>                                            <a class="local col8 ref" href="#128M" title='M' data-ref="128M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>());</td></tr>
<tr><th id="464">464</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="130NewVal" title='NewVal' data-type='llvm::Value *' data-ref="130NewVal">NewVal</dfn> = <a class="local col7 ref" href="#127Builder" title='Builder' data-ref="127Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>(), <a class="local col9 ref" href="#129NewTy" title='NewTy' data-ref="129NewTy">NewTy</a>);</td></tr>
<tr><th id="465">465</th><td></td></tr>
<tr><th id="466">466</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="131Addr" title='Addr' data-type='llvm::Value *' data-ref="131Addr">Addr</dfn> = <a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst17getPointerOperandEv" title='llvm::StoreInst::getPointerOperand' data-ref="_ZN4llvm9StoreInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="467">467</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col2 decl" id="132PT" title='PT' data-type='llvm::Type *' data-ref="132PT">PT</dfn> = <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11PointerType3getEPNS_4TypeEj" title='llvm::PointerType::get' data-ref="_ZN4llvm11PointerType3getEPNS_4TypeEj">get</a>(<a class="local col9 ref" href="#129NewTy" title='NewTy' data-ref="129NewTy">NewTy</a>,</td></tr>
<tr><th id="468">468</th><td>                              <a class="local col1 ref" href="#131Addr" title='Addr' data-ref="131Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>());</td></tr>
<tr><th id="469">469</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="133NewAddr" title='NewAddr' data-type='llvm::Value *' data-ref="133NewAddr">NewAddr</dfn> = <a class="local col7 ref" href="#127Builder" title='Builder' data-ref="127Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col1 ref" href="#131Addr" title='Addr' data-ref="131Addr">Addr</a>, <a class="local col2 ref" href="#132PT" title='PT' data-ref="132PT">PT</a>);</td></tr>
<tr><th id="470">470</th><td></td></tr>
<tr><th id="471">471</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col4 decl" id="134NewSI" title='NewSI' data-type='llvm::StoreInst *' data-ref="134NewSI">NewSI</dfn> = <a class="local col7 ref" href="#127Builder" title='Builder' data-ref="127Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b" title='llvm::IRBuilder::CreateStore' data-ref="_ZN4llvm9IRBuilder11CreateStoreEPNS_5ValueES2_b">CreateStore</a>(<a class="local col0 ref" href="#130NewVal" title='NewVal' data-ref="130NewVal">NewVal</a>, <a class="local col3 ref" href="#133NewAddr" title='NewAddr' data-ref="133NewAddr">NewAddr</a>);</td></tr>
<tr><th id="472">472</th><td>  <a class="local col4 ref" href="#134NewSI" title='NewSI' data-ref="134NewSI">NewSI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst12setAlignmentEj" title='llvm::StoreInst::setAlignment' data-ref="_ZN4llvm9StoreInst12setAlignmentEj">setAlignment</a>(<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst12getAlignmentEv" title='llvm::StoreInst::getAlignment' data-ref="_ZNK4llvm9StoreInst12getAlignmentEv">getAlignment</a>());</td></tr>
<tr><th id="473">473</th><td>  <a class="local col4 ref" href="#134NewSI" title='NewSI' data-ref="134NewSI">NewSI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst11setVolatileEb" title='llvm::StoreInst::setVolatile' data-ref="_ZN4llvm9StoreInst11setVolatileEb">setVolatile</a>(<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst10isVolatileEv" title='llvm::StoreInst::isVolatile' data-ref="_ZNK4llvm9StoreInst10isVolatileEv">isVolatile</a>());</td></tr>
<tr><th id="474">474</th><td>  <a class="local col4 ref" href="#134NewSI" title='NewSI' data-ref="134NewSI">NewSI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst9setAtomicENS_14AtomicOrderingEh" title='llvm::StoreInst::setAtomic' data-ref="_ZN4llvm9StoreInst9setAtomicENS_14AtomicOrderingEh">setAtomic</a>(<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst11getOrderingEv" title='llvm::StoreInst::getOrdering' data-ref="_ZNK4llvm9StoreInst11getOrderingEv">getOrdering</a>(), <a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst14getSyncScopeIDEv" title='llvm::StoreInst::getSyncScopeID' data-ref="_ZNK4llvm9StoreInst14getSyncScopeIDEv">getSyncScopeID</a>());</td></tr>
<tr><th id="475">475</th><td>  <a class="macro" href="../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;atomic-expand&quot;)) { dbgs() &lt;&lt; &quot;Replaced &quot; &lt;&lt; *SI &lt;&lt; &quot; with &quot; &lt;&lt; *NewSI &lt;&lt; &quot;\n&quot;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"Replaced "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" with "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col4 ref" href="#134NewSI" title='NewSI' data-ref="134NewSI">NewSI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n"</q>);</td></tr>
<tr><th id="476">476</th><td>  <a class="local col6 ref" href="#126SI" title='SI' data-ref="126SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="477">477</th><td>  <b>return</b> <a class="local col4 ref" href="#134NewSI" title='NewSI' data-ref="134NewSI">NewSI</a>;</td></tr>
<tr><th id="478">478</th><td>}</td></tr>
<tr><th id="479">479</th><td></td></tr>
<tr><th id="480">480</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStore' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicStore(llvm::StoreInst * SI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17expandAtomicStoreEPN4llvm9StoreInstE">expandAtomicStore</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col5 decl" id="135SI" title='SI' data-type='llvm::StoreInst *' data-ref="135SI">SI</dfn>) {</td></tr>
<tr><th id="481">481</th><td>  <i>// This function is only called on atomic stores that are too large to be</i></td></tr>
<tr><th id="482">482</th><td><i>  // atomic if implemented as a native store. So we replace them by an</i></td></tr>
<tr><th id="483">483</th><td><i>  // atomic swap, that can be implemented for example as a ldrex/strex on ARM</i></td></tr>
<tr><th id="484">484</th><td><i>  // or lock cmpxchg8/16b on X86, as these are atomic for larger sizes.</i></td></tr>
<tr><th id="485">485</th><td><i>  // It is the responsibility of the target to only signal expansion via</i></td></tr>
<tr><th id="486">486</th><td><i>  // shouldExpandAtomicRMW in cases where this is required and possible.</i></td></tr>
<tr><th id="487">487</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col6 decl" id="136Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="136Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col5 ref" href="#135SI" title='SI' data-ref="135SI">SI</a>);</td></tr>
<tr><th id="488">488</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col7 decl" id="137AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="137AI">AI</dfn> =</td></tr>
<tr><th id="489">489</th><td>      <a class="local col6 ref" href="#136Builder" title='Builder' data-ref="136Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_14AtomicOrderingEh" title='llvm::IRBuilder::CreateAtomicRMW' data-ref="_ZN4llvm9IRBuilder15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_14AtomicOrderingEh">CreateAtomicRMW</a>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xchg" title='llvm::AtomicRMWInst::BinOp::Xchg' data-ref="llvm::AtomicRMWInst::BinOp::Xchg">Xchg</a>, <a class="local col5 ref" href="#135SI" title='SI' data-ref="135SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst17getPointerOperandEv" title='llvm::StoreInst::getPointerOperand' data-ref="_ZN4llvm9StoreInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="490">490</th><td>                              <a class="local col5 ref" href="#135SI" title='SI' data-ref="135SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>(), <a class="local col5 ref" href="#135SI" title='SI' data-ref="135SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst11getOrderingEv" title='llvm::StoreInst::getOrdering' data-ref="_ZNK4llvm9StoreInst11getOrderingEv">getOrdering</a>());</td></tr>
<tr><th id="491">491</th><td>  <a class="local col5 ref" href="#135SI" title='SI' data-ref="135SI">SI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="492">492</th><td></td></tr>
<tr><th id="493">493</th><td>  <i>// Now we have an appropriate swap instruction, lower it as usual.</i></td></tr>
<tr><th id="494">494</th><td>  <b>return</b> <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE">tryExpandAtomicRMW</a>(<a class="local col7 ref" href="#137AI" title='AI' data-ref="137AI">AI</a>);</td></tr>
<tr><th id="495">495</th><td>}</td></tr>
<tr><th id="496">496</th><td></td></tr>
<tr><th id="497">497</th><td><em>static</em> <em>void</em> <dfn class="tu decl def" id="_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_" title='createCmpXchgInstFun' data-type='void createCmpXchgInstFun(IRBuilder&lt;&gt; &amp; Builder, llvm::Value * Addr, llvm::Value * Loaded, llvm::Value * NewVal, llvm::AtomicOrdering MemOpOrder, llvm::Value *&amp; Success, llvm::Value *&amp; NewLoaded)' data-ref="_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_">createCmpXchgInstFun</dfn>(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col8 decl" id="138Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="138Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="139Addr" title='Addr' data-type='llvm::Value *' data-ref="139Addr">Addr</dfn>,</td></tr>
<tr><th id="498">498</th><td>                                 <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="140Loaded" title='Loaded' data-type='llvm::Value *' data-ref="140Loaded">Loaded</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="141NewVal" title='NewVal' data-type='llvm::Value *' data-ref="141NewVal">NewVal</dfn>,</td></tr>
<tr><th id="499">499</th><td>                                 <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col2 decl" id="142MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="142MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="500">500</th><td>                                 <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col3 decl" id="143Success" title='Success' data-type='llvm::Value *&amp;' data-ref="143Success">Success</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col4 decl" id="144NewLoaded" title='NewLoaded' data-type='llvm::Value *&amp;' data-ref="144NewLoaded">NewLoaded</dfn>) {</td></tr>
<tr><th id="501">501</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="145OrigTy" title='OrigTy' data-type='llvm::Type *' data-ref="145OrigTy">OrigTy</dfn> = <a class="local col1 ref" href="#141NewVal" title='NewVal' data-ref="141NewVal">NewVal</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="502">502</th><td></td></tr>
<tr><th id="503">503</th><td>  <i>// This code can go away when cmpxchg supports FP types.</i></td></tr>
<tr><th id="504">504</th><td>  <em>bool</em> <dfn class="local col6 decl" id="146NeedBitcast" title='NeedBitcast' data-type='bool' data-ref="146NeedBitcast">NeedBitcast</dfn> = <a class="local col5 ref" href="#145OrigTy" title='OrigTy' data-ref="145OrigTy">OrigTy</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type17isFloatingPointTyEv" title='llvm::Type::isFloatingPointTy' data-ref="_ZNK4llvm4Type17isFloatingPointTyEv">isFloatingPointTy</a>();</td></tr>
<tr><th id="505">505</th><td>  <b>if</b> (<a class="local col6 ref" href="#146NeedBitcast" title='NeedBitcast' data-ref="146NeedBitcast">NeedBitcast</a>) {</td></tr>
<tr><th id="506">506</th><td>    <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a> *<dfn class="local col7 decl" id="147IntTy" title='IntTy' data-type='llvm::IntegerType *' data-ref="147IntTy">IntTy</dfn> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase9getIntNTyEj" title='llvm::IRBuilderBase::getIntNTy' data-ref="_ZN4llvm13IRBuilderBase9getIntNTyEj">getIntNTy</a>(<a class="local col5 ref" href="#145OrigTy" title='OrigTy' data-ref="145OrigTy">OrigTy</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>());</td></tr>
<tr><th id="507">507</th><td>    <em>unsigned</em> <dfn class="local col8 decl" id="148AS" title='AS' data-type='unsigned int' data-ref="148AS">AS</dfn> = <a class="local col9 ref" href="#139Addr" title='Addr' data-ref="139Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>();</td></tr>
<tr><th id="508">508</th><td>    <a class="local col9 ref" href="#139Addr" title='Addr' data-ref="139Addr">Addr</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col9 ref" href="#139Addr" title='Addr' data-ref="139Addr">Addr</a>, <a class="local col7 ref" href="#147IntTy" title='IntTy' data-ref="147IntTy">IntTy</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type12getPointerToEj" title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</a>(<a class="local col8 ref" href="#148AS" title='AS' data-ref="148AS">AS</a>));</td></tr>
<tr><th id="509">509</th><td>    <a class="local col1 ref" href="#141NewVal" title='NewVal' data-ref="141NewVal">NewVal</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col1 ref" href="#141NewVal" title='NewVal' data-ref="141NewVal">NewVal</a>, <a class="local col7 ref" href="#147IntTy" title='IntTy' data-ref="147IntTy">IntTy</a>);</td></tr>
<tr><th id="510">510</th><td>    <a class="local col0 ref" href="#140Loaded" title='Loaded' data-ref="140Loaded">Loaded</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col0 ref" href="#140Loaded" title='Loaded' data-ref="140Loaded">Loaded</a>, <a class="local col7 ref" href="#147IntTy" title='IntTy' data-ref="147IntTy">IntTy</a>);</td></tr>
<tr><th id="511">511</th><td>  }</td></tr>
<tr><th id="512">512</th><td></td></tr>
<tr><th id="513">513</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a>* <dfn class="local col9 decl" id="149Pair" title='Pair' data-type='llvm::Value *' data-ref="149Pair">Pair</dfn> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h" title='llvm::IRBuilder::CreateAtomicCmpXchg' data-ref="_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h">CreateAtomicCmpXchg</a>(</td></tr>
<tr><th id="514">514</th><td>      <a class="local col9 ref" href="#139Addr" title='Addr' data-ref="139Addr">Addr</a>, <a class="local col0 ref" href="#140Loaded" title='Loaded' data-ref="140Loaded">Loaded</a>, <a class="local col1 ref" href="#141NewVal" title='NewVal' data-ref="141NewVal">NewVal</a>, <a class="local col2 ref" href="#142MemOpOrder" title='MemOpOrder' data-ref="142MemOpOrder">MemOpOrder</a>,</td></tr>
<tr><th id="515">515</th><td>      <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a>::<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE" title='llvm::AtomicCmpXchgInst::getStrongestFailureOrdering' data-ref="_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE">getStrongestFailureOrdering</a>(<a class="local col2 ref" href="#142MemOpOrder" title='MemOpOrder' data-ref="142MemOpOrder">MemOpOrder</a>));</td></tr>
<tr><th id="516">516</th><td>  <a class="local col3 ref" href="#143Success" title='Success' data-ref="143Success">Success</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col9 ref" href="#149Pair" title='Pair' data-ref="149Pair">Pair</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"success"</q>);</td></tr>
<tr><th id="517">517</th><td>  <a class="local col4 ref" href="#144NewLoaded" title='NewLoaded' data-ref="144NewLoaded">NewLoaded</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col9 ref" href="#149Pair" title='Pair' data-ref="149Pair">Pair</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"newloaded"</q>);</td></tr>
<tr><th id="518">518</th><td></td></tr>
<tr><th id="519">519</th><td>  <b>if</b> (<a class="local col6 ref" href="#146NeedBitcast" title='NeedBitcast' data-ref="146NeedBitcast">NeedBitcast</a>)</td></tr>
<tr><th id="520">520</th><td>    <a class="local col4 ref" href="#144NewLoaded" title='NewLoaded' data-ref="144NewLoaded">NewLoaded</a> = <a class="local col8 ref" href="#138Builder" title='Builder' data-ref="138Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col4 ref" href="#144NewLoaded" title='NewLoaded' data-ref="144NewLoaded">NewLoaded</a>, <a class="local col5 ref" href="#145OrigTy" title='OrigTy' data-ref="145OrigTy">OrigTy</a>);</td></tr>
<tr><th id="521">521</th><td>}</td></tr>
<tr><th id="522">522</th><td></td></tr>
<tr><th id="523">523</th><td><i class="doc" data-doc="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">/// Emit IR to implement the given atomicrmw operation on values in registers,</i></td></tr>
<tr><th id="524">524</th><td><i class="doc" data-doc="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">/// returning the new value.</i></td></tr>
<tr><th id="525">525</th><td><em>static</em> <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl def" id="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_" title='performAtomicOp' data-type='llvm::Value * performAtomicOp(AtomicRMWInst::BinOp Op, IRBuilder&lt;&gt; &amp; Builder, llvm::Value * Loaded, llvm::Value * Inc)' data-ref="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">performAtomicOp</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col0 decl" id="150Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="150Op">Op</dfn>, <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col1 decl" id="151Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="151Builder">Builder</dfn>,</td></tr>
<tr><th id="526">526</th><td>                              <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="152Loaded" title='Loaded' data-type='llvm::Value *' data-ref="152Loaded">Loaded</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="153Inc" title='Inc' data-type='llvm::Value *' data-ref="153Inc">Inc</dfn>) {</td></tr>
<tr><th id="527">527</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="154NewVal" title='NewVal' data-type='llvm::Value *' data-ref="154NewVal">NewVal</dfn>;</td></tr>
<tr><th id="528">528</th><td>  <b>switch</b> (<a class="local col0 ref" href="#150Op" title='Op' data-ref="150Op">Op</a>) {</td></tr>
<tr><th id="529">529</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xchg" title='llvm::AtomicRMWInst::BinOp::Xchg' data-ref="llvm::AtomicRMWInst::BinOp::Xchg">Xchg</a>:</td></tr>
<tr><th id="530">530</th><td>    <b>return</b> <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>;</td></tr>
<tr><th id="531">531</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Add" title='llvm::AtomicRMWInst::BinOp::Add' data-ref="llvm::AtomicRMWInst::BinOp::Add">Add</a>:</td></tr>
<tr><th id="532">532</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateAdd' data-ref="_ZN4llvm9IRBuilder9CreateAddEPNS_5ValueES2_RKNS_5TwineEbb">CreateAdd</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="533">533</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Sub" title='llvm::AtomicRMWInst::BinOp::Sub' data-ref="llvm::AtomicRMWInst::BinOp::Sub">Sub</a>:</td></tr>
<tr><th id="534">534</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateSubEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateSub' data-ref="_ZN4llvm9IRBuilder9CreateSubEPNS_5ValueES2_RKNS_5TwineEbb">CreateSub</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="535">535</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>:</td></tr>
<tr><th id="536">536</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="537">537</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Nand" title='llvm::AtomicRMWInst::BinOp::Nand' data-ref="llvm::AtomicRMWInst::BinOp::Nand">Nand</a>:</td></tr>
<tr><th id="538">538</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateNotEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateNot' data-ref="_ZN4llvm9IRBuilder9CreateNotEPNS_5ValueERKNS_5TwineE">CreateNot</a>(<a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="539">539</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a>:</td></tr>
<tr><th id="540">540</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="541">541</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a>:</td></tr>
<tr><th id="542">542</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateXorEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateXor' data-ref="_ZN4llvm9IRBuilder9CreateXorEPNS_5ValueES2_RKNS_5TwineE">CreateXor</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="543">543</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Max" title='llvm::AtomicRMWInst::BinOp::Max' data-ref="llvm::AtomicRMWInst::BinOp::Max">Max</a>:</td></tr>
<tr><th id="544">544</th><td>    <a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a> = <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateICmpSGTEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpSGT' data-ref="_ZN4llvm9IRBuilder13CreateICmpSGTEPNS_5ValueES2_RKNS_5TwineE">CreateICmpSGT</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>);</td></tr>
<tr><th id="545">545</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a>, <a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="546">546</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Min" title='llvm::AtomicRMWInst::BinOp::Min' data-ref="llvm::AtomicRMWInst::BinOp::Min">Min</a>:</td></tr>
<tr><th id="547">547</th><td>    <a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a> = <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateICmpSLEEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpSLE' data-ref="_ZN4llvm9IRBuilder13CreateICmpSLEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpSLE</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>);</td></tr>
<tr><th id="548">548</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a>, <a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="549">549</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMax" title='llvm::AtomicRMWInst::BinOp::UMax' data-ref="llvm::AtomicRMWInst::BinOp::UMax">UMax</a>:</td></tr>
<tr><th id="550">550</th><td>    <a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a> = <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateICmpUGTEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpUGT' data-ref="_ZN4llvm9IRBuilder13CreateICmpUGTEPNS_5ValueES2_RKNS_5TwineE">CreateICmpUGT</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>);</td></tr>
<tr><th id="551">551</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a>, <a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="552">552</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMin" title='llvm::AtomicRMWInst::BinOp::UMin' data-ref="llvm::AtomicRMWInst::BinOp::UMin">UMin</a>:</td></tr>
<tr><th id="553">553</th><td>    <a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a> = <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateICmpULEEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpULE' data-ref="_ZN4llvm9IRBuilder13CreateICmpULEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpULE</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>);</td></tr>
<tr><th id="554">554</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE" title='llvm::IRBuilder::CreateSelect' data-ref="_ZN4llvm9IRBuilder12CreateSelectEPNS_5ValueES2_S2_RKNS_5TwineEPNS_11InstructionE">CreateSelect</a>(<a class="local col4 ref" href="#154NewVal" title='NewVal' data-ref="154NewVal">NewVal</a>, <a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="555">555</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::FAdd" title='llvm::AtomicRMWInst::BinOp::FAdd' data-ref="llvm::AtomicRMWInst::BinOp::FAdd">FAdd</a>:</td></tr>
<tr><th id="556">556</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateFAddEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateFAdd' data-ref="_ZN4llvm9IRBuilder10CreateFAddEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFAdd</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="557">557</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::FSub" title='llvm::AtomicRMWInst::BinOp::FSub' data-ref="llvm::AtomicRMWInst::BinOp::FSub">FSub</a>:</td></tr>
<tr><th id="558">558</th><td>    <b>return</b> <a class="local col1 ref" href="#151Builder" title='Builder' data-ref="151Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateFSubEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateFSub' data-ref="_ZN4llvm9IRBuilder10CreateFSubEPNS_5ValueES2_RKNS_5TwineEPNS_6MDNodeE">CreateFSub</a>(<a class="local col2 ref" href="#152Loaded" title='Loaded' data-ref="152Loaded">Loaded</a>, <a class="local col3 ref" href="#153Inc" title='Inc' data-ref="153Inc">Inc</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"new"</q>);</td></tr>
<tr><th id="559">559</th><td>  <b>default</b>:</td></tr>
<tr><th id="560">560</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unknown atomic op&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 560)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unknown atomic op"</q>);</td></tr>
<tr><th id="561">561</th><td>  }</td></tr>
<tr><th id="562">562</th><td>}</td></tr>
<tr><th id="563">563</th><td></td></tr>
<tr><th id="564">564</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicRMW' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicRMW(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand18tryExpandAtomicRMWEPN4llvm13AtomicRMWInstE">tryExpandAtomicRMW</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col5 decl" id="155AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="155AI">AI</dfn>) {</td></tr>
<tr><th id="565">565</th><td>  <b>switch</b> (<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase25shouldExpandAtomicRMWInIREPNS_13AtomicRMWInstE" title='llvm::TargetLoweringBase::shouldExpandAtomicRMWInIR' data-ref="_ZNK4llvm18TargetLoweringBase25shouldExpandAtomicRMWInIREPNS_13AtomicRMWInstE">shouldExpandAtomicRMWInIR</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>)) {</td></tr>
<tr><th id="566">566</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::None" title='llvm::TargetLoweringBase::AtomicExpansionKind::None' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::None">None</a>:</td></tr>
<tr><th id="567">567</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="568">568</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::LLSC" title='llvm::TargetLoweringBase::AtomicExpansionKind::LLSC' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::LLSC">LLSC</a>: {</td></tr>
<tr><th id="569">569</th><td>    <em>unsigned</em> <dfn class="local col6 decl" id="156MinCASSize" title='MinCASSize' data-type='unsigned int' data-ref="156MinCASSize">MinCASSize</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>;</td></tr>
<tr><th id="570">570</th><td>    <em>unsigned</em> <dfn class="local col7 decl" id="157ValueSize" title='ValueSize' data-type='unsigned int' data-ref="157ValueSize">ValueSize</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE">getAtomicOpSize</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>);</td></tr>
<tr><th id="571">571</th><td>    <b>if</b> (<a class="local col7 ref" href="#157ValueSize" title='ValueSize' data-ref="157ValueSize">ValueSize</a> &lt; <a class="local col6 ref" href="#156MinCASSize" title='MinCASSize' data-ref="156MinCASSize">MinCASSize</a>) {</td></tr>
<tr><th id="572">572</th><td>      <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;MinCmpXchgSizeInBits not yet supported for LL/SC architectures.&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 573)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(</td></tr>
<tr><th id="573">573</th><td>          <q>"MinCmpXchgSizeInBits not yet supported for LL/SC architectures."</q>);</td></tr>
<tr><th id="574">574</th><td>    } <b>else</b> {</td></tr>
<tr><th id="575">575</th><td>      <em>auto</em> <dfn class="local col8 decl" id="158PerformOp" title='PerformOp' data-type='(lambda at /root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp:575:24)' data-ref="158PerformOp">PerformOp</dfn> = [&amp;](<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col9 decl" id="159Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="159Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="160Loaded" title='Loaded' data-type='llvm::Value *' data-ref="160Loaded">Loaded</dfn>) {</td></tr>
<tr><th id="576">576</th><td>        <b>return</b> <a class="tu ref" href="#_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_" title='performAtomicOp' data-use='c' data-ref="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">performAtomicOp</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>(), <span class='refarg'><a class="local col9 ref" href="#159Builder" title='Builder' data-ref="159Builder">Builder</a></span>, <a class="local col0 ref" href="#160Loaded" title='Loaded' data-ref="160Loaded">Loaded</a>,</td></tr>
<tr><th id="577">577</th><td>                               <a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>());</td></tr>
<tr><th id="578">578</th><td>      };</td></tr>
<tr><th id="579">579</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581">expandAtomicOpToLLSC</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>, <a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="580">580</th><td>                           <a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>(), <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a><a class="local col8 ref" href="#158PerformOp" title='PerformOp' data-ref="158PerformOp">PerformOp</a>);</td></tr>
<tr><th id="581">581</th><td>    }</td></tr>
<tr><th id="582">582</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="583">583</th><td>  }</td></tr>
<tr><th id="584">584</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg" title='llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg">CmpXChg</a>: {</td></tr>
<tr><th id="585">585</th><td>    <em>unsigned</em> <dfn class="local col1 decl" id="161MinCASSize" title='MinCASSize' data-type='unsigned int' data-ref="161MinCASSize">MinCASSize</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>;</td></tr>
<tr><th id="586">586</th><td>    <em>unsigned</em> <dfn class="local col2 decl" id="162ValueSize" title='ValueSize' data-type='unsigned int' data-ref="162ValueSize">ValueSize</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE">getAtomicOpSize</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>);</td></tr>
<tr><th id="587">587</th><td>    <b>if</b> (<a class="local col2 ref" href="#162ValueSize" title='ValueSize' data-ref="162ValueSize">ValueSize</a> &lt; <a class="local col1 ref" href="#161MinCASSize" title='MinCASSize' data-ref="161MinCASSize">MinCASSize</a>) {</td></tr>
<tr><th id="588">588</th><td>      <i>// TODO: Handle atomicrmw fadd/fsub</i></td></tr>
<tr><th id="589">589</th><td>      <b>if</b> (<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type17isFloatingPointTyEv" title='llvm::Type::isFloatingPointTy' data-ref="_ZNK4llvm4Type17isFloatingPointTyEv">isFloatingPointTy</a>())</td></tr>
<tr><th id="590">590</th><td>        <b>return</b> <b>false</b>;</td></tr>
<tr><th id="591">591</th><td></td></tr>
<tr><th id="592">592</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE" title='(anonymous namespace)::AtomicExpand::expandPartwordAtomicRMW' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">expandPartwordAtomicRMW</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>,</td></tr>
<tr><th id="593">593</th><td>                              <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg" title='llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg">CmpXChg</a>);</td></tr>
<tr><th id="594">594</th><td>    } <b>else</b> {</td></tr>
<tr><th id="595">595</th><td>      <a class="ref" href="#_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004" title='llvm::expandAtomicRMWToCmpXchg' data-ref="_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004">expandAtomicRMWToCmpXchg</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>, <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a><a class="tu ref" href="#_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_" title='createCmpXchgInstFun' data-use='a' data-ref="_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_">createCmpXchgInstFun</a>);</td></tr>
<tr><th id="596">596</th><td>    }</td></tr>
<tr><th id="597">597</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="598">598</th><td>  }</td></tr>
<tr><th id="599">599</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic" title='llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic">MaskedIntrinsic</a>: {</td></tr>
<tr><th id="600">600</th><td>    <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToMaskedIntrinsic' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE">expandAtomicRMWToMaskedIntrinsic</a>(<a class="local col5 ref" href="#155AI" title='AI' data-ref="155AI">AI</a>);</td></tr>
<tr><th id="601">601</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="602">602</th><td>  }</td></tr>
<tr><th id="603">603</th><td>  <b>default</b>:</td></tr>
<tr><th id="604">604</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unhandled case in tryExpandAtomicRMW&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 604)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unhandled case in tryExpandAtomicRMW"</q>);</td></tr>
<tr><th id="605">605</th><td>  }</td></tr>
<tr><th id="606">606</th><td>}</td></tr>
<tr><th id="607">607</th><td></td></tr>
<tr><th id="608">608</th><td><b>namespace</b> {</td></tr>
<tr><th id="609">609</th><td></td></tr>
<tr><th id="610">610</th><td><i class="doc" data-doc="(anonymousnamespace)::PartwordMaskValues">/// Result values from createMaskInstrs helper.</i></td></tr>
<tr><th id="611">611</th><td><b>struct</b> <dfn class="tu type def" id="(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</dfn> {</td></tr>
<tr><th id="612">612</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-type='llvm::Type *' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</dfn>;</td></tr>
<tr><th id="613">613</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-type='llvm::Type *' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</dfn>;</td></tr>
<tr><th id="614">614</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-type='llvm::Value *' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</dfn>;</td></tr>
<tr><th id="615">615</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-type='llvm::Value *' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</dfn>;</td></tr>
<tr><th id="616">616</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-type='llvm::Value *' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</dfn>;</td></tr>
<tr><th id="617">617</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl" id="(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-type='llvm::Value *' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</dfn>;</td></tr>
<tr><th id="618">618</th><td>};</td></tr>
<tr><th id="619">619</th><td></td></tr>
<tr><th id="620">620</th><td>} <i>// end anonymous namespace</i></td></tr>
<tr><th id="621">621</th><td></td></tr>
<tr><th id="622">622</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// This is a helper function which builds instructions to provide</i></td></tr>
<tr><th id="623">623</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// values necessary for partword atomic operations. It takes an</i></td></tr>
<tr><th id="624">624</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// incoming address, Addr, and ValueType, and constructs the address,</i></td></tr>
<tr><th id="625">625</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// shift-amounts and masks needed to work with a larger value of size</i></td></tr>
<tr><th id="626">626</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// WordSize.</i></td></tr>
<tr><th id="627">627</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///</i></td></tr>
<tr><th id="628">628</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// AlignedAddr: Addr rounded down to a multiple of WordSize</i></td></tr>
<tr><th id="629">629</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///</i></td></tr>
<tr><th id="630">630</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// ShiftAmt: Number of bits to right-shift a WordSize value loaded</i></td></tr>
<tr><th id="631">631</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///           from AlignAddr for it to have the same value as if</i></td></tr>
<tr><th id="632">632</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///           ValueType was loaded from Addr.</i></td></tr>
<tr><th id="633">633</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///</i></td></tr>
<tr><th id="634">634</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// Mask: Value to mask with the value loaded from AlignAddr to</i></td></tr>
<tr><th id="635">635</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///       include only the part that would've been loaded from Addr.</i></td></tr>
<tr><th id="636">636</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">///</i></td></tr>
<tr><th id="637">637</th><td><i class="doc" data-doc="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">/// Inv_Mask: The inverse of Mask.</i></td></tr>
<tr><th id="638">638</th><td><em>static</em> <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="tu decl def" id="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-type='(anonymous namespace)::PartwordMaskValues createMaskInstrs(IRBuilder&lt;&gt; &amp; Builder, llvm::Instruction * I, llvm::Type * ValueType, llvm::Value * Addr, unsigned int WordSize)' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</dfn>(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col3 decl" id="163Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="163Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col4 decl" id="164I" title='I' data-type='llvm::Instruction *' data-ref="164I">I</dfn>,</td></tr>
<tr><th id="639">639</th><td>                                           <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="165ValueType" title='ValueType' data-type='llvm::Type *' data-ref="165ValueType">ValueType</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="166Addr" title='Addr' data-type='llvm::Value *' data-ref="166Addr">Addr</dfn>,</td></tr>
<tr><th id="640">640</th><td>                                           <em>unsigned</em> <dfn class="local col7 decl" id="167WordSize" title='WordSize' data-type='unsigned int' data-ref="167WordSize">WordSize</dfn>) {</td></tr>
<tr><th id="641">641</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <a class="tu ref fake" href="#611" title='(anonymous namespace)::PartwordMaskValues::PartwordMaskValues' data-use='c' data-ref="_ZN12_GLOBAL__N_118PartwordMaskValuesC1Ev"></a><dfn class="local col8 decl" id="168Ret" title='Ret' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="168Ret">Ret</dfn>;</td></tr>
<tr><th id="642">642</th><td></td></tr>
<tr><th id="643">643</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col9 decl" id="169BB" title='BB' data-type='llvm::BasicBlock *' data-ref="169BB">BB</dfn> = <a class="local col4 ref" href="#164I" title='I' data-ref="164I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="644">644</th><td>  <a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col0 decl" id="170F" title='F' data-type='llvm::Function *' data-ref="170F">F</dfn> = <a class="local col9 ref" href="#169BB" title='BB' data-ref="169BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>();</td></tr>
<tr><th id="645">645</th><td>  <a class="type" href="../../include/llvm/IR/Module.h.html#llvm::Module" title='llvm::Module' data-ref="llvm::Module">Module</a> *<dfn class="local col1 decl" id="171M" title='M' data-type='llvm::Module *' data-ref="171M">M</dfn> = <a class="local col4 ref" href="#164I" title='I' data-ref="164I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="646">646</th><td></td></tr>
<tr><th id="647">647</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col2 decl" id="172Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="172Ctx">Ctx</dfn> = <a class="local col0 ref" href="#170F" title='F' data-ref="170F">F</a>-&gt;<a class="ref" href="../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10getContextEv" title='llvm::Function::getContext' data-ref="_ZNK4llvm8Function10getContextEv">getContext</a>();</td></tr>
<tr><th id="648">648</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col3 decl" id="173DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="173DL">DL</dfn> = <a class="local col1 ref" href="#171M" title='M' data-ref="171M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="649">649</th><td></td></tr>
<tr><th id="650">650</th><td>  <em>unsigned</em> <dfn class="local col4 decl" id="174ValueSize" title='ValueSize' data-type='unsigned int' data-ref="174ValueSize">ValueSize</dfn> = <a class="local col3 ref" href="#173DL" title='DL' data-ref="173DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE" title='llvm::DataLayout::getTypeStoreSize' data-ref="_ZNK4llvm10DataLayout16getTypeStoreSizeEPNS_4TypeE">getTypeStoreSize</a>(<a class="local col5 ref" href="#165ValueType" title='ValueType' data-ref="165ValueType">ValueType</a>);</td></tr>
<tr><th id="651">651</th><td></td></tr>
<tr><th id="652">652</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (ValueSize &lt; WordSize) ? void (0) : __assert_fail (&quot;ValueSize &lt; WordSize&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 652, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#174ValueSize" title='ValueSize' data-ref="174ValueSize">ValueSize</a> &lt; <a class="local col7 ref" href="#167WordSize" title='WordSize' data-ref="167WordSize">WordSize</a>);</td></tr>
<tr><th id="653">653</th><td></td></tr>
<tr><th id="654">654</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a> = <a class="local col5 ref" href="#165ValueType" title='ValueType' data-ref="165ValueType">ValueType</a>;</td></tr>
<tr><th id="655">655</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a> = <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getIntNTyERNS_11LLVMContextEj" title='llvm::Type::getIntNTy' data-ref="_ZN4llvm4Type9getIntNTyERNS_11LLVMContextEj">getIntNTy</a>(<span class='refarg'><a class="local col2 ref" href="#172Ctx" title='Ctx' data-ref="172Ctx">Ctx</a></span>, <a class="local col7 ref" href="#167WordSize" title='WordSize' data-ref="167WordSize">WordSize</a> * <var>8</var>);</td></tr>
<tr><th id="656">656</th><td></td></tr>
<tr><th id="657">657</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="175WordPtrType" title='WordPtrType' data-type='llvm::Type *' data-ref="175WordPtrType">WordPtrType</dfn> =</td></tr>
<tr><th id="658">658</th><td>      <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type12getPointerToEj" title='llvm::Type::getPointerTo' data-ref="_ZNK4llvm4Type12getPointerToEj">getPointerTo</a>(<a class="local col6 ref" href="#166Addr" title='Addr' data-ref="166Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>());</td></tr>
<tr><th id="659">659</th><td></td></tr>
<tr><th id="660">660</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="176AddrInt" title='AddrInt' data-type='llvm::Value *' data-ref="176AddrInt">AddrInt</dfn> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreatePtrToInt' data-ref="_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePtrToInt</a>(<a class="local col6 ref" href="#166Addr" title='Addr' data-ref="166Addr">Addr</a>, <a class="local col3 ref" href="#173DL" title='DL' data-ref="173DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout13getIntPtrTypeERNS_11LLVMContextEj" title='llvm::DataLayout::getIntPtrType' data-ref="_ZNK4llvm10DataLayout13getIntPtrTypeERNS_11LLVMContextEj">getIntPtrType</a>(<span class='refarg'><a class="local col2 ref" href="#172Ctx" title='Ctx' data-ref="172Ctx">Ctx</a></span>));</td></tr>
<tr><th id="661">661</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreateIntToPtrEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateIntToPtr' data-ref="_ZN4llvm9IRBuilder14CreateIntToPtrEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateIntToPtr</a>(</td></tr>
<tr><th id="662">662</th><td>      <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueEmRKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueEmRKNS_5TwineE">CreateAnd</a>(<a class="local col6 ref" href="#176AddrInt" title='AddrInt' data-ref="176AddrInt">AddrInt</a>, ~(<a class="typedef" href="../../../../include/x86_64-linux-gnu/bits/stdint-uintn.h.html#uint64_t" title='uint64_t' data-type='__uint64_t' data-ref="uint64_t">uint64_t</a>)(<a class="local col7 ref" href="#167WordSize" title='WordSize' data-ref="167WordSize">WordSize</a> - <var>1</var>)), <a class="local col5 ref" href="#175WordPtrType" title='WordPtrType' data-ref="175WordPtrType">WordPtrType</a>,</td></tr>
<tr><th id="663">663</th><td>      <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"AlignedAddr"</q>);</td></tr>
<tr><th id="664">664</th><td></td></tr>
<tr><th id="665">665</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="177PtrLSB" title='PtrLSB' data-type='llvm::Value *' data-ref="177PtrLSB">PtrLSB</dfn> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueEmRKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueEmRKNS_5TwineE">CreateAnd</a>(<a class="local col6 ref" href="#176AddrInt" title='AddrInt' data-ref="176AddrInt">AddrInt</a>, <a class="local col7 ref" href="#167WordSize" title='WordSize' data-ref="167WordSize">WordSize</a> - <var>1</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"PtrLSB"</q>);</td></tr>
<tr><th id="666">666</th><td>  <b>if</b> (<a class="local col3 ref" href="#173DL" title='DL' data-ref="173DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout14isLittleEndianEv" title='llvm::DataLayout::isLittleEndian' data-ref="_ZNK4llvm10DataLayout14isLittleEndianEv">isLittleEndian</a>()) {</td></tr>
<tr><th id="667">667</th><td>    <i>// turn bytes into bits</i></td></tr>
<tr><th id="668">668</th><td>    <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueEmRKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueEmRKNS_5TwineEbb">CreateShl</a>(<a class="local col7 ref" href="#177PtrLSB" title='PtrLSB' data-ref="177PtrLSB">PtrLSB</a>, <var>3</var>);</td></tr>
<tr><th id="669">669</th><td>  } <b>else</b> {</td></tr>
<tr><th id="670">670</th><td>    <i>// turn bytes into bits, and count from the other side.</i></td></tr>
<tr><th id="671">671</th><td>    <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a> =</td></tr>
<tr><th id="672">672</th><td>        <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueEmRKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueEmRKNS_5TwineEbb">CreateShl</a>(<a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateXorEPNS_5ValueEmRKNS_5TwineE" title='llvm::IRBuilder::CreateXor' data-ref="_ZN4llvm9IRBuilder9CreateXorEPNS_5ValueEmRKNS_5TwineE">CreateXor</a>(<a class="local col7 ref" href="#177PtrLSB" title='PtrLSB' data-ref="177PtrLSB">PtrLSB</a>, <a class="local col7 ref" href="#167WordSize" title='WordSize' data-ref="167WordSize">WordSize</a> - <a class="local col4 ref" href="#174ValueSize" title='ValueSize' data-ref="174ValueSize">ValueSize</a>), <var>3</var>);</td></tr>
<tr><th id="673">673</th><td>  }</td></tr>
<tr><th id="674">674</th><td></td></tr>
<tr><th id="675">675</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(<a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>, <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"ShiftAmt"</q>);</td></tr>
<tr><th id="676">676</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(</td></tr>
<tr><th id="677">677</th><td>      <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_4TypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_4TypeEmb">get</a>(<a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>, (<var>1</var> &lt;&lt; <a class="local col4 ref" href="#174ValueSize" title='ValueSize' data-ref="174ValueSize">ValueSize</a> * <var>8</var>) - <var>1</var>), <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>,</td></tr>
<tr><th id="678">678</th><td>      <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"Mask"</q>);</td></tr>
<tr><th id="679">679</th><td>  <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='w' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a> = <a class="local col3 ref" href="#163Builder" title='Builder' data-ref="163Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateNotEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateNot' data-ref="_ZN4llvm9IRBuilder9CreateNotEPNS_5ValueERKNS_5TwineE">CreateNot</a>(<a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"Inv_Mask"</q>);</td></tr>
<tr><th id="680">680</th><td></td></tr>
<tr><th id="681">681</th><td>  <b>return</b> <a class="local col8 ref" href="#168Ret" title='Ret' data-ref="168Ret">Ret</a>;</td></tr>
<tr><th id="682">682</th><td>}</td></tr>
<tr><th id="683">683</th><td></td></tr>
<tr><th id="684">684</th><td><i class="doc" data-doc="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351">/// Emit IR to implement a masked version of a given atomicrmw</i></td></tr>
<tr><th id="685">685</th><td><i class="doc" data-doc="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351">/// operation. (That is, only the bits under the Mask should be</i></td></tr>
<tr><th id="686">686</th><td><i class="doc" data-doc="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351">/// affected by the operation)</i></td></tr>
<tr><th id="687">687</th><td><em>static</em> <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="tu decl def" id="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351" title='performMaskedAtomicOp' data-type='llvm::Value * performMaskedAtomicOp(AtomicRMWInst::BinOp Op, IRBuilder&lt;&gt; &amp; Builder, llvm::Value * Loaded, llvm::Value * Shifted_Inc, llvm::Value * Inc, const (anonymous namespace)::PartwordMaskValues &amp; PMV)' data-ref="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351">performMaskedAtomicOp</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col8 decl" id="178Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="178Op">Op</dfn>,</td></tr>
<tr><th id="688">688</th><td>                                    <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col9 decl" id="179Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="179Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="180Loaded" title='Loaded' data-type='llvm::Value *' data-ref="180Loaded">Loaded</dfn>,</td></tr>
<tr><th id="689">689</th><td>                                    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="181Shifted_Inc" title='Shifted_Inc' data-type='llvm::Value *' data-ref="181Shifted_Inc">Shifted_Inc</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="182Inc" title='Inc' data-type='llvm::Value *' data-ref="182Inc">Inc</dfn>,</td></tr>
<tr><th id="690">690</th><td>                                    <em>const</em> <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> &amp;<dfn class="local col3 decl" id="183PMV" title='PMV' data-type='const (anonymous namespace)::PartwordMaskValues &amp;' data-ref="183PMV">PMV</dfn>) {</td></tr>
<tr><th id="691">691</th><td>  <i>// TODO: update to use</i></td></tr>
<tr><th id="692">692</th><td><i>  // <a href="https://graphics.stanford.edu/~seander/bithacks.html#MaskedMerge">https://graphics.stanford.edu/~seander/bithacks.html#MaskedMerge</a> in order</i></td></tr>
<tr><th id="693">693</th><td><i>  // to merge bits from two values without requiring PMV.Inv_Mask.</i></td></tr>
<tr><th id="694">694</th><td>  <b>switch</b> (<a class="local col8 ref" href="#178Op" title='Op' data-ref="178Op">Op</a>) {</td></tr>
<tr><th id="695">695</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xchg" title='llvm::AtomicRMWInst::BinOp::Xchg' data-ref="llvm::AtomicRMWInst::BinOp::Xchg">Xchg</a>: {</td></tr>
<tr><th id="696">696</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="184Loaded_MaskOut" title='Loaded_MaskOut' data-type='llvm::Value *' data-ref="184Loaded_MaskOut">Loaded_MaskOut</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col0 ref" href="#180Loaded" title='Loaded' data-ref="180Loaded">Loaded</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>);</td></tr>
<tr><th id="697">697</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="185FinalVal" title='FinalVal' data-type='llvm::Value *' data-ref="185FinalVal">FinalVal</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col4 ref" href="#184Loaded_MaskOut" title='Loaded_MaskOut' data-ref="184Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col1 ref" href="#181Shifted_Inc" title='Shifted_Inc' data-ref="181Shifted_Inc">Shifted_Inc</a>);</td></tr>
<tr><th id="698">698</th><td>    <b>return</b> <a class="local col5 ref" href="#185FinalVal" title='FinalVal' data-ref="185FinalVal">FinalVal</a>;</td></tr>
<tr><th id="699">699</th><td>  }</td></tr>
<tr><th id="700">700</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a>:</td></tr>
<tr><th id="701">701</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a>:</td></tr>
<tr><th id="702">702</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>:</td></tr>
<tr><th id="703">703</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Or/Xor/And handled by widenPartwordAtomicRMW&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 703)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Or/Xor/And handled by widenPartwordAtomicRMW"</q>);</td></tr>
<tr><th id="704">704</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Add" title='llvm::AtomicRMWInst::BinOp::Add' data-ref="llvm::AtomicRMWInst::BinOp::Add">Add</a>:</td></tr>
<tr><th id="705">705</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Sub" title='llvm::AtomicRMWInst::BinOp::Sub' data-ref="llvm::AtomicRMWInst::BinOp::Sub">Sub</a>:</td></tr>
<tr><th id="706">706</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Nand" title='llvm::AtomicRMWInst::BinOp::Nand' data-ref="llvm::AtomicRMWInst::BinOp::Nand">Nand</a>: {</td></tr>
<tr><th id="707">707</th><td>    <i>// The other arithmetic ops need to be masked into place.</i></td></tr>
<tr><th id="708">708</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="186NewVal" title='NewVal' data-type='llvm::Value *' data-ref="186NewVal">NewVal</dfn> = <a class="tu ref" href="#_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_" title='performAtomicOp' data-use='c' data-ref="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">performAtomicOp</a>(<a class="local col8 ref" href="#178Op" title='Op' data-ref="178Op">Op</a>, <span class='refarg'><a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a></span>, <a class="local col0 ref" href="#180Loaded" title='Loaded' data-ref="180Loaded">Loaded</a>, <a class="local col1 ref" href="#181Shifted_Inc" title='Shifted_Inc' data-ref="181Shifted_Inc">Shifted_Inc</a>);</td></tr>
<tr><th id="709">709</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="187NewVal_Masked" title='NewVal_Masked' data-type='llvm::Value *' data-ref="187NewVal_Masked">NewVal_Masked</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col6 ref" href="#186NewVal" title='NewVal' data-ref="186NewVal">NewVal</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a>);</td></tr>
<tr><th id="710">710</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="188Loaded_MaskOut" title='Loaded_MaskOut' data-type='llvm::Value *' data-ref="188Loaded_MaskOut">Loaded_MaskOut</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col0 ref" href="#180Loaded" title='Loaded' data-ref="180Loaded">Loaded</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>);</td></tr>
<tr><th id="711">711</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="189FinalVal" title='FinalVal' data-type='llvm::Value *' data-ref="189FinalVal">FinalVal</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col8 ref" href="#188Loaded_MaskOut" title='Loaded_MaskOut' data-ref="188Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col7 ref" href="#187NewVal_Masked" title='NewVal_Masked' data-ref="187NewVal_Masked">NewVal_Masked</a>);</td></tr>
<tr><th id="712">712</th><td>    <b>return</b> <a class="local col9 ref" href="#189FinalVal" title='FinalVal' data-ref="189FinalVal">FinalVal</a>;</td></tr>
<tr><th id="713">713</th><td>  }</td></tr>
<tr><th id="714">714</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Max" title='llvm::AtomicRMWInst::BinOp::Max' data-ref="llvm::AtomicRMWInst::BinOp::Max">Max</a>:</td></tr>
<tr><th id="715">715</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Min" title='llvm::AtomicRMWInst::BinOp::Min' data-ref="llvm::AtomicRMWInst::BinOp::Min">Min</a>:</td></tr>
<tr><th id="716">716</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMax" title='llvm::AtomicRMWInst::BinOp::UMax' data-ref="llvm::AtomicRMWInst::BinOp::UMax">UMax</a>:</td></tr>
<tr><th id="717">717</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMin" title='llvm::AtomicRMWInst::BinOp::UMin' data-ref="llvm::AtomicRMWInst::BinOp::UMin">UMin</a>: {</td></tr>
<tr><th id="718">718</th><td>    <i>// Finally, comparison ops will operate on the full value, so</i></td></tr>
<tr><th id="719">719</th><td><i>    // truncate down to the original size, and expand out again after</i></td></tr>
<tr><th id="720">720</th><td><i>    // doing the operation.</i></td></tr>
<tr><th id="721">721</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="190Loaded_Shiftdown" title='Loaded_Shiftdown' data-type='llvm::Value *' data-ref="190Loaded_Shiftdown">Loaded_Shiftdown</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="722">722</th><td>        <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col0 ref" href="#180Loaded" title='Loaded' data-ref="180Loaded">Loaded</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="723">723</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="191NewVal" title='NewVal' data-type='llvm::Value *' data-ref="191NewVal">NewVal</dfn> = <a class="tu ref" href="#_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_" title='performAtomicOp' data-use='c' data-ref="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">performAtomicOp</a>(<a class="local col8 ref" href="#178Op" title='Op' data-ref="178Op">Op</a>, <span class='refarg'><a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a></span>, <a class="local col0 ref" href="#190Loaded_Shiftdown" title='Loaded_Shiftdown' data-ref="190Loaded_Shiftdown">Loaded_Shiftdown</a>, <a class="local col2 ref" href="#182Inc" title='Inc' data-ref="182Inc">Inc</a>);</td></tr>
<tr><th id="724">724</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="192NewVal_Shiftup" title='NewVal_Shiftup' data-type='llvm::Value *' data-ref="192NewVal_Shiftup">NewVal_Shiftup</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(</td></tr>
<tr><th id="725">725</th><td>        <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col1 ref" href="#191NewVal" title='NewVal' data-ref="191NewVal">NewVal</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>), <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>);</td></tr>
<tr><th id="726">726</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="193Loaded_MaskOut" title='Loaded_MaskOut' data-type='llvm::Value *' data-ref="193Loaded_MaskOut">Loaded_MaskOut</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col0 ref" href="#180Loaded" title='Loaded' data-ref="180Loaded">Loaded</a>, <a class="local col3 ref" href="#183PMV" title='PMV' data-ref="183PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>);</td></tr>
<tr><th id="727">727</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="194FinalVal" title='FinalVal' data-type='llvm::Value *' data-ref="194FinalVal">FinalVal</dfn> = <a class="local col9 ref" href="#179Builder" title='Builder' data-ref="179Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col3 ref" href="#193Loaded_MaskOut" title='Loaded_MaskOut' data-ref="193Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col2 ref" href="#192NewVal_Shiftup" title='NewVal_Shiftup' data-ref="192NewVal_Shiftup">NewVal_Shiftup</a>);</td></tr>
<tr><th id="728">728</th><td>    <b>return</b> <a class="local col4 ref" href="#194FinalVal" title='FinalVal' data-ref="194FinalVal">FinalVal</a>;</td></tr>
<tr><th id="729">729</th><td>  }</td></tr>
<tr><th id="730">730</th><td>  <b>default</b>:</td></tr>
<tr><th id="731">731</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unknown atomic op&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 731)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unknown atomic op"</q>);</td></tr>
<tr><th id="732">732</th><td>  }</td></tr>
<tr><th id="733">733</th><td>}</td></tr>
<tr><th id="734">734</th><td></td></tr>
<tr><th id="735">735</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// Expand a sub-word atomicrmw operation into an appropriate</i></td></tr>
<tr><th id="736">736</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// word-sized operation.</i></td></tr>
<tr><th id="737">737</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">///</i></td></tr>
<tr><th id="738">738</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// It will create an LL/SC or cmpxchg loop, as appropriate, the same</i></td></tr>
<tr><th id="739">739</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// way as a typical atomicrmw expansion. The only difference here is</i></td></tr>
<tr><th id="740">740</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// that the operation inside of the loop must operate only upon a</i></td></tr>
<tr><th id="741">741</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">/// part of the value.</i></td></tr>
<tr><th id="742">742</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE" title='(anonymous namespace)::AtomicExpand::expandPartwordAtomicRMW' data-type='void (anonymous namespace)::AtomicExpand::expandPartwordAtomicRMW(llvm::AtomicRMWInst * AI, TargetLoweringBase::AtomicExpansionKind ExpansionKind)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandPartwordAtomicRMWEPN4llvm13AtomicRMWInstENS1_18TargetLoweringBase19AtomicExpansionKindE">expandPartwordAtomicRMW</dfn>(</td></tr>
<tr><th id="743">743</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col5 decl" id="195AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="195AI">AI</dfn>, <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a> <dfn class="local col6 decl" id="196ExpansionKind" title='ExpansionKind' data-type='TargetLoweringBase::AtomicExpansionKind' data-ref="196ExpansionKind">ExpansionKind</dfn>) {</td></tr>
<tr><th id="744">744</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (ExpansionKind == TargetLoweringBase::AtomicExpansionKind::CmpXChg) ? void (0) : __assert_fail (&quot;ExpansionKind == TargetLoweringBase::AtomicExpansionKind::CmpXChg&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 744, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col6 ref" href="#196ExpansionKind" title='ExpansionKind' data-ref="196ExpansionKind">ExpansionKind</a> == <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg" title='llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::CmpXChg">CmpXChg</a>);</td></tr>
<tr><th id="745">745</th><td></td></tr>
<tr><th id="746">746</th><td>  <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col7 decl" id="197MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="197MemOpOrder">MemOpOrder</dfn> = <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>();</td></tr>
<tr><th id="747">747</th><td></td></tr>
<tr><th id="748">748</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col8 decl" id="198Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="198Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>);</td></tr>
<tr><th id="749">749</th><td></td></tr>
<tr><th id="750">750</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="local col9 decl" id="199PMV" title='PMV' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="199PMV">PMV</dfn> =</td></tr>
<tr><th id="751">751</th><td>      <a class="tu ref" href="#_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-use='c' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</a>(<span class='refarg'><a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a></span>, <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>, <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="752">752</th><td>                       <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>);</td></tr>
<tr><th id="753">753</th><td></td></tr>
<tr><th id="754">754</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="200ValOperand_Shifted" title='ValOperand_Shifted' data-type='llvm::Value *' data-ref="200ValOperand_Shifted">ValOperand_Shifted</dfn> =</td></tr>
<tr><th id="755">755</th><td>      <a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(<a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>(), <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>),</td></tr>
<tr><th id="756">756</th><td>                        <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"ValOperand_Shifted"</q>);</td></tr>
<tr><th id="757">757</th><td></td></tr>
<tr><th id="758">758</th><td>  <em>auto</em> <dfn class="local col1 decl" id="201PerformPartwordOp" title='PerformPartwordOp' data-type='(lambda at /root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp:758:28)' data-ref="201PerformPartwordOp">PerformPartwordOp</dfn> = [&amp;](<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col2 decl" id="202Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="202Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="203Loaded" title='Loaded' data-type='llvm::Value *' data-ref="203Loaded">Loaded</dfn>) {</td></tr>
<tr><th id="759">759</th><td>    <b>return</b> <a class="tu ref" href="#_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351" title='performMaskedAtomicOp' data-use='c' data-ref="_ZL21performMaskedAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_S8_RKN12_GLOBAL2516351">performMaskedAtomicOp</a>(<a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>(), <span class='refarg'><a class="local col2 ref" href="#202Builder" title='Builder' data-ref="202Builder">Builder</a></span>, <a class="local col3 ref" href="#203Loaded" title='Loaded' data-ref="203Loaded">Loaded</a>,</td></tr>
<tr><th id="760">760</th><td>                                 <a class="local col0 ref" href="#200ValOperand_Shifted" title='ValOperand_Shifted' data-ref="200ValOperand_Shifted">ValOperand_Shifted</a>, <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>(), <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>);</td></tr>
<tr><th id="761">761</th><td>  };</td></tr>
<tr><th id="762">762</th><td></td></tr>
<tr><th id="763">763</th><td>  <i>// TODO: When we're ready to support LLSC conversions too, use</i></td></tr>
<tr><th id="764">764</th><td><i>  // insertRMWLLSCLoop here for ExpansionKind==LLSC.</i></td></tr>
<tr><th id="765">765</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="204OldResult" title='OldResult' data-type='llvm::Value *' data-ref="204OldResult">OldResult</dfn> =</td></tr>
<tr><th id="766">766</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739" title='(anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739">insertRMWCmpXchgLoop</a>(<span class='refarg'><a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a></span>, <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>, <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>, <a class="local col7 ref" href="#197MemOpOrder" title='MemOpOrder' data-ref="197MemOpOrder">MemOpOrder</a>,</td></tr>
<tr><th id="767">767</th><td>                           <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a><a class="local col1 ref" href="#201PerformPartwordOp" title='PerformPartwordOp' data-ref="201PerformPartwordOp">PerformPartwordOp</a>, <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a><a class="tu ref" href="#_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_" title='createCmpXchgInstFun' data-use='a' data-ref="_ZL20createCmpXchgInstFunRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES6_S6_NS_14AtomicOrderingERS6_S8_">createCmpXchgInstFun</a>);</td></tr>
<tr><th id="768">768</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="205FinalOldResult" title='FinalOldResult' data-type='llvm::Value *' data-ref="205FinalOldResult">FinalOldResult</dfn> = <a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="769">769</th><td>      <a class="local col8 ref" href="#198Builder" title='Builder' data-ref="198Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col4 ref" href="#204OldResult" title='OldResult' data-ref="204OldResult">OldResult</a>, <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col9 ref" href="#199PMV" title='PMV' data-ref="199PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="770">770</th><td>  <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col5 ref" href="#205FinalOldResult" title='FinalOldResult' data-ref="205FinalOldResult">FinalOldResult</a>);</td></tr>
<tr><th id="771">771</th><td>  <a class="local col5 ref" href="#195AI" title='AI' data-ref="195AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="772">772</th><td>}</td></tr>
<tr><th id="773">773</th><td></td></tr>
<tr><th id="774">774</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE">// Widen the bitwise atomicrmw (or/xor/and) to the minimum supported width.</i></td></tr>
<tr><th id="775">775</th><td><a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::widenPartwordAtomicRMW' data-type='llvm::AtomicRMWInst * (anonymous namespace)::AtomicExpand::widenPartwordAtomicRMW(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22widenPartwordAtomicRMWEPN4llvm13AtomicRMWInstE">widenPartwordAtomicRMW</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col6 decl" id="206AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="206AI">AI</dfn>) {</td></tr>
<tr><th id="776">776</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col7 decl" id="207Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="207Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>);</td></tr>
<tr><th id="777">777</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col8 decl" id="208Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="208Op">Op</dfn> = <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>();</td></tr>
<tr><th id="778">778</th><td></td></tr>
<tr><th id="779">779</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; ((Op == AtomicRMWInst::Or || Op == AtomicRMWInst::Xor || Op == AtomicRMWInst::And) &amp;&amp; &quot;Unable to widen operation&quot;) ? void (0) : __assert_fail (&quot;(Op == AtomicRMWInst::Or || Op == AtomicRMWInst::Xor || Op == AtomicRMWInst::And) &amp;&amp; \&quot;Unable to widen operation\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 781, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>((<a class="local col8 ref" href="#208Op" title='Op' data-ref="208Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a> || <a class="local col8 ref" href="#208Op" title='Op' data-ref="208Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a> ||</td></tr>
<tr><th id="780">780</th><td>          <a class="local col8 ref" href="#208Op" title='Op' data-ref="208Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>) &amp;&amp;</td></tr>
<tr><th id="781">781</th><td>         <q>"Unable to widen operation"</q>);</td></tr>
<tr><th id="782">782</th><td></td></tr>
<tr><th id="783">783</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="local col9 decl" id="209PMV" title='PMV' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="209PMV">PMV</dfn> =</td></tr>
<tr><th id="784">784</th><td>      <a class="tu ref" href="#_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-use='c' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</a>(<span class='refarg'><a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a></span>, <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>, <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="785">785</th><td>                       <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>);</td></tr>
<tr><th id="786">786</th><td></td></tr>
<tr><th id="787">787</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="210ValOperand_Shifted" title='ValOperand_Shifted' data-type='llvm::Value *' data-ref="210ValOperand_Shifted">ValOperand_Shifted</dfn> =</td></tr>
<tr><th id="788">788</th><td>      <a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(<a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>(), <a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>),</td></tr>
<tr><th id="789">789</th><td>                        <a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"ValOperand_Shifted"</q>);</td></tr>
<tr><th id="790">790</th><td></td></tr>
<tr><th id="791">791</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="211NewOperand" title='NewOperand' data-type='llvm::Value *' data-ref="211NewOperand">NewOperand</dfn>;</td></tr>
<tr><th id="792">792</th><td></td></tr>
<tr><th id="793">793</th><td>  <b>if</b> (<a class="local col8 ref" href="#208Op" title='Op' data-ref="208Op">Op</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>)</td></tr>
<tr><th id="794">794</th><td>    <a class="local col1 ref" href="#211NewOperand" title='NewOperand' data-ref="211NewOperand">NewOperand</a> =</td></tr>
<tr><th id="795">795</th><td>        <a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>, <a class="local col0 ref" href="#210ValOperand_Shifted" title='ValOperand_Shifted' data-ref="210ValOperand_Shifted">ValOperand_Shifted</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"AndOperand"</q>);</td></tr>
<tr><th id="796">796</th><td>  <b>else</b></td></tr>
<tr><th id="797">797</th><td>    <a class="local col1 ref" href="#211NewOperand" title='NewOperand' data-ref="211NewOperand">NewOperand</a> = <a class="local col0 ref" href="#210ValOperand_Shifted" title='ValOperand_Shifted' data-ref="210ValOperand_Shifted">ValOperand_Shifted</a>;</td></tr>
<tr><th id="798">798</th><td></td></tr>
<tr><th id="799">799</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col2 decl" id="212NewAI" title='NewAI' data-type='llvm::AtomicRMWInst *' data-ref="212NewAI">NewAI</dfn> = <a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_14AtomicOrderingEh" title='llvm::IRBuilder::CreateAtomicRMW' data-ref="_ZN4llvm9IRBuilder15CreateAtomicRMWENS_13AtomicRMWInst5BinOpEPNS_5ValueES4_NS_14AtomicOrderingEh">CreateAtomicRMW</a>(<a class="local col8 ref" href="#208Op" title='Op' data-ref="208Op">Op</a>, <a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>,</td></tr>
<tr><th id="800">800</th><td>                                                 <a class="local col1 ref" href="#211NewOperand" title='NewOperand' data-ref="211NewOperand">NewOperand</a>, <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>());</td></tr>
<tr><th id="801">801</th><td></td></tr>
<tr><th id="802">802</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="213FinalOldResult" title='FinalOldResult' data-type='llvm::Value *' data-ref="213FinalOldResult">FinalOldResult</dfn> = <a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="803">803</th><td>      <a class="local col7 ref" href="#207Builder" title='Builder' data-ref="207Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col2 ref" href="#212NewAI" title='NewAI' data-ref="212NewAI">NewAI</a>, <a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col9 ref" href="#209PMV" title='PMV' data-ref="209PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="804">804</th><td>  <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col3 ref" href="#213FinalOldResult" title='FinalOldResult' data-ref="213FinalOldResult">FinalOldResult</a>);</td></tr>
<tr><th id="805">805</th><td>  <a class="local col6 ref" href="#206AI" title='AI' data-ref="206AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="806">806</th><td>  <b>return</b> <a class="local col2 ref" href="#212NewAI" title='NewAI' data-ref="212NewAI">NewAI</a>;</td></tr>
<tr><th id="807">807</th><td>}</td></tr>
<tr><th id="808">808</th><td></td></tr>
<tr><th id="809">809</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandPartwordCmpXchg' data-type='void (anonymous namespace)::AtomicExpand::expandPartwordCmpXchg(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandPartwordCmpXchg</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col4 decl" id="214CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="214CI">CI</dfn>) {</td></tr>
<tr><th id="810">810</th><td>  <i>// The basic idea here is that we're expanding a cmpxchg of a</i></td></tr>
<tr><th id="811">811</th><td><i>  // smaller memory size up to a word-sized cmpxchg. To do this, we</i></td></tr>
<tr><th id="812">812</th><td><i>  // need to add a retry-loop for strong cmpxchg, so that</i></td></tr>
<tr><th id="813">813</th><td><i>  // modifications to other parts of the word don't cause a spurious</i></td></tr>
<tr><th id="814">814</th><td><i>  // failure.</i></td></tr>
<tr><th id="815">815</th><td><i></i></td></tr>
<tr><th id="816">816</th><td><i>  // This generates code like the following:</i></td></tr>
<tr><th id="817">817</th><td><i>  //     [[Setup mask values PMV.*]]</i></td></tr>
<tr><th id="818">818</th><td><i>  //     %NewVal_Shifted = shl i32 %NewVal, %PMV.ShiftAmt</i></td></tr>
<tr><th id="819">819</th><td><i>  //     %Cmp_Shifted = shl i32 %Cmp, %PMV.ShiftAmt</i></td></tr>
<tr><th id="820">820</th><td><i>  //     %InitLoaded = load i32* %addr</i></td></tr>
<tr><th id="821">821</th><td><i>  //     %InitLoaded_MaskOut = and i32 %InitLoaded, %PMV.Inv_Mask</i></td></tr>
<tr><th id="822">822</th><td><i>  //     br partword.cmpxchg.loop</i></td></tr>
<tr><th id="823">823</th><td><i>  // partword.cmpxchg.loop:</i></td></tr>
<tr><th id="824">824</th><td><i>  //     %Loaded_MaskOut = phi i32 [ %InitLoaded_MaskOut, %entry ],</i></td></tr>
<tr><th id="825">825</th><td><i>  //        [ %OldVal_MaskOut, %partword.cmpxchg.failure ]</i></td></tr>
<tr><th id="826">826</th><td><i>  //     %FullWord_NewVal = or i32 %Loaded_MaskOut, %NewVal_Shifted</i></td></tr>
<tr><th id="827">827</th><td><i>  //     %FullWord_Cmp = or i32 %Loaded_MaskOut, %Cmp_Shifted</i></td></tr>
<tr><th id="828">828</th><td><i>  //     %NewCI = cmpxchg i32* %PMV.AlignedAddr, i32 %FullWord_Cmp,</i></td></tr>
<tr><th id="829">829</th><td><i>  //        i32 %FullWord_NewVal success_ordering failure_ordering</i></td></tr>
<tr><th id="830">830</th><td><i>  //     %OldVal = extractvalue { i32, i1 } %NewCI, 0</i></td></tr>
<tr><th id="831">831</th><td><i>  //     %Success = extractvalue { i32, i1 } %NewCI, 1</i></td></tr>
<tr><th id="832">832</th><td><i>  //     br i1 %Success, label %partword.cmpxchg.end,</i></td></tr>
<tr><th id="833">833</th><td><i>  //        label %partword.cmpxchg.failure</i></td></tr>
<tr><th id="834">834</th><td><i>  // partword.cmpxchg.failure:</i></td></tr>
<tr><th id="835">835</th><td><i>  //     %OldVal_MaskOut = and i32 %OldVal, %PMV.Inv_Mask</i></td></tr>
<tr><th id="836">836</th><td><i>  //     %ShouldContinue = icmp ne i32 %Loaded_MaskOut, %OldVal_MaskOut</i></td></tr>
<tr><th id="837">837</th><td><i>  //     br i1 %ShouldContinue, label %partword.cmpxchg.loop,</i></td></tr>
<tr><th id="838">838</th><td><i>  //         label %partword.cmpxchg.end</i></td></tr>
<tr><th id="839">839</th><td><i>  // partword.cmpxchg.end:</i></td></tr>
<tr><th id="840">840</th><td><i>  //    %tmp1 = lshr i32 %OldVal, %PMV.ShiftAmt</i></td></tr>
<tr><th id="841">841</th><td><i>  //    %FinalOldVal = trunc i32 %tmp1 to i8</i></td></tr>
<tr><th id="842">842</th><td><i>  //    %tmp2 = insertvalue { i8, i1 } undef, i8 %FinalOldVal, 0</i></td></tr>
<tr><th id="843">843</th><td><i>  //    %Res = insertvalue { i8, i1 } %25, i1 %Success, 1</i></td></tr>
<tr><th id="844">844</th><td></td></tr>
<tr><th id="845">845</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="215Addr" title='Addr' data-type='llvm::Value *' data-ref="215Addr">Addr</dfn> = <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv" title='llvm::AtomicCmpXchgInst::getPointerOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="846">846</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="216Cmp" title='Cmp' data-type='llvm::Value *' data-ref="216Cmp">Cmp</dfn> = <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>();</td></tr>
<tr><th id="847">847</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="217NewVal" title='NewVal' data-type='llvm::Value *' data-ref="217NewVal">NewVal</dfn> = <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv" title='llvm::AtomicCmpXchgInst::getNewValOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv">getNewValOperand</a>();</td></tr>
<tr><th id="848">848</th><td></td></tr>
<tr><th id="849">849</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col8 decl" id="218BB" title='BB' data-type='llvm::BasicBlock *' data-ref="218BB">BB</dfn> = <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="850">850</th><td>  <a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col9 decl" id="219F" title='F' data-type='llvm::Function *' data-ref="219F">F</dfn> = <a class="local col8 ref" href="#218BB" title='BB' data-ref="218BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>();</td></tr>
<tr><th id="851">851</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col0 decl" id="220Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="220Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>);</td></tr>
<tr><th id="852">852</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col1 decl" id="221Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="221Ctx">Ctx</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase10getContextEv" title='llvm::IRBuilderBase::getContext' data-ref="_ZNK4llvm13IRBuilderBase10getContextEv">getContext</a>();</td></tr>
<tr><th id="853">853</th><td></td></tr>
<tr><th id="854">854</th><td>  <em>const</em> <em>int</em> <dfn class="local col2 decl" id="222WordSize" title='WordSize' data-type='const int' data-ref="222WordSize">WordSize</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>;</td></tr>
<tr><th id="855">855</th><td></td></tr>
<tr><th id="856">856</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col3 decl" id="223EndBB" title='EndBB' data-type='llvm::BasicBlock *' data-ref="223EndBB">EndBB</dfn> =</td></tr>
<tr><th id="857">857</th><td>      <a class="local col8 ref" href="#218BB" title='BB' data-ref="218BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE" title='llvm::BasicBlock::splitBasicBlock' data-ref="_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE">splitBasicBlock</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/ADT/ilist_node.h.html#_ZN4llvm15ilist_node_impl11getIteratorEv" title='llvm::ilist_node_impl::getIterator' data-ref="_ZN4llvm15ilist_node_impl11getIteratorEv">getIterator</a>(), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"partword.cmpxchg.end"</q>);</td></tr>
<tr><th id="858">858</th><td>  <em>auto</em> <dfn class="local col4 decl" id="224FailureBB" title='FailureBB' data-type='llvm::BasicBlock *' data-ref="224FailureBB">FailureBB</dfn> =</td></tr>
<tr><th id="859">859</th><td>      <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col1 ref" href="#221Ctx" title='Ctx' data-ref="221Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"partword.cmpxchg.failure"</q>, <a class="local col9 ref" href="#219F" title='F' data-ref="219F">F</a>, <a class="local col3 ref" href="#223EndBB" title='EndBB' data-ref="223EndBB">EndBB</a>);</td></tr>
<tr><th id="860">860</th><td>  <em>auto</em> <dfn class="local col5 decl" id="225LoopBB" title='LoopBB' data-type='llvm::BasicBlock *' data-ref="225LoopBB">LoopBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col1 ref" href="#221Ctx" title='Ctx' data-ref="221Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"partword.cmpxchg.loop"</q>, <a class="local col9 ref" href="#219F" title='F' data-ref="219F">F</a>, <a class="local col4 ref" href="#224FailureBB" title='FailureBB' data-ref="224FailureBB">FailureBB</a>);</td></tr>
<tr><th id="861">861</th><td></td></tr>
<tr><th id="862">862</th><td>  <i>// The split call above "helpfully" added a branch at the end of BB</i></td></tr>
<tr><th id="863">863</th><td><i>  // (to the wrong place).</i></td></tr>
<tr><th id="864">864</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../include/c++/7/bits/stl_iterator_base_funcs.h.html#_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE" title='std::prev' data-ref="_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE">prev</a>(<a class="local col8 ref" href="#218BB" title='BB' data-ref="218BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>())<a class="ref" href="../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratorptEv" title='llvm::ilist_iterator::operator-&gt;' data-ref="_ZNK4llvm14ilist_iteratorptEv">-&gt;</a><a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="865">865</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col8 ref" href="#218BB" title='BB' data-ref="218BB">BB</a>);</td></tr>
<tr><th id="866">866</th><td></td></tr>
<tr><th id="867">867</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="local col6 decl" id="226PMV" title='PMV' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="226PMV">PMV</dfn> = <a class="tu ref" href="#_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-use='c' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</a>(</td></tr>
<tr><th id="868">868</th><td>      <span class='refarg'><a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a></span>, <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>, <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col5 ref" href="#215Addr" title='Addr' data-ref="215Addr">Addr</a>, <a class="local col2 ref" href="#222WordSize" title='WordSize' data-ref="222WordSize">WordSize</a>);</td></tr>
<tr><th id="869">869</th><td></td></tr>
<tr><th id="870">870</th><td>  <i>// Shift the incoming values over, into the right location in the word.</i></td></tr>
<tr><th id="871">871</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="227NewVal_Shifted" title='NewVal_Shifted' data-type='llvm::Value *' data-ref="227NewVal_Shifted">NewVal_Shifted</dfn> =</td></tr>
<tr><th id="872">872</th><td>      <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(<a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col7 ref" href="#217NewVal" title='NewVal' data-ref="217NewVal">NewVal</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>), <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>);</td></tr>
<tr><th id="873">873</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="228Cmp_Shifted" title='Cmp_Shifted' data-type='llvm::Value *' data-ref="228Cmp_Shifted">Cmp_Shifted</dfn> =</td></tr>
<tr><th id="874">874</th><td>      <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(<a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col6 ref" href="#216Cmp" title='Cmp' data-ref="216Cmp">Cmp</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>), <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>);</td></tr>
<tr><th id="875">875</th><td></td></tr>
<tr><th id="876">876</th><td>  <i>// Load the entire current word, and mask into place the expected and new</i></td></tr>
<tr><th id="877">877</th><td><i>  // values</i></td></tr>
<tr><th id="878">878</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col9 decl" id="229InitLoaded" title='InitLoaded' data-type='llvm::LoadInst *' data-ref="229InitLoaded">InitLoaded</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateLoad</a>(<a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>);</td></tr>
<tr><th id="879">879</th><td>  <a class="local col9 ref" href="#229InitLoaded" title='InitLoaded' data-ref="229InitLoaded">InitLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst11setVolatileEb" title='llvm::LoadInst::setVolatile' data-ref="_ZN4llvm8LoadInst11setVolatileEb">setVolatile</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv" title='llvm::AtomicCmpXchgInst::isVolatile' data-ref="_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv">isVolatile</a>());</td></tr>
<tr><th id="880">880</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="230InitLoaded_MaskOut" title='InitLoaded_MaskOut' data-type='llvm::Value *' data-ref="230InitLoaded_MaskOut">InitLoaded_MaskOut</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col9 ref" href="#229InitLoaded" title='InitLoaded' data-ref="229InitLoaded">InitLoaded</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>);</td></tr>
<tr><th id="881">881</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col5 ref" href="#225LoopBB" title='LoopBB' data-ref="225LoopBB">LoopBB</a>);</td></tr>
<tr><th id="882">882</th><td></td></tr>
<tr><th id="883">883</th><td>  <i>// partword.cmpxchg.loop:</i></td></tr>
<tr><th id="884">884</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col5 ref" href="#225LoopBB" title='LoopBB' data-ref="225LoopBB">LoopBB</a>);</td></tr>
<tr><th id="885">885</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col1 decl" id="231Loaded_MaskOut" title='Loaded_MaskOut' data-type='llvm::PHINode *' data-ref="231Loaded_MaskOut">Loaded_MaskOut</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>, <var>2</var>);</td></tr>
<tr><th id="886">886</th><td>  <a class="local col1 ref" href="#231Loaded_MaskOut" title='Loaded_MaskOut' data-ref="231Loaded_MaskOut">Loaded_MaskOut</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col0 ref" href="#230InitLoaded_MaskOut" title='InitLoaded_MaskOut' data-ref="230InitLoaded_MaskOut">InitLoaded_MaskOut</a>, <a class="local col8 ref" href="#218BB" title='BB' data-ref="218BB">BB</a>);</td></tr>
<tr><th id="887">887</th><td></td></tr>
<tr><th id="888">888</th><td>  <i>// Mask/Or the expected and new values into place in the loaded word.</i></td></tr>
<tr><th id="889">889</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="232FullWord_NewVal" title='FullWord_NewVal' data-type='llvm::Value *' data-ref="232FullWord_NewVal">FullWord_NewVal</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col1 ref" href="#231Loaded_MaskOut" title='Loaded_MaskOut' data-ref="231Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col7 ref" href="#227NewVal_Shifted" title='NewVal_Shifted' data-ref="227NewVal_Shifted">NewVal_Shifted</a>);</td></tr>
<tr><th id="890">890</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="233FullWord_Cmp" title='FullWord_Cmp' data-type='llvm::Value *' data-ref="233FullWord_Cmp">FullWord_Cmp</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateOr' data-ref="_ZN4llvm9IRBuilder8CreateOrEPNS_5ValueES2_RKNS_5TwineE">CreateOr</a>(<a class="local col1 ref" href="#231Loaded_MaskOut" title='Loaded_MaskOut' data-ref="231Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col8 ref" href="#228Cmp_Shifted" title='Cmp_Shifted' data-ref="228Cmp_Shifted">Cmp_Shifted</a>);</td></tr>
<tr><th id="891">891</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col4 decl" id="234NewCI" title='NewCI' data-type='llvm::AtomicCmpXchgInst *' data-ref="234NewCI">NewCI</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h" title='llvm::IRBuilder::CreateAtomicCmpXchg' data-ref="_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h">CreateAtomicCmpXchg</a>(</td></tr>
<tr><th id="892">892</th><td>      <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>, <a class="local col3 ref" href="#233FullWord_Cmp" title='FullWord_Cmp' data-ref="233FullWord_Cmp">FullWord_Cmp</a>, <a class="local col2 ref" href="#232FullWord_NewVal" title='FullWord_NewVal' data-ref="232FullWord_NewVal">FullWord_NewVal</a>, <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>(),</td></tr>
<tr><th id="893">893</th><td>      <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv" title='llvm::AtomicCmpXchgInst::getFailureOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv">getFailureOrdering</a>(), <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst14getSyncScopeIDEv" title='llvm::AtomicCmpXchgInst::getSyncScopeID' data-ref="_ZNK4llvm17AtomicCmpXchgInst14getSyncScopeIDEv">getSyncScopeID</a>());</td></tr>
<tr><th id="894">894</th><td>  <a class="local col4 ref" href="#234NewCI" title='NewCI' data-ref="234NewCI">NewCI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst11setVolatileEb" title='llvm::AtomicCmpXchgInst::setVolatile' data-ref="_ZN4llvm17AtomicCmpXchgInst11setVolatileEb">setVolatile</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv" title='llvm::AtomicCmpXchgInst::isVolatile' data-ref="_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv">isVolatile</a>());</td></tr>
<tr><th id="895">895</th><td>  <i>// When we're building a strong cmpxchg, we need a loop, so you</i></td></tr>
<tr><th id="896">896</th><td><i>  // might think we could use a weak cmpxchg inside. But, using strong</i></td></tr>
<tr><th id="897">897</th><td><i>  // allows the below comparison for ShouldContinue, and we're</i></td></tr>
<tr><th id="898">898</th><td><i>  // expecting the underlying cmpxchg to be a machine instruction,</i></td></tr>
<tr><th id="899">899</th><td><i>  // which is strong anyways.</i></td></tr>
<tr><th id="900">900</th><td>  <a class="local col4 ref" href="#234NewCI" title='NewCI' data-ref="234NewCI">NewCI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst7setWeakEb" title='llvm::AtomicCmpXchgInst::setWeak' data-ref="_ZN4llvm17AtomicCmpXchgInst7setWeakEb">setWeak</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>());</td></tr>
<tr><th id="901">901</th><td></td></tr>
<tr><th id="902">902</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="235OldVal" title='OldVal' data-type='llvm::Value *' data-ref="235OldVal">OldVal</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col4 ref" href="#234NewCI" title='NewCI' data-ref="234NewCI">NewCI</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="903">903</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="236Success" title='Success' data-type='llvm::Value *' data-ref="236Success">Success</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col4 ref" href="#234NewCI" title='NewCI' data-ref="234NewCI">NewCI</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="904">904</th><td></td></tr>
<tr><th id="905">905</th><td>  <b>if</b> (<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>())</td></tr>
<tr><th id="906">906</th><td>    <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col3 ref" href="#223EndBB" title='EndBB' data-ref="223EndBB">EndBB</a>);</td></tr>
<tr><th id="907">907</th><td>  <b>else</b></td></tr>
<tr><th id="908">908</th><td>    <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col6 ref" href="#236Success" title='Success' data-ref="236Success">Success</a>, <a class="local col3 ref" href="#223EndBB" title='EndBB' data-ref="223EndBB">EndBB</a>, <a class="local col4 ref" href="#224FailureBB" title='FailureBB' data-ref="224FailureBB">FailureBB</a>);</td></tr>
<tr><th id="909">909</th><td></td></tr>
<tr><th id="910">910</th><td>  <i>// partword.cmpxchg.failure:</i></td></tr>
<tr><th id="911">911</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col4 ref" href="#224FailureBB" title='FailureBB' data-ref="224FailureBB">FailureBB</a>);</td></tr>
<tr><th id="912">912</th><td>  <i>// Upon failure, verify that the masked-out part of the loaded value</i></td></tr>
<tr><th id="913">913</th><td><i>  // has been modified.  If it didn't, abort the cmpxchg, since the</i></td></tr>
<tr><th id="914">914</th><td><i>  // masked-in part must've.</i></td></tr>
<tr><th id="915">915</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="237OldVal_MaskOut" title='OldVal_MaskOut' data-type='llvm::Value *' data-ref="237OldVal_MaskOut">OldVal_MaskOut</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col5 ref" href="#235OldVal" title='OldVal' data-ref="235OldVal">OldVal</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Inv_Mask" title='(anonymous namespace)::PartwordMaskValues::Inv_Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Inv_Mask">Inv_Mask</a>);</td></tr>
<tr><th id="916">916</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="238ShouldContinue" title='ShouldContinue' data-type='llvm::Value *' data-ref="238ShouldContinue">ShouldContinue</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpNE' data-ref="_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpNE</a>(<a class="local col1 ref" href="#231Loaded_MaskOut" title='Loaded_MaskOut' data-ref="231Loaded_MaskOut">Loaded_MaskOut</a>, <a class="local col7 ref" href="#237OldVal_MaskOut" title='OldVal_MaskOut' data-ref="237OldVal_MaskOut">OldVal_MaskOut</a>);</td></tr>
<tr><th id="917">917</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col8 ref" href="#238ShouldContinue" title='ShouldContinue' data-ref="238ShouldContinue">ShouldContinue</a>, <a class="local col5 ref" href="#225LoopBB" title='LoopBB' data-ref="225LoopBB">LoopBB</a>, <a class="local col3 ref" href="#223EndBB" title='EndBB' data-ref="223EndBB">EndBB</a>);</td></tr>
<tr><th id="918">918</th><td></td></tr>
<tr><th id="919">919</th><td>  <i>// Add the second value to the phi from above</i></td></tr>
<tr><th id="920">920</th><td>  <a class="local col1 ref" href="#231Loaded_MaskOut" title='Loaded_MaskOut' data-ref="231Loaded_MaskOut">Loaded_MaskOut</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col7 ref" href="#237OldVal_MaskOut" title='OldVal_MaskOut' data-ref="237OldVal_MaskOut">OldVal_MaskOut</a>, <a class="local col4 ref" href="#224FailureBB" title='FailureBB' data-ref="224FailureBB">FailureBB</a>);</td></tr>
<tr><th id="921">921</th><td></td></tr>
<tr><th id="922">922</th><td>  <i>// partword.cmpxchg.end:</i></td></tr>
<tr><th id="923">923</th><td>  <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_11InstructionE">SetInsertPoint</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>);</td></tr>
<tr><th id="924">924</th><td></td></tr>
<tr><th id="925">925</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="239FinalOldVal" title='FinalOldVal' data-type='llvm::Value *' data-ref="239FinalOldVal">FinalOldVal</dfn> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="926">926</th><td>      <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col5 ref" href="#235OldVal" title='OldVal' data-ref="235OldVal">OldVal</a>, <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col6 ref" href="#226PMV" title='PMV' data-ref="226PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="927">927</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="240Res" title='Res' data-type='llvm::Value *' data-ref="240Res">Res</dfn> = <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="928">928</th><td>  <a class="local col0 ref" href="#240Res" title='Res' data-ref="240Res">Res</a> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col0 ref" href="#240Res" title='Res' data-ref="240Res">Res</a>, <a class="local col9 ref" href="#239FinalOldVal" title='FinalOldVal' data-ref="239FinalOldVal">FinalOldVal</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="929">929</th><td>  <a class="local col0 ref" href="#240Res" title='Res' data-ref="240Res">Res</a> = <a class="local col0 ref" href="#220Builder" title='Builder' data-ref="220Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col0 ref" href="#240Res" title='Res' data-ref="240Res">Res</a>, <a class="local col6 ref" href="#236Success" title='Success' data-ref="236Success">Success</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="930">930</th><td></td></tr>
<tr><th id="931">931</th><td>  <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col0 ref" href="#240Res" title='Res' data-ref="240Res">Res</a>);</td></tr>
<tr><th id="932">932</th><td>  <a class="local col4 ref" href="#214CI" title='CI' data-ref="214CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="933">933</th><td>}</td></tr>
<tr><th id="934">934</th><td></td></tr>
<tr><th id="935">935</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicOpToLLSC(llvm::Instruction * I, llvm::Type * ResultType, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20expandAtomicOpToLLSCEPN4llvm11InstructionEPNS1_4TypeEPNS1_5ValueENS1_14AtomicOrderingENS1_12function_refIFS7_RNS1_9IR13568581">expandAtomicOpToLLSC</dfn>(</td></tr>
<tr><th id="936">936</th><td>    <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col1 decl" id="241I" title='I' data-type='llvm::Instruction *' data-ref="241I">I</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col2 decl" id="242ResultType" title='ResultType' data-type='llvm::Type *' data-ref="242ResultType">ResultType</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="243Addr" title='Addr' data-type='llvm::Value *' data-ref="243Addr">Addr</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col4 decl" id="244MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="244MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="937">937</th><td>    <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col5 decl" id="245PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="245PerformOp">PerformOp</dfn>) {</td></tr>
<tr><th id="938">938</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col6 decl" id="246Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="246Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col1 ref" href="#241I" title='I' data-ref="241I">I</a>);</td></tr>
<tr><th id="939">939</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="247Loaded" title='Loaded' data-type='llvm::Value *' data-ref="247Loaded">Loaded</dfn> =</td></tr>
<tr><th id="940">940</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536" title='(anonymous namespace)::AtomicExpand::insertRMWLLSCLoop' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536">insertRMWLLSCLoop</a>(<span class='refarg'><a class="local col6 ref" href="#246Builder" title='Builder' data-ref="246Builder">Builder</a></span>, <a class="local col2 ref" href="#242ResultType" title='ResultType' data-ref="242ResultType">ResultType</a>, <a class="local col3 ref" href="#243Addr" title='Addr' data-ref="243Addr">Addr</a>, <a class="local col4 ref" href="#244MemOpOrder" title='MemOpOrder' data-ref="244MemOpOrder">MemOpOrder</a>, <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#119" title='llvm::function_ref&lt;llvm::Value *(llvm::IRBuilder&lt;llvm::ConstantFolder, llvm::IRBuilderDefaultInserter&gt; &amp;, llvm::Value *)&gt;::function_ref' data-ref="_ZN4llvm12function_refIFPNS_5ValueERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEES2_EEC1ERKS9_"></a><a class="local col5 ref" href="#245PerformOp" title='PerformOp' data-ref="245PerformOp">PerformOp</a>);</td></tr>
<tr><th id="941">941</th><td></td></tr>
<tr><th id="942">942</th><td>  <a class="local col1 ref" href="#241I" title='I' data-ref="241I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col7 ref" href="#247Loaded" title='Loaded' data-ref="247Loaded">Loaded</a>);</td></tr>
<tr><th id="943">943</th><td>  <a class="local col1 ref" href="#241I" title='I' data-ref="241I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="944">944</th><td>}</td></tr>
<tr><th id="945">945</th><td></td></tr>
<tr><th id="946">946</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToMaskedIntrinsic' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicRMWToMaskedIntrinsic(llvm::AtomicRMWInst * AI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand32expandAtomicRMWToMaskedIntrinsicEPN4llvm13AtomicRMWInstE">expandAtomicRMWToMaskedIntrinsic</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col8 decl" id="248AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="248AI">AI</dfn>) {</td></tr>
<tr><th id="947">947</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col9 decl" id="249Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="249Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>);</td></tr>
<tr><th id="948">948</th><td></td></tr>
<tr><th id="949">949</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="local col0 decl" id="250PMV" title='PMV' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="250PMV">PMV</dfn> =</td></tr>
<tr><th id="950">950</th><td>      <a class="tu ref" href="#_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-use='c' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</a>(<span class='refarg'><a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a></span>, <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>, <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="951">951</th><td>                       <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>);</td></tr>
<tr><th id="952">952</th><td></td></tr>
<tr><th id="953">953</th><td>  <i>// The value operand must be sign-extended for signed min/max so that the</i></td></tr>
<tr><th id="954">954</th><td><i>  // target's signed comparison instructions can be used. Otherwise, just</i></td></tr>
<tr><th id="955">955</th><td><i>  // zero-ext.</i></td></tr>
<tr><th id="956">956</th><td>  <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction::CastOps" title='llvm::Instruction::CastOps' data-ref="llvm::Instruction::CastOps">CastOps</a> <dfn class="local col1 decl" id="251CastOp" title='CastOp' data-type='Instruction::CastOps' data-ref="251CastOp">CastOp</dfn> = <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../include/llvm/IR/Instruction.def.html#185" title='llvm::Instruction::CastOps::ZExt' data-ref="llvm::Instruction::CastOps::ZExt">ZExt</a>;</td></tr>
<tr><th id="957">957</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col2 decl" id="252RMWOp" title='RMWOp' data-type='AtomicRMWInst::BinOp' data-ref="252RMWOp">RMWOp</dfn> = <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>();</td></tr>
<tr><th id="958">958</th><td>  <b>if</b> (<a class="local col2 ref" href="#252RMWOp" title='RMWOp' data-ref="252RMWOp">RMWOp</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Max" title='llvm::AtomicRMWInst::BinOp::Max' data-ref="llvm::AtomicRMWInst::BinOp::Max">Max</a> || <a class="local col2 ref" href="#252RMWOp" title='RMWOp' data-ref="252RMWOp">RMWOp</a> == <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Min" title='llvm::AtomicRMWInst::BinOp::Min' data-ref="llvm::AtomicRMWInst::BinOp::Min">Min</a>)</td></tr>
<tr><th id="959">959</th><td>    <a class="local col1 ref" href="#251CastOp" title='CastOp' data-ref="251CastOp">CastOp</a> = <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a>::<a class="enum" href="../../include/llvm/IR/Instruction.def.html#186" title='llvm::Instruction::CastOps::SExt' data-ref="llvm::Instruction::CastOps::SExt">SExt</a>;</td></tr>
<tr><th id="960">960</th><td></td></tr>
<tr><th id="961">961</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="253ValOperand_Shifted" title='ValOperand_Shifted' data-type='llvm::Value *' data-ref="253ValOperand_Shifted">ValOperand_Shifted</dfn> = <a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(</td></tr>
<tr><th id="962">962</th><td>      <a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateCast' data-ref="_ZN4llvm9IRBuilder10CreateCastENS_11Instruction7CastOpsEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateCast</a>(<a class="local col1 ref" href="#251CastOp" title='CastOp' data-ref="251CastOp">CastOp</a>, <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>(), <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>),</td></tr>
<tr><th id="963">963</th><td>      <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"ValOperand_Shifted"</q>);</td></tr>
<tr><th id="964">964</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="254OldResult" title='OldResult' data-type='llvm::Value *' data-ref="254OldResult">OldResult</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase28emitMaskedAtomicRMWIntrinsicERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_13AtomicRMWInstEPNS6593602" title='llvm::TargetLoweringBase::emitMaskedAtomicRMWIntrinsic' data-ref="_ZNK4llvm18TargetLoweringBase28emitMaskedAtomicRMWIntrinsicERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_13AtomicRMWInstEPNS6593602">emitMaskedAtomicRMWIntrinsic</a>(</td></tr>
<tr><th id="965">965</th><td>      <span class='refarg'><a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a></span>, <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>, <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>, <a class="local col3 ref" href="#253ValOperand_Shifted" title='ValOperand_Shifted' data-ref="253ValOperand_Shifted">ValOperand_Shifted</a>, <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a>, <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>,</td></tr>
<tr><th id="966">966</th><td>      <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>());</td></tr>
<tr><th id="967">967</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="255FinalOldResult" title='FinalOldResult' data-type='llvm::Value *' data-ref="255FinalOldResult">FinalOldResult</dfn> = <a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="968">968</th><td>      <a class="local col9 ref" href="#249Builder" title='Builder' data-ref="249Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col4 ref" href="#254OldResult" title='OldResult' data-ref="254OldResult">OldResult</a>, <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col0 ref" href="#250PMV" title='PMV' data-ref="250PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="969">969</th><td>  <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col5 ref" href="#255FinalOldResult" title='FinalOldResult' data-ref="255FinalOldResult">FinalOldResult</a>);</td></tr>
<tr><th id="970">970</th><td>  <a class="local col8 ref" href="#248AI" title='AI' data-ref="248AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="971">971</th><td>}</td></tr>
<tr><th id="972">972</th><td></td></tr>
<tr><th id="973">973</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchgToMaskedIntrinsic' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicCmpXchgToMaskedIntrinsic(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchgToMaskedIntrinsic</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col6 decl" id="256CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="256CI">CI</dfn>) {</td></tr>
<tr><th id="974">974</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col7 decl" id="257Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="257Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>);</td></tr>
<tr><th id="975">975</th><td></td></tr>
<tr><th id="976">976</th><td>  <a class="tu type" href="#(anonymousnamespace)::PartwordMaskValues" title='(anonymous namespace)::PartwordMaskValues' data-ref="(anonymousnamespace)::PartwordMaskValues">PartwordMaskValues</a> <dfn class="local col8 decl" id="258PMV" title='PMV' data-type='(anonymous namespace)::PartwordMaskValues' data-ref="258PMV">PMV</dfn> = <a class="tu ref" href="#_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj" title='createMaskInstrs' data-use='c' data-ref="_ZL16createMaskInstrsRN4llvm9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionEPNS_4TypeEPNS_5ValueEj">createMaskInstrs</a>(</td></tr>
<tr><th id="977">977</th><td>      <span class='refarg'><a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a></span>, <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>, <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv" title='llvm::AtomicCmpXchgInst::getPointerOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv">getPointerOperand</a>(),</td></tr>
<tr><th id="978">978</th><td>      <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>);</td></tr>
<tr><th id="979">979</th><td></td></tr>
<tr><th id="980">980</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="259CmpVal_Shifted" title='CmpVal_Shifted' data-type='llvm::Value *' data-ref="259CmpVal_Shifted">CmpVal_Shifted</dfn> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(</td></tr>
<tr><th id="981">981</th><td>      <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>(), <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>), <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>,</td></tr>
<tr><th id="982">982</th><td>      <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"CmpVal_Shifted"</q>);</td></tr>
<tr><th id="983">983</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="260NewVal_Shifted" title='NewVal_Shifted' data-type='llvm::Value *' data-ref="260NewVal_Shifted">NewVal_Shifted</dfn> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb" title='llvm::IRBuilder::CreateShl' data-ref="_ZN4llvm9IRBuilder9CreateShlEPNS_5ValueES2_RKNS_5TwineEbb">CreateShl</a>(</td></tr>
<tr><th id="984">984</th><td>      <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateZExt' data-ref="_ZN4llvm9IRBuilder10CreateZExtEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateZExt</a>(<a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv" title='llvm::AtomicCmpXchgInst::getNewValOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv">getNewValOperand</a>(), <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::WordType" title='(anonymous namespace)::PartwordMaskValues::WordType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::WordType">WordType</a>), <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>,</td></tr>
<tr><th id="985">985</th><td>      <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"NewVal_Shifted"</q>);</td></tr>
<tr><th id="986">986</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="261OldVal" title='OldVal' data-type='llvm::Value *' data-ref="261OldVal">OldVal</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase32emitMaskedAtomicCmpXchgIntrinsicERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_17AtomicCmpXchg14180356" title='llvm::TargetLoweringBase::emitMaskedAtomicCmpXchgIntrinsic' data-ref="_ZNK4llvm18TargetLoweringBase32emitMaskedAtomicCmpXchgIntrinsicERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_17AtomicCmpXchg14180356">emitMaskedAtomicCmpXchgIntrinsic</a>(</td></tr>
<tr><th id="987">987</th><td>      <span class='refarg'><a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a></span>, <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>, <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::AlignedAddr" title='(anonymous namespace)::PartwordMaskValues::AlignedAddr' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::AlignedAddr">AlignedAddr</a>, <a class="local col9 ref" href="#259CmpVal_Shifted" title='CmpVal_Shifted' data-ref="259CmpVal_Shifted">CmpVal_Shifted</a>, <a class="local col0 ref" href="#260NewVal_Shifted" title='NewVal_Shifted' data-ref="260NewVal_Shifted">NewVal_Shifted</a>, <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a>,</td></tr>
<tr><th id="988">988</th><td>      <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>());</td></tr>
<tr><th id="989">989</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="262FinalOldVal" title='FinalOldVal' data-type='llvm::Value *' data-ref="262FinalOldVal">FinalOldVal</dfn> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateTrunc' data-ref="_ZN4llvm9IRBuilder11CreateTruncEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateTrunc</a>(</td></tr>
<tr><th id="990">990</th><td>      <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb" title='llvm::IRBuilder::CreateLShr' data-ref="_ZN4llvm9IRBuilder10CreateLShrEPNS_5ValueES2_RKNS_5TwineEb">CreateLShr</a>(<a class="local col1 ref" href="#261OldVal" title='OldVal' data-ref="261OldVal">OldVal</a>, <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ShiftAmt" title='(anonymous namespace)::PartwordMaskValues::ShiftAmt' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ShiftAmt">ShiftAmt</a>), <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::ValueType" title='(anonymous namespace)::PartwordMaskValues::ValueType' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::ValueType">ValueType</a>);</td></tr>
<tr><th id="991">991</th><td></td></tr>
<tr><th id="992">992</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="263Res" title='Res' data-type='llvm::Value *' data-ref="263Res">Res</dfn> = <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="993">993</th><td>  <a class="local col3 ref" href="#263Res" title='Res' data-ref="263Res">Res</a> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col3 ref" href="#263Res" title='Res' data-ref="263Res">Res</a>, <a class="local col2 ref" href="#262FinalOldVal" title='FinalOldVal' data-ref="262FinalOldVal">FinalOldVal</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="994">994</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="264Success" title='Success' data-type='llvm::Value *' data-ref="264Success">Success</dfn> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpEQ' data-ref="_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE">CreateICmpEQ</a>(</td></tr>
<tr><th id="995">995</th><td>      <a class="local col9 ref" href="#259CmpVal_Shifted" title='CmpVal_Shifted' data-ref="259CmpVal_Shifted">CmpVal_Shifted</a>, <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateAnd' data-ref="_ZN4llvm9IRBuilder9CreateAndEPNS_5ValueES2_RKNS_5TwineE">CreateAnd</a>(<a class="local col1 ref" href="#261OldVal" title='OldVal' data-ref="261OldVal">OldVal</a>, <a class="local col8 ref" href="#258PMV" title='PMV' data-ref="258PMV">PMV</a>.<a class="tu ref" href="#(anonymousnamespace)::PartwordMaskValues::Mask" title='(anonymous namespace)::PartwordMaskValues::Mask' data-use='r' data-ref="(anonymousnamespace)::PartwordMaskValues::Mask">Mask</a>), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"Success"</q>);</td></tr>
<tr><th id="996">996</th><td>  <a class="local col3 ref" href="#263Res" title='Res' data-ref="263Res">Res</a> = <a class="local col7 ref" href="#257Builder" title='Builder' data-ref="257Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col3 ref" href="#263Res" title='Res' data-ref="263Res">Res</a>, <a class="local col4 ref" href="#264Success" title='Success' data-ref="264Success">Success</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="997">997</th><td></td></tr>
<tr><th id="998">998</th><td>  <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col3 ref" href="#263Res" title='Res' data-ref="263Res">Res</a>);</td></tr>
<tr><th id="999">999</th><td>  <a class="local col6 ref" href="#256CI" title='CI' data-ref="256CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1000">1000</th><td>}</td></tr>
<tr><th id="1001">1001</th><td></td></tr>
<tr><th id="1002">1002</th><td><a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536" title='(anonymous namespace)::AtomicExpand::insertRMWLLSCLoop' data-type='llvm::Value * (anonymous namespace)::AtomicExpand::insertRMWLLSCLoop(IRBuilder&lt;&gt; &amp; Builder, llvm::Type * ResultTy, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand17insertRMWLLSCLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueENS1_7857536">insertRMWLLSCLoop</dfn>(</td></tr>
<tr><th id="1003">1003</th><td>    <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col5 decl" id="265Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="265Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col6 decl" id="266ResultTy" title='ResultTy' data-type='llvm::Type *' data-ref="266ResultTy">ResultTy</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="267Addr" title='Addr' data-type='llvm::Value *' data-ref="267Addr">Addr</dfn>,</td></tr>
<tr><th id="1004">1004</th><td>    <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col8 decl" id="268MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="268MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="1005">1005</th><td>    <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col9 decl" id="269PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="269PerformOp">PerformOp</dfn>) {</td></tr>
<tr><th id="1006">1006</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col0 decl" id="270Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="270Ctx">Ctx</dfn> = <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase10getContextEv" title='llvm::IRBuilderBase::getContext' data-ref="_ZNK4llvm13IRBuilderBase10getContextEv">getContext</a>();</td></tr>
<tr><th id="1007">1007</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col1 decl" id="271BB" title='BB' data-type='llvm::BasicBlock *' data-ref="271BB">BB</dfn> = <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase14GetInsertBlockEv" title='llvm::IRBuilderBase::GetInsertBlock' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertBlockEv">GetInsertBlock</a>();</td></tr>
<tr><th id="1008">1008</th><td>  <a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col2 decl" id="272F" title='F' data-type='llvm::Function *' data-ref="272F">F</dfn> = <a class="local col1 ref" href="#271BB" title='BB' data-ref="271BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>();</td></tr>
<tr><th id="1009">1009</th><td></td></tr>
<tr><th id="1010">1010</th><td>  <i>// Given: atomicrmw some_op iN* %addr, iN %incr ordering</i></td></tr>
<tr><th id="1011">1011</th><td><i>  //</i></td></tr>
<tr><th id="1012">1012</th><td><i>  // The standard expansion we produce is:</i></td></tr>
<tr><th id="1013">1013</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1014">1014</th><td><i>  // atomicrmw.start:</i></td></tr>
<tr><th id="1015">1015</th><td><i>  //     %loaded = @load.linked(%addr)</i></td></tr>
<tr><th id="1016">1016</th><td><i>  //     %new = some_op iN %loaded, %incr</i></td></tr>
<tr><th id="1017">1017</th><td><i>  //     %stored = @store_conditional(%new, %addr)</i></td></tr>
<tr><th id="1018">1018</th><td><i>  //     %try_again = icmp i32 ne %stored, 0</i></td></tr>
<tr><th id="1019">1019</th><td><i>  //     br i1 %try_again, label %loop, label %atomicrmw.end</i></td></tr>
<tr><th id="1020">1020</th><td><i>  // atomicrmw.end:</i></td></tr>
<tr><th id="1021">1021</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1022">1022</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col3 decl" id="273ExitBB" title='ExitBB' data-type='llvm::BasicBlock *' data-ref="273ExitBB">ExitBB</dfn> =</td></tr>
<tr><th id="1023">1023</th><td>      <a class="local col1 ref" href="#271BB" title='BB' data-ref="271BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE" title='llvm::BasicBlock::splitBasicBlock' data-ref="_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE">splitBasicBlock</a>(<a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase14GetInsertPointEv" title='llvm::IRBuilderBase::GetInsertPoint' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertPointEv">GetInsertPoint</a>(), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"atomicrmw.end"</q>);</td></tr>
<tr><th id="1024">1024</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col4 decl" id="274LoopBB" title='LoopBB' data-type='llvm::BasicBlock *' data-ref="274LoopBB">LoopBB</dfn> =  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col0 ref" href="#270Ctx" title='Ctx' data-ref="270Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"atomicrmw.start"</q>, <a class="local col2 ref" href="#272F" title='F' data-ref="272F">F</a>, <a class="local col3 ref" href="#273ExitBB" title='ExitBB' data-ref="273ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1025">1025</th><td></td></tr>
<tr><th id="1026">1026</th><td>  <i>// The split call above "helpfully" added a branch at the end of BB (to the</i></td></tr>
<tr><th id="1027">1027</th><td><i>  // wrong place).</i></td></tr>
<tr><th id="1028">1028</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../include/c++/7/bits/stl_iterator_base_funcs.h.html#_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE" title='std::prev' data-ref="_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE">prev</a>(<a class="local col1 ref" href="#271BB" title='BB' data-ref="271BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>())<a class="ref" href="../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratorptEv" title='llvm::ilist_iterator::operator-&gt;' data-ref="_ZNK4llvm14ilist_iteratorptEv">-&gt;</a><a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1029">1029</th><td>  <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col1 ref" href="#271BB" title='BB' data-ref="271BB">BB</a>);</td></tr>
<tr><th id="1030">1030</th><td>  <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col4 ref" href="#274LoopBB" title='LoopBB' data-ref="274LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1031">1031</th><td></td></tr>
<tr><th id="1032">1032</th><td>  <i>// Start the main loop block now that we've taken care of the preliminaries.</i></td></tr>
<tr><th id="1033">1033</th><td>  <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col4 ref" href="#274LoopBB" title='LoopBB' data-ref="274LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1034">1034</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="275Loaded" title='Loaded' data-type='llvm::Value *' data-ref="275Loaded">Loaded</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLoadLinked' data-ref="_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE">emitLoadLinked</a>(<span class='refarg'><a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a></span>, <a class="local col7 ref" href="#267Addr" title='Addr' data-ref="267Addr">Addr</a>, <a class="local col8 ref" href="#268MemOpOrder" title='MemOpOrder' data-ref="268MemOpOrder">MemOpOrder</a>);</td></tr>
<tr><th id="1035">1035</th><td></td></tr>
<tr><th id="1036">1036</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="276NewVal" title='NewVal' data-type='llvm::Value *' data-ref="276NewVal">NewVal</dfn> = <a class="local col9 ref" href="#269PerformOp" title='PerformOp' data-ref="269PerformOp">PerformOp</a><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">(<a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>, <a class="local col5 ref" href="#275Loaded" title='Loaded' data-ref="275Loaded">Loaded</a>)</a>;</td></tr>
<tr><th id="1037">1037</th><td></td></tr>
<tr><th id="1038">1038</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="277StoreSuccess" title='StoreSuccess' data-type='llvm::Value *' data-ref="277StoreSuccess">StoreSuccess</dfn> =</td></tr>
<tr><th id="1039">1039</th><td>      <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase20emitStoreConditionalERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES7_NS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitStoreConditional' data-ref="_ZNK4llvm18TargetLoweringBase20emitStoreConditionalERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES7_NS_14AtomicOrderingE">emitStoreConditional</a>(<span class='refarg'><a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a></span>, <a class="local col6 ref" href="#276NewVal" title='NewVal' data-ref="276NewVal">NewVal</a>, <a class="local col7 ref" href="#267Addr" title='Addr' data-ref="267Addr">Addr</a>, <a class="local col8 ref" href="#268MemOpOrder" title='MemOpOrder' data-ref="268MemOpOrder">MemOpOrder</a>);</td></tr>
<tr><th id="1040">1040</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="278TryAgain" title='TryAgain' data-type='llvm::Value *' data-ref="278TryAgain">TryAgain</dfn> = <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpNE' data-ref="_ZN4llvm9IRBuilder12CreateICmpNEEPNS_5ValueES2_RKNS_5TwineE">CreateICmpNE</a>(</td></tr>
<tr><th id="1041">1041</th><td>      <a class="local col7 ref" href="#277StoreSuccess" title='StoreSuccess' data-ref="277StoreSuccess">StoreSuccess</a>, <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::IntegerType" title='llvm::IntegerType' data-ref="llvm::IntegerType">IntegerType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11IntegerType3getERNS_11LLVMContextEj" title='llvm::IntegerType::get' data-ref="_ZN4llvm11IntegerType3getERNS_11LLVMContextEj">get</a>(<span class='refarg'><a class="local col0 ref" href="#270Ctx" title='Ctx' data-ref="270Ctx">Ctx</a></span>, <var>32</var>), <var>0</var>), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"tryagain"</q>);</td></tr>
<tr><th id="1042">1042</th><td>  <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col8 ref" href="#278TryAgain" title='TryAgain' data-ref="278TryAgain">TryAgain</a>, <a class="local col4 ref" href="#274LoopBB" title='LoopBB' data-ref="274LoopBB">LoopBB</a>, <a class="local col3 ref" href="#273ExitBB" title='ExitBB' data-ref="273ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1043">1043</th><td></td></tr>
<tr><th id="1044">1044</th><td>  <a class="local col5 ref" href="#265Builder" title='Builder' data-ref="265Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col3 ref" href="#273ExitBB" title='ExitBB' data-ref="273ExitBB">ExitBB</a>, <a class="local col3 ref" href="#273ExitBB" title='ExitBB' data-ref="273ExitBB">ExitBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1045">1045</th><td>  <b>return</b> <a class="local col5 ref" href="#275Loaded" title='Loaded' data-ref="275Loaded">Loaded</a>;</td></tr>
<tr><th id="1046">1046</th><td>}</td></tr>
<tr><th id="1047">1047</th><td></td></tr>
<tr><th id="1048">1048</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">/// Convert an atomic cmpxchg of a non-integral type to an integer cmpxchg of</i></td></tr>
<tr><th id="1049">1049</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">/// the equivalent bitwidth.  We used to not support pointer cmpxchg in the</i></td></tr>
<tr><th id="1050">1050</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">/// IR.  As a migration step, we convert back to what use to be the standard</i></td></tr>
<tr><th id="1051">1051</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">/// way to represent a pointer cmpxchg so that we can update backends one by</i></td></tr>
<tr><th id="1052">1052</th><td><i class="doc" data-doc="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">/// one.</i></td></tr>
<tr><th id="1053">1053</th><td><a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::convertCmpXchgToIntegerType' data-type='llvm::AtomicCmpXchgInst * (anonymous namespace)::AtomicExpand::convertCmpXchgToIntegerType(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27convertCmpXchgToIntegerTypeEPN4llvm17AtomicCmpXchgInstE">convertCmpXchgToIntegerType</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col9 decl" id="279CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="279CI">CI</dfn>) {</td></tr>
<tr><th id="1054">1054</th><td>  <em>auto</em> *<dfn class="local col0 decl" id="280M" title='M' data-type='llvm::Module *' data-ref="280M">M</dfn> = <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="1055">1055</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col1 decl" id="281NewTy" title='NewTy' data-type='llvm::Type *' data-ref="281NewTy">NewTy</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE" title='(anonymous namespace)::AtomicExpand::getCorrespondingIntegerType' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand27getCorrespondingIntegerTypeEPN4llvm4TypeERKNS1_10DataLayoutE">getCorrespondingIntegerType</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(),</td></tr>
<tr><th id="1056">1056</th><td>                                            <a class="local col0 ref" href="#280M" title='M' data-ref="280M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>());</td></tr>
<tr><th id="1057">1057</th><td></td></tr>
<tr><th id="1058">1058</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col2 decl" id="282Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="282Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>);</td></tr>
<tr><th id="1059">1059</th><td></td></tr>
<tr><th id="1060">1060</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="283Addr" title='Addr' data-type='llvm::Value *' data-ref="283Addr">Addr</dfn> = <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv" title='llvm::AtomicCmpXchgInst::getPointerOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="1061">1061</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col4 decl" id="284PT" title='PT' data-type='llvm::Type *' data-ref="284PT">PT</dfn> = <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::PointerType" title='llvm::PointerType' data-ref="llvm::PointerType">PointerType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm11PointerType3getEPNS_4TypeEj" title='llvm::PointerType::get' data-ref="_ZN4llvm11PointerType3getEPNS_4TypeEj">get</a>(<a class="local col1 ref" href="#281NewTy" title='NewTy' data-ref="281NewTy">NewTy</a>,</td></tr>
<tr><th id="1062">1062</th><td>                              <a class="local col3 ref" href="#283Addr" title='Addr' data-ref="283Addr">Addr</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>());</td></tr>
<tr><th id="1063">1063</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="285NewAddr" title='NewAddr' data-type='llvm::Value *' data-ref="285NewAddr">NewAddr</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col3 ref" href="#283Addr" title='Addr' data-ref="283Addr">Addr</a>, <a class="local col4 ref" href="#284PT" title='PT' data-ref="284PT">PT</a>);</td></tr>
<tr><th id="1064">1064</th><td></td></tr>
<tr><th id="1065">1065</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="286NewCmp" title='NewCmp' data-type='llvm::Value *' data-ref="286NewCmp">NewCmp</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreatePtrToInt' data-ref="_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePtrToInt</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>(), <a class="local col1 ref" href="#281NewTy" title='NewTy' data-ref="281NewTy">NewTy</a>);</td></tr>
<tr><th id="1066">1066</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="287NewNewVal" title='NewNewVal' data-type='llvm::Value *' data-ref="287NewNewVal">NewNewVal</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreatePtrToInt' data-ref="_ZN4llvm9IRBuilder14CreatePtrToIntEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreatePtrToInt</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv" title='llvm::AtomicCmpXchgInst::getNewValOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv">getNewValOperand</a>(), <a class="local col1 ref" href="#281NewTy" title='NewTy' data-ref="281NewTy">NewTy</a>);</td></tr>
<tr><th id="1067">1067</th><td></td></tr>
<tr><th id="1068">1068</th><td></td></tr>
<tr><th id="1069">1069</th><td>  <em>auto</em> *<dfn class="local col8 decl" id="288NewCI" title='NewCI' data-type='llvm::AtomicCmpXchgInst *' data-ref="288NewCI">NewCI</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h" title='llvm::IRBuilder::CreateAtomicCmpXchg' data-ref="_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h">CreateAtomicCmpXchg</a>(<a class="local col5 ref" href="#285NewAddr" title='NewAddr' data-ref="285NewAddr">NewAddr</a>, <a class="local col6 ref" href="#286NewCmp" title='NewCmp' data-ref="286NewCmp">NewCmp</a>, <a class="local col7 ref" href="#287NewNewVal" title='NewNewVal' data-ref="287NewNewVal">NewNewVal</a>,</td></tr>
<tr><th id="1070">1070</th><td>                                            <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>(),</td></tr>
<tr><th id="1071">1071</th><td>                                            <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv" title='llvm::AtomicCmpXchgInst::getFailureOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv">getFailureOrdering</a>(),</td></tr>
<tr><th id="1072">1072</th><td>                                            <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst14getSyncScopeIDEv" title='llvm::AtomicCmpXchgInst::getSyncScopeID' data-ref="_ZNK4llvm17AtomicCmpXchgInst14getSyncScopeIDEv">getSyncScopeID</a>());</td></tr>
<tr><th id="1073">1073</th><td>  <a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst11setVolatileEb" title='llvm::AtomicCmpXchgInst::setVolatile' data-ref="_ZN4llvm17AtomicCmpXchgInst11setVolatileEb">setVolatile</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv" title='llvm::AtomicCmpXchgInst::isVolatile' data-ref="_ZNK4llvm17AtomicCmpXchgInst10isVolatileEv">isVolatile</a>());</td></tr>
<tr><th id="1074">1074</th><td>  <a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst7setWeakEb" title='llvm::AtomicCmpXchgInst::setWeak' data-ref="_ZN4llvm17AtomicCmpXchgInst7setWeakEb">setWeak</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>());</td></tr>
<tr><th id="1075">1075</th><td>  <a class="macro" href="../../include/llvm/Support/Debug.h.html#122" title="do { if (::llvm::DebugFlag &amp;&amp; ::llvm::isCurrentDebugType(&quot;atomic-expand&quot;)) { dbgs() &lt;&lt; &quot;Replaced &quot; &lt;&lt; *CI &lt;&lt; &quot; with &quot; &lt;&lt; *NewCI &lt;&lt; &quot;\n&quot;; } } while (false)" data-ref="_M/LLVM_DEBUG">LLVM_DEBUG</a>(<a class="ref" href="../../include/llvm/Support/Debug.h.html#_ZN4llvm4dbgsEv" title='llvm::dbgs' data-ref="_ZN4llvm4dbgsEv">dbgs</a>() <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"Replaced "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>" with "</q> <a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE" title='llvm::operator&lt;&lt;' data-ref="_ZN4llvmlsERNS_11raw_ostreamERKNS_5ValueE">&lt;&lt;</a> *<a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a> <a class="ref" href="../../include/llvm/Support/raw_ostream.h.html#_ZN4llvm11raw_ostreamlsEPKc" title='llvm::raw_ostream::operator&lt;&lt;' data-ref="_ZN4llvm11raw_ostreamlsEPKc">&lt;&lt;</a> <q>"\n"</q>);</td></tr>
<tr><th id="1076">1076</th><td></td></tr>
<tr><th id="1077">1077</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="289OldVal" title='OldVal' data-type='llvm::Value *' data-ref="289OldVal">OldVal</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="1078">1078</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="290Succ" title='Succ' data-type='llvm::Value *' data-ref="290Succ">Succ</dfn> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="1079">1079</th><td></td></tr>
<tr><th id="1080">1080</th><td>  <a class="local col9 ref" href="#289OldVal" title='OldVal' data-ref="289OldVal">OldVal</a> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder14CreateIntToPtrEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateIntToPtr' data-ref="_ZN4llvm9IRBuilder14CreateIntToPtrEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateIntToPtr</a>(<a class="local col9 ref" href="#289OldVal" title='OldVal' data-ref="289OldVal">OldVal</a>, <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1081">1081</th><td></td></tr>
<tr><th id="1082">1082</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="291Res" title='Res' data-type='llvm::Value *' data-ref="291Res">Res</dfn> = <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1083">1083</th><td>  <a class="local col1 ref" href="#291Res" title='Res' data-ref="291Res">Res</a> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col1 ref" href="#291Res" title='Res' data-ref="291Res">Res</a>, <a class="local col9 ref" href="#289OldVal" title='OldVal' data-ref="289OldVal">OldVal</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="1084">1084</th><td>  <a class="local col1 ref" href="#291Res" title='Res' data-ref="291Res">Res</a> = <a class="local col2 ref" href="#282Builder" title='Builder' data-ref="282Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col1 ref" href="#291Res" title='Res' data-ref="291Res">Res</a>, <a class="local col0 ref" href="#290Succ" title='Succ' data-ref="290Succ">Succ</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="1085">1085</th><td></td></tr>
<tr><th id="1086">1086</th><td>  <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col1 ref" href="#291Res" title='Res' data-ref="291Res">Res</a>);</td></tr>
<tr><th id="1087">1087</th><td>  <a class="local col9 ref" href="#279CI" title='CI' data-ref="279CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1088">1088</th><td>  <b>return</b> <a class="local col8 ref" href="#288NewCI" title='NewCI' data-ref="288NewCI">NewCI</a>;</td></tr>
<tr><th id="1089">1089</th><td>}</td></tr>
<tr><th id="1090">1090</th><td></td></tr>
<tr><th id="1091">1091</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicCmpXchg(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchg</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col2 decl" id="292CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="292CI">CI</dfn>) {</td></tr>
<tr><th id="1092">1092</th><td>  <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col3 decl" id="293SuccessOrder" title='SuccessOrder' data-type='llvm::AtomicOrdering' data-ref="293SuccessOrder">SuccessOrder</dfn> = <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>();</td></tr>
<tr><th id="1093">1093</th><td>  <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col4 decl" id="294FailureOrder" title='FailureOrder' data-type='llvm::AtomicOrdering' data-ref="294FailureOrder">FailureOrder</dfn> = <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv" title='llvm::AtomicCmpXchgInst::getFailureOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv">getFailureOrdering</a>();</td></tr>
<tr><th id="1094">1094</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="295Addr" title='Addr' data-type='llvm::Value *' data-ref="295Addr">Addr</dfn> = <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv" title='llvm::AtomicCmpXchgInst::getPointerOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv">getPointerOperand</a>();</td></tr>
<tr><th id="1095">1095</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col6 decl" id="296BB" title='BB' data-type='llvm::BasicBlock *' data-ref="296BB">BB</dfn> = <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getParentEv" title='llvm::Instruction::getParent' data-ref="_ZN4llvm11Instruction9getParentEv">getParent</a>();</td></tr>
<tr><th id="1096">1096</th><td>  <a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col7 decl" id="297F" title='F' data-type='llvm::Function *' data-ref="297F">F</dfn> = <a class="local col6 ref" href="#296BB" title='BB' data-ref="296BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>();</td></tr>
<tr><th id="1097">1097</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col8 decl" id="298Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="298Ctx">Ctx</dfn> = <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>-&gt;<a class="ref" href="../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10getContextEv" title='llvm::Function::getContext' data-ref="_ZNK4llvm8Function10getContextEv">getContext</a>();</td></tr>
<tr><th id="1098">1098</th><td>  <i>// If shouldInsertFencesForAtomic() returns true, then the target does not</i></td></tr>
<tr><th id="1099">1099</th><td><i>  // want to deal with memory orders, and emitLeading/TrailingFence should take</i></td></tr>
<tr><th id="1100">1100</th><td><i>  // care of everything. Otherwise, emitLeading/TrailingFence are no-op and we</i></td></tr>
<tr><th id="1101">1101</th><td><i>  // should preserve the ordering.</i></td></tr>
<tr><th id="1102">1102</th><td>  <em>bool</em> <dfn class="local col9 decl" id="299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-type='bool' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase27shouldInsertFencesForAtomicEPKNS_11InstructionE" title='llvm::TargetLoweringBase::shouldInsertFencesForAtomic' data-ref="_ZNK4llvm18TargetLoweringBase27shouldInsertFencesForAtomicEPKNS_11InstructionE">shouldInsertFencesForAtomic</a>(<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>);</td></tr>
<tr><th id="1103">1103</th><td>  <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col0 decl" id="300MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="300MemOpOrder">MemOpOrder</dfn> =</td></tr>
<tr><th id="1104">1104</th><td>      <a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a> ? <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a> : <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a>;</td></tr>
<tr><th id="1105">1105</th><td></td></tr>
<tr><th id="1106">1106</th><td>  <i>// In implementations which use a barrier to achieve release semantics, we can</i></td></tr>
<tr><th id="1107">1107</th><td><i>  // delay emitting this barrier until we know a store is actually going to be</i></td></tr>
<tr><th id="1108">1108</th><td><i>  // attempted. The cost of this delay is that we need 2 copies of the block</i></td></tr>
<tr><th id="1109">1109</th><td><i>  // emitting the load-linked, affecting code size.</i></td></tr>
<tr><th id="1110">1110</th><td><i>  //</i></td></tr>
<tr><th id="1111">1111</th><td><i>  // Ideally, this logic would be unconditional except for the minsize check</i></td></tr>
<tr><th id="1112">1112</th><td><i>  // since in other cases the extra blocks naturally collapse down to the</i></td></tr>
<tr><th id="1113">1113</th><td><i>  // minimal loop. Unfortunately, this puts too much stress on later</i></td></tr>
<tr><th id="1114">1114</th><td><i>  // optimisations so we avoid emitting the extra logic in those cases too.</i></td></tr>
<tr><th id="1115">1115</th><td>  <em>bool</em> <dfn class="local col1 decl" id="301HasReleasedLoadBB" title='HasReleasedLoadBB' data-type='bool' data-ref="301HasReleasedLoadBB">HasReleasedLoadBB</dfn> = !<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>() &amp;&amp; <a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a> &amp;&amp;</td></tr>
<tr><th id="1116">1116</th><td>                           <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a> != <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a> &amp;&amp;</td></tr>
<tr><th id="1117">1117</th><td>                           <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a> != <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Acquire" title='llvm::AtomicOrdering::Acquire' data-ref="llvm::AtomicOrdering::Acquire">Acquire</a> &amp;&amp;</td></tr>
<tr><th id="1118">1118</th><td>                           !<a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>-&gt;<a class="ref" href="../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10hasMinSizeEv" title='llvm::Function::hasMinSize' data-ref="_ZNK4llvm8Function10hasMinSizeEv">hasMinSize</a>();</td></tr>
<tr><th id="1119">1119</th><td></td></tr>
<tr><th id="1120">1120</th><td>  <i>// There's no overhead for sinking the release barrier in a weak cmpxchg, so</i></td></tr>
<tr><th id="1121">1121</th><td><i>  // do it even on minsize.</i></td></tr>
<tr><th id="1122">1122</th><td>  <em>bool</em> <dfn class="local col2 decl" id="302UseUnconditionalReleaseBarrier" title='UseUnconditionalReleaseBarrier' data-type='bool' data-ref="302UseUnconditionalReleaseBarrier">UseUnconditionalReleaseBarrier</dfn> = <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>-&gt;<a class="ref" href="../../include/llvm/IR/Function.h.html#_ZNK4llvm8Function10hasMinSizeEv" title='llvm::Function::hasMinSize' data-ref="_ZNK4llvm8Function10hasMinSizeEv">hasMinSize</a>() &amp;&amp; !<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>();</td></tr>
<tr><th id="1123">1123</th><td></td></tr>
<tr><th id="1124">1124</th><td>  <i>// Given: cmpxchg some_op iN* %addr, iN %desired, iN %new success_ord fail_ord</i></td></tr>
<tr><th id="1125">1125</th><td><i>  //</i></td></tr>
<tr><th id="1126">1126</th><td><i>  // The full expansion we produce is:</i></td></tr>
<tr><th id="1127">1127</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1128">1128</th><td><i>  // cmpxchg.start:</i></td></tr>
<tr><th id="1129">1129</th><td><i>  //     %unreleasedload = @load.linked(%addr)</i></td></tr>
<tr><th id="1130">1130</th><td><i>  //     %should_store = icmp eq %unreleasedload, %desired</i></td></tr>
<tr><th id="1131">1131</th><td><i>  //     br i1 %should_store, label %cmpxchg.fencedstore,</i></td></tr>
<tr><th id="1132">1132</th><td><i>  //                          label %cmpxchg.nostore</i></td></tr>
<tr><th id="1133">1133</th><td><i>  // cmpxchg.releasingstore:</i></td></tr>
<tr><th id="1134">1134</th><td><i>  //     fence?</i></td></tr>
<tr><th id="1135">1135</th><td><i>  //     br label cmpxchg.trystore</i></td></tr>
<tr><th id="1136">1136</th><td><i>  // cmpxchg.trystore:</i></td></tr>
<tr><th id="1137">1137</th><td><i>  //     %loaded.trystore = phi [%unreleasedload, %releasingstore],</i></td></tr>
<tr><th id="1138">1138</th><td><i>  //                            [%releasedload, %cmpxchg.releasedload]</i></td></tr>
<tr><th id="1139">1139</th><td><i>  //     %stored = @store_conditional(%new, %addr)</i></td></tr>
<tr><th id="1140">1140</th><td><i>  //     %success = icmp eq i32 %stored, 0</i></td></tr>
<tr><th id="1141">1141</th><td><i>  //     br i1 %success, label %cmpxchg.success,</i></td></tr>
<tr><th id="1142">1142</th><td><i>  //                     label %cmpxchg.releasedload/%cmpxchg.failure</i></td></tr>
<tr><th id="1143">1143</th><td><i>  // cmpxchg.releasedload:</i></td></tr>
<tr><th id="1144">1144</th><td><i>  //     %releasedload = @load.linked(%addr)</i></td></tr>
<tr><th id="1145">1145</th><td><i>  //     %should_store = icmp eq %releasedload, %desired</i></td></tr>
<tr><th id="1146">1146</th><td><i>  //     br i1 %should_store, label %cmpxchg.trystore,</i></td></tr>
<tr><th id="1147">1147</th><td><i>  //                          label %cmpxchg.failure</i></td></tr>
<tr><th id="1148">1148</th><td><i>  // cmpxchg.success:</i></td></tr>
<tr><th id="1149">1149</th><td><i>  //     fence?</i></td></tr>
<tr><th id="1150">1150</th><td><i>  //     br label %cmpxchg.end</i></td></tr>
<tr><th id="1151">1151</th><td><i>  // cmpxchg.nostore:</i></td></tr>
<tr><th id="1152">1152</th><td><i>  //     %loaded.nostore = phi [%unreleasedload, %cmpxchg.start],</i></td></tr>
<tr><th id="1153">1153</th><td><i>  //                           [%releasedload,</i></td></tr>
<tr><th id="1154">1154</th><td><i>  //                               %cmpxchg.releasedload/%cmpxchg.trystore]</i></td></tr>
<tr><th id="1155">1155</th><td><i>  //     @load_linked_fail_balance()?</i></td></tr>
<tr><th id="1156">1156</th><td><i>  //     br label %cmpxchg.failure</i></td></tr>
<tr><th id="1157">1157</th><td><i>  // cmpxchg.failure:</i></td></tr>
<tr><th id="1158">1158</th><td><i>  //     fence?</i></td></tr>
<tr><th id="1159">1159</th><td><i>  //     br label %cmpxchg.end</i></td></tr>
<tr><th id="1160">1160</th><td><i>  // cmpxchg.end:</i></td></tr>
<tr><th id="1161">1161</th><td><i>  //     %loaded = phi [%loaded.nostore, %cmpxchg.failure],</i></td></tr>
<tr><th id="1162">1162</th><td><i>  //                   [%loaded.trystore, %cmpxchg.trystore]</i></td></tr>
<tr><th id="1163">1163</th><td><i>  //     %success = phi i1 [true, %cmpxchg.success], [false, %cmpxchg.failure]</i></td></tr>
<tr><th id="1164">1164</th><td><i>  //     %restmp = insertvalue { iN, i1 } undef, iN %loaded, 0</i></td></tr>
<tr><th id="1165">1165</th><td><i>  //     %res = insertvalue { iN, i1 } %restmp, i1 %success, 1</i></td></tr>
<tr><th id="1166">1166</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1167">1167</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col3 decl" id="303ExitBB" title='ExitBB' data-type='llvm::BasicBlock *' data-ref="303ExitBB">ExitBB</dfn> = <a class="local col6 ref" href="#296BB" title='BB' data-ref="296BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE" title='llvm::BasicBlock::splitBasicBlock' data-ref="_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE">splitBasicBlock</a>(<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/ADT/ilist_node.h.html#_ZN4llvm15ilist_node_impl11getIteratorEv" title='llvm::ilist_node_impl::getIterator' data-ref="_ZN4llvm15ilist_node_impl11getIteratorEv">getIterator</a>(), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.end"</q>);</td></tr>
<tr><th id="1168">1168</th><td>  <em>auto</em> <dfn class="local col4 decl" id="304FailureBB" title='FailureBB' data-type='llvm::BasicBlock *' data-ref="304FailureBB">FailureBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.failure"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1169">1169</th><td>  <em>auto</em> <dfn class="local col5 decl" id="305NoStoreBB" title='NoStoreBB' data-type='llvm::BasicBlock *' data-ref="305NoStoreBB">NoStoreBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.nostore"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a>);</td></tr>
<tr><th id="1170">1170</th><td>  <em>auto</em> <dfn class="local col6 decl" id="306SuccessBB" title='SuccessBB' data-type='llvm::BasicBlock *' data-ref="306SuccessBB">SuccessBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.success"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>);</td></tr>
<tr><th id="1171">1171</th><td>  <em>auto</em> <dfn class="local col7 decl" id="307ReleasedLoadBB" title='ReleasedLoadBB' data-type='llvm::BasicBlock *' data-ref="307ReleasedLoadBB">ReleasedLoadBB</dfn> =</td></tr>
<tr><th id="1172">1172</th><td>      <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.releasedload"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col6 ref" href="#306SuccessBB" title='SuccessBB' data-ref="306SuccessBB">SuccessBB</a>);</td></tr>
<tr><th id="1173">1173</th><td>  <em>auto</em> <dfn class="local col8 decl" id="308TryStoreBB" title='TryStoreBB' data-type='llvm::BasicBlock *' data-ref="308TryStoreBB">TryStoreBB</dfn> =</td></tr>
<tr><th id="1174">1174</th><td>      <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.trystore"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col7 ref" href="#307ReleasedLoadBB" title='ReleasedLoadBB' data-ref="307ReleasedLoadBB">ReleasedLoadBB</a>);</td></tr>
<tr><th id="1175">1175</th><td>  <em>auto</em> <dfn class="local col9 decl" id="309ReleasingStoreBB" title='ReleasingStoreBB' data-type='llvm::BasicBlock *' data-ref="309ReleasingStoreBB">ReleasingStoreBB</dfn> =</td></tr>
<tr><th id="1176">1176</th><td>      <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.fencedstore"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>);</td></tr>
<tr><th id="1177">1177</th><td>  <em>auto</em> <dfn class="local col0 decl" id="310StartBB" title='StartBB' data-type='llvm::BasicBlock *' data-ref="310StartBB">StartBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"cmpxchg.start"</q>, <a class="local col7 ref" href="#297F" title='F' data-ref="297F">F</a>, <a class="local col9 ref" href="#309ReleasingStoreBB" title='ReleasingStoreBB' data-ref="309ReleasingStoreBB">ReleasingStoreBB</a>);</td></tr>
<tr><th id="1178">1178</th><td></td></tr>
<tr><th id="1179">1179</th><td>  <i>// This grabs the DebugLoc from CI</i></td></tr>
<tr><th id="1180">1180</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col1 decl" id="311Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="311Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>);</td></tr>
<tr><th id="1181">1181</th><td></td></tr>
<tr><th id="1182">1182</th><td>  <i>// The split call above "helpfully" added a branch at the end of BB (to the</i></td></tr>
<tr><th id="1183">1183</th><td><i>  // wrong place), but we might want a fence too. It's easiest to just remove</i></td></tr>
<tr><th id="1184">1184</th><td><i>  // the branch entirely.</i></td></tr>
<tr><th id="1185">1185</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../include/c++/7/bits/stl_iterator_base_funcs.h.html#_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE" title='std::prev' data-ref="_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE">prev</a>(<a class="local col6 ref" href="#296BB" title='BB' data-ref="296BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>())<a class="ref" href="../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratorptEv" title='llvm::ilist_iterator::operator-&gt;' data-ref="_ZNK4llvm14ilist_iteratorptEv">-&gt;</a><a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1186">1186</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col6 ref" href="#296BB" title='BB' data-ref="296BB">BB</a>);</td></tr>
<tr><th id="1187">1187</th><td>  <b>if</b> (<a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a> &amp;&amp; <a class="local col2 ref" href="#302UseUnconditionalReleaseBarrier" title='UseUnconditionalReleaseBarrier' data-ref="302UseUnconditionalReleaseBarrier">UseUnconditionalReleaseBarrier</a>)</td></tr>
<tr><th id="1188">1188</th><td>    <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLeadingFence' data-ref="_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitLeadingFence</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>, <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a>);</td></tr>
<tr><th id="1189">1189</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col0 ref" href="#310StartBB" title='StartBB' data-ref="310StartBB">StartBB</a>);</td></tr>
<tr><th id="1190">1190</th><td></td></tr>
<tr><th id="1191">1191</th><td>  <i>// Start the main loop block now that we've taken care of the preliminaries.</i></td></tr>
<tr><th id="1192">1192</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col0 ref" href="#310StartBB" title='StartBB' data-ref="310StartBB">StartBB</a>);</td></tr>
<tr><th id="1193">1193</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="312UnreleasedLoad" title='UnreleasedLoad' data-type='llvm::Value *' data-ref="312UnreleasedLoad">UnreleasedLoad</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLoadLinked' data-ref="_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE">emitLoadLinked</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col5 ref" href="#295Addr" title='Addr' data-ref="295Addr">Addr</a>, <a class="local col0 ref" href="#300MemOpOrder" title='MemOpOrder' data-ref="300MemOpOrder">MemOpOrder</a>);</td></tr>
<tr><th id="1194">1194</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col3 decl" id="313ShouldStore" title='ShouldStore' data-type='llvm::Value *' data-ref="313ShouldStore">ShouldStore</dfn> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpEQ' data-ref="_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE">CreateICmpEQ</a>(</td></tr>
<tr><th id="1195">1195</th><td>      <a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>(), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"should_store"</q>);</td></tr>
<tr><th id="1196">1196</th><td></td></tr>
<tr><th id="1197">1197</th><td>  <i>// If the cmpxchg doesn't actually need any ordering when it fails, we can</i></td></tr>
<tr><th id="1198">1198</th><td><i>  // jump straight past that fence instruction (if it exists).</i></td></tr>
<tr><th id="1199">1199</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col3 ref" href="#313ShouldStore" title='ShouldStore' data-ref="313ShouldStore">ShouldStore</a>, <a class="local col9 ref" href="#309ReleasingStoreBB" title='ReleasingStoreBB' data-ref="309ReleasingStoreBB">ReleasingStoreBB</a>, <a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>);</td></tr>
<tr><th id="1200">1200</th><td></td></tr>
<tr><th id="1201">1201</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col9 ref" href="#309ReleasingStoreBB" title='ReleasingStoreBB' data-ref="309ReleasingStoreBB">ReleasingStoreBB</a>);</td></tr>
<tr><th id="1202">1202</th><td>  <b>if</b> (<a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a> &amp;&amp; !<a class="local col2 ref" href="#302UseUnconditionalReleaseBarrier" title='UseUnconditionalReleaseBarrier' data-ref="302UseUnconditionalReleaseBarrier">UseUnconditionalReleaseBarrier</a>)</td></tr>
<tr><th id="1203">1203</th><td>    <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLeadingFence' data-ref="_ZNK4llvm18TargetLoweringBase16emitLeadingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitLeadingFence</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>, <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a>);</td></tr>
<tr><th id="1204">1204</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>);</td></tr>
<tr><th id="1205">1205</th><td></td></tr>
<tr><th id="1206">1206</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>);</td></tr>
<tr><th id="1207">1207</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="314StoreSuccess" title='StoreSuccess' data-type='llvm::Value *' data-ref="314StoreSuccess">StoreSuccess</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase20emitStoreConditionalERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES7_NS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitStoreConditional' data-ref="_ZNK4llvm18TargetLoweringBase20emitStoreConditionalERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES7_NS_14AtomicOrderingE">emitStoreConditional</a>(</td></tr>
<tr><th id="1208">1208</th><td>      <span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv" title='llvm::AtomicCmpXchgInst::getNewValOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv">getNewValOperand</a>(), <a class="local col5 ref" href="#295Addr" title='Addr' data-ref="295Addr">Addr</a>, <a class="local col0 ref" href="#300MemOpOrder" title='MemOpOrder' data-ref="300MemOpOrder">MemOpOrder</a>);</td></tr>
<tr><th id="1209">1209</th><td>  <a class="local col4 ref" href="#314StoreSuccess" title='StoreSuccess' data-ref="314StoreSuccess">StoreSuccess</a> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpEQ' data-ref="_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE">CreateICmpEQ</a>(</td></tr>
<tr><th id="1210">1210</th><td>      <a class="local col4 ref" href="#314StoreSuccess" title='StoreSuccess' data-ref="314StoreSuccess">StoreSuccess</a>, <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE" title='llvm::Type::getInt32Ty' data-ref="_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE">getInt32Ty</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>), <var>0</var>), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"success"</q>);</td></tr>
<tr><th id="1211">1211</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col5 decl" id="315RetryBB" title='RetryBB' data-type='llvm::BasicBlock *' data-ref="315RetryBB">RetryBB</dfn> = <a class="local col1 ref" href="#301HasReleasedLoadBB" title='HasReleasedLoadBB' data-ref="301HasReleasedLoadBB">HasReleasedLoadBB</a> ? <a class="local col7 ref" href="#307ReleasedLoadBB" title='ReleasedLoadBB' data-ref="307ReleasedLoadBB">ReleasedLoadBB</a> : <a class="local col0 ref" href="#310StartBB" title='StartBB' data-ref="310StartBB">StartBB</a>;</td></tr>
<tr><th id="1212">1212</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col4 ref" href="#314StoreSuccess" title='StoreSuccess' data-ref="314StoreSuccess">StoreSuccess</a>, <a class="local col6 ref" href="#306SuccessBB" title='SuccessBB' data-ref="306SuccessBB">SuccessBB</a>,</td></tr>
<tr><th id="1213">1213</th><td>                       <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst6isWeakEv" title='llvm::AtomicCmpXchgInst::isWeak' data-ref="_ZNK4llvm17AtomicCmpXchgInst6isWeakEv">isWeak</a>() ? <a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a> : <a class="local col5 ref" href="#315RetryBB" title='RetryBB' data-ref="315RetryBB">RetryBB</a>);</td></tr>
<tr><th id="1214">1214</th><td></td></tr>
<tr><th id="1215">1215</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col7 ref" href="#307ReleasedLoadBB" title='ReleasedLoadBB' data-ref="307ReleasedLoadBB">ReleasedLoadBB</a>);</td></tr>
<tr><th id="1216">1216</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="316SecondLoad" title='SecondLoad' data-type='llvm::Value *' data-ref="316SecondLoad">SecondLoad</dfn>;</td></tr>
<tr><th id="1217">1217</th><td>  <b>if</b> (<a class="local col1 ref" href="#301HasReleasedLoadBB" title='HasReleasedLoadBB' data-ref="301HasReleasedLoadBB">HasReleasedLoadBB</a>) {</td></tr>
<tr><th id="1218">1218</th><td>    <a class="local col6 ref" href="#316SecondLoad" title='SecondLoad' data-ref="316SecondLoad">SecondLoad</a> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitLoadLinked' data-ref="_ZNK4llvm18TargetLoweringBase14emitLoadLinkedERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueENS_14AtomicOrderingE">emitLoadLinked</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col5 ref" href="#295Addr" title='Addr' data-ref="295Addr">Addr</a>, <a class="local col0 ref" href="#300MemOpOrder" title='MemOpOrder' data-ref="300MemOpOrder">MemOpOrder</a>);</td></tr>
<tr><th id="1219">1219</th><td>    <a class="local col3 ref" href="#313ShouldStore" title='ShouldStore' data-ref="313ShouldStore">ShouldStore</a> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE" title='llvm::IRBuilder::CreateICmpEQ' data-ref="_ZN4llvm9IRBuilder12CreateICmpEQEPNS_5ValueES2_RKNS_5TwineE">CreateICmpEQ</a>(<a class="local col6 ref" href="#316SecondLoad" title='SecondLoad' data-ref="316SecondLoad">SecondLoad</a>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>(),</td></tr>
<tr><th id="1220">1220</th><td>                                       <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"should_store"</q>);</td></tr>
<tr><th id="1221">1221</th><td></td></tr>
<tr><th id="1222">1222</th><td>    <i>// If the cmpxchg doesn't actually need any ordering when it fails, we can</i></td></tr>
<tr><th id="1223">1223</th><td><i>    // jump straight past that fence instruction (if it exists).</i></td></tr>
<tr><th id="1224">1224</th><td>    <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col3 ref" href="#313ShouldStore" title='ShouldStore' data-ref="313ShouldStore">ShouldStore</a>, <a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>, <a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>);</td></tr>
<tr><th id="1225">1225</th><td>  } <b>else</b></td></tr>
<tr><th id="1226">1226</th><td>    <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateUnreachableEv" title='llvm::IRBuilder::CreateUnreachable' data-ref="_ZN4llvm9IRBuilder17CreateUnreachableEv">CreateUnreachable</a>();</td></tr>
<tr><th id="1227">1227</th><td></td></tr>
<tr><th id="1228">1228</th><td>  <i>// Make sure later instructions don't get reordered with a fence if</i></td></tr>
<tr><th id="1229">1229</th><td><i>  // necessary.</i></td></tr>
<tr><th id="1230">1230</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col6 ref" href="#306SuccessBB" title='SuccessBB' data-ref="306SuccessBB">SuccessBB</a>);</td></tr>
<tr><th id="1231">1231</th><td>  <b>if</b> (<a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a>)</td></tr>
<tr><th id="1232">1232</th><td>    <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitTrailingFence' data-ref="_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitTrailingFence</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>, <a class="local col3 ref" href="#293SuccessOrder" title='SuccessOrder' data-ref="293SuccessOrder">SuccessOrder</a>);</td></tr>
<tr><th id="1233">1233</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1234">1234</th><td></td></tr>
<tr><th id="1235">1235</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>);</td></tr>
<tr><th id="1236">1236</th><td>  <i>// In the failing case, where we don't execute the store-conditional, the</i></td></tr>
<tr><th id="1237">1237</th><td><i>  // target might want to balance out the load-linked with a dedicated</i></td></tr>
<tr><th id="1238">1238</th><td><i>  // instruction (e.g., on ARM, clearing the exclusive monitor).</i></td></tr>
<tr><th id="1239">1239</th><td>  <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase33emitAtomicCmpXchgNoStoreLLBalanceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEE" title='llvm::TargetLoweringBase::emitAtomicCmpXchgNoStoreLLBalance' data-ref="_ZNK4llvm18TargetLoweringBase33emitAtomicCmpXchgNoStoreLLBalanceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEE">emitAtomicCmpXchgNoStoreLLBalance</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>);</td></tr>
<tr><th id="1240">1240</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a>);</td></tr>
<tr><th id="1241">1241</th><td></td></tr>
<tr><th id="1242">1242</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a>);</td></tr>
<tr><th id="1243">1243</th><td>  <b>if</b> (<a class="local col9 ref" href="#299ShouldInsertFencesForAtomic" title='ShouldInsertFencesForAtomic' data-ref="299ShouldInsertFencesForAtomic">ShouldInsertFencesForAtomic</a>)</td></tr>
<tr><th id="1244">1244</th><td>    <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE" title='llvm::TargetLoweringBase::emitTrailingFence' data-ref="_ZNK4llvm18TargetLoweringBase17emitTrailingFenceERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_11InstructionENS_14AtomicOrderingE">emitTrailingFence</a>(<span class='refarg'><a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a></span>, <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>, <a class="local col4 ref" href="#294FailureOrder" title='FailureOrder' data-ref="294FailureOrder">FailureOrder</a>);</td></tr>
<tr><th id="1245">1245</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1246">1246</th><td></td></tr>
<tr><th id="1247">1247</th><td>  <i>// Finally, we have control-flow based knowledge of whether the cmpxchg</i></td></tr>
<tr><th id="1248">1248</th><td><i>  // succeeded or not. We expose this to later passes by converting any</i></td></tr>
<tr><th id="1249">1249</th><td><i>  // subsequent "icmp eq/ne %loaded, %oldval" into a use of an appropriate</i></td></tr>
<tr><th id="1250">1250</th><td><i>  // PHI.</i></td></tr>
<tr><th id="1251">1251</th><td>  <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>, <a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1252">1252</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col7 decl" id="317Success" title='Success' data-type='llvm::PHINode *' data-ref="317Success">Success</dfn> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE" title='llvm::Type::getInt1Ty' data-ref="_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE">getInt1Ty</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>), <var>2</var>);</td></tr>
<tr><th id="1253">1253</th><td>  <a class="local col7 ref" href="#317Success" title='Success' data-ref="317Success">Success</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt7getTrueERNS_11LLVMContextE" title='llvm::ConstantInt::getTrue' data-ref="_ZN4llvm11ConstantInt7getTrueERNS_11LLVMContextE">getTrue</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>), <a class="local col6 ref" href="#306SuccessBB" title='SuccessBB' data-ref="306SuccessBB">SuccessBB</a>);</td></tr>
<tr><th id="1254">1254</th><td>  <a class="local col7 ref" href="#317Success" title='Success' data-ref="317Success">Success</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt8getFalseERNS_11LLVMContextE" title='llvm::ConstantInt::getFalse' data-ref="_ZN4llvm11ConstantInt8getFalseERNS_11LLVMContextE">getFalse</a>(<span class='refarg'><a class="local col8 ref" href="#298Ctx" title='Ctx' data-ref="298Ctx">Ctx</a></span>), <a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a>);</td></tr>
<tr><th id="1255">1255</th><td></td></tr>
<tr><th id="1256">1256</th><td>  <i>// Setup the builder so we can create any PHIs we need.</i></td></tr>
<tr><th id="1257">1257</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="318Loaded" title='Loaded' data-type='llvm::Value *' data-ref="318Loaded">Loaded</dfn>;</td></tr>
<tr><th id="1258">1258</th><td>  <b>if</b> (!<a class="local col1 ref" href="#301HasReleasedLoadBB" title='HasReleasedLoadBB' data-ref="301HasReleasedLoadBB">HasReleasedLoadBB</a>)</td></tr>
<tr><th id="1259">1259</th><td>    <a class="local col8 ref" href="#318Loaded" title='Loaded' data-ref="318Loaded">Loaded</a> = <a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>;</td></tr>
<tr><th id="1260">1260</th><td>  <b>else</b> {</td></tr>
<tr><th id="1261">1261</th><td>    <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>, <a class="local col8 ref" href="#308TryStoreBB" title='TryStoreBB' data-ref="308TryStoreBB">TryStoreBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1262">1262</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col9 decl" id="319TryStoreLoaded" title='TryStoreLoaded' data-type='llvm::PHINode *' data-ref="319TryStoreLoaded">TryStoreLoaded</dfn> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <var>2</var>);</td></tr>
<tr><th id="1263">1263</th><td>    <a class="local col9 ref" href="#319TryStoreLoaded" title='TryStoreLoaded' data-ref="319TryStoreLoaded">TryStoreLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>, <a class="local col9 ref" href="#309ReleasingStoreBB" title='ReleasingStoreBB' data-ref="309ReleasingStoreBB">ReleasingStoreBB</a>);</td></tr>
<tr><th id="1264">1264</th><td>    <a class="local col9 ref" href="#319TryStoreLoaded" title='TryStoreLoaded' data-ref="319TryStoreLoaded">TryStoreLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col6 ref" href="#316SecondLoad" title='SecondLoad' data-ref="316SecondLoad">SecondLoad</a>, <a class="local col7 ref" href="#307ReleasedLoadBB" title='ReleasedLoadBB' data-ref="307ReleasedLoadBB">ReleasedLoadBB</a>);</td></tr>
<tr><th id="1265">1265</th><td></td></tr>
<tr><th id="1266">1266</th><td>    <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>, <a class="local col5 ref" href="#305NoStoreBB" title='NoStoreBB' data-ref="305NoStoreBB">NoStoreBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1267">1267</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col0 decl" id="320NoStoreLoaded" title='NoStoreLoaded' data-type='llvm::PHINode *' data-ref="320NoStoreLoaded">NoStoreLoaded</dfn> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <var>2</var>);</td></tr>
<tr><th id="1268">1268</th><td>    <a class="local col0 ref" href="#320NoStoreLoaded" title='NoStoreLoaded' data-ref="320NoStoreLoaded">NoStoreLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>, <a class="local col0 ref" href="#310StartBB" title='StartBB' data-ref="310StartBB">StartBB</a>);</td></tr>
<tr><th id="1269">1269</th><td>    <a class="local col0 ref" href="#320NoStoreLoaded" title='NoStoreLoaded' data-ref="320NoStoreLoaded">NoStoreLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col6 ref" href="#316SecondLoad" title='SecondLoad' data-ref="316SecondLoad">SecondLoad</a>, <a class="local col7 ref" href="#307ReleasedLoadBB" title='ReleasedLoadBB' data-ref="307ReleasedLoadBB">ReleasedLoadBB</a>);</td></tr>
<tr><th id="1270">1270</th><td></td></tr>
<tr><th id="1271">1271</th><td>    <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>, <a class="ref fake" href="../../include/llvm/ADT/ilist_iterator.h.html#57" title='llvm::ilist_iterator&lt;llvm::ilist_detail::node_options&lt;llvm::Instruction, true, false, void&gt;, false, false&gt;::ilist_iterator' data-ref="_ZN4llvm14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEC1ERKS5_"></a><a class="ref" href="../../include/llvm/ADT/ilist_iterator.h.html#_ZN4llvm14ilist_iteratorppEv" title='llvm::ilist_iterator::operator++' data-ref="_ZN4llvm14ilist_iteratorppEv">++</a><a class="local col3 ref" href="#303ExitBB" title='ExitBB' data-ref="303ExitBB">ExitBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1272">1272</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col1 decl" id="321ExitLoaded" title='ExitLoaded' data-type='llvm::PHINode *' data-ref="321ExitLoaded">ExitLoaded</dfn> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col2 ref" href="#312UnreleasedLoad" title='UnreleasedLoad' data-ref="312UnreleasedLoad">UnreleasedLoad</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <var>2</var>);</td></tr>
<tr><th id="1273">1273</th><td>    <a class="local col1 ref" href="#321ExitLoaded" title='ExitLoaded' data-ref="321ExitLoaded">ExitLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col9 ref" href="#319TryStoreLoaded" title='TryStoreLoaded' data-ref="319TryStoreLoaded">TryStoreLoaded</a>, <a class="local col6 ref" href="#306SuccessBB" title='SuccessBB' data-ref="306SuccessBB">SuccessBB</a>);</td></tr>
<tr><th id="1274">1274</th><td>    <a class="local col1 ref" href="#321ExitLoaded" title='ExitLoaded' data-ref="321ExitLoaded">ExitLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col0 ref" href="#320NoStoreLoaded" title='NoStoreLoaded' data-ref="320NoStoreLoaded">NoStoreLoaded</a>, <a class="local col4 ref" href="#304FailureBB" title='FailureBB' data-ref="304FailureBB">FailureBB</a>);</td></tr>
<tr><th id="1275">1275</th><td></td></tr>
<tr><th id="1276">1276</th><td>    <a class="local col8 ref" href="#318Loaded" title='Loaded' data-ref="318Loaded">Loaded</a> = <a class="local col1 ref" href="#321ExitLoaded" title='ExitLoaded' data-ref="321ExitLoaded">ExitLoaded</a>;</td></tr>
<tr><th id="1277">1277</th><td>  }</td></tr>
<tr><th id="1278">1278</th><td></td></tr>
<tr><th id="1279">1279</th><td>  <i>// Look for any users of the cmpxchg that are just comparing the loaded value</i></td></tr>
<tr><th id="1280">1280</th><td><i>  // against the desired one, and replace them with the CFG-derived version.</i></td></tr>
<tr><th id="1281">1281</th><td>  <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a> *, <var>2</var>&gt; <a class="ref fake" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col2 decl" id="322PrunedInsts" title='PrunedInsts' data-type='SmallVector&lt;llvm::ExtractValueInst *, 2&gt;' data-ref="322PrunedInsts">PrunedInsts</dfn>;</td></tr>
<tr><th id="1282">1282</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col3 decl" id="323User" title='User' data-type='llvm::User *' data-ref="323User">User</dfn> : <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value5usersEv" title='llvm::Value::users' data-ref="_ZN4llvm5Value5usersEv">users</a>()) {</td></tr>
<tr><th id="1283">1283</th><td>    <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a> *<dfn class="local col4 decl" id="324EV" title='EV' data-type='llvm::ExtractValueInst *' data-ref="324EV">EV</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::ExtractValueInst" title='llvm::ExtractValueInst' data-ref="llvm::ExtractValueInst">ExtractValueInst</a>&gt;(<a class="local col3 ref" href="#323User" title='User' data-ref="323User">User</a>);</td></tr>
<tr><th id="1284">1284</th><td>    <b>if</b> (!<a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>)</td></tr>
<tr><th id="1285">1285</th><td>      <b>continue</b>;</td></tr>
<tr><th id="1286">1286</th><td></td></tr>
<tr><th id="1287">1287</th><td>    <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (EV-&gt;getNumIndices() == 1 &amp;&amp; EV-&gt;getIndices()[0] &lt;= 1 &amp;&amp; &quot;weird extraction from { iN, i1 }&quot;) ? void (0) : __assert_fail (&quot;EV-&gt;getNumIndices() == 1 &amp;&amp; EV-&gt;getIndices()[0] &lt;= 1 &amp;&amp; \&quot;weird extraction from { iN, i1 }\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1288, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst13getNumIndicesEv" title='llvm::ExtractValueInst::getNumIndices' data-ref="_ZNK4llvm16ExtractValueInst13getNumIndicesEv">getNumIndices</a>() == <var>1</var> &amp;&amp; <a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10getIndicesEv" title='llvm::ExtractValueInst::getIndices' data-ref="_ZNK4llvm16ExtractValueInst10getIndicesEv">getIndices</a>()[<var>0</var>] &lt;= <var>1</var> &amp;&amp;</td></tr>
<tr><th id="1288">1288</th><td>           <q>"weird extraction from { iN, i1 }"</q>);</td></tr>
<tr><th id="1289">1289</th><td></td></tr>
<tr><th id="1290">1290</th><td>    <b>if</b> (<a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm16ExtractValueInst10getIndicesEv" title='llvm::ExtractValueInst::getIndices' data-ref="_ZNK4llvm16ExtractValueInst10getIndicesEv">getIndices</a>()<a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>0</var>]</a> == <var>0</var>)</td></tr>
<tr><th id="1291">1291</th><td>      <a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col8 ref" href="#318Loaded" title='Loaded' data-ref="318Loaded">Loaded</a>);</td></tr>
<tr><th id="1292">1292</th><td>    <b>else</b></td></tr>
<tr><th id="1293">1293</th><td>      <a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col7 ref" href="#317Success" title='Success' data-ref="317Success">Success</a>);</td></tr>
<tr><th id="1294">1294</th><td></td></tr>
<tr><th id="1295">1295</th><td>    <a class="local col2 ref" href="#322PrunedInsts" title='PrunedInsts' data-ref="322PrunedInsts">PrunedInsts</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col4 ref" href="#324EV" title='EV' data-ref="324EV">EV</a>);</td></tr>
<tr><th id="1296">1296</th><td>  }</td></tr>
<tr><th id="1297">1297</th><td></td></tr>
<tr><th id="1298">1298</th><td>  <i>// We can remove the instructions now we're no longer iterating through them.</i></td></tr>
<tr><th id="1299">1299</th><td>  <b>for</b> (<em>auto</em> <dfn class="local col5 decl" id="325EV" title='EV' data-type='llvm::ExtractValueInst *' data-ref="325EV">EV</dfn> : <a class="local col2 ref" href="#322PrunedInsts" title='PrunedInsts' data-ref="322PrunedInsts">PrunedInsts</a>)</td></tr>
<tr><th id="1300">1300</th><td>    <a class="local col5 ref" href="#325EV" title='EV' data-ref="325EV">EV</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1301">1301</th><td></td></tr>
<tr><th id="1302">1302</th><td>  <b>if</b> (!<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value9use_emptyEv" title='llvm::Value::use_empty' data-ref="_ZNK4llvm5Value9use_emptyEv">use_empty</a>()) {</td></tr>
<tr><th id="1303">1303</th><td>    <i>// Some use of the full struct return that we don't understand has happened,</i></td></tr>
<tr><th id="1304">1304</th><td><i>    // so we've got to reconstruct it properly.</i></td></tr>
<tr><th id="1305">1305</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="326Res" title='Res' data-type='llvm::Value *' data-ref="326Res">Res</dfn>;</td></tr>
<tr><th id="1306">1306</th><td>    <a class="local col6 ref" href="#326Res" title='Res' data-ref="326Res">Res</a> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()), <a class="local col8 ref" href="#318Loaded" title='Loaded' data-ref="318Loaded">Loaded</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="1307">1307</th><td>    <a class="local col6 ref" href="#326Res" title='Res' data-ref="326Res">Res</a> = <a class="local col1 ref" href="#311Builder" title='Builder' data-ref="311Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col6 ref" href="#326Res" title='Res' data-ref="326Res">Res</a>, <a class="local col7 ref" href="#317Success" title='Success' data-ref="317Success">Success</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="1308">1308</th><td></td></tr>
<tr><th id="1309">1309</th><td>    <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col6 ref" href="#326Res" title='Res' data-ref="326Res">Res</a>);</td></tr>
<tr><th id="1310">1310</th><td>  }</td></tr>
<tr><th id="1311">1311</th><td></td></tr>
<tr><th id="1312">1312</th><td>  <a class="local col2 ref" href="#292CI" title='CI' data-ref="292CI">CI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1313">1313</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1314">1314</th><td>}</td></tr>
<tr><th id="1315">1315</th><td></td></tr>
<tr><th id="1316">1316</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::isIdempotentRMW' data-type='bool (anonymous namespace)::AtomicExpand::isIdempotentRMW(llvm::AtomicRMWInst * RMWI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand15isIdempotentRMWEPN4llvm13AtomicRMWInstE">isIdempotentRMW</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>* <dfn class="local col7 decl" id="327RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="327RMWI">RMWI</dfn>) {</td></tr>
<tr><th id="1317">1317</th><td>  <em>auto</em> <dfn class="local col8 decl" id="328C" title='C' data-type='llvm::ConstantInt *' data-ref="328C">C</dfn> = <a class="ref" href="../../include/llvm/Support/Casting.h.html#_ZN4llvm8dyn_castEPT0_" title='llvm::dyn_cast' data-ref="_ZN4llvm8dyn_castEPT0_">dyn_cast</a>&lt;<a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>&gt;(<a class="local col7 ref" href="#327RMWI" title='RMWI' data-ref="327RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>());</td></tr>
<tr><th id="1318">1318</th><td>  <b>if</b>(!<a class="local col8 ref" href="#328C" title='C' data-ref="328C">C</a>)</td></tr>
<tr><th id="1319">1319</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1320">1320</th><td></td></tr>
<tr><th id="1321">1321</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col9 decl" id="329Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="329Op">Op</dfn> = <a class="local col7 ref" href="#327RMWI" title='RMWI' data-ref="327RMWI">RMWI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>();</td></tr>
<tr><th id="1322">1322</th><td>  <b>switch</b>(<a class="local col9 ref" href="#329Op" title='Op' data-ref="329Op">Op</a>) {</td></tr>
<tr><th id="1323">1323</th><td>    <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Add" title='llvm::AtomicRMWInst::BinOp::Add' data-ref="llvm::AtomicRMWInst::BinOp::Add">Add</a>:</td></tr>
<tr><th id="1324">1324</th><td>    <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Sub" title='llvm::AtomicRMWInst::BinOp::Sub' data-ref="llvm::AtomicRMWInst::BinOp::Sub">Sub</a>:</td></tr>
<tr><th id="1325">1325</th><td>    <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a>:</td></tr>
<tr><th id="1326">1326</th><td>    <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a>:</td></tr>
<tr><th id="1327">1327</th><td>      <b>return</b> <a class="local col8 ref" href="#328C" title='C' data-ref="328C">C</a>-&gt;<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt6isZeroEv" title='llvm::ConstantInt::isZero' data-ref="_ZNK4llvm11ConstantInt6isZeroEv">isZero</a>();</td></tr>
<tr><th id="1328">1328</th><td>    <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>:</td></tr>
<tr><th id="1329">1329</th><td>      <b>return</b> <a class="local col8 ref" href="#328C" title='C' data-ref="328C">C</a>-&gt;<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZNK4llvm11ConstantInt10isMinusOneEv" title='llvm::ConstantInt::isMinusOne' data-ref="_ZNK4llvm11ConstantInt10isMinusOneEv">isMinusOne</a>();</td></tr>
<tr><th id="1330">1330</th><td>    <i>// FIXME: we could also treat Min/Max/UMin/UMax by the INT_MIN/INT_MAX/...</i></td></tr>
<tr><th id="1331">1331</th><td>    <b>default</b>:</td></tr>
<tr><th id="1332">1332</th><td>      <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1333">1333</th><td>  }</td></tr>
<tr><th id="1334">1334</th><td>}</td></tr>
<tr><th id="1335">1335</th><td></td></tr>
<tr><th id="1336">1336</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::simplifyIdempotentRMW' data-type='bool (anonymous namespace)::AtomicExpand::simplifyIdempotentRMW(llvm::AtomicRMWInst * RMWI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21simplifyIdempotentRMWEPN4llvm13AtomicRMWInstE">simplifyIdempotentRMW</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>* <dfn class="local col0 decl" id="330RMWI" title='RMWI' data-type='llvm::AtomicRMWInst *' data-ref="330RMWI">RMWI</dfn>) {</td></tr>
<tr><th id="1337">1337</th><td>  <b>if</b> (<em>auto</em> <dfn class="local col1 decl" id="331ResultingLoad" title='ResultingLoad' data-type='llvm::LoadInst *' data-ref="331ResultingLoad"><a class="local col1 ref" href="#331ResultingLoad" title='ResultingLoad' data-ref="331ResultingLoad">ResultingLoad</a></dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase32lowerIdempotentRMWIntoFencedLoadEPNS_13AtomicRMWInstE" title='llvm::TargetLoweringBase::lowerIdempotentRMWIntoFencedLoad' data-ref="_ZNK4llvm18TargetLoweringBase32lowerIdempotentRMWIntoFencedLoadEPNS_13AtomicRMWInstE">lowerIdempotentRMWIntoFencedLoad</a>(<a class="local col0 ref" href="#330RMWI" title='RMWI' data-ref="330RMWI">RMWI</a>)) {</td></tr>
<tr><th id="1338">1338</th><td>    <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicLoad' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19tryExpandAtomicLoadEPN4llvm8LoadInstE">tryExpandAtomicLoad</a>(<a class="local col1 ref" href="#331ResultingLoad" title='ResultingLoad' data-ref="331ResultingLoad">ResultingLoad</a>);</td></tr>
<tr><th id="1339">1339</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1340">1340</th><td>  }</td></tr>
<tr><th id="1341">1341</th><td>  <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1342">1342</th><td>}</td></tr>
<tr><th id="1343">1343</th><td></td></tr>
<tr><th id="1344">1344</th><td><a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739" title='(anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop' data-type='static llvm::Value * (anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop(IRBuilder&lt;&gt; &amp; Builder, llvm::Type * ResultTy, llvm::Value * Addr, llvm::AtomicOrdering MemOpOrder, function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt; PerformOp, CreateCmpXchgInstFun CreateCmpXchg)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739">insertRMWCmpXchgLoop</dfn>(</td></tr>
<tr><th id="1345">1345</th><td>    <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col2 decl" id="332Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="332Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col3 decl" id="333ResultTy" title='ResultTy' data-type='llvm::Type *' data-ref="333ResultTy">ResultTy</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="334Addr" title='Addr' data-type='llvm::Value *' data-ref="334Addr">Addr</dfn>,</td></tr>
<tr><th id="1346">1346</th><td>    <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col5 decl" id="335MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="335MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="1347">1347</th><td>    <a class="type" href="../../include/llvm/ADT/STLExtras.h.html#llvm::function_ref" title='llvm::function_ref' data-ref="llvm::function_ref">function_ref</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *(<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *)&gt; <dfn class="local col6 decl" id="336PerformOp" title='PerformOp' data-type='function_ref&lt;llvm::Value *(IRBuilder&lt;&gt; &amp;, llvm::Value *)&gt;' data-ref="336PerformOp">PerformOp</dfn>,</td></tr>
<tr><th id="1348">1348</th><td>    <a class="typedef" href="../../include/llvm/CodeGen/AtomicExpandUtils.h.html#llvm::CreateCmpXchgInstFun" title='llvm::CreateCmpXchgInstFun' data-type='function_ref&lt;void (IRBuilder&lt;&gt; &amp;, llvm::Value *, llvm::Value *, llvm::Value *, llvm::AtomicOrdering, llvm::Value *&amp;, llvm::Value *&amp;)&gt;' data-ref="llvm::CreateCmpXchgInstFun">CreateCmpXchgInstFun</a> <dfn class="local col7 decl" id="337CreateCmpXchg" title='CreateCmpXchg' data-type='CreateCmpXchgInstFun' data-ref="337CreateCmpXchg">CreateCmpXchg</dfn>) {</td></tr>
<tr><th id="1349">1349</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col8 decl" id="338Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="338Ctx">Ctx</dfn> = <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase10getContextEv" title='llvm::IRBuilderBase::getContext' data-ref="_ZNK4llvm13IRBuilderBase10getContextEv">getContext</a>();</td></tr>
<tr><th id="1350">1350</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col9 decl" id="339BB" title='BB' data-type='llvm::BasicBlock *' data-ref="339BB">BB</dfn> = <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase14GetInsertBlockEv" title='llvm::IRBuilderBase::GetInsertBlock' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertBlockEv">GetInsertBlock</a>();</td></tr>
<tr><th id="1351">1351</th><td>  <a class="type" href="../../include/llvm/IR/Function.h.html#llvm::Function" title='llvm::Function' data-ref="llvm::Function">Function</a> *<dfn class="local col0 decl" id="340F" title='F' data-type='llvm::Function *' data-ref="340F">F</dfn> = <a class="local col9 ref" href="#339BB" title='BB' data-ref="339BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock9getParentEv" title='llvm::BasicBlock::getParent' data-ref="_ZN4llvm10BasicBlock9getParentEv">getParent</a>();</td></tr>
<tr><th id="1352">1352</th><td></td></tr>
<tr><th id="1353">1353</th><td>  <i>// Given: atomicrmw some_op iN* %addr, iN %incr ordering</i></td></tr>
<tr><th id="1354">1354</th><td><i>  //</i></td></tr>
<tr><th id="1355">1355</th><td><i>  // The standard expansion we produce is:</i></td></tr>
<tr><th id="1356">1356</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1357">1357</th><td><i>  //     %init_loaded = load atomic iN* %addr</i></td></tr>
<tr><th id="1358">1358</th><td><i>  //     br label %loop</i></td></tr>
<tr><th id="1359">1359</th><td><i>  // loop:</i></td></tr>
<tr><th id="1360">1360</th><td><i>  //     %loaded = phi iN [ %init_loaded, %entry ], [ %new_loaded, %loop ]</i></td></tr>
<tr><th id="1361">1361</th><td><i>  //     %new = some_op iN %loaded, %incr</i></td></tr>
<tr><th id="1362">1362</th><td><i>  //     %pair = cmpxchg iN* %addr, iN %loaded, iN %new</i></td></tr>
<tr><th id="1363">1363</th><td><i>  //     %new_loaded = extractvalue { iN, i1 } %pair, 0</i></td></tr>
<tr><th id="1364">1364</th><td><i>  //     %success = extractvalue { iN, i1 } %pair, 1</i></td></tr>
<tr><th id="1365">1365</th><td><i>  //     br i1 %success, label %atomicrmw.end, label %loop</i></td></tr>
<tr><th id="1366">1366</th><td><i>  // atomicrmw.end:</i></td></tr>
<tr><th id="1367">1367</th><td><i>  //     [...]</i></td></tr>
<tr><th id="1368">1368</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col1 decl" id="341ExitBB" title='ExitBB' data-type='llvm::BasicBlock *' data-ref="341ExitBB">ExitBB</dfn> =</td></tr>
<tr><th id="1369">1369</th><td>      <a class="local col9 ref" href="#339BB" title='BB' data-ref="339BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE" title='llvm::BasicBlock::splitBasicBlock' data-ref="_ZN4llvm10BasicBlock15splitBasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEERKNS_5TwineE">splitBasicBlock</a>(<a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZNK4llvm13IRBuilderBase14GetInsertPointEv" title='llvm::IRBuilderBase::GetInsertPoint' data-ref="_ZNK4llvm13IRBuilderBase14GetInsertPointEv">GetInsertPoint</a>(), <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"atomicrmw.end"</q>);</td></tr>
<tr><th id="1370">1370</th><td>  <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a> *<dfn class="local col2 decl" id="342LoopBB" title='LoopBB' data-type='llvm::BasicBlock *' data-ref="342LoopBB">LoopBB</dfn> = <a class="type" href="../../include/llvm/IR/BasicBlock.h.html#llvm::BasicBlock" title='llvm::BasicBlock' data-ref="llvm::BasicBlock">BasicBlock</a>::<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_" title='llvm::BasicBlock::Create' data-ref="_ZN4llvm10BasicBlock6CreateERNS_11LLVMContextERKNS_5TwineEPNS_8FunctionEPS0_">Create</a>(<span class='refarg'><a class="local col8 ref" href="#338Ctx" title='Ctx' data-ref="338Ctx">Ctx</a></span>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"atomicrmw.start"</q>, <a class="local col0 ref" href="#340F" title='F' data-ref="340F">F</a>, <a class="local col1 ref" href="#341ExitBB" title='ExitBB' data-ref="341ExitBB">ExitBB</a>);</td></tr>
<tr><th id="1371">1371</th><td></td></tr>
<tr><th id="1372">1372</th><td>  <i>// The split call above "helpfully" added a branch at the end of BB (to the</i></td></tr>
<tr><th id="1373">1373</th><td><i>  // wrong place), but we want a load. It's easiest to just remove</i></td></tr>
<tr><th id="1374">1374</th><td><i>  // the branch entirely.</i></td></tr>
<tr><th id="1375">1375</th><td>  <span class="namespace">std::</span><a class="ref" href="../../../../include/c++/7/bits/stl_iterator_base_funcs.h.html#_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE" title='std::prev' data-ref="_ZSt4prevT_NSt15iterator_traitsIS_E15difference_typeE">prev</a>(<a class="local col9 ref" href="#339BB" title='BB' data-ref="339BB">BB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock3endEv" title='llvm::BasicBlock::end' data-ref="_ZN4llvm10BasicBlock3endEv">end</a>())<a class="ref" href="../../include/llvm/ADT/ilist_iterator.h.html#_ZNK4llvm14ilist_iteratorptEv" title='llvm::ilist_iterator::operator-&gt;' data-ref="_ZNK4llvm14ilist_iteratorptEv">-&gt;</a><a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1376">1376</th><td>  <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col9 ref" href="#339BB" title='BB' data-ref="339BB">BB</a>);</td></tr>
<tr><th id="1377">1377</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col3 decl" id="343InitLoaded" title='InitLoaded' data-type='llvm::LoadInst *' data-ref="343InitLoaded">InitLoaded</dfn> = <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateLoad' data-ref="_ZN4llvm9IRBuilder10CreateLoadEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateLoad</a>(<a class="local col3 ref" href="#333ResultTy" title='ResultTy' data-ref="333ResultTy">ResultTy</a>, <a class="local col4 ref" href="#334Addr" title='Addr' data-ref="334Addr">Addr</a>);</td></tr>
<tr><th id="1378">1378</th><td>  <i>// Atomics require at least natural alignment.</i></td></tr>
<tr><th id="1379">1379</th><td>  <a class="local col3 ref" href="#343InitLoaded" title='InitLoaded' data-ref="343InitLoaded">InitLoaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst12setAlignmentEj" title='llvm::LoadInst::setAlignment' data-ref="_ZN4llvm8LoadInst12setAlignmentEj">setAlignment</a>(<a class="local col3 ref" href="#333ResultTy" title='ResultTy' data-ref="333ResultTy">ResultTy</a>-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPrimitiveSizeInBitsEv" title='llvm::Type::getPrimitiveSizeInBits' data-ref="_ZNK4llvm4Type22getPrimitiveSizeInBitsEv">getPrimitiveSizeInBits</a>() / <var>8</var>);</td></tr>
<tr><th id="1380">1380</th><td>  <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE" title='llvm::IRBuilder::CreateBr' data-ref="_ZN4llvm9IRBuilder8CreateBrEPNS_10BasicBlockE">CreateBr</a>(<a class="local col2 ref" href="#342LoopBB" title='LoopBB' data-ref="342LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1381">1381</th><td></td></tr>
<tr><th id="1382">1382</th><td>  <i>// Start the main loop block now that we've taken care of the preliminaries.</i></td></tr>
<tr><th id="1383">1383</th><td>  <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockE">SetInsertPoint</a>(<a class="local col2 ref" href="#342LoopBB" title='LoopBB' data-ref="342LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1384">1384</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::PHINode" title='llvm::PHINode' data-ref="llvm::PHINode">PHINode</a> *<dfn class="local col4 decl" id="344Loaded" title='Loaded' data-type='llvm::PHINode *' data-ref="344Loaded">Loaded</dfn> = <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE" title='llvm::IRBuilder::CreatePHI' data-ref="_ZN4llvm9IRBuilder9CreatePHIEPNS_4TypeEjRKNS_5TwineE">CreatePHI</a>(<a class="local col3 ref" href="#333ResultTy" title='ResultTy' data-ref="333ResultTy">ResultTy</a>, <var>2</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"loaded"</q>);</td></tr>
<tr><th id="1385">1385</th><td>  <a class="local col4 ref" href="#344Loaded" title='Loaded' data-ref="344Loaded">Loaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col3 ref" href="#343InitLoaded" title='InitLoaded' data-ref="343InitLoaded">InitLoaded</a>, <a class="local col9 ref" href="#339BB" title='BB' data-ref="339BB">BB</a>);</td></tr>
<tr><th id="1386">1386</th><td></td></tr>
<tr><th id="1387">1387</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col5 decl" id="345NewVal" title='NewVal' data-type='llvm::Value *' data-ref="345NewVal">NewVal</dfn> = <a class="local col6 ref" href="#336PerformOp" title='PerformOp' data-ref="336PerformOp">PerformOp</a><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">(<a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>, <a class="local col4 ref" href="#344Loaded" title='Loaded' data-ref="344Loaded">Loaded</a>)</a>;</td></tr>
<tr><th id="1388">1388</th><td></td></tr>
<tr><th id="1389">1389</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="346NewLoaded" title='NewLoaded' data-type='llvm::Value *' data-ref="346NewLoaded">NewLoaded</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1390">1390</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col7 decl" id="347Success" title='Success' data-type='llvm::Value *' data-ref="347Success">Success</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1391">1391</th><td></td></tr>
<tr><th id="1392">1392</th><td>  <a class="local col7 ref" href="#337CreateCmpXchg" title='CreateCmpXchg' data-ref="337CreateCmpXchg">CreateCmpXchg</a><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">(<a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>, <a class="local col4 ref" href="#334Addr" title='Addr' data-ref="334Addr">Addr</a>, <a class="local col4 ref" href="#344Loaded" title='Loaded' data-ref="344Loaded">Loaded</a>, <a class="local col5 ref" href="#345NewVal" title='NewVal' data-ref="345NewVal">NewVal</a>,</a></td></tr>
<tr><th id="1393">1393</th><td><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">                <a class="local col5 ref" href="#335MemOpOrder" title='MemOpOrder' data-ref="335MemOpOrder">MemOpOrder</a> == <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Unordered" title='llvm::AtomicOrdering::Unordered' data-ref="llvm::AtomicOrdering::Unordered">Unordered</a></a></td></tr>
<tr><th id="1394">1394</th><td><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">                    ? <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::Monotonic" title='llvm::AtomicOrdering::Monotonic' data-ref="llvm::AtomicOrdering::Monotonic">Monotonic</a></a></td></tr>
<tr><th id="1395">1395</th><td><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">                    : <a class="local col5 ref" href="#335MemOpOrder" title='MemOpOrder' data-ref="335MemOpOrder">MemOpOrder</a>,</a></td></tr>
<tr><th id="1396">1396</th><td><a class="ref" href="../../include/llvm/ADT/STLExtras.h.html#_ZNK4llvm12function_refIFT_DpT0_EEclES3_" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::operator()' data-ref="_ZNK4llvm12function_refIFT_DpT0_EEclES3_">                <a class="local col7 ref" href="#347Success" title='Success' data-ref="347Success">Success</a>, <a class="local col6 ref" href="#346NewLoaded" title='NewLoaded' data-ref="346NewLoaded">NewLoaded</a>)</a>;</td></tr>
<tr><th id="1397">1397</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Success &amp;&amp; NewLoaded) ? void (0) : __assert_fail (&quot;Success &amp;&amp; NewLoaded&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1397, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col7 ref" href="#347Success" title='Success' data-ref="347Success">Success</a> &amp;&amp; <a class="local col6 ref" href="#346NewLoaded" title='NewLoaded' data-ref="346NewLoaded">NewLoaded</a>);</td></tr>
<tr><th id="1398">1398</th><td></td></tr>
<tr><th id="1399">1399</th><td>  <a class="local col4 ref" href="#344Loaded" title='Loaded' data-ref="344Loaded">Loaded</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE" title='llvm::PHINode::addIncoming' data-ref="_ZN4llvm7PHINode11addIncomingEPNS_5ValueEPNS_10BasicBlockE">addIncoming</a>(<a class="local col6 ref" href="#346NewLoaded" title='NewLoaded' data-ref="346NewLoaded">NewLoaded</a>, <a class="local col2 ref" href="#342LoopBB" title='LoopBB' data-ref="342LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1400">1400</th><td></td></tr>
<tr><th id="1401">1401</th><td>  <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_" title='llvm::IRBuilder::CreateCondBr' data-ref="_ZN4llvm9IRBuilder12CreateCondBrEPNS_5ValueEPNS_10BasicBlockES4_PNS_6MDNodeES6_">CreateCondBr</a>(<a class="local col7 ref" href="#347Success" title='Success' data-ref="347Success">Success</a>, <a class="local col1 ref" href="#341ExitBB" title='ExitBB' data-ref="341ExitBB">ExitBB</a>, <a class="local col2 ref" href="#342LoopBB" title='LoopBB' data-ref="342LoopBB">LoopBB</a>);</td></tr>
<tr><th id="1402">1402</th><td></td></tr>
<tr><th id="1403">1403</th><td>  <a class="local col2 ref" href="#332Builder" title='Builder' data-ref="332Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE" title='llvm::IRBuilderBase::SetInsertPoint' data-ref="_ZN4llvm13IRBuilderBase14SetInsertPointEPNS_10BasicBlockENS_14ilist_iteratorINS_12ilist_detail12node_optionsINS_11InstructionELb1ELb0EvEELb0ELb0EEE">SetInsertPoint</a>(<a class="local col1 ref" href="#341ExitBB" title='ExitBB' data-ref="341ExitBB">ExitBB</a>, <a class="local col1 ref" href="#341ExitBB" title='ExitBB' data-ref="341ExitBB">ExitBB</a>-&gt;<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5beginEv" title='llvm::BasicBlock::begin' data-ref="_ZN4llvm10BasicBlock5beginEv">begin</a>());</td></tr>
<tr><th id="1404">1404</th><td>  <b>return</b> <a class="local col6 ref" href="#346NewLoaded" title='NewLoaded' data-ref="346NewLoaded">NewLoaded</a>;</td></tr>
<tr><th id="1405">1405</th><td>}</td></tr>
<tr><th id="1406">1406</th><td></td></tr>
<tr><th id="1407">1407</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::tryExpandAtomicCmpXchg' data-type='bool (anonymous namespace)::AtomicExpand::tryExpandAtomicCmpXchg(llvm::AtomicCmpXchgInst * CI)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand22tryExpandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">tryExpandAtomicCmpXchg</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col8 decl" id="348CI" title='CI' data-type='llvm::AtomicCmpXchgInst *' data-ref="348CI">CI</dfn>) {</td></tr>
<tr><th id="1408">1408</th><td>  <em>unsigned</em> <dfn class="local col9 decl" id="349MinCASSize" title='MinCASSize' data-type='unsigned int' data-ref="349MinCASSize">MinCASSize</dfn> = <a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv" title='llvm::TargetLoweringBase::getMinCmpXchgSizeInBits' data-ref="_ZNK4llvm18TargetLoweringBase23getMinCmpXchgSizeInBitsEv">getMinCmpXchgSizeInBits</a>() / <var>8</var>;</td></tr>
<tr><th id="1409">1409</th><td>  <em>unsigned</em> <dfn class="local col0 decl" id="350ValueSize" title='ValueSize' data-type='unsigned int' data-ref="350ValueSize">ValueSize</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE">getAtomicOpSize</a>(<a class="local col8 ref" href="#348CI" title='CI' data-ref="348CI">CI</a>);</td></tr>
<tr><th id="1410">1410</th><td></td></tr>
<tr><th id="1411">1411</th><td>  <b>switch</b> (<a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="virtual ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase29shouldExpandAtomicCmpXchgInIREPNS_17AtomicCmpXchgInstE" title='llvm::TargetLoweringBase::shouldExpandAtomicCmpXchgInIR' data-ref="_ZNK4llvm18TargetLoweringBase29shouldExpandAtomicCmpXchgInIREPNS_17AtomicCmpXchgInstE">shouldExpandAtomicCmpXchgInIR</a>(<a class="local col8 ref" href="#348CI" title='CI' data-ref="348CI">CI</a>)) {</td></tr>
<tr><th id="1412">1412</th><td>  <b>default</b>:</td></tr>
<tr><th id="1413">1413</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unhandled case in tryExpandAtomicCmpXchg&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1413)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unhandled case in tryExpandAtomicCmpXchg"</q>);</td></tr>
<tr><th id="1414">1414</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::None" title='llvm::TargetLoweringBase::AtomicExpansionKind::None' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::None">None</a>:</td></tr>
<tr><th id="1415">1415</th><td>    <b>if</b> (<a class="local col0 ref" href="#350ValueSize" title='ValueSize' data-ref="350ValueSize">ValueSize</a> &lt; <a class="local col9 ref" href="#349MinCASSize" title='MinCASSize' data-ref="349MinCASSize">MinCASSize</a>)</td></tr>
<tr><th id="1416">1416</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandPartwordCmpXchg' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand21expandPartwordCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandPartwordCmpXchg</a>(<a class="local col8 ref" href="#348CI" title='CI' data-ref="348CI">CI</a>);</td></tr>
<tr><th id="1417">1417</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1418">1418</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::LLSC" title='llvm::TargetLoweringBase::AtomicExpansionKind::LLSC' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::LLSC">LLSC</a>: {</td></tr>
<tr><th id="1419">1419</th><td>    <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (ValueSize &gt;= MinCASSize &amp;&amp; &quot;MinCmpXchgSizeInBits not yet supported for LL/SC expansions.&quot;) ? void (0) : __assert_fail (&quot;ValueSize &gt;= MinCASSize &amp;&amp; \&quot;MinCmpXchgSizeInBits not yet supported for LL/SC expansions.\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1420, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col0 ref" href="#350ValueSize" title='ValueSize' data-ref="350ValueSize">ValueSize</a> &gt;= <a class="local col9 ref" href="#349MinCASSize" title='MinCASSize' data-ref="349MinCASSize">MinCASSize</a> &amp;&amp;</td></tr>
<tr><th id="1420">1420</th><td>           <q>"MinCmpXchgSizeInBits not yet supported for LL/SC expansions."</q>);</td></tr>
<tr><th id="1421">1421</th><td>    <b>return</b> <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchg' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand19expandAtomicCmpXchgEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchg</a>(<a class="local col8 ref" href="#348CI" title='CI' data-ref="348CI">CI</a>);</td></tr>
<tr><th id="1422">1422</th><td>  }</td></tr>
<tr><th id="1423">1423</th><td>  <b>case</b> <a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase" title='llvm::TargetLoweringBase' data-ref="llvm::TargetLoweringBase">TargetLoweringBase</a>::<a class="type" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind" title='llvm::TargetLoweringBase::AtomicExpansionKind' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind">AtomicExpansionKind</a>::<a class="enum" href="../../include/llvm/CodeGen/TargetLowering.h.html#llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic" title='llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic' data-ref="llvm::TargetLoweringBase::AtomicExpansionKind::MaskedIntrinsic">MaskedIntrinsic</a>:</td></tr>
<tr><th id="1424">1424</th><td>    <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCmpXchgToMaskedIntrinsic' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand36expandAtomicCmpXchgToMaskedIntrinsicEPN4llvm17AtomicCmpXchgInstE">expandAtomicCmpXchgToMaskedIntrinsic</a>(<a class="local col8 ref" href="#348CI" title='CI' data-ref="348CI">CI</a>);</td></tr>
<tr><th id="1425">1425</th><td>    <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1426">1426</th><td>  }</td></tr>
<tr><th id="1427">1427</th><td>}</td></tr>
<tr><th id="1428">1428</th><td></td></tr>
<tr><th id="1429">1429</th><td><i>// Note: This function is exposed externally by AtomicExpandUtils.h</i></td></tr>
<tr><th id="1430">1430</th><td><em>bool</em> <span class="namespace">llvm::</span><dfn class="decl def" id="_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004" title='llvm::expandAtomicRMWToCmpXchg' data-ref="_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004">expandAtomicRMWToCmpXchg</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col1 decl" id="351AI" title='AI' data-type='llvm::AtomicRMWInst *' data-ref="351AI">AI</dfn>,</td></tr>
<tr><th id="1431">1431</th><td>                                    <a class="typedef" href="../../include/llvm/CodeGen/AtomicExpandUtils.h.html#llvm::CreateCmpXchgInstFun" title='llvm::CreateCmpXchgInstFun' data-type='function_ref&lt;void (IRBuilder&lt;&gt; &amp;, llvm::Value *, llvm::Value *, llvm::Value *, llvm::AtomicOrdering, llvm::Value *&amp;, llvm::Value *&amp;)&gt;' data-ref="llvm::CreateCmpXchgInstFun">CreateCmpXchgInstFun</a> <dfn class="local col2 decl" id="352CreateCmpXchg" title='CreateCmpXchg' data-type='CreateCmpXchgInstFun' data-ref="352CreateCmpXchg">CreateCmpXchg</dfn>) {</td></tr>
<tr><th id="1432">1432</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col3 decl" id="353Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="353Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>);</td></tr>
<tr><th id="1433">1433</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="354Loaded" title='Loaded' data-type='llvm::Value *' data-ref="354Loaded">Loaded</dfn> = <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<a class="tu ref" href="#_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739" title='(anonymous namespace)::AtomicExpand::insertRMWCmpXchgLoop' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand20insertRMWCmpXchgLoopERN4llvm9IRBuilderINS1_14ConstantFolderENS1_24IRBuilderDefaultInserterEEEPNS1_4TypeEPNS1_5ValueEN6117739">insertRMWCmpXchgLoop</a>(</td></tr>
<tr><th id="1434">1434</th><td>      <span class='refarg'><a class="local col3 ref" href="#353Builder" title='Builder' data-ref="353Builder">Builder</a></span>, <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>(),</td></tr>
<tr><th id="1435">1435</th><td>      <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a>[&amp;](<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col5 decl" id="355Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="355Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col6 decl" id="356Loaded" title='Loaded' data-type='llvm::Value *' data-ref="356Loaded">Loaded</dfn>) {</td></tr>
<tr><th id="1436">1436</th><td>        <b>return</b> <a class="tu ref" href="#_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_" title='performAtomicOp' data-use='c' data-ref="_ZL15performAtomicOpN4llvm13AtomicRMWInst5BinOpERNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES8_">performAtomicOp</a>(<a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>(), <span class='refarg'><a class="local col5 ref" href="#355Builder" title='Builder' data-ref="355Builder">Builder</a></span>, <a class="local col6 ref" href="#356Loaded" title='Loaded' data-ref="356Loaded">Loaded</a>,</td></tr>
<tr><th id="1437">1437</th><td>                               <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>());</td></tr>
<tr><th id="1438">1438</th><td>      },</td></tr>
<tr><th id="1439">1439</th><td>      <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#119" title='llvm::function_ref&lt;void (llvm::IRBuilder&lt;llvm::ConstantFolder, llvm::IRBuilderDefaultInserter&gt; &amp;, llvm::Value *, llvm::Value *, llvm::Value *, llvm::AtomicOrdering, llvm::Value *&amp;, llvm::Value *&amp;)&gt;::function_ref' data-ref="_ZN4llvm12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5ValueES7_S7_NS_14AtomicOrderingERS7_S9_EEC1ERKSB_"></a><a class="local col2 ref" href="#352CreateCmpXchg" title='CreateCmpXchg' data-ref="352CreateCmpXchg">CreateCmpXchg</a>);</td></tr>
<tr><th id="1440">1440</th><td></td></tr>
<tr><th id="1441">1441</th><td>  <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col4 ref" href="#354Loaded" title='Loaded' data-ref="354Loaded">Loaded</a>);</td></tr>
<tr><th id="1442">1442</th><td>  <a class="local col1 ref" href="#351AI" title='AI' data-ref="351AI">AI</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1443">1443</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1444">1444</th><td>}</td></tr>
<tr><th id="1445">1445</th><td></td></tr>
<tr><th id="1446">1446</th><td><i  data-doc="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">// In order to use one of the sized library calls such as</i></td></tr>
<tr><th id="1447">1447</th><td><i  data-doc="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">// __atomic_fetch_add_4, the alignment must be sufficient, the size</i></td></tr>
<tr><th id="1448">1448</th><td><i  data-doc="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">// must be one of the potentially-specialized sizes, and the value</i></td></tr>
<tr><th id="1449">1449</th><td><i  data-doc="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">// type must actually exist in C on the target (otherwise, the</i></td></tr>
<tr><th id="1450">1450</th><td><i  data-doc="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">// function wouldn't actually be defined.)</i></td></tr>
<tr><th id="1451">1451</th><td><em>static</em> <em>bool</em> <dfn class="tu decl def" id="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE" title='canUseSizedAtomicCall' data-type='bool canUseSizedAtomicCall(unsigned int Size, unsigned int Align, const llvm::DataLayout &amp; DL)' data-ref="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">canUseSizedAtomicCall</dfn>(<em>unsigned</em> <dfn class="local col7 decl" id="357Size" title='Size' data-type='unsigned int' data-ref="357Size">Size</dfn>, <em>unsigned</em> <dfn class="local col8 decl" id="358Align" title='Align' data-type='unsigned int' data-ref="358Align">Align</dfn>,</td></tr>
<tr><th id="1452">1452</th><td>                                  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col9 decl" id="359DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="359DL">DL</dfn>) {</td></tr>
<tr><th id="1453">1453</th><td>  <i>// TODO: "LargestSize" is an approximation for "largest type that</i></td></tr>
<tr><th id="1454">1454</th><td><i>  // you can express in C". It seems to be the case that int128 is</i></td></tr>
<tr><th id="1455">1455</th><td><i>  // supported on all 64-bit platforms, otherwise only up to 64-bit</i></td></tr>
<tr><th id="1456">1456</th><td><i>  // integers are supported. If we get this wrong, then we'll try to</i></td></tr>
<tr><th id="1457">1457</th><td><i>  // call a sized libcall that doesn't actually exist. There should</i></td></tr>
<tr><th id="1458">1458</th><td><i>  // really be some more reliable way in LLVM of determining integer</i></td></tr>
<tr><th id="1459">1459</th><td><i>  // sizes which are valid in the target's C ABI...</i></td></tr>
<tr><th id="1460">1460</th><td>  <em>unsigned</em> <dfn class="local col0 decl" id="360LargestSize" title='LargestSize' data-type='unsigned int' data-ref="360LargestSize">LargestSize</dfn> = <a class="local col9 ref" href="#359DL" title='DL' data-ref="359DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout32getLargestLegalIntTypeSizeInBitsEv" title='llvm::DataLayout::getLargestLegalIntTypeSizeInBits' data-ref="_ZNK4llvm10DataLayout32getLargestLegalIntTypeSizeInBitsEv">getLargestLegalIntTypeSizeInBits</a>() &gt;= <var>64</var> ? <var>16</var> : <var>8</var>;</td></tr>
<tr><th id="1461">1461</th><td>  <b>return</b> <a class="local col8 ref" href="#358Align" title='Align' data-ref="358Align">Align</a> &gt;= <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> &amp;&amp;</td></tr>
<tr><th id="1462">1462</th><td>         (<a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> == <var>1</var> || <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> == <var>2</var> || <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> == <var>4</var> || <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> == <var>8</var> || <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> == <var>16</var>) &amp;&amp;</td></tr>
<tr><th id="1463">1463</th><td>         <a class="local col7 ref" href="#357Size" title='Size' data-ref="357Size">Size</a> &lt;= <a class="local col0 ref" href="#360LargestSize" title='LargestSize' data-ref="360LargestSize">LargestSize</a>;</td></tr>
<tr><th id="1464">1464</th><td>}</td></tr>
<tr><th id="1465">1465</th><td></td></tr>
<tr><th id="1466">1466</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicLoadToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicLoadToLibcall(llvm::LoadInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand25expandAtomicLoadToLibcallEPN4llvm8LoadInstE">expandAtomicLoadToLibcall</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::LoadInst" title='llvm::LoadInst' data-ref="llvm::LoadInst">LoadInst</a> *<dfn class="local col1 decl" id="361I" title='I' data-type='llvm::LoadInst *' data-ref="361I">I</dfn>) {</td></tr>
<tr><th id="1467">1467</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col2 decl" id="362Libcalls" title='Libcalls' data-type='const RTLIB::Libcall [6]' data-ref="362Libcalls">Libcalls</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1468">1468</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#487" title='llvm::RTLIB::Libcall::ATOMIC_LOAD' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD">ATOMIC_LOAD</a>,   <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#488" title='llvm::RTLIB::Libcall::ATOMIC_LOAD_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD_1">ATOMIC_LOAD_1</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#489" title='llvm::RTLIB::Libcall::ATOMIC_LOAD_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD_2">ATOMIC_LOAD_2</a>,</td></tr>
<tr><th id="1469">1469</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#490" title='llvm::RTLIB::Libcall::ATOMIC_LOAD_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD_4">ATOMIC_LOAD_4</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#491" title='llvm::RTLIB::Libcall::ATOMIC_LOAD_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD_8">ATOMIC_LOAD_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#492" title='llvm::RTLIB::Libcall::ATOMIC_LOAD_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_LOAD_16">ATOMIC_LOAD_16</a>};</td></tr>
<tr><th id="1470">1470</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="363Size" title='Size' data-type='unsigned int' data-ref="363Size">Size</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm8LoadInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm8LoadInstE">getAtomicOpSize</a>(<a class="local col1 ref" href="#361I" title='I' data-ref="361I">I</a>);</td></tr>
<tr><th id="1471">1471</th><td>  <em>unsigned</em> <dfn class="local col4 decl" id="364Align" title='Align' data-type='unsigned int' data-ref="364Align">Align</dfn> = <a class="tu ref" href="#_ZL16getAtomicOpAlignPN4llvm8LoadInstE" title='getAtomicOpAlign' data-use='c' data-ref="_ZL16getAtomicOpAlignPN4llvm8LoadInstE">getAtomicOpAlign</a>(<a class="local col1 ref" href="#361I" title='I' data-ref="361I">I</a>);</td></tr>
<tr><th id="1472">1472</th><td></td></tr>
<tr><th id="1473">1473</th><td>  <em>bool</em> <dfn class="local col5 decl" id="365expanded" title='expanded' data-type='bool' data-ref="365expanded">expanded</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</a>(</td></tr>
<tr><th id="1474">1474</th><td>      <a class="local col1 ref" href="#361I" title='I' data-ref="361I">I</a>, <a class="local col3 ref" href="#363Size" title='Size' data-ref="363Size">Size</a>, <a class="local col4 ref" href="#364Align" title='Align' data-ref="364Align">Align</a>, <a class="local col1 ref" href="#361I" title='I' data-ref="361I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm8LoadInst17getPointerOperandEv" title='llvm::LoadInst::getPointerOperand' data-ref="_ZN4llvm8LoadInst17getPointerOperandEv">getPointerOperand</a>(), <b>nullptr</b>, <b>nullptr</b>,</td></tr>
<tr><th id="1475">1475</th><td>      <a class="local col1 ref" href="#361I" title='I' data-ref="361I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm8LoadInst11getOrderingEv" title='llvm::LoadInst::getOrdering' data-ref="_ZNK4llvm8LoadInst11getOrderingEv">getOrdering</a>(), <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::NotAtomic" title='llvm::AtomicOrdering::NotAtomic' data-ref="llvm::AtomicOrdering::NotAtomic">NotAtomic</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col2 ref" href="#362Libcalls" title='Libcalls' data-ref="362Libcalls">Libcalls</a>);</td></tr>
<tr><th id="1476">1476</th><td>  (<em>void</em>)<a class="local col5 ref" href="#365expanded" title='expanded' data-ref="365expanded">expanded</a>;</td></tr>
<tr><th id="1477">1477</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (expanded &amp;&amp; &quot;expandAtomicOpToLibcall shouldn&apos;t fail tor Load&quot;) ? void (0) : __assert_fail (&quot;expanded &amp;&amp; \&quot;expandAtomicOpToLibcall shouldn&apos;t fail tor Load\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1477, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#365expanded" title='expanded' data-ref="365expanded">expanded</a> &amp;&amp; <q>"expandAtomicOpToLibcall shouldn't fail tor Load"</q>);</td></tr>
<tr><th id="1478">1478</th><td>}</td></tr>
<tr><th id="1479">1479</th><td></td></tr>
<tr><th id="1480">1480</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicStoreToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicStoreToLibcall(llvm::StoreInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand26expandAtomicStoreToLibcallEPN4llvm9StoreInstE">expandAtomicStoreToLibcall</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::StoreInst" title='llvm::StoreInst' data-ref="llvm::StoreInst">StoreInst</a> *<dfn class="local col6 decl" id="366I" title='I' data-type='llvm::StoreInst *' data-ref="366I">I</dfn>) {</td></tr>
<tr><th id="1481">1481</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col7 decl" id="367Libcalls" title='Libcalls' data-type='const RTLIB::Libcall [6]' data-ref="367Libcalls">Libcalls</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1482">1482</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#494" title='llvm::RTLIB::Libcall::ATOMIC_STORE' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE">ATOMIC_STORE</a>,   <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#495" title='llvm::RTLIB::Libcall::ATOMIC_STORE_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE_1">ATOMIC_STORE_1</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#496" title='llvm::RTLIB::Libcall::ATOMIC_STORE_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE_2">ATOMIC_STORE_2</a>,</td></tr>
<tr><th id="1483">1483</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#497" title='llvm::RTLIB::Libcall::ATOMIC_STORE_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE_4">ATOMIC_STORE_4</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#498" title='llvm::RTLIB::Libcall::ATOMIC_STORE_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE_8">ATOMIC_STORE_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#499" title='llvm::RTLIB::Libcall::ATOMIC_STORE_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_STORE_16">ATOMIC_STORE_16</a>};</td></tr>
<tr><th id="1484">1484</th><td>  <em>unsigned</em> <dfn class="local col8 decl" id="368Size" title='Size' data-type='unsigned int' data-ref="368Size">Size</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm9StoreInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm9StoreInstE">getAtomicOpSize</a>(<a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>);</td></tr>
<tr><th id="1485">1485</th><td>  <em>unsigned</em> <dfn class="local col9 decl" id="369Align" title='Align' data-type='unsigned int' data-ref="369Align">Align</dfn> = <a class="tu ref" href="#_ZL16getAtomicOpAlignPN4llvm9StoreInstE" title='getAtomicOpAlign' data-use='c' data-ref="_ZL16getAtomicOpAlignPN4llvm9StoreInstE">getAtomicOpAlign</a>(<a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>);</td></tr>
<tr><th id="1486">1486</th><td></td></tr>
<tr><th id="1487">1487</th><td>  <em>bool</em> <dfn class="local col0 decl" id="370expanded" title='expanded' data-type='bool' data-ref="370expanded">expanded</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</a>(</td></tr>
<tr><th id="1488">1488</th><td>      <a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>, <a class="local col8 ref" href="#368Size" title='Size' data-ref="368Size">Size</a>, <a class="local col9 ref" href="#369Align" title='Align' data-ref="369Align">Align</a>, <a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst17getPointerOperandEv" title='llvm::StoreInst::getPointerOperand' data-ref="_ZN4llvm9StoreInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm9StoreInst15getValueOperandEv" title='llvm::StoreInst::getValueOperand' data-ref="_ZN4llvm9StoreInst15getValueOperandEv">getValueOperand</a>(), <b>nullptr</b>,</td></tr>
<tr><th id="1489">1489</th><td>      <a class="local col6 ref" href="#366I" title='I' data-ref="366I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm9StoreInst11getOrderingEv" title='llvm::StoreInst::getOrdering' data-ref="_ZNK4llvm9StoreInst11getOrderingEv">getOrdering</a>(), <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::NotAtomic" title='llvm::AtomicOrdering::NotAtomic' data-ref="llvm::AtomicOrdering::NotAtomic">NotAtomic</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col7 ref" href="#367Libcalls" title='Libcalls' data-ref="367Libcalls">Libcalls</a>);</td></tr>
<tr><th id="1490">1490</th><td>  (<em>void</em>)<a class="local col0 ref" href="#370expanded" title='expanded' data-ref="370expanded">expanded</a>;</td></tr>
<tr><th id="1491">1491</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (expanded &amp;&amp; &quot;expandAtomicOpToLibcall shouldn&apos;t fail tor Store&quot;) ? void (0) : __assert_fail (&quot;expanded &amp;&amp; \&quot;expandAtomicOpToLibcall shouldn&apos;t fail tor Store\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1491, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col0 ref" href="#370expanded" title='expanded' data-ref="370expanded">expanded</a> &amp;&amp; <q>"expandAtomicOpToLibcall shouldn't fail tor Store"</q>);</td></tr>
<tr><th id="1492">1492</th><td>}</td></tr>
<tr><th id="1493">1493</th><td></td></tr>
<tr><th id="1494">1494</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall(llvm::AtomicCmpXchgInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE">expandAtomicCASToLibcall</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col1 decl" id="371I" title='I' data-type='llvm::AtomicCmpXchgInst *' data-ref="371I">I</dfn>) {</td></tr>
<tr><th id="1495">1495</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col2 decl" id="372Libcalls" title='Libcalls' data-type='const RTLIB::Libcall [6]' data-ref="372Libcalls">Libcalls</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1496">1496</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#508" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE">ATOMIC_COMPARE_EXCHANGE</a>,   <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#509" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_1">ATOMIC_COMPARE_EXCHANGE_1</a>,</td></tr>
<tr><th id="1497">1497</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#510" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_2">ATOMIC_COMPARE_EXCHANGE_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#511" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_4">ATOMIC_COMPARE_EXCHANGE_4</a>,</td></tr>
<tr><th id="1498">1498</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#512" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_8">ATOMIC_COMPARE_EXCHANGE_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#513" title='llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_COMPARE_EXCHANGE_16">ATOMIC_COMPARE_EXCHANGE_16</a>};</td></tr>
<tr><th id="1499">1499</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="373Size" title='Size' data-type='unsigned int' data-ref="373Size">Size</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm17AtomicCmpXchgInstE">getAtomicOpSize</a>(<a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>);</td></tr>
<tr><th id="1500">1500</th><td>  <em>unsigned</em> <dfn class="local col4 decl" id="374Align" title='Align' data-type='unsigned int' data-ref="374Align">Align</dfn> = <a class="tu ref" href="#_ZL16getAtomicOpAlignPN4llvm17AtomicCmpXchgInstE" title='getAtomicOpAlign' data-use='c' data-ref="_ZL16getAtomicOpAlignPN4llvm17AtomicCmpXchgInstE">getAtomicOpAlign</a>(<a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>);</td></tr>
<tr><th id="1501">1501</th><td></td></tr>
<tr><th id="1502">1502</th><td>  <em>bool</em> <dfn class="local col5 decl" id="375expanded" title='expanded' data-type='bool' data-ref="375expanded">expanded</dfn> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</a>(</td></tr>
<tr><th id="1503">1503</th><td>      <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>, <a class="local col3 ref" href="#373Size" title='Size' data-ref="373Size">Size</a>, <a class="local col4 ref" href="#374Align" title='Align' data-ref="374Align">Align</a>, <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv" title='llvm::AtomicCmpXchgInst::getPointerOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv" title='llvm::AtomicCmpXchgInst::getNewValOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst16getNewValOperandEv">getNewValOperand</a>(),</td></tr>
<tr><th id="1504">1504</th><td>      <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv" title='llvm::AtomicCmpXchgInst::getCompareOperand' data-ref="_ZN4llvm17AtomicCmpXchgInst17getCompareOperandEv">getCompareOperand</a>(), <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv" title='llvm::AtomicCmpXchgInst::getSuccessOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getSuccessOrderingEv">getSuccessOrdering</a>(), <a class="local col1 ref" href="#371I" title='I' data-ref="371I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv" title='llvm::AtomicCmpXchgInst::getFailureOrdering' data-ref="_ZNK4llvm17AtomicCmpXchgInst18getFailureOrderingEv">getFailureOrdering</a>(),</td></tr>
<tr><th id="1505">1505</th><td>      <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERAT__KT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERAT__KT_"></a><a class="local col2 ref" href="#372Libcalls" title='Libcalls' data-ref="372Libcalls">Libcalls</a>);</td></tr>
<tr><th id="1506">1506</th><td>  (<em>void</em>)<a class="local col5 ref" href="#375expanded" title='expanded' data-ref="375expanded">expanded</a>;</td></tr>
<tr><th id="1507">1507</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (expanded &amp;&amp; &quot;expandAtomicOpToLibcall shouldn&apos;t fail tor CAS&quot;) ? void (0) : __assert_fail (&quot;expanded &amp;&amp; \&quot;expandAtomicOpToLibcall shouldn&apos;t fail tor CAS\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1507, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#375expanded" title='expanded' data-ref="375expanded">expanded</a> &amp;&amp; <q>"expandAtomicOpToLibcall shouldn't fail tor CAS"</q>);</td></tr>
<tr><th id="1508">1508</th><td>}</td></tr>
<tr><th id="1509">1509</th><td></td></tr>
<tr><th id="1510">1510</th><td><em>static</em> <a class="type" href="../../include/llvm/ADT/ArrayRef.h.html#llvm::ArrayRef" title='llvm::ArrayRef' data-ref="llvm::ArrayRef">ArrayRef</a>&lt;<span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a>&gt; <dfn class="tu decl def" id="_ZL13GetRMWLibcallN4llvm13AtomicRMWInst5BinOpE" title='GetRMWLibcall' data-type='ArrayRef&lt;RTLIB::Libcall&gt; GetRMWLibcall(AtomicRMWInst::BinOp Op)' data-ref="_ZL13GetRMWLibcallN4llvm13AtomicRMWInst5BinOpE">GetRMWLibcall</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp" title='llvm::AtomicRMWInst::BinOp' data-ref="llvm::AtomicRMWInst::BinOp">BinOp</a> <dfn class="local col6 decl" id="376Op" title='Op' data-type='AtomicRMWInst::BinOp' data-ref="376Op">Op</dfn>) {</td></tr>
<tr><th id="1511">1511</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col7 decl" id="377LibcallsXchg" title='LibcallsXchg' data-type='const RTLIB::Libcall [6]' data-ref="377LibcallsXchg">LibcallsXchg</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1512">1512</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#501" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE">ATOMIC_EXCHANGE</a>,   <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#502" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_1">ATOMIC_EXCHANGE_1</a>,</td></tr>
<tr><th id="1513">1513</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#503" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_2">ATOMIC_EXCHANGE_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#504" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_4">ATOMIC_EXCHANGE_4</a>,</td></tr>
<tr><th id="1514">1514</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#505" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_8">ATOMIC_EXCHANGE_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#506" title='llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_EXCHANGE_16">ATOMIC_EXCHANGE_16</a>};</td></tr>
<tr><th id="1515">1515</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col8 decl" id="378LibcallsAdd" title='LibcallsAdd' data-type='const RTLIB::Libcall [6]' data-ref="378LibcallsAdd">LibcallsAdd</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1516">1516</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,    <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#515" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_1">ATOMIC_FETCH_ADD_1</a>,</td></tr>
<tr><th id="1517">1517</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#516" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_2">ATOMIC_FETCH_ADD_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#517" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_4">ATOMIC_FETCH_ADD_4</a>,</td></tr>
<tr><th id="1518">1518</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#518" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_8">ATOMIC_FETCH_ADD_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#519" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_ADD_16">ATOMIC_FETCH_ADD_16</a>};</td></tr>
<tr><th id="1519">1519</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col9 decl" id="379LibcallsSub" title='LibcallsSub' data-type='const RTLIB::Libcall [6]' data-ref="379LibcallsSub">LibcallsSub</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1520">1520</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,    <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#520" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_1">ATOMIC_FETCH_SUB_1</a>,</td></tr>
<tr><th id="1521">1521</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#521" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_2">ATOMIC_FETCH_SUB_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#522" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_4">ATOMIC_FETCH_SUB_4</a>,</td></tr>
<tr><th id="1522">1522</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#523" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_8">ATOMIC_FETCH_SUB_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#524" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_SUB_16">ATOMIC_FETCH_SUB_16</a>};</td></tr>
<tr><th id="1523">1523</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col0 decl" id="380LibcallsAnd" title='LibcallsAnd' data-type='const RTLIB::Libcall [6]' data-ref="380LibcallsAnd">LibcallsAnd</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1524">1524</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,    <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#525" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_1">ATOMIC_FETCH_AND_1</a>,</td></tr>
<tr><th id="1525">1525</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#526" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_2">ATOMIC_FETCH_AND_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#527" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_4">ATOMIC_FETCH_AND_4</a>,</td></tr>
<tr><th id="1526">1526</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#528" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_8">ATOMIC_FETCH_AND_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#529" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_AND_16">ATOMIC_FETCH_AND_16</a>};</td></tr>
<tr><th id="1527">1527</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col1 decl" id="381LibcallsOr" title='LibcallsOr' data-type='const RTLIB::Libcall [6]' data-ref="381LibcallsOr">LibcallsOr</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1528">1528</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,   <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#530" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_1">ATOMIC_FETCH_OR_1</a>,</td></tr>
<tr><th id="1529">1529</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#531" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_2">ATOMIC_FETCH_OR_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#532" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_4">ATOMIC_FETCH_OR_4</a>,</td></tr>
<tr><th id="1530">1530</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#533" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_8">ATOMIC_FETCH_OR_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#534" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_OR_16">ATOMIC_FETCH_OR_16</a>};</td></tr>
<tr><th id="1531">1531</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col2 decl" id="382LibcallsXor" title='LibcallsXor' data-type='const RTLIB::Libcall [6]' data-ref="382LibcallsXor">LibcallsXor</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1532">1532</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,    <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#535" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_1">ATOMIC_FETCH_XOR_1</a>,</td></tr>
<tr><th id="1533">1533</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#536" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_2">ATOMIC_FETCH_XOR_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#537" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_4">ATOMIC_FETCH_XOR_4</a>,</td></tr>
<tr><th id="1534">1534</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#538" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_8">ATOMIC_FETCH_XOR_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#539" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_XOR_16">ATOMIC_FETCH_XOR_16</a>};</td></tr>
<tr><th id="1535">1535</th><td>  <em>static</em> <em>const</em> <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col3 decl" id="383LibcallsNand" title='LibcallsNand' data-type='const RTLIB::Libcall [6]' data-ref="383LibcallsNand">LibcallsNand</dfn>[<var>6</var>] = {</td></tr>
<tr><th id="1536">1536</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>,     <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#540" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_1' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_1">ATOMIC_FETCH_NAND_1</a>,</td></tr>
<tr><th id="1537">1537</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#541" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_2' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_2">ATOMIC_FETCH_NAND_2</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#542" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_4' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_4">ATOMIC_FETCH_NAND_4</a>,</td></tr>
<tr><th id="1538">1538</th><td>      <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#543" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_8' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_8">ATOMIC_FETCH_NAND_8</a>, <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#544" title='llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_16' data-ref="llvm::RTLIB::Libcall::ATOMIC_FETCH_NAND_16">ATOMIC_FETCH_NAND_16</a>};</td></tr>
<tr><th id="1539">1539</th><td></td></tr>
<tr><th id="1540">1540</th><td>  <b>switch</b> (<a class="local col6 ref" href="#376Op" title='Op' data-ref="376Op">Op</a>) {</td></tr>
<tr><th id="1541">1541</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::BAD_BINOP" title='llvm::AtomicRMWInst::BinOp::BAD_BINOP' data-ref="llvm::AtomicRMWInst::BinOp::BAD_BINOP">BAD_BINOP</a>:</td></tr>
<tr><th id="1542">1542</th><td>    <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Should not have BAD_BINOP.&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1542)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Should not have BAD_BINOP."</q>);</td></tr>
<tr><th id="1543">1543</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xchg" title='llvm::AtomicRMWInst::BinOp::Xchg' data-ref="llvm::AtomicRMWInst::BinOp::Xchg">Xchg</a>:</td></tr>
<tr><th id="1544">1544</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col7 ref" href="#377LibcallsXchg" title='LibcallsXchg' data-ref="377LibcallsXchg">LibcallsXchg</a>);</td></tr>
<tr><th id="1545">1545</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Add" title='llvm::AtomicRMWInst::BinOp::Add' data-ref="llvm::AtomicRMWInst::BinOp::Add">Add</a>:</td></tr>
<tr><th id="1546">1546</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col8 ref" href="#378LibcallsAdd" title='LibcallsAdd' data-ref="378LibcallsAdd">LibcallsAdd</a>);</td></tr>
<tr><th id="1547">1547</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Sub" title='llvm::AtomicRMWInst::BinOp::Sub' data-ref="llvm::AtomicRMWInst::BinOp::Sub">Sub</a>:</td></tr>
<tr><th id="1548">1548</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col9 ref" href="#379LibcallsSub" title='LibcallsSub' data-ref="379LibcallsSub">LibcallsSub</a>);</td></tr>
<tr><th id="1549">1549</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::And" title='llvm::AtomicRMWInst::BinOp::And' data-ref="llvm::AtomicRMWInst::BinOp::And">And</a>:</td></tr>
<tr><th id="1550">1550</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col0 ref" href="#380LibcallsAnd" title='LibcallsAnd' data-ref="380LibcallsAnd">LibcallsAnd</a>);</td></tr>
<tr><th id="1551">1551</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Or" title='llvm::AtomicRMWInst::BinOp::Or' data-ref="llvm::AtomicRMWInst::BinOp::Or">Or</a>:</td></tr>
<tr><th id="1552">1552</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col1 ref" href="#381LibcallsOr" title='LibcallsOr' data-ref="381LibcallsOr">LibcallsOr</a>);</td></tr>
<tr><th id="1553">1553</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Xor" title='llvm::AtomicRMWInst::BinOp::Xor' data-ref="llvm::AtomicRMWInst::BinOp::Xor">Xor</a>:</td></tr>
<tr><th id="1554">1554</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col2 ref" href="#382LibcallsXor" title='LibcallsXor' data-ref="382LibcallsXor">LibcallsXor</a>);</td></tr>
<tr><th id="1555">1555</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Nand" title='llvm::AtomicRMWInst::BinOp::Nand' data-ref="llvm::AtomicRMWInst::BinOp::Nand">Nand</a>:</td></tr>
<tr><th id="1556">1556</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm12makeArrayRefERAT0__KT_" title='llvm::makeArrayRef' data-ref="_ZN4llvm12makeArrayRefERAT0__KT_">makeArrayRef</a>(<a class="local col3 ref" href="#383LibcallsNand" title='LibcallsNand' data-ref="383LibcallsNand">LibcallsNand</a>);</td></tr>
<tr><th id="1557">1557</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Max" title='llvm::AtomicRMWInst::BinOp::Max' data-ref="llvm::AtomicRMWInst::BinOp::Max">Max</a>:</td></tr>
<tr><th id="1558">1558</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::Min" title='llvm::AtomicRMWInst::BinOp::Min' data-ref="llvm::AtomicRMWInst::BinOp::Min">Min</a>:</td></tr>
<tr><th id="1559">1559</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMax" title='llvm::AtomicRMWInst::BinOp::UMax' data-ref="llvm::AtomicRMWInst::BinOp::UMax">UMax</a>:</td></tr>
<tr><th id="1560">1560</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::UMin" title='llvm::AtomicRMWInst::BinOp::UMin' data-ref="llvm::AtomicRMWInst::BinOp::UMin">UMin</a>:</td></tr>
<tr><th id="1561">1561</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::FAdd" title='llvm::AtomicRMWInst::BinOp::FAdd' data-ref="llvm::AtomicRMWInst::BinOp::FAdd">FAdd</a>:</td></tr>
<tr><th id="1562">1562</th><td>  <b>case</b> <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a>::<a class="enum" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst::BinOp::FSub" title='llvm::AtomicRMWInst::BinOp::FSub' data-ref="llvm::AtomicRMWInst::BinOp::FSub">FSub</a>:</td></tr>
<tr><th id="1563">1563</th><td>    <i>// No atomic libcalls are available for max/min/umax/umin.</i></td></tr>
<tr><th id="1564">1564</th><td>    <b>return</b> <a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1Ev" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1Ev">{</a>};</td></tr>
<tr><th id="1565">1565</th><td>  }</td></tr>
<tr><th id="1566">1566</th><td>  <a class="macro" href="../../include/llvm/Support/ErrorHandling.h.html#135" title="::llvm::llvm_unreachable_internal(&quot;Unexpected AtomicRMW operation.&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1566)" data-ref="_M/llvm_unreachable">llvm_unreachable</a>(<q>"Unexpected AtomicRMW operation."</q>);</td></tr>
<tr><th id="1567">1567</th><td>}</td></tr>
<tr><th id="1568">1568</th><td></td></tr>
<tr><th id="1569">1569</th><td><em>void</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicRMWToLibcall' data-type='void (anonymous namespace)::AtomicExpand::expandAtomicRMWToLibcall(llvm::AtomicRMWInst * I)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicRMWToLibcallEPN4llvm13AtomicRMWInstE">expandAtomicRMWToLibcall</dfn>(<a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicRMWInst" title='llvm::AtomicRMWInst' data-ref="llvm::AtomicRMWInst">AtomicRMWInst</a> *<dfn class="local col4 decl" id="384I" title='I' data-type='llvm::AtomicRMWInst *' data-ref="384I">I</dfn>) {</td></tr>
<tr><th id="1570">1570</th><td>  <a class="type" href="../../include/llvm/ADT/ArrayRef.h.html#llvm::ArrayRef" title='llvm::ArrayRef' data-ref="llvm::ArrayRef">ArrayRef</a>&lt;<span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a>&gt; <dfn class="local col5 decl" id="385Libcalls" title='Libcalls' data-type='ArrayRef&lt;RTLIB::Libcall&gt;' data-ref="385Libcalls">Libcalls</dfn> = <a class="tu ref" href="#_ZL13GetRMWLibcallN4llvm13AtomicRMWInst5BinOpE" title='GetRMWLibcall' data-use='c' data-ref="_ZL13GetRMWLibcallN4llvm13AtomicRMWInst5BinOpE">GetRMWLibcall</a>(<a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst12getOperationEv" title='llvm::AtomicRMWInst::getOperation' data-ref="_ZNK4llvm13AtomicRMWInst12getOperationEv">getOperation</a>());</td></tr>
<tr><th id="1571">1571</th><td></td></tr>
<tr><th id="1572">1572</th><td>  <em>unsigned</em> <dfn class="local col6 decl" id="386Size" title='Size' data-type='unsigned int' data-ref="386Size">Size</dfn> = <a class="tu ref" href="#_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE" title='getAtomicOpSize' data-use='c' data-ref="_ZL15getAtomicOpSizePN4llvm13AtomicRMWInstE">getAtomicOpSize</a>(<a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>);</td></tr>
<tr><th id="1573">1573</th><td>  <em>unsigned</em> <dfn class="local col7 decl" id="387Align" title='Align' data-type='unsigned int' data-ref="387Align">Align</dfn> = <a class="tu ref" href="#_ZL16getAtomicOpAlignPN4llvm13AtomicRMWInstE" title='getAtomicOpAlign' data-use='c' data-ref="_ZL16getAtomicOpAlignPN4llvm13AtomicRMWInstE">getAtomicOpAlign</a>(<a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>);</td></tr>
<tr><th id="1574">1574</th><td></td></tr>
<tr><th id="1575">1575</th><td>  <em>bool</em> <dfn class="local col8 decl" id="388Success" title='Success' data-type='bool' data-ref="388Success">Success</dfn> = <b>false</b>;</td></tr>
<tr><th id="1576">1576</th><td>  <b>if</b> (!<a class="local col5 ref" href="#385Libcalls" title='Libcalls' data-ref="385Libcalls">Libcalls</a>.<a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRef5emptyEv" title='llvm::ArrayRef::empty' data-ref="_ZNK4llvm8ArrayRef5emptyEv">empty</a>())</td></tr>
<tr><th id="1577">1577</th><td>    <a class="local col8 ref" href="#388Success" title='Success' data-ref="388Success">Success</a> = <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</a>(</td></tr>
<tr><th id="1578">1578</th><td>        <a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>, <a class="local col6 ref" href="#386Size" title='Size' data-ref="386Size">Size</a>, <a class="local col7 ref" href="#387Align" title='Align' data-ref="387Align">Align</a>, <a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst17getPointerOperandEv" title='llvm::AtomicRMWInst::getPointerOperand' data-ref="_ZN4llvm13AtomicRMWInst17getPointerOperandEv">getPointerOperand</a>(), <a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm13AtomicRMWInst13getValOperandEv" title='llvm::AtomicRMWInst::getValOperand' data-ref="_ZN4llvm13AtomicRMWInst13getValOperandEv">getValOperand</a>(), <b>nullptr</b>,</td></tr>
<tr><th id="1579">1579</th><td>        <a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm13AtomicRMWInst11getOrderingEv" title='llvm::AtomicRMWInst::getOrdering' data-ref="_ZNK4llvm13AtomicRMWInst11getOrderingEv">getOrdering</a>(), <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::NotAtomic" title='llvm::AtomicOrdering::NotAtomic' data-ref="llvm::AtomicOrdering::NotAtomic">NotAtomic</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#41" title='llvm::ArrayRef&lt;llvm::RTLIB::Libcall&gt;::ArrayRef' data-ref="_ZN4llvm8ArrayRefINS_5RTLIB7LibcallEEC1ERKS3_"></a><a class="local col5 ref" href="#385Libcalls" title='Libcalls' data-ref="385Libcalls">Libcalls</a>);</td></tr>
<tr><th id="1580">1580</th><td></td></tr>
<tr><th id="1581">1581</th><td>  <i>// The expansion failed: either there were no libcalls at all for</i></td></tr>
<tr><th id="1582">1582</th><td><i>  // the operation (min/max), or there were only size-specialized</i></td></tr>
<tr><th id="1583">1583</th><td><i>  // libcalls (add/sub/etc) and we needed a generic. So, expand to a</i></td></tr>
<tr><th id="1584">1584</th><td><i>  // CAS libcall, via a CAS loop, instead.</i></td></tr>
<tr><th id="1585">1585</th><td>  <b>if</b> (!<a class="local col8 ref" href="#388Success" title='Success' data-ref="388Success">Success</a>) {</td></tr>
<tr><th id="1586">1586</th><td>    <a class="ref" href="#_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004" title='llvm::expandAtomicRMWToCmpXchg' data-ref="_ZN4llvm24expandAtomicRMWToCmpXchgEPNS_13AtomicRMWInstENS_12function_refIFvRNS_9IRBuilderINS_14ConstantFolderENS_24IRBuilderDefaultInserterEEEPNS_5Val2205004">expandAtomicRMWToCmpXchg</a>(<a class="local col4 ref" href="#384I" title='I' data-ref="384I">I</a>, <a class="ref fake" href="../../include/llvm/ADT/STLExtras.h.html#_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE" title='llvm::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;::function_ref&lt;type-parameter-0-0 (type-parameter-0-1...)&gt;' data-ref="_ZN4llvm12function_refIFT_DpT0_EEC1EOT_PNSt9enable_ifIXntsr3std7is_sameINSt16remove_referenceIS6_E4typeENS0_IS4_EEEE5valueEvE4typeE"></a>[<b>this</b>](<a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; &amp;<dfn class="local col9 decl" id="389Builder" title='Builder' data-type='IRBuilder&lt;&gt; &amp;' data-ref="389Builder">Builder</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="390Addr" title='Addr' data-type='llvm::Value *' data-ref="390Addr">Addr</dfn>,</td></tr>
<tr><th id="1587">1587</th><td>                                       <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="391Loaded" title='Loaded' data-type='llvm::Value *' data-ref="391Loaded">Loaded</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="392NewVal" title='NewVal' data-type='llvm::Value *' data-ref="392NewVal">NewVal</dfn>,</td></tr>
<tr><th id="1588">1588</th><td>                                       <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col3 decl" id="393MemOpOrder" title='MemOpOrder' data-type='llvm::AtomicOrdering' data-ref="393MemOpOrder">MemOpOrder</dfn>,</td></tr>
<tr><th id="1589">1589</th><td>                                       <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col4 decl" id="394Success" title='Success' data-type='llvm::Value *&amp;' data-ref="394Success">Success</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *&amp;<dfn class="local col5 decl" id="395NewLoaded" title='NewLoaded' data-type='llvm::Value *&amp;' data-ref="395NewLoaded">NewLoaded</dfn>) {</td></tr>
<tr><th id="1590">1590</th><td>      <i>// Create the CAS instruction normally...</i></td></tr>
<tr><th id="1591">1591</th><td>      <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a> *<dfn class="local col6 decl" id="396Pair" title='Pair' data-type='llvm::AtomicCmpXchgInst *' data-ref="396Pair">Pair</dfn> = <a class="local col9 ref" href="#389Builder" title='Builder' data-ref="389Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h" title='llvm::IRBuilder::CreateAtomicCmpXchg' data-ref="_ZN4llvm9IRBuilder19CreateAtomicCmpXchgEPNS_5ValueES2_S2_NS_14AtomicOrderingES3_h">CreateAtomicCmpXchg</a>(</td></tr>
<tr><th id="1592">1592</th><td>          <a class="local col0 ref" href="#390Addr" title='Addr' data-ref="390Addr">Addr</a>, <a class="local col1 ref" href="#391Loaded" title='Loaded' data-ref="391Loaded">Loaded</a>, <a class="local col2 ref" href="#392NewVal" title='NewVal' data-ref="392NewVal">NewVal</a>, <a class="local col3 ref" href="#393MemOpOrder" title='MemOpOrder' data-ref="393MemOpOrder">MemOpOrder</a>,</td></tr>
<tr><th id="1593">1593</th><td>          <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AtomicCmpXchgInst" title='llvm::AtomicCmpXchgInst' data-ref="llvm::AtomicCmpXchgInst">AtomicCmpXchgInst</a>::<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE" title='llvm::AtomicCmpXchgInst::getStrongestFailureOrdering' data-ref="_ZN4llvm17AtomicCmpXchgInst27getStrongestFailureOrderingENS_14AtomicOrderingE">getStrongestFailureOrdering</a>(<a class="local col3 ref" href="#393MemOpOrder" title='MemOpOrder' data-ref="393MemOpOrder">MemOpOrder</a>));</td></tr>
<tr><th id="1594">1594</th><td>      <a class="local col4 ref" href="#394Success" title='Success' data-ref="394Success">Success</a> = <a class="local col9 ref" href="#389Builder" title='Builder' data-ref="389Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col6 ref" href="#396Pair" title='Pair' data-ref="396Pair">Pair</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"success"</q>);</td></tr>
<tr><th id="1595">1595</th><td>      <a class="local col5 ref" href="#395NewLoaded" title='NewLoaded' data-ref="395NewLoaded">NewLoaded</a> = <a class="local col9 ref" href="#389Builder" title='Builder' data-ref="389Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateExtractValue' data-ref="_ZN4llvm9IRBuilder18CreateExtractValueEPNS_5ValueENS_8ArrayRefIjEERKNS_5TwineE">CreateExtractValue</a>(<a class="local col6 ref" href="#396Pair" title='Pair' data-ref="396Pair">Pair</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>, <a class="ref fake" href="../../include/llvm/ADT/Twine.h.html#_ZN4llvm5TwineC1EPKc" title='llvm::Twine::Twine' data-ref="_ZN4llvm5TwineC1EPKc"></a><q>"newloaded"</q>);</td></tr>
<tr><th id="1596">1596</th><td></td></tr>
<tr><th id="1597">1597</th><td>      <i>// ...and then expand the CAS into a libcall.</i></td></tr>
<tr><th id="1598">1598</th><td>      <a class="tu member" href="#_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE" title='(anonymous namespace)::AtomicExpand::expandAtomicCASToLibcall' data-use='c' data-ref="_ZN12_GLOBAL__N_112AtomicExpand24expandAtomicCASToLibcallEPN4llvm17AtomicCmpXchgInstE">expandAtomicCASToLibcall</a>(<a class="local col6 ref" href="#396Pair" title='Pair' data-ref="396Pair">Pair</a>);</td></tr>
<tr><th id="1599">1599</th><td>    });</td></tr>
<tr><th id="1600">1600</th><td>  }</td></tr>
<tr><th id="1601">1601</th><td>}</td></tr>
<tr><th id="1602">1602</th><td></td></tr>
<tr><th id="1603">1603</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">// A helper routine for the above expandAtomic*ToLibcall functions.</i></td></tr>
<tr><th id="1604">1604</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">//</i></td></tr>
<tr><th id="1605">1605</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">// 'Libcalls' contains an array of enum values for the particular</i></td></tr>
<tr><th id="1606">1606</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">// ATOMIC libcalls to be emitted. All of the other arguments besides</i></td></tr>
<tr><th id="1607">1607</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">// 'I' are extracted from the Instruction subclass by the</i></td></tr>
<tr><th id="1608">1608</th><td><i  data-doc="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">// caller. Depending on the particular call, some will be null.</i></td></tr>
<tr><th id="1609">1609</th><td><em>bool</em> <a class="tu type" href="#(anonymousnamespace)::AtomicExpand" title='(anonymous namespace)::AtomicExpand' data-ref="(anonymousnamespace)::AtomicExpand">AtomicExpand</a>::<dfn class="tu decl def" id="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE" title='(anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall' data-type='bool (anonymous namespace)::AtomicExpand::expandAtomicOpToLibcall(llvm::Instruction * I, unsigned int Size, unsigned int Align, llvm::Value * PointerOperand, llvm::Value * ValueOperand, llvm::Value * CASExpected, llvm::AtomicOrdering Ordering, llvm::AtomicOrdering Ordering2, ArrayRef&lt;RTLIB::Libcall&gt; Libcalls)' data-ref="_ZN12_GLOBAL__N_112AtomicExpand23expandAtomicOpToLibcallEPN4llvm11InstructionEjjPNS1_5ValueES5_S5_NS1_14AtomicOrderingES6_NS1_8ArrayRefINS1_5RTLIB7LibcallEEE">expandAtomicOpToLibcall</dfn>(</td></tr>
<tr><th id="1610">1610</th><td>    <a class="type" href="../../include/llvm/IR/Instruction.h.html#llvm::Instruction" title='llvm::Instruction' data-ref="llvm::Instruction">Instruction</a> *<dfn class="local col7 decl" id="397I" title='I' data-type='llvm::Instruction *' data-ref="397I">I</dfn>, <em>unsigned</em> <dfn class="local col8 decl" id="398Size" title='Size' data-type='unsigned int' data-ref="398Size">Size</dfn>, <em>unsigned</em> <dfn class="local col9 decl" id="399Align" title='Align' data-type='unsigned int' data-ref="399Align">Align</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="400PointerOperand" title='PointerOperand' data-type='llvm::Value *' data-ref="400PointerOperand">PointerOperand</dfn>,</td></tr>
<tr><th id="1611">1611</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="401ValueOperand" title='ValueOperand' data-type='llvm::Value *' data-ref="401ValueOperand">ValueOperand</dfn>, <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="402CASExpected" title='CASExpected' data-type='llvm::Value *' data-ref="402CASExpected">CASExpected</dfn>, <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col3 decl" id="403Ordering" title='Ordering' data-type='llvm::AtomicOrdering' data-ref="403Ordering">Ordering</dfn>,</td></tr>
<tr><th id="1612">1612</th><td>    <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a> <dfn class="local col4 decl" id="404Ordering2" title='Ordering2' data-type='llvm::AtomicOrdering' data-ref="404Ordering2">Ordering2</dfn>, <a class="type" href="../../include/llvm/ADT/ArrayRef.h.html#llvm::ArrayRef" title='llvm::ArrayRef' data-ref="llvm::ArrayRef">ArrayRef</a>&lt;<span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a>&gt; <dfn class="local col5 decl" id="405Libcalls" title='Libcalls' data-type='ArrayRef&lt;RTLIB::Libcall&gt;' data-ref="405Libcalls">Libcalls</dfn>) {</td></tr>
<tr><th id="1613">1613</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Libcalls.size() == 6) ? void (0) : __assert_fail (&quot;Libcalls.size() == 6&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1613, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a>.<a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRef4sizeEv" title='llvm::ArrayRef::size' data-ref="_ZNK4llvm8ArrayRef4sizeEv">size</a>() == <var>6</var>);</td></tr>
<tr><th id="1614">1614</th><td></td></tr>
<tr><th id="1615">1615</th><td>  <a class="type" href="../../include/llvm/IR/LLVMContext.h.html#llvm::LLVMContext" title='llvm::LLVMContext' data-ref="llvm::LLVMContext">LLVMContext</a> &amp;<dfn class="local col6 decl" id="406Ctx" title='Ctx' data-type='llvm::LLVMContext &amp;' data-ref="406Ctx">Ctx</dfn> = <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value10getContextEv" title='llvm::Value::getContext' data-ref="_ZNK4llvm5Value10getContextEv">getContext</a>();</td></tr>
<tr><th id="1616">1616</th><td>  <a class="type" href="../../include/llvm/IR/Module.h.html#llvm::Module" title='llvm::Module' data-ref="llvm::Module">Module</a> *<dfn class="local col7 decl" id="407M" title='M' data-type='llvm::Module *' data-ref="407M">M</dfn> = <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction9getModuleEv" title='llvm::Instruction::getModule' data-ref="_ZN4llvm11Instruction9getModuleEv">getModule</a>();</td></tr>
<tr><th id="1617">1617</th><td>  <em>const</em> <a class="type" href="../../include/llvm/IR/DataLayout.h.html#llvm::DataLayout" title='llvm::DataLayout' data-ref="llvm::DataLayout">DataLayout</a> &amp;<dfn class="local col8 decl" id="408DL" title='DL' data-type='const llvm::DataLayout &amp;' data-ref="408DL">DL</dfn> = <a class="local col7 ref" href="#407M" title='M' data-ref="407M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZNK4llvm6Module13getDataLayoutEv" title='llvm::Module::getDataLayout' data-ref="_ZNK4llvm6Module13getDataLayoutEv">getDataLayout</a>();</td></tr>
<tr><th id="1618">1618</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col9 decl" id="409Builder" title='Builder' data-type='IRBuilder&lt;&gt;' data-ref="409Builder">Builder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a><a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>);</td></tr>
<tr><th id="1619">1619</th><td>  <a class="type" href="../../include/llvm/IR/IRBuilder.h.html#llvm::IRBuilder" title='llvm::IRBuilder' data-ref="llvm::IRBuilder">IRBuilder</a>&lt;&gt; <dfn class="local col0 decl" id="410AllocaBuilder" title='AllocaBuilder' data-type='IRBuilder&lt;&gt;' data-ref="410AllocaBuilder">AllocaBuilder</dfn><a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE" title='llvm::IRBuilder::IRBuilder&lt;T, Inserter&gt;' data-ref="_ZN4llvm9IRBuilderC1EPNS_11InstructionEPNS_6MDNodeENS_8ArrayRefINS_17OperandBundleDefTIPNS_5ValueEEEEE">(</a>&amp;<a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction11getFunctionEv" title='llvm::Instruction::getFunction' data-ref="_ZN4llvm11Instruction11getFunctionEv">getFunction</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Function.h.html#_ZN4llvm8Function13getEntryBlockEv" title='llvm::Function::getEntryBlock' data-ref="_ZN4llvm8Function13getEntryBlockEv">getEntryBlock</a>().<a class="ref" href="../../include/llvm/IR/BasicBlock.h.html#_ZN4llvm10BasicBlock5frontEv" title='llvm::BasicBlock::front' data-ref="_ZN4llvm10BasicBlock5frontEv">front</a>());</td></tr>
<tr><th id="1620">1620</th><td></td></tr>
<tr><th id="1621">1621</th><td>  <em>bool</em> <dfn class="local col1 decl" id="411UseSizedLibcall" title='UseSizedLibcall' data-type='bool' data-ref="411UseSizedLibcall">UseSizedLibcall</dfn> = <a class="tu ref" href="#_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE" title='canUseSizedAtomicCall' data-use='c' data-ref="_ZL21canUseSizedAtomicCalljjRKN4llvm10DataLayoutE">canUseSizedAtomicCall</a>(<a class="local col8 ref" href="#398Size" title='Size' data-ref="398Size">Size</a>, <a class="local col9 ref" href="#399Align" title='Align' data-ref="399Align">Align</a>, <a class="local col8 ref" href="#408DL" title='DL' data-ref="408DL">DL</a>);</td></tr>
<tr><th id="1622">1622</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col2 decl" id="412SizedIntTy" title='SizedIntTy' data-type='llvm::Type *' data-ref="412SizedIntTy">SizedIntTy</dfn> = <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getIntNTyERNS_11LLVMContextEj" title='llvm::Type::getIntNTy' data-ref="_ZN4llvm4Type9getIntNTyERNS_11LLVMContextEj">getIntNTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>, <a class="local col8 ref" href="#398Size" title='Size' data-ref="398Size">Size</a> * <var>8</var>);</td></tr>
<tr><th id="1623">1623</th><td></td></tr>
<tr><th id="1624">1624</th><td>  <em>unsigned</em> <dfn class="local col3 decl" id="413AllocaAlignment" title='AllocaAlignment' data-type='unsigned int' data-ref="413AllocaAlignment">AllocaAlignment</dfn> = <a class="local col8 ref" href="#408DL" title='DL' data-ref="408DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout20getPrefTypeAlignmentEPNS_4TypeE" title='llvm::DataLayout::getPrefTypeAlignment' data-ref="_ZNK4llvm10DataLayout20getPrefTypeAlignmentEPNS_4TypeE">getPrefTypeAlignment</a>(<a class="local col2 ref" href="#412SizedIntTy" title='SizedIntTy' data-ref="412SizedIntTy">SizedIntTy</a>);</td></tr>
<tr><th id="1625">1625</th><td></td></tr>
<tr><th id="1626">1626</th><td>  <i>// TODO: the "order" argument type is "int", not int32. So</i></td></tr>
<tr><th id="1627">1627</th><td><i>  // getInt32Ty may be wrong if the arch uses e.g. 16-bit ints.</i></td></tr>
<tr><th id="1628">1628</th><td>  <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a> *<dfn class="local col4 decl" id="414SizeVal64" title='SizeVal64' data-type='llvm::ConstantInt *' data-ref="414SizeVal64">SizeVal64</dfn> = <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type10getInt64TyERNS_11LLVMContextE" title='llvm::Type::getInt64Ty' data-ref="_ZN4llvm4Type10getInt64TyERNS_11LLVMContextE">getInt64Ty</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>), <a class="local col8 ref" href="#398Size" title='Size' data-ref="398Size">Size</a>);</td></tr>
<tr><th id="1629">1629</th><td>  <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Ordering != AtomicOrdering::NotAtomic &amp;&amp; &quot;expect atomic MO&quot;) ? void (0) : __assert_fail (&quot;Ordering != AtomicOrdering::NotAtomic &amp;&amp; \&quot;expect atomic MO\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1629, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col3 ref" href="#403Ordering" title='Ordering' data-ref="403Ordering">Ordering</a> != <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::NotAtomic" title='llvm::AtomicOrdering::NotAtomic' data-ref="llvm::AtomicOrdering::NotAtomic">NotAtomic</a> &amp;&amp; <q>"expect atomic MO"</q>);</td></tr>
<tr><th id="1630">1630</th><td>  <a class="type" href="../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col5 decl" id="415OrderingVal" title='OrderingVal' data-type='llvm::Constant *' data-ref="415OrderingVal">OrderingVal</dfn> =</td></tr>
<tr><th id="1631">1631</th><td>      <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE" title='llvm::Type::getInt32Ty' data-ref="_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE">getInt32Ty</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>), (<em>int</em>)<a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm6toCABIENS_14AtomicOrderingE" title='llvm::toCABI' data-ref="_ZN4llvm6toCABIENS_14AtomicOrderingE">toCABI</a>(<a class="local col3 ref" href="#403Ordering" title='Ordering' data-ref="403Ordering">Ordering</a>));</td></tr>
<tr><th id="1632">1632</th><td>  <a class="type" href="../../include/llvm/IR/Constant.h.html#llvm::Constant" title='llvm::Constant' data-ref="llvm::Constant">Constant</a> *<dfn class="local col6 decl" id="416Ordering2Val" title='Ordering2Val' data-type='llvm::Constant *' data-ref="416Ordering2Val">Ordering2Val</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1633">1633</th><td>  <b>if</b> (<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>) {</td></tr>
<tr><th id="1634">1634</th><td>    <a class="macro" href="../../../../include/assert.h.html#92" title="(static_cast &lt;bool&gt; (Ordering2 != AtomicOrdering::NotAtomic &amp;&amp; &quot;expect atomic MO&quot;) ? void (0) : __assert_fail (&quot;Ordering2 != AtomicOrdering::NotAtomic &amp;&amp; \&quot;expect atomic MO\&quot;&quot;, &quot;/root/cheri/llvm-project/llvm/lib/CodeGen/AtomicExpandPass.cpp&quot;, 1634, __extension__ __PRETTY_FUNCTION__))" data-ref="_M/assert">assert</a>(<a class="local col4 ref" href="#404Ordering2" title='Ordering2' data-ref="404Ordering2">Ordering2</a> != <a class="type" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering" title='llvm::AtomicOrdering' data-ref="llvm::AtomicOrdering">AtomicOrdering</a>::<a class="enum" href="../../include/llvm/Support/AtomicOrdering.h.html#llvm::AtomicOrdering::NotAtomic" title='llvm::AtomicOrdering::NotAtomic' data-ref="llvm::AtomicOrdering::NotAtomic">NotAtomic</a> &amp;&amp; <q>"expect atomic MO"</q>);</td></tr>
<tr><th id="1635">1635</th><td>    <a class="local col6 ref" href="#416Ordering2Val" title='Ordering2Val' data-ref="416Ordering2Val">Ordering2Val</a> =</td></tr>
<tr><th id="1636">1636</th><td>        <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE" title='llvm::Type::getInt32Ty' data-ref="_ZN4llvm4Type10getInt32TyERNS_11LLVMContextE">getInt32Ty</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>), (<em>int</em>)<a class="ref" href="../../include/llvm/Support/AtomicOrdering.h.html#_ZN4llvm6toCABIENS_14AtomicOrderingE" title='llvm::toCABI' data-ref="_ZN4llvm6toCABIENS_14AtomicOrderingE">toCABI</a>(<a class="local col4 ref" href="#404Ordering2" title='Ordering2' data-ref="404Ordering2">Ordering2</a>));</td></tr>
<tr><th id="1637">1637</th><td>  }</td></tr>
<tr><th id="1638">1638</th><td>  <em>bool</em> <dfn class="local col7 decl" id="417HasResult" title='HasResult' data-type='bool' data-ref="417HasResult">HasResult</dfn> = <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>() != <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getVoidTyERNS_11LLVMContextE" title='llvm::Type::getVoidTy' data-ref="_ZN4llvm4Type9getVoidTyERNS_11LLVMContextE">getVoidTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>);</td></tr>
<tr><th id="1639">1639</th><td></td></tr>
<tr><th id="1640">1640</th><td>  <span class="namespace">RTLIB::</span><a class="type" href="../../include/llvm/CodeGen/RuntimeLibcalls.h.html#llvm::RTLIB::Libcall" title='llvm::RTLIB::Libcall' data-ref="llvm::RTLIB::Libcall">Libcall</a> <dfn class="local col8 decl" id="418RTLibType" title='RTLibType' data-type='RTLIB::Libcall' data-ref="418RTLibType">RTLibType</dfn>;</td></tr>
<tr><th id="1641">1641</th><td>  <b>if</b> (<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>) {</td></tr>
<tr><th id="1642">1642</th><td>    <b>switch</b> (<a class="local col8 ref" href="#398Size" title='Size' data-ref="398Size">Size</a>) {</td></tr>
<tr><th id="1643">1643</th><td>    <b>case</b> <var>1</var>: <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>1</var>]</a>; <b>break</b>;</td></tr>
<tr><th id="1644">1644</th><td>    <b>case</b> <var>2</var>: <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>2</var>]</a>; <b>break</b>;</td></tr>
<tr><th id="1645">1645</th><td>    <b>case</b> <var>4</var>: <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>3</var>]</a>; <b>break</b>;</td></tr>
<tr><th id="1646">1646</th><td>    <b>case</b> <var>8</var>: <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>4</var>]</a>; <b>break</b>;</td></tr>
<tr><th id="1647">1647</th><td>    <b>case</b> <var>16</var>: <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>5</var>]</a>; <b>break</b>;</td></tr>
<tr><th id="1648">1648</th><td>    }</td></tr>
<tr><th id="1649">1649</th><td>  } <b>else</b> <b>if</b> (<a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>0</var>]</a> != <span class="namespace">RTLIB::</span><a class="enum" href="../../include/llvm/IR/RuntimeLibcalls.def.html#555" title='llvm::RTLIB::Libcall::UNKNOWN_LIBCALL' data-ref="llvm::RTLIB::Libcall::UNKNOWN_LIBCALL">UNKNOWN_LIBCALL</a>) {</td></tr>
<tr><th id="1650">1650</th><td>    <a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a> = <a class="local col5 ref" href="#405Libcalls" title='Libcalls' data-ref="405Libcalls">Libcalls</a><a class="ref" href="../../include/llvm/ADT/ArrayRef.h.html#_ZNK4llvm8ArrayRefixEm" title='llvm::ArrayRef::operator[]' data-ref="_ZNK4llvm8ArrayRefixEm">[<var>0</var>]</a>;</td></tr>
<tr><th id="1651">1651</th><td>  } <b>else</b> {</td></tr>
<tr><th id="1652">1652</th><td>    <i>// Can't use sized function, and there's no generic for this</i></td></tr>
<tr><th id="1653">1653</th><td><i>    // operation, so give up.</i></td></tr>
<tr><th id="1654">1654</th><td>    <b>return</b> <b>false</b>;</td></tr>
<tr><th id="1655">1655</th><td>  }</td></tr>
<tr><th id="1656">1656</th><td></td></tr>
<tr><th id="1657">1657</th><td>  <i>// Build up the function call. There's two kinds. First, the sized</i></td></tr>
<tr><th id="1658">1658</th><td><i>  // variants.  These calls are going to be one of the following (with</i></td></tr>
<tr><th id="1659">1659</th><td><i>  // N=1,2,4,8,16):</i></td></tr>
<tr><th id="1660">1660</th><td><i>  //  iN    __atomic_load_N(iN *ptr, int ordering)</i></td></tr>
<tr><th id="1661">1661</th><td><i>  //  void  __atomic_store_N(iN *ptr, iN val, int ordering)</i></td></tr>
<tr><th id="1662">1662</th><td><i>  //  iN    __atomic_{exchange|fetch_*}_N(iN *ptr, iN val, int ordering)</i></td></tr>
<tr><th id="1663">1663</th><td><i>  //  bool  __atomic_compare_exchange_N(iN *ptr, iN *expected, iN desired,</i></td></tr>
<tr><th id="1664">1664</th><td><i>  //                                    int success_order, int failure_order)</i></td></tr>
<tr><th id="1665">1665</th><td><i>  //</i></td></tr>
<tr><th id="1666">1666</th><td><i>  // Note that these functions can be used for non-integer atomic</i></td></tr>
<tr><th id="1667">1667</th><td><i>  // operations, the values just need to be bitcast to integers on the</i></td></tr>
<tr><th id="1668">1668</th><td><i>  // way in and out.</i></td></tr>
<tr><th id="1669">1669</th><td><i>  //</i></td></tr>
<tr><th id="1670">1670</th><td><i>  // And, then, the generic variants. They look like the following:</i></td></tr>
<tr><th id="1671">1671</th><td><i>  //  void  __atomic_load(size_t size, void *ptr, void *ret, int ordering)</i></td></tr>
<tr><th id="1672">1672</th><td><i>  //  void  __atomic_store(size_t size, void *ptr, void *val, int ordering)</i></td></tr>
<tr><th id="1673">1673</th><td><i>  //  void  __atomic_exchange(size_t size, void *ptr, void *val, void *ret,</i></td></tr>
<tr><th id="1674">1674</th><td><i>  //                          int ordering)</i></td></tr>
<tr><th id="1675">1675</th><td><i>  //  bool  __atomic_compare_exchange(size_t size, void *ptr, void *expected,</i></td></tr>
<tr><th id="1676">1676</th><td><i>  //                                  void *desired, int success_order,</i></td></tr>
<tr><th id="1677">1677</th><td><i>  //                                  int failure_order)</i></td></tr>
<tr><th id="1678">1678</th><td><i>  //</i></td></tr>
<tr><th id="1679">1679</th><td><i>  // The different signatures are built up depending on the</i></td></tr>
<tr><th id="1680">1680</th><td><i>  // 'UseSizedLibcall', 'CASExpected', 'ValueOperand', and 'HasResult'</i></td></tr>
<tr><th id="1681">1681</th><td><i>  // variables.</i></td></tr>
<tr><th id="1682">1682</th><td></td></tr>
<tr><th id="1683">1683</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a> *<dfn class="local col9 decl" id="419AllocaCASExpected" title='AllocaCASExpected' data-type='llvm::AllocaInst *' data-ref="419AllocaCASExpected">AllocaCASExpected</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1684">1684</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="420AllocaCASExpected_i8" title='AllocaCASExpected_i8' data-type='llvm::Value *' data-ref="420AllocaCASExpected_i8">AllocaCASExpected_i8</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1685">1685</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a> *<dfn class="local col1 decl" id="421AllocaValue" title='AllocaValue' data-type='llvm::AllocaInst *' data-ref="421AllocaValue">AllocaValue</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1686">1686</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="422AllocaValue_i8" title='AllocaValue_i8' data-type='llvm::Value *' data-ref="422AllocaValue_i8">AllocaValue_i8</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1687">1687</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::AllocaInst" title='llvm::AllocaInst' data-ref="llvm::AllocaInst">AllocaInst</a> *<dfn class="local col3 decl" id="423AllocaResult" title='AllocaResult' data-type='llvm::AllocaInst *' data-ref="423AllocaResult">AllocaResult</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1688">1688</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="424AllocaResult_i8" title='AllocaResult_i8' data-type='llvm::Value *' data-ref="424AllocaResult_i8">AllocaResult_i8</dfn> = <b>nullptr</b>;</td></tr>
<tr><th id="1689">1689</th><td></td></tr>
<tr><th id="1690">1690</th><td>  <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col5 decl" id="425ResultTy" title='ResultTy' data-type='llvm::Type *' data-ref="425ResultTy">ResultTy</dfn>;</td></tr>
<tr><th id="1691">1691</th><td>  <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *, <var>6</var>&gt; <a class="ref fake" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col6 decl" id="426Args" title='Args' data-type='SmallVector&lt;llvm::Value *, 6&gt;' data-ref="426Args">Args</dfn>;</td></tr>
<tr><th id="1692">1692</th><td>  <a class="type" href="../../include/llvm/IR/Attributes.h.html#llvm::AttributeList" title='llvm::AttributeList' data-ref="llvm::AttributeList">AttributeList</a> <a class="ref fake" href="../../include/llvm/IR/Attributes.h.html#_ZN4llvm13AttributeListC1Ev" title='llvm::AttributeList::AttributeList' data-ref="_ZN4llvm13AttributeListC1Ev"></a><dfn class="local col7 decl" id="427Attr" title='Attr' data-type='llvm::AttributeList' data-ref="427Attr">Attr</dfn>;</td></tr>
<tr><th id="1693">1693</th><td></td></tr>
<tr><th id="1694">1694</th><td>  <i>// 'size' argument.</i></td></tr>
<tr><th id="1695">1695</th><td>  <b>if</b> (!<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>) {</td></tr>
<tr><th id="1696">1696</th><td>    <i>// Note, getIntPtrType is assumed equivalent to size_t.</i></td></tr>
<tr><th id="1697">1697</th><td>    <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::ConstantInt" title='llvm::ConstantInt' data-ref="llvm::ConstantInt">ConstantInt</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb" title='llvm::ConstantInt::get' data-ref="_ZN4llvm11ConstantInt3getEPNS_11IntegerTypeEmb">get</a>(<a class="local col8 ref" href="#408DL" title='DL' data-ref="408DL">DL</a>.<a class="ref" href="../../include/llvm/IR/DataLayout.h.html#_ZNK4llvm10DataLayout13getIntPtrTypeERNS_11LLVMContextEj" title='llvm::DataLayout::getIntPtrType' data-ref="_ZNK4llvm10DataLayout13getIntPtrTypeERNS_11LLVMContextEj">getIntPtrType</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>), <a class="local col8 ref" href="#398Size" title='Size' data-ref="398Size">Size</a>));</td></tr>
<tr><th id="1698">1698</th><td>  }</td></tr>
<tr><th id="1699">1699</th><td></td></tr>
<tr><th id="1700">1700</th><td>  <i>// 'ptr' argument.</i></td></tr>
<tr><th id="1701">1701</th><td><i>  // note: This assumes all address spaces share a common libfunc</i></td></tr>
<tr><th id="1702">1702</th><td><i>  // implementation and that addresses are convertable.  For systems without</i></td></tr>
<tr><th id="1703">1703</th><td><i>  // that property, we'd need to extend this mechanism to support AS-specific</i></td></tr>
<tr><th id="1704">1704</th><td><i>  // families of atomic intrinsics.</i></td></tr>
<tr><th id="1705">1705</th><td>  <em>auto</em> <dfn class="local col8 decl" id="428PtrTypeAS" title='PtrTypeAS' data-type='unsigned int' data-ref="428PtrTypeAS">PtrTypeAS</dfn> = <a class="local col0 ref" href="#400PointerOperand" title='PointerOperand' data-ref="400PointerOperand">PointerOperand</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>();</td></tr>
<tr><th id="1706">1706</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col9 decl" id="429PtrVal" title='PtrVal' data-type='llvm::Value *' data-ref="429PtrVal">PtrVal</dfn> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col0 ref" href="#400PointerOperand" title='PointerOperand' data-ref="400PointerOperand">PointerOperand</a>,</td></tr>
<tr><th id="1707">1707</th><td>                                        <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj" title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>, <a class="local col8 ref" href="#428PtrTypeAS" title='PtrTypeAS' data-ref="428PtrTypeAS">PtrTypeAS</a>));</td></tr>
<tr><th id="1708">1708</th><td>  <a class="local col9 ref" href="#429PtrVal" title='PtrVal' data-ref="429PtrVal">PtrVal</a> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder19CreateAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateAddrSpaceCast' data-ref="_ZN4llvm9IRBuilder19CreateAddrSpaceCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateAddrSpaceCast</a>(<a class="local col9 ref" href="#429PtrVal" title='PtrVal' data-ref="429PtrVal">PtrVal</a>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj" title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>));</td></tr>
<tr><th id="1709">1709</th><td>  <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col9 ref" href="#429PtrVal" title='PtrVal' data-ref="429PtrVal">PtrVal</a>);</td></tr>
<tr><th id="1710">1710</th><td></td></tr>
<tr><th id="1711">1711</th><td>  <i>// 'expected' argument, if present.</i></td></tr>
<tr><th id="1712">1712</th><td>  <b>if</b> (<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>) {</td></tr>
<tr><th id="1713">1713</th><td>    <a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a> = <a class="local col0 ref" href="#410AllocaBuilder" title='AllocaBuilder' data-ref="410AllocaBuilder">AllocaBuilder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateAlloca' data-ref="_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateAlloca</a>(<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1714">1714</th><td>    <a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm10AllocaInst12setAlignmentEj" title='llvm::AllocaInst::setAlignment' data-ref="_ZN4llvm10AllocaInst12setAlignmentEj">setAlignment</a>(<a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1715">1715</th><td>    <em>unsigned</em> <dfn class="local col0 decl" id="430AllocaAS" title='AllocaAS' data-type='unsigned int' data-ref="430AllocaAS">AllocaAS</dfn> =  <a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10AllocaInst7getTypeEv" title='llvm::AllocaInst::getType' data-ref="_ZNK4llvm10AllocaInst7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>();</td></tr>
<tr><th id="1716">1716</th><td></td></tr>
<tr><th id="1717">1717</th><td>    <a class="local col0 ref" href="#420AllocaCASExpected_i8" title='AllocaCASExpected_i8' data-ref="420AllocaCASExpected_i8">AllocaCASExpected_i8</a> =</td></tr>
<tr><th id="1718">1718</th><td>      <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a>,</td></tr>
<tr><th id="1719">1719</th><td>                            <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj" title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>, <a class="local col0 ref" href="#430AllocaAS" title='AllocaAS' data-ref="430AllocaAS">AllocaAS</a>));</td></tr>
<tr><th id="1720">1720</th><td>    <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeStart' data-ref="_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeStart</a>(<a class="local col0 ref" href="#420AllocaCASExpected_i8" title='AllocaCASExpected_i8' data-ref="420AllocaCASExpected_i8">AllocaCASExpected_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1721">1721</th><td>    <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb" title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</a>(<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>, <a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a>, <a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1722">1722</th><td>    <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col0 ref" href="#420AllocaCASExpected_i8" title='AllocaCASExpected_i8' data-ref="420AllocaCASExpected_i8">AllocaCASExpected_i8</a>);</td></tr>
<tr><th id="1723">1723</th><td>  }</td></tr>
<tr><th id="1724">1724</th><td></td></tr>
<tr><th id="1725">1725</th><td>  <i>// 'val' argument ('desired' for cas), if present.</i></td></tr>
<tr><th id="1726">1726</th><td>  <b>if</b> (<a class="local col1 ref" href="#401ValueOperand" title='ValueOperand' data-ref="401ValueOperand">ValueOperand</a>) {</td></tr>
<tr><th id="1727">1727</th><td>    <b>if</b> (<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>) {</td></tr>
<tr><th id="1728">1728</th><td>      <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="431IntValue" title='IntValue' data-type='llvm::Value *' data-ref="431IntValue">IntValue</dfn> =</td></tr>
<tr><th id="1729">1729</th><td>          <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder22CreateBitOrPointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitOrPointerCast' data-ref="_ZN4llvm9IRBuilder22CreateBitOrPointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitOrPointerCast</a>(<a class="local col1 ref" href="#401ValueOperand" title='ValueOperand' data-ref="401ValueOperand">ValueOperand</a>, <a class="local col2 ref" href="#412SizedIntTy" title='SizedIntTy' data-ref="412SizedIntTy">SizedIntTy</a>);</td></tr>
<tr><th id="1730">1730</th><td>      <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col1 ref" href="#431IntValue" title='IntValue' data-ref="431IntValue">IntValue</a>);</td></tr>
<tr><th id="1731">1731</th><td>    } <b>else</b> {</td></tr>
<tr><th id="1732">1732</th><td>      <a class="local col1 ref" href="#421AllocaValue" title='AllocaValue' data-ref="421AllocaValue">AllocaValue</a> = <a class="local col0 ref" href="#410AllocaBuilder" title='AllocaBuilder' data-ref="410AllocaBuilder">AllocaBuilder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateAlloca' data-ref="_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateAlloca</a>(<a class="local col1 ref" href="#401ValueOperand" title='ValueOperand' data-ref="401ValueOperand">ValueOperand</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1733">1733</th><td>      <a class="local col1 ref" href="#421AllocaValue" title='AllocaValue' data-ref="421AllocaValue">AllocaValue</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm10AllocaInst12setAlignmentEj" title='llvm::AllocaInst::setAlignment' data-ref="_ZN4llvm10AllocaInst12setAlignmentEj">setAlignment</a>(<a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1734">1734</th><td>      <a class="local col2 ref" href="#422AllocaValue_i8" title='AllocaValue_i8' data-ref="422AllocaValue_i8">AllocaValue_i8</a> =</td></tr>
<tr><th id="1735">1735</th><td>          <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col1 ref" href="#421AllocaValue" title='AllocaValue' data-ref="421AllocaValue">AllocaValue</a>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj" title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>));</td></tr>
<tr><th id="1736">1736</th><td>      <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeStart' data-ref="_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeStart</a>(<a class="local col2 ref" href="#422AllocaValue_i8" title='AllocaValue_i8' data-ref="422AllocaValue_i8">AllocaValue_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1737">1737</th><td>      <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb" title='llvm::IRBuilder::CreateAlignedStore' data-ref="_ZN4llvm9IRBuilder18CreateAlignedStoreEPNS_5ValueES2_jb">CreateAlignedStore</a>(<a class="local col1 ref" href="#401ValueOperand" title='ValueOperand' data-ref="401ValueOperand">ValueOperand</a>, <a class="local col1 ref" href="#421AllocaValue" title='AllocaValue' data-ref="421AllocaValue">AllocaValue</a>, <a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1738">1738</th><td>      <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col2 ref" href="#422AllocaValue_i8" title='AllocaValue_i8' data-ref="422AllocaValue_i8">AllocaValue_i8</a>);</td></tr>
<tr><th id="1739">1739</th><td>    }</td></tr>
<tr><th id="1740">1740</th><td>  }</td></tr>
<tr><th id="1741">1741</th><td></td></tr>
<tr><th id="1742">1742</th><td>  <i>// 'ret' argument.</i></td></tr>
<tr><th id="1743">1743</th><td>  <b>if</b> (!<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a> &amp;&amp; <a class="local col7 ref" href="#417HasResult" title='HasResult' data-ref="417HasResult">HasResult</a> &amp;&amp; !<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>) {</td></tr>
<tr><th id="1744">1744</th><td>    <a class="local col3 ref" href="#423AllocaResult" title='AllocaResult' data-ref="423AllocaResult">AllocaResult</a> = <a class="local col0 ref" href="#410AllocaBuilder" title='AllocaBuilder' data-ref="410AllocaBuilder">AllocaBuilder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE" title='llvm::IRBuilder::CreateAlloca' data-ref="_ZN4llvm9IRBuilder12CreateAllocaEPNS_4TypeEPNS_5ValueERKNS_5TwineE">CreateAlloca</a>(<a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1745">1745</th><td>    <a class="local col3 ref" href="#423AllocaResult" title='AllocaResult' data-ref="423AllocaResult">AllocaResult</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZN4llvm10AllocaInst12setAlignmentEj" title='llvm::AllocaInst::setAlignment' data-ref="_ZN4llvm10AllocaInst12setAlignmentEj">setAlignment</a>(<a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1746">1746</th><td>    <em>unsigned</em> <dfn class="local col2 decl" id="432AllocaAS" title='AllocaAS' data-type='unsigned int' data-ref="432AllocaAS">AllocaAS</dfn> =  <a class="local col3 ref" href="#423AllocaResult" title='AllocaResult' data-ref="423AllocaResult">AllocaResult</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instructions.h.html#_ZNK4llvm10AllocaInst7getTypeEv" title='llvm::AllocaInst::getType' data-ref="_ZNK4llvm10AllocaInst7getTypeEv">getType</a>()-&gt;<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZNK4llvm4Type22getPointerAddressSpaceEv" title='llvm::Type::getPointerAddressSpace' data-ref="_ZNK4llvm4Type22getPointerAddressSpaceEv">getPointerAddressSpace</a>();</td></tr>
<tr><th id="1747">1747</th><td>    <a class="local col4 ref" href="#424AllocaResult_i8" title='AllocaResult_i8' data-ref="424AllocaResult_i8">AllocaResult_i8</a> =</td></tr>
<tr><th id="1748">1748</th><td>      <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitCast' data-ref="_ZN4llvm9IRBuilder13CreateBitCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitCast</a>(<a class="local col3 ref" href="#423AllocaResult" title='AllocaResult' data-ref="423AllocaResult">AllocaResult</a>, <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj" title='llvm::Type::getInt8PtrTy' data-ref="_ZN4llvm4Type12getInt8PtrTyERNS_11LLVMContextEj">getInt8PtrTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>, <a class="local col2 ref" href="#432AllocaAS" title='AllocaAS' data-ref="432AllocaAS">AllocaAS</a>));</td></tr>
<tr><th id="1749">1749</th><td>    <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeStart' data-ref="_ZN4llvm13IRBuilderBase19CreateLifetimeStartEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeStart</a>(<a class="local col4 ref" href="#424AllocaResult_i8" title='AllocaResult_i8' data-ref="424AllocaResult_i8">AllocaResult_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1750">1750</th><td>    <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col4 ref" href="#424AllocaResult_i8" title='AllocaResult_i8' data-ref="424AllocaResult_i8">AllocaResult_i8</a>);</td></tr>
<tr><th id="1751">1751</th><td>  }</td></tr>
<tr><th id="1752">1752</th><td></td></tr>
<tr><th id="1753">1753</th><td>  <i>// 'ordering' ('success_order' for cas) argument.</i></td></tr>
<tr><th id="1754">1754</th><td>  <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col5 ref" href="#415OrderingVal" title='OrderingVal' data-ref="415OrderingVal">OrderingVal</a>);</td></tr>
<tr><th id="1755">1755</th><td></td></tr>
<tr><th id="1756">1756</th><td>  <i>// 'failure_order' argument, if present.</i></td></tr>
<tr><th id="1757">1757</th><td>  <b>if</b> (<a class="local col6 ref" href="#416Ordering2Val" title='Ordering2Val' data-ref="416Ordering2Val">Ordering2Val</a>)</td></tr>
<tr><th id="1758">1758</th><td>    <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col6 ref" href="#416Ordering2Val" title='Ordering2Val' data-ref="416Ordering2Val">Ordering2Val</a>);</td></tr>
<tr><th id="1759">1759</th><td></td></tr>
<tr><th id="1760">1760</th><td>  <i>// Now, the return type.</i></td></tr>
<tr><th id="1761">1761</th><td>  <b>if</b> (<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>) {</td></tr>
<tr><th id="1762">1762</th><td>    <a class="local col5 ref" href="#425ResultTy" title='ResultTy' data-ref="425ResultTy">ResultTy</a> = <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE" title='llvm::Type::getInt1Ty' data-ref="_ZN4llvm4Type9getInt1TyERNS_11LLVMContextE">getInt1Ty</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>);</td></tr>
<tr><th id="1763">1763</th><td>    Attr = Attr.addAttribute(Ctx, AttributeList::ReturnIndex, Attribute::<span class='error' title="no member named &apos;ZExt&apos; in &apos;llvm::Attribute&apos;">ZExt</span>);</td></tr>
<tr><th id="1764">1764</th><td>  } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#417HasResult" title='HasResult' data-ref="417HasResult">HasResult</a> &amp;&amp; <a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>)</td></tr>
<tr><th id="1765">1765</th><td>    <a class="local col5 ref" href="#425ResultTy" title='ResultTy' data-ref="425ResultTy">ResultTy</a> = <a class="local col2 ref" href="#412SizedIntTy" title='SizedIntTy' data-ref="412SizedIntTy">SizedIntTy</a>;</td></tr>
<tr><th id="1766">1766</th><td>  <b>else</b></td></tr>
<tr><th id="1767">1767</th><td>    <a class="local col5 ref" href="#425ResultTy" title='ResultTy' data-ref="425ResultTy">ResultTy</a> = <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a>::<a class="ref" href="../../include/llvm/IR/Type.h.html#_ZN4llvm4Type9getVoidTyERNS_11LLVMContextE" title='llvm::Type::getVoidTy' data-ref="_ZN4llvm4Type9getVoidTyERNS_11LLVMContextE">getVoidTy</a>(<span class='refarg'><a class="local col6 ref" href="#406Ctx" title='Ctx' data-ref="406Ctx">Ctx</a></span>);</td></tr>
<tr><th id="1768">1768</th><td></td></tr>
<tr><th id="1769">1769</th><td>  <i>// Done with setting up arguments and return types, create the call:</i></td></tr>
<tr><th id="1770">1770</th><td>  <a class="type" href="../../include/llvm/ADT/SmallVector.h.html#llvm::SmallVector" title='llvm::SmallVector' data-ref="llvm::SmallVector">SmallVector</a>&lt;<a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *, <var>6</var>&gt; <a class="ref fake" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm11SmallVectorC1Ev" title='llvm::SmallVector::SmallVector&lt;T, N&gt;' data-ref="_ZN4llvm11SmallVectorC1Ev"></a><dfn class="local col3 decl" id="433ArgTys" title='ArgTys' data-type='SmallVector&lt;llvm::Type *, 6&gt;' data-ref="433ArgTys">ArgTys</dfn>;</td></tr>
<tr><th id="1771">1771</th><td>  <b>for</b> (<a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col4 decl" id="434Arg" title='Arg' data-type='llvm::Value *' data-ref="434Arg">Arg</dfn> : <a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>)</td></tr>
<tr><th id="1772">1772</th><td>    <a class="local col3 ref" href="#433ArgTys" title='ArgTys' data-ref="433ArgTys">ArgTys</a>.<a class="ref" href="../../include/llvm/ADT/SmallVector.h.html#_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_" title='llvm::SmallVectorTemplateBase&lt;type-parameter-0-0, true&gt;::push_back' data-ref="_ZN4llvm23SmallVectorTemplateBaseIT_Lb1EE9push_backERKS1_">push_back</a>(<a class="local col4 ref" href="#434Arg" title='Arg' data-ref="434Arg">Arg</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1773">1773</th><td>  <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::FunctionType" title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</a> *<dfn class="local col5 decl" id="435FnType" title='FnType' data-type='llvm::FunctionType *' data-ref="435FnType">FnType</dfn> = <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::FunctionType" title='llvm::FunctionType' data-ref="llvm::FunctionType">FunctionType</a>::<a class="ref" href="../../include/llvm/IR/DerivedTypes.h.html#_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb" title='llvm::FunctionType::get' data-ref="_ZN4llvm12FunctionType3getEPNS_4TypeENS_8ArrayRefIS2_EEb">get</a>(<a class="local col5 ref" href="#425ResultTy" title='ResultTy' data-ref="425ResultTy">ResultTy</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col3 ref" href="#433ArgTys" title='ArgTys' data-ref="433ArgTys">ArgTys</a>, <b>false</b>);</td></tr>
<tr><th id="1774">1774</th><td>  <a class="type" href="../../include/llvm/IR/DerivedTypes.h.html#llvm::FunctionCallee" title='llvm::FunctionCallee' data-ref="llvm::FunctionCallee">FunctionCallee</a> <dfn class="local col6 decl" id="436LibcallFn" title='LibcallFn' data-type='llvm::FunctionCallee' data-ref="436LibcallFn">LibcallFn</dfn> =</td></tr>
<tr><th id="1775">1775</th><td>      <a class="local col7 ref" href="#407M" title='M' data-ref="407M">M</a>-&gt;<a class="ref" href="../../include/llvm/IR/Module.h.html#_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeENS_13AttributeListE" title='llvm::Module::getOrInsertFunction' data-ref="_ZN4llvm6Module19getOrInsertFunctionENS_9StringRefEPNS_12FunctionTypeENS_13AttributeListE">getOrInsertFunction</a>(<a class="ref fake" href="../../include/llvm/ADT/StringRef.h.html#_ZN4llvm9StringRefC1EPKc" title='llvm::StringRef::StringRef' data-ref="_ZN4llvm9StringRefC1EPKc"></a><a class="tu member" href="#(anonymousnamespace)::AtomicExpand::TLI" title='(anonymous namespace)::AtomicExpand::TLI' data-use='r' data-ref="(anonymousnamespace)::AtomicExpand::TLI">TLI</a>-&gt;<a class="ref" href="../../include/llvm/CodeGen/TargetLowering.h.html#_ZNK4llvm18TargetLoweringBase14getLibcallNameENS_5RTLIB7LibcallE" title='llvm::TargetLoweringBase::getLibcallName' data-ref="_ZNK4llvm18TargetLoweringBase14getLibcallNameENS_5RTLIB7LibcallE">getLibcallName</a>(<a class="local col8 ref" href="#418RTLibType" title='RTLibType' data-ref="418RTLibType">RTLibType</a>), <a class="local col5 ref" href="#435FnType" title='FnType' data-ref="435FnType">FnType</a>, <a class="ref fake" href="../../include/llvm/IR/Attributes.h.html#336" title='llvm::AttributeList::AttributeList' data-ref="_ZN4llvm13AttributeListC1ERKS0_"></a><a class="local col7 ref" href="#427Attr" title='Attr' data-ref="427Attr">Attr</a>);</td></tr>
<tr><th id="1776">1776</th><td>  <a class="type" href="../../include/llvm/IR/Instructions.h.html#llvm::CallInst" title='llvm::CallInst' data-ref="llvm::CallInst">CallInst</a> *<dfn class="local col7 decl" id="437Call" title='Call' data-type='llvm::CallInst *' data-ref="437Call">Call</dfn> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE" title='llvm::IRBuilder::CreateCall' data-ref="_ZN4llvm9IRBuilder10CreateCallENS_14FunctionCalleeENS_8ArrayRefIPNS_5ValueEEERKNS_5TwineEPNS_6MDNodeE">CreateCall</a>(<a class="ref fake" href="../../include/llvm/IR/DerivedTypes.h.html#164" title='llvm::FunctionCallee::FunctionCallee' data-ref="_ZN4llvm14FunctionCalleeC1ERKS0_"></a><a class="local col6 ref" href="#436LibcallFn" title='LibcallFn' data-ref="436LibcallFn">LibcallFn</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKNS_25SmallVectorTemplateCommonIT_T_EE"></a><a class="local col6 ref" href="#426Args" title='Args' data-ref="426Args">Args</a>);</td></tr>
<tr><th id="1777">1777</th><td>  <a class="local col7 ref" href="#437Call" title='Call' data-ref="437Call">Call</a>-&gt;<a class="ref" href="../../include/llvm/IR/InstrTypes.h.html#_ZN4llvm8CallBase13setAttributesENS_13AttributeListE" title='llvm::CallBase::setAttributes' data-ref="_ZN4llvm8CallBase13setAttributesENS_13AttributeListE">setAttributes</a>(<a class="ref fake" href="../../include/llvm/IR/Attributes.h.html#336" title='llvm::AttributeList::AttributeList' data-ref="_ZN4llvm13AttributeListC1ERKS0_"></a><a class="local col7 ref" href="#427Attr" title='Attr' data-ref="427Attr">Attr</a>);</td></tr>
<tr><th id="1778">1778</th><td>  <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col8 decl" id="438Result" title='Result' data-type='llvm::Value *' data-ref="438Result">Result</dfn> = <a class="local col7 ref" href="#437Call" title='Call' data-ref="437Call">Call</a>;</td></tr>
<tr><th id="1779">1779</th><td></td></tr>
<tr><th id="1780">1780</th><td>  <i>// And then, extract the results...</i></td></tr>
<tr><th id="1781">1781</th><td>  <b>if</b> (<a class="local col1 ref" href="#401ValueOperand" title='ValueOperand' data-ref="401ValueOperand">ValueOperand</a> &amp;&amp; !<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>)</td></tr>
<tr><th id="1782">1782</th><td>    <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeEnd' data-ref="_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeEnd</a>(<a class="local col2 ref" href="#422AllocaValue_i8" title='AllocaValue_i8' data-ref="422AllocaValue_i8">AllocaValue_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1783">1783</th><td></td></tr>
<tr><th id="1784">1784</th><td>  <b>if</b> (<a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>) {</td></tr>
<tr><th id="1785">1785</th><td>    <i>// The final result from the CAS is {load of 'expected' alloca, bool result</i></td></tr>
<tr><th id="1786">1786</th><td><i>    // from call}</i></td></tr>
<tr><th id="1787">1787</th><td>    <a class="type" href="../../include/llvm/IR/Type.h.html#llvm::Type" title='llvm::Type' data-ref="llvm::Type">Type</a> *<dfn class="local col9 decl" id="439FinalResultTy" title='FinalResultTy' data-type='llvm::Type *' data-ref="439FinalResultTy">FinalResultTy</dfn> = <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>();</td></tr>
<tr><th id="1788">1788</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col0 decl" id="440V" title='V' data-type='llvm::Value *' data-ref="440V">V</dfn> = <a class="type" href="../../include/llvm/IR/Constants.h.html#llvm::UndefValue" title='llvm::UndefValue' data-ref="llvm::UndefValue">UndefValue</a>::<a class="ref" href="../../include/llvm/IR/Constants.h.html#_ZN4llvm10UndefValue3getEPNS_4TypeE" title='llvm::UndefValue::get' data-ref="_ZN4llvm10UndefValue3getEPNS_4TypeE">get</a>(<a class="local col9 ref" href="#439FinalResultTy" title='FinalResultTy' data-ref="439FinalResultTy">FinalResultTy</a>);</td></tr>
<tr><th id="1789">1789</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col1 decl" id="441ExpectedOut" title='ExpectedOut' data-type='llvm::Value *' data-ref="441ExpectedOut">ExpectedOut</dfn> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_4TypeEPNS_5ValueEjRKNS_5TwineE" title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_4TypeEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</a>(</td></tr>
<tr><th id="1790">1790</th><td>        <a class="local col2 ref" href="#402CASExpected" title='CASExpected' data-ref="402CASExpected">CASExpected</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col9 ref" href="#419AllocaCASExpected" title='AllocaCASExpected' data-ref="419AllocaCASExpected">AllocaCASExpected</a>, <a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1791">1791</th><td>    <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeEnd' data-ref="_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeEnd</a>(<a class="local col0 ref" href="#420AllocaCASExpected_i8" title='AllocaCASExpected_i8' data-ref="420AllocaCASExpected_i8">AllocaCASExpected_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1792">1792</th><td>    <a class="local col0 ref" href="#440V" title='V' data-ref="440V">V</a> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col0 ref" href="#440V" title='V' data-ref="440V">V</a>, <a class="local col1 ref" href="#441ExpectedOut" title='ExpectedOut' data-ref="441ExpectedOut">ExpectedOut</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>0</var>);</td></tr>
<tr><th id="1793">1793</th><td>    <a class="local col0 ref" href="#440V" title='V' data-ref="440V">V</a> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE" title='llvm::IRBuilder::CreateInsertValue' data-ref="_ZN4llvm9IRBuilder17CreateInsertValueEPNS_5ValueES2_NS_8ArrayRefIjEERKNS_5TwineE">CreateInsertValue</a>(<a class="local col0 ref" href="#440V" title='V' data-ref="440V">V</a>, <a class="local col8 ref" href="#438Result" title='Result' data-ref="438Result">Result</a>, <a class="ref fake" href="../../include/llvm/ADT/ArrayRef.h.html#_ZN4llvm8ArrayRefC1ERKT_" title='llvm::ArrayRef::ArrayRef&lt;T&gt;' data-ref="_ZN4llvm8ArrayRefC1ERKT_"></a><var>1</var>);</td></tr>
<tr><th id="1794">1794</th><td>    <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col0 ref" href="#440V" title='V' data-ref="440V">V</a>);</td></tr>
<tr><th id="1795">1795</th><td>  } <b>else</b> <b>if</b> (<a class="local col7 ref" href="#417HasResult" title='HasResult' data-ref="417HasResult">HasResult</a>) {</td></tr>
<tr><th id="1796">1796</th><td>    <a class="type" href="../../include/llvm/IR/Value.h.html#llvm::Value" title='llvm::Value' data-ref="llvm::Value">Value</a> *<dfn class="local col2 decl" id="442V" title='V' data-type='llvm::Value *' data-ref="442V">V</dfn>;</td></tr>
<tr><th id="1797">1797</th><td>    <b>if</b> (<a class="local col1 ref" href="#411UseSizedLibcall" title='UseSizedLibcall' data-ref="411UseSizedLibcall">UseSizedLibcall</a>)</td></tr>
<tr><th id="1798">1798</th><td>      <a class="local col2 ref" href="#442V" title='V' data-ref="442V">V</a> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder22CreateBitOrPointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE" title='llvm::IRBuilder::CreateBitOrPointerCast' data-ref="_ZN4llvm9IRBuilder22CreateBitOrPointerCastEPNS_5ValueEPNS_4TypeERKNS_5TwineE">CreateBitOrPointerCast</a>(<a class="local col8 ref" href="#438Result" title='Result' data-ref="438Result">Result</a>, <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>());</td></tr>
<tr><th id="1799">1799</th><td>    <b>else</b> {</td></tr>
<tr><th id="1800">1800</th><td>      <a class="local col2 ref" href="#442V" title='V' data-ref="442V">V</a> = <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_4TypeEPNS_5ValueEjRKNS_5TwineE" title='llvm::IRBuilder::CreateAlignedLoad' data-ref="_ZN4llvm9IRBuilder17CreateAlignedLoadEPNS_4TypeEPNS_5ValueEjRKNS_5TwineE">CreateAlignedLoad</a>(<a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZNK4llvm5Value7getTypeEv" title='llvm::Value::getType' data-ref="_ZNK4llvm5Value7getTypeEv">getType</a>(), <a class="local col3 ref" href="#423AllocaResult" title='AllocaResult' data-ref="423AllocaResult">AllocaResult</a>,</td></tr>
<tr><th id="1801">1801</th><td>                                    <a class="local col3 ref" href="#413AllocaAlignment" title='AllocaAlignment' data-ref="413AllocaAlignment">AllocaAlignment</a>);</td></tr>
<tr><th id="1802">1802</th><td>      <a class="local col9 ref" href="#409Builder" title='Builder' data-ref="409Builder">Builder</a>.<a class="ref" href="../../include/llvm/IR/IRBuilder.h.html#_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE" title='llvm::IRBuilderBase::CreateLifetimeEnd' data-ref="_ZN4llvm13IRBuilderBase17CreateLifetimeEndEPNS_5ValueEPNS_11ConstantIntE">CreateLifetimeEnd</a>(<a class="local col4 ref" href="#424AllocaResult_i8" title='AllocaResult_i8' data-ref="424AllocaResult_i8">AllocaResult_i8</a>, <a class="local col4 ref" href="#414SizeVal64" title='SizeVal64' data-ref="414SizeVal64">SizeVal64</a>);</td></tr>
<tr><th id="1803">1803</th><td>    }</td></tr>
<tr><th id="1804">1804</th><td>    <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Value.h.html#_ZN4llvm5Value18replaceAllUsesWithEPS0_" title='llvm::Value::replaceAllUsesWith' data-ref="_ZN4llvm5Value18replaceAllUsesWithEPS0_">replaceAllUsesWith</a>(<a class="local col2 ref" href="#442V" title='V' data-ref="442V">V</a>);</td></tr>
<tr><th id="1805">1805</th><td>  }</td></tr>
<tr><th id="1806">1806</th><td>  <a class="local col7 ref" href="#397I" title='I' data-ref="397I">I</a>-&gt;<a class="ref" href="../../include/llvm/IR/Instruction.h.html#_ZN4llvm11Instruction15eraseFromParentEv" title='llvm::Instruction::eraseFromParent' data-ref="_ZN4llvm11Instruction15eraseFromParentEv">eraseFromParent</a>();</td></tr>
<tr><th id="1807">1807</th><td>  <b>return</b> <b>true</b>;</td></tr>
<tr><th id="1808">1808</th><td>}</td></tr>
<tr><th id="1809">1809</th><td></td></tr>
</table><hr/><p id='footer'>
Generated on <em>2019-Jul-08</em> from project llvm revision <em>2cdaed95cde</em><br />Powered by <a href='https://woboq.com'><img alt='Woboq' src='https://code.woboq.org/woboq-16.png' width='41' height='16' /></a> <a href='https://code.woboq.org'>Code Browser</a> 2.1
<br/>Generator usage only permitted with license.</p>
</div></body></html>
